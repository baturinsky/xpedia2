(()=>{var cu=Object.create;var pi=Object.defineProperty;var du=Object.getOwnPropertyDescriptor;var hu=Object.getOwnPropertyNames;var pu=Object.getPrototypeOf,mu=Object.prototype.hasOwnProperty;var jt=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var On=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var _u=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of hu(e))!mu.call(t,i)&&i!==r&&pi(t,i,{get:()=>e[i],enumerable:!(n=du(e,i))||n.enumerable});return t};var In=(t,e,r)=>(r=t!=null?cu(pu(t)):{},_u(e||!t||!t.__esModule?pi(r,"default",{value:t,enumerable:!0}):r,t));var _i=On((ym,mi)=>{mi.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=t,r.c=e,r.p="",r(0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INDEX_MODES=void 0;var n=r(1),i=l(n),s=r(2);function l(o){return o&&o.__esModule?o:{default:o}}e.default=i.default,e.INDEX_MODES=s.INDEX_MODES},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(6),s=l(i);function l(u){return u&&u.__esModule?u:{default:u}}function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var a=function u(){var f=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.caseSensitive,h=c.indexMode,p=c.matchAnyToken,m=c.tokenizePattern;o(this,u),this.indexDocument=function(_,v){return f._search.indexDocument(_,v),f},this.search=function(_){return f._search.search(_)},this.terminate=function(){f._search.terminate()},typeof window<"u"&&window.Worker?this._search=new s.default({indexMode:h,matchAnyToken:p,tokenizePattern:m,caseSensitive:d}):this._search=new n.SearchUtility({indexMode:h,matchAnyToken:p,tokenizePattern:m,caseSensitive:d})};e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SearchUtility=e.INDEX_MODES=void 0;var n=r(3),i=l(n),s=r(4);function l(o){return o&&o.__esModule?o:{default:o}}e.default=i.default,e.INDEX_MODES=s.INDEX_MODES,e.SearchUtility=i.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function f(c,d){for(var h=0;h<d.length;h++){var p=d[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}return function(c,d,h){return d&&f(c.prototype,d),h&&f(c,h),c}}(),i=r(4),s=r(5),l=o(s);function o(f){return f&&f.__esModule?f:{default:f}}function a(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}var u=function(){function f(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=d.caseSensitive,p=h===void 0?!1:h,m=d.indexMode,_=m===void 0?i.INDEX_MODES.ALL_SUBSTRINGS:m,v=d.matchAnyToken,y=v===void 0?!1:v,A=d.tokenizePattern,I=A===void 0?/\s+/:A;a(this,f),this.indexDocument=function(E,L){c._uids[E]=!0;var M=c._tokenize(c._sanitize(L));return M.forEach(function(V){var Z=c._expandToken(V);Z.forEach(function(B){c._searchIndex.indexDocument(B,E)})}),c},this.search=function(E){if(E){var L=c._tokenize(c._sanitize(E));return c._searchIndex.search(L,c._matchAnyToken)}else return Object.keys(c._uids)},this.terminate=function(){},this._caseSensitive=p,this._indexMode=_,this._matchAnyToken=y,this._tokenizePattern=I,this._searchIndex=new l.default,this._uids={}}return n(f,[{key:"getCaseSensitive",value:function(){return this._caseSensitive}},{key:"getIndexMode",value:function(){return this._indexMode}},{key:"getMatchAnyToken",value:function(){return this._matchAnyToken}},{key:"getTokenizePattern",value:function(){return this._tokenizePattern}},{key:"setCaseSensitive",value:function(d){this._caseSensitive=d}},{key:"setIndexMode",value:function(d){if(Object.keys(this._uids).length>0)throw Error("indexMode cannot be changed once documents have been indexed");this._indexMode=d}},{key:"setMatchAnyToken",value:function(d){this._matchAnyToken=d}},{key:"setTokenizePattern",value:function(d){this._tokenizePattern=d}},{key:"_expandToken",value:function(d){switch(this._indexMode){case i.INDEX_MODES.EXACT_WORDS:return[d];case i.INDEX_MODES.PREFIXES:return this._expandPrefixTokens(d);case i.INDEX_MODES.ALL_SUBSTRINGS:default:return this._expandAllSubstringTokens(d)}}},{key:"_expandAllSubstringTokens",value:function(d){var h=[];try{for(var p=0,m=d.length;p<m;++p)for(var _="",v=p;v<m;++v)_+=d.charAt(v),h.push(_)}catch(y){console.error('Unable to parse token "'+d+'" '+y)}return h}},{key:"_expandPrefixTokens",value:function(d){var h=[];try{for(var p=0,m=d.length;p<m;++p)h.push(d.substr(0,p+1))}catch(_){console.error('Unable to parse token "'+d+'" '+_)}return h}},{key:"_sanitize",value:function(d){return this._caseSensitive?d.trim():d.trim().toLocaleLowerCase()}},{key:"_tokenize",value:function(d){return d.split(this._tokenizePattern).filter(function(h){return h})}}]),f}();e.default=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.INDEX_MODES={ALL_SUBSTRINGS:"ALL_SUBSTRINGS",EXACT_WORDS:"EXACT_WORDS",PREFIXES:"PREFIXES"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function s(l,o){for(var a=0;a<o.length;a++){var u=o[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}return function(l,o,a){return o&&s(l.prototype,o),a&&s(l,a),l}}();function n(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}var i=function(){function s(){n(this,s),this.tokenToUidMap={}}return r(s,[{key:"indexDocument",value:function(o,a){this.tokenToUidMap[o]||(this.tokenToUidMap[o]={}),this.tokenToUidMap[o][a]=a}},{key:"search",value:function(o,a){var u=this,f={},c={},d=!1;o.forEach(function(m){var _=u.tokenToUidMap[m]||{};if(d)if(a)for(var A in _)f[A]=_[A],c[A]=(c[A]||0)+1;else for(var y in f)_[y]||delete f[y];else{d=!0;for(var v in _)f[v]=_[v],c[v]=1}});var h=[];for(var p in f)h.push(f[p]);return a&&h.sort(function(m,_){return c[_]-c[m]}),h}}]),s}();e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(7),i=s(n);function s(l){return l&&l.__esModule?l:{default:l}}e.default=i.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function u(f,c){for(var d=0;d<c.length;d++){var h=c[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}return function(f,c,d){return c&&u(f.prototype,c),d&&u(f,d),f}}(),i=r(8),s=l(i);function l(u){return u&&u.__esModule?u:{default:u}}function o(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var a=function(){function u(){var f=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.caseSensitive,h=c.indexMode,p=c.matchAnyToken,m=c.tokenizePattern,_=c.WorkerClass;o(this,u),this.indexDocument=function(v,y){return f._worker.postMessage({method:"indexDocument",text:y,uid:v}),f},this.search=function(v){return new Promise(function(y,A){var I=s.default.v4(),E={callbackId:I,complete:!1,error:null,reject:A,resolve:y,results:null};f._worker.postMessage({method:"search",query:v,callbackId:I}),f._callbackQueue.push(E),f._callbackIdMap[I]=E})},this.terminate=function(){f._worker.terminate()},_||(_=r(10)),this._callbackQueue=[],this._callbackIdMap={},this._worker=new _,this._worker.onerror=function(v){if(v.data){var y=v.data,A=y.callbackId,I=y.error;f._updateQueue({callbackId:A,error:I})}else console.error(v)},this._worker.onmessage=function(v){var y=v.data,A=y.callbackId,I=y.results;f._updateQueue({callbackId:A,results:I})},d&&this._worker.postMessage({method:"setCaseSensitive",caseSensitive:d}),h&&this._worker.postMessage({method:"setIndexMode",indexMode:h}),p&&this._worker.postMessage({method:"setMatchAnyToken",matchAnyToken:p}),m&&this._worker.postMessage({method:"setTokenizePattern",tokenizePattern:m})}return n(u,[{key:"_updateQueue",value:function(c){var d=c.callbackId,h=c.error,p=c.results,m=this._callbackIdMap[d];for(m.complete=!0,m.error=h,m.results=p;this._callbackQueue.length;){var _=this._callbackQueue[0];if(!_.complete)break;this._callbackQueue.shift(),delete this._callbackIdMap[_.callbackId],_.error?_.reject(_.error):_.resolve(_.results)}}}]),u}();e.default=a},function(t,e,r){for(var n=r(9),i=[],s={},l=0;l<256;l++)i[l]=(l+256).toString(16).substr(1),s[i[l]]=l;function o(v,y,A){var I=y&&A||0,E=0;for(y=y||[],v.toLowerCase().replace(/[0-9a-f]{2}/g,function(L){E<16&&(y[I+E++]=s[L])});E<16;)y[I+E++]=0;return y}function a(v,y){var A=y||0,I=i;return I[v[A++]]+I[v[A++]]+I[v[A++]]+I[v[A++]]+"-"+I[v[A++]]+I[v[A++]]+"-"+I[v[A++]]+I[v[A++]]+"-"+I[v[A++]]+I[v[A++]]+"-"+I[v[A++]]+I[v[A++]]+I[v[A++]]+I[v[A++]]+I[v[A++]]+I[v[A++]]}var u=n(),f=[u[0]|1,u[1],u[2],u[3],u[4],u[5]],c=(u[6]<<8|u[7])&16383,d=0,h=0;function p(v,y,A){var I=y&&A||0,E=y||[];v=v||{};var L=v.clockseq!==void 0?v.clockseq:c,M=v.msecs!==void 0?v.msecs:new Date().getTime(),V=v.nsecs!==void 0?v.nsecs:h+1,Z=M-d+(V-h)/1e4;if(Z<0&&v.clockseq===void 0&&(L=L+1&16383),(Z<0||M>d)&&v.nsecs===void 0&&(V=0),V>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=M,h=V,c=L,M+=122192928e5;var B=((M&268435455)*1e4+V)%4294967296;E[I++]=B>>>24&255,E[I++]=B>>>16&255,E[I++]=B>>>8&255,E[I++]=B&255;var G=M/4294967296*1e4&268435455;E[I++]=G>>>8&255,E[I++]=G&255,E[I++]=G>>>24&15|16,E[I++]=G>>>16&255,E[I++]=L>>>8|128,E[I++]=L&255;for(var k=v.node||f,R=0;R<6;R++)E[I+R]=k[R];return y||a(E)}function m(v,y,A){var I=y&&A||0;typeof v=="string"&&(y=v=="binary"?new Array(16):null,v=null),v=v||{};var E=v.random||(v.rng||n)();if(E[6]=E[6]&15|64,E[8]=E[8]&63|128,y)for(var L=0;L<16;L++)y[I+L]=E[L];return y||a(E)}var _=m;_.v1=p,_.v4=m,_.parse=o,_.unparse=a,t.exports=_},function(t,e){(function(r){var n,i=r.crypto||r.msCrypto;if(i&&i.getRandomValues){var s=new Uint8Array(16);n=function(){return i.getRandomValues(s),s}}if(!n){var l=new Array(16);n=function(){for(var o=0,a;o<16;o++)(o&3)===0&&(a=Math.random()*4294967296),l[o]=a>>>((o&3)<<3)&255;return l}}t.exports=n}).call(e,function(){return this}())},function(t,e,r){t.exports=function(){return r(11)(`/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";

	var _util = __webpack_require__(1);

	/**
	 * Search entry point to web worker.
	 * Builds search index and performs searches on separate thread from the ui.
	 */

	var searchUtility = new _util.SearchUtility();

	self.addEventListener("message", function (event) {
	  var data = event.data;
	  var method = data.method;


	  switch (method) {
	    case "indexDocument":
	      var uid = data.uid,
	          text = data.text;


	      searchUtility.indexDocument(uid, text);
	      break;
	    case "search":
	      var callbackId = data.callbackId,
	          query = data.query;


	      var results = searchUtility.search(query);

	      self.postMessage({ callbackId: callbackId, results: results });
	      break;
	    case "setCaseSensitive":
	      var caseSensitive = data.caseSensitive;


	      searchUtility.setCaseSensitive(caseSensitive);
	      break;
	    case "setIndexMode":
	      var indexMode = data.indexMode;


	      searchUtility.setIndexMode(indexMode);
	      break;
	    case "setMatchAnyToken":
	      var matchAnyToken = data.matchAnyToken;


	      searchUtility.setMatchAnyToken(matchAnyToken);
	      break;
	    case "setTokenizePattern":
	      var tokenizePattern = data.tokenizePattern;


	      searchUtility.setTokenizePattern(tokenizePattern);
	      break;
	  }
	}, false);

/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";

	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	exports.SearchUtility = exports.INDEX_MODES = undefined;

	var _SearchUtility = __webpack_require__(2);

	var _SearchUtility2 = _interopRequireDefault(_SearchUtility);

	var _constants = __webpack_require__(3);

	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

	exports.default = _SearchUtility2.default;
	exports.INDEX_MODES = _constants.INDEX_MODES;
	exports.SearchUtility = _SearchUtility2.default;

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";

	Object.defineProperty(exports, "__esModule", {
	  value: true
	});

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	var _constants = __webpack_require__(3);

	var _SearchIndex = __webpack_require__(4);

	var _SearchIndex2 = _interopRequireDefault(_SearchIndex);

	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	/**
	 * Synchronous client-side full-text search utility.
	 * Forked from JS search (github.com/bvaughn/js-search).
	 */
	var SearchUtility = function () {

	  /**
	   * Constructor.
	   *
	   * @param indexMode See #setIndexMode
	   * @param tokenizePattern See #setTokenizePattern
	   * @param caseSensitive See #setCaseSensitive
	   * @param matchAnyToken See #setMatchAnyToken
	   */
	  function SearchUtility() {
	    var _this = this;

	    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
	        _ref$caseSensitive = _ref.caseSensitive,
	        caseSensitive = _ref$caseSensitive === undefined ? false : _ref$caseSensitive,
	        _ref$indexMode = _ref.indexMode,
	        indexMode = _ref$indexMode === undefined ? _constants.INDEX_MODES.ALL_SUBSTRINGS : _ref$indexMode,
	        _ref$matchAnyToken = _ref.matchAnyToken,
	        matchAnyToken = _ref$matchAnyToken === undefined ? false : _ref$matchAnyToken,
	        _ref$tokenizePattern = _ref.tokenizePattern,
	        tokenizePattern = _ref$tokenizePattern === undefined ? /\\s+/ : _ref$tokenizePattern;

	    _classCallCheck(this, SearchUtility);

	    this.indexDocument = function (uid, text) {
	      _this._uids[uid] = true;

	      var fieldTokens = _this._tokenize(_this._sanitize(text));

	      fieldTokens.forEach(function (fieldToken) {
	        var expandedTokens = _this._expandToken(fieldToken);

	        expandedTokens.forEach(function (expandedToken) {
	          _this._searchIndex.indexDocument(expandedToken, uid);
	        });
	      });

	      return _this;
	    };

	    this.search = function (query) {
	      if (!query) {
	        return Object.keys(_this._uids);
	      } else {
	        var tokens = _this._tokenize(_this._sanitize(query));

	        return _this._searchIndex.search(tokens, _this._matchAnyToken);
	      }
	    };

	    this.terminate = function () {};

	    this._caseSensitive = caseSensitive;
	    this._indexMode = indexMode;
	    this._matchAnyToken = matchAnyToken;
	    this._tokenizePattern = tokenizePattern;

	    this._searchIndex = new _SearchIndex2.default();
	    this._uids = {};
	  }

	  /**
	   * Returns a constant representing the current case-sensitive bit.
	   */


	  _createClass(SearchUtility, [{
	    key: "getCaseSensitive",
	    value: function getCaseSensitive() {
	      return this._caseSensitive;
	    }

	    /**
	     * Returns a constant representing the current index mode.
	     */

	  }, {
	    key: "getIndexMode",
	    value: function getIndexMode() {
	      return this._indexMode;
	    }

	    /**
	     * Returns a constant representing the current match-any-token bit.
	     */

	  }, {
	    key: "getMatchAnyToken",
	    value: function getMatchAnyToken() {
	      return this._matchAnyToken;
	    }

	    /**
	     * Returns a constant representing the current tokenize pattern.
	     */

	  }, {
	    key: "getTokenizePattern",
	    value: function getTokenizePattern() {
	      return this._tokenizePattern;
	    }

	    /**
	     * Adds or updates a uid in the search index and associates it with the specified text.
	     * Note that at this time uids can only be added or updated in the index, not removed.
	     *
	     * @param uid Uniquely identifies a searchable object
	     * @param text Text to associate with uid
	     */


	    /**
	     * Searches the current index for the specified query text.
	     * Only uids matching all of the words within the text will be accepted,
	     * unless matchAny is set to true.
	     * If an empty query string is provided all indexed uids will be returned.
	     *
	     * Document searches are case-insensitive by default (e.g. "search" will match "Search").
	     * Document searches use substring matching by default (e.g. "na" and "me" will both match "name").
	     *
	     * @param query Searchable query text
	     * @return Array of uids
	     */

	  }, {
	    key: "setCaseSensitive",


	    /**
	     * Sets a new case-sensitive bit
	     */
	    value: function setCaseSensitive(caseSensitive) {
	      this._caseSensitive = caseSensitive;
	    }

	    /**
	     * Sets a new index mode.
	     * See util/constants/INDEX_MODES
	     */

	  }, {
	    key: "setIndexMode",
	    value: function setIndexMode(indexMode) {
	      if (Object.keys(this._uids).length > 0) {
	        throw Error("indexMode cannot be changed once documents have been indexed");
	      }

	      this._indexMode = indexMode;
	    }

	    /**
	     * Sets a new match-any-token bit
	     */

	  }, {
	    key: "setMatchAnyToken",
	    value: function setMatchAnyToken(matchAnyToken) {
	      this._matchAnyToken = matchAnyToken;
	    }

	    /**
	     * Sets a new tokenize pattern (regular expression)
	     */

	  }, {
	    key: "setTokenizePattern",
	    value: function setTokenizePattern(pattern) {
	      this._tokenizePattern = pattern;
	    }

	    /**
	     *  Added to make class adhere to interface. Add cleanup code as needed.
	     */

	  }, {
	    key: "_expandToken",


	    /**
	     * Index strategy based on 'all-substrings-index-strategy.ts' in github.com/bvaughn/js-search/
	     *
	     * @private
	     */
	    value: function _expandToken(token) {
	      switch (this._indexMode) {
	        case _constants.INDEX_MODES.EXACT_WORDS:
	          return [token];
	        case _constants.INDEX_MODES.PREFIXES:
	          return this._expandPrefixTokens(token);
	        case _constants.INDEX_MODES.ALL_SUBSTRINGS:
	        default:
	          return this._expandAllSubstringTokens(token);
	      }
	    }
	  }, {
	    key: "_expandAllSubstringTokens",
	    value: function _expandAllSubstringTokens(token) {
	      var expandedTokens = [];

	      // String.prototype.charAt() may return surrogate halves instead of whole characters.
	      // When this happens in the context of a web-worker it can cause Chrome to crash.
	      // Catching the error is a simple solution for now; in the future I may try to better support non-BMP characters.
	      // Resources:
	      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charAt
	      // https://mathiasbynens.be/notes/javascript-unicode
	      try {
	        for (var i = 0, length = token.length; i < length; ++i) {
	          var substring = "";

	          for (var j = i; j < length; ++j) {
	            substring += token.charAt(j);
	            expandedTokens.push(substring);
	          }
	        }
	      } catch (error) {
	        console.error("Unable to parse token \\"" + token + "\\" " + error);
	      }

	      return expandedTokens;
	    }
	  }, {
	    key: "_expandPrefixTokens",
	    value: function _expandPrefixTokens(token) {
	      var expandedTokens = [];

	      // String.prototype.charAt() may return surrogate halves instead of whole characters.
	      // When this happens in the context of a web-worker it can cause Chrome to crash.
	      // Catching the error is a simple solution for now; in the future I may try to better support non-BMP characters.
	      // Resources:
	      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charAt
	      // https://mathiasbynens.be/notes/javascript-unicode
	      try {
	        for (var i = 0, length = token.length; i < length; ++i) {
	          expandedTokens.push(token.substr(0, i + 1));
	        }
	      } catch (error) {
	        console.error("Unable to parse token \\"" + token + "\\" " + error);
	      }

	      return expandedTokens;
	    }

	    /**
	     * @private
	     */

	  }, {
	    key: "_sanitize",
	    value: function _sanitize(string) {
	      return this._caseSensitive ? string.trim() : string.trim().toLocaleLowerCase();
	    }

	    /**
	     * @private
	     */

	  }, {
	    key: "_tokenize",
	    value: function _tokenize(text) {
	      return text.split(this._tokenizePattern).filter(function (text) {
	        return text;
	      }); // Remove empty tokens
	    }
	  }]);

	  return SearchUtility;
	}();

	exports.default = SearchUtility;

/***/ },
/* 3 */
/***/ function(module, exports) {

	"use strict";

	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	var INDEX_MODES = exports.INDEX_MODES = {
	  // Indexes for all substring searches (e.g. the term "cat" is indexed as "c", "ca", "cat", "a", "at", and "t").
	  // Based on 'all-substrings-index-strategy' from js-search;
	  // github.com/bvaughn/js-search/blob/master/source/index-strategy/all-substrings-index-strategy.ts
	  ALL_SUBSTRINGS: "ALL_SUBSTRINGS",

	  // Indexes for exact word matches only.
	  // Based on 'exact-word-index-strategy' from js-search;
	  // github.com/bvaughn/js-search/blob/master/source/index-strategy/exact-word-index-strategy.ts
	  EXACT_WORDS: "EXACT_WORDS",

	  // Indexes for prefix searches (e.g. the term "cat" is indexed as "c", "ca", and "cat" allowing prefix search lookups).
	  // Based on 'prefix-index-strategy' from js-search;
	  // github.com/bvaughn/js-search/blob/master/source/index-strategy/prefix-index-strategy.ts
	  PREFIXES: "PREFIXES"
	};

/***/ },
/* 4 */
/***/ function(module, exports) {

	"use strict";

	Object.defineProperty(exports, "__esModule", {
	  value: true
	});

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	/**
	 * Maps search tokens to uids using a trie structure.
	 */
	var SearchIndex = function () {
	  function SearchIndex() {
	    _classCallCheck(this, SearchIndex);

	    this.tokenToUidMap = {};
	  }

	  /**
	   * Maps the specified token to a uid.
	   *
	   * @param token Searchable token (e.g. "road")
	   * @param uid Identifies a document within the searchable corpus
	   */


	  _createClass(SearchIndex, [{
	    key: "indexDocument",
	    value: function indexDocument(token, uid) {
	      if (!this.tokenToUidMap[token]) {
	        this.tokenToUidMap[token] = {};
	      }

	      this.tokenToUidMap[token][uid] = uid;
	    }

	    /**
	     * Finds uids that have been mapped to the set of tokens specified.
	     * Only uids that have been mapped to all tokens will be returned.
	     *
	     * @param tokens Array of searchable tokens (e.g. ["long", "road"])
	     * @param matchAnyToken Whether to match any token. Default is false.
	     * @return Array of uids that have been associated with the set of search tokens
	     */

	  }, {
	    key: "search",
	    value: function search(tokens, matchAnyToken) {
	      var _this = this;

	      var uidMap = {};
	      var uidMatches = {};
	      var initialized = false;

	      tokens.forEach(function (token) {
	        var currentUidMap = _this.tokenToUidMap[token] || {};

	        if (!initialized) {
	          initialized = true;

	          for (var _uid in currentUidMap) {
	            uidMap[_uid] = currentUidMap[_uid];
	            uidMatches[_uid] = 1;
	          }
	        } else {
	          // Delete existing matches if using and AND query (the default)
	          // Otherwise add new results to the matches
	          if (!matchAnyToken) {
	            for (var _uid2 in uidMap) {
	              if (!currentUidMap[_uid2]) {
	                delete uidMap[_uid2];
	              }
	            }
	          } else {
	            for (var _uid3 in currentUidMap) {
	              uidMap[_uid3] = currentUidMap[_uid3];
	              uidMatches[_uid3] = (uidMatches[_uid3] || 0) + 1;
	            }
	          }
	        }
	      });

	      var uids = [];
	      for (var _uid4 in uidMap) {
	        uids.push(uidMap[_uid4]);
	      }

	      // Sort according to most matches, if match any token is set.
	      if (matchAnyToken) {
	        uids.sort(function (a, b) {
	          return uidMatches[b] - uidMatches[a];
	        });
	      }

	      return uids;
	    }
	  }]);

	  return SearchIndex;
	}();

	exports.default = SearchIndex;

/***/ }
/******/ ]);`,r.p+"5cafaba60d6eb1f43c8f.worker.js")}},function(t,e){var r=window.URL||window.webkitURL;t.exports=function(n,i){try{try{var s;try{var l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;s=new l,s.append(n),s=s.getBlob()}catch{s=new Blob([n])}return new Worker(r.createObjectURL(s))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(n))}}catch{if(!i)throw Error("Inline worker is not supported");return new Worker(i)}}}])});var us=On((as,br)=>{(function(t){typeof as=="object"&&typeof br<"u"?br.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=t()})(function(){return function t(e,r,n){function i(o,a){if(!r[o]){if(!e[o]){var u=typeof jt=="function"&&jt;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var c=r[o]={exports:{}};e[o][0].call(c.exports,function(d){var h=e[o][1][d];return i(h||d)},c,c.exports,t,e,r,n)}return r[o].exports}for(var s=typeof jt=="function"&&jt,l=0;l<n.length;l++)i(n[l]);return i}({1:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(l){for(var o,a,u,f,c,d,h,p=[],m=0,_=l.length,v=_,y=n.getTypeOf(l)!=="string";m<l.length;)v=_-m,u=y?(o=l[m++],a=m<_?l[m++]:0,m<_?l[m++]:0):(o=l.charCodeAt(m++),a=m<_?l.charCodeAt(m++):0,m<_?l.charCodeAt(m++):0),f=o>>2,c=(3&o)<<4|a>>4,d=1<v?(15&a)<<2|u>>6:64,h=2<v?63&u:64,p.push(s.charAt(f)+s.charAt(c)+s.charAt(d)+s.charAt(h));return p.join("")},r.decode=function(l){var o,a,u,f,c,d,h=0,p=0,m="data:";if(l.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var _,v=3*(l=l.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&v--,l.charAt(l.length-2)===s.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=i.uint8array?new Uint8Array(0|v):new Array(0|v);h<l.length;)o=s.indexOf(l.charAt(h++))<<2|(f=s.indexOf(l.charAt(h++)))>>4,a=(15&f)<<4|(c=s.indexOf(l.charAt(h++)))>>2,u=(3&c)<<6|(d=s.indexOf(l.charAt(h++))),_[p++]=o,c!==64&&(_[p++]=a),d!==64&&(_[p++]=u);return _}},{"./support":30,"./utils":32}],2:[function(t,e,r){"use strict";var n=t("./external"),i=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function o(a,u,f,c,d){this.compressedSize=a,this.uncompressedSize=u,this.crc32=f,this.compression=c,this.compressedContent=d}o.prototype={getContentWorker:function(){var a=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),u=this;return a.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),a},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(a,u,f){return a.pipe(new s).pipe(new l("uncompressedSize")).pipe(u.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",u)},e.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){"use strict";var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(i){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,r){"use strict";var n=t("./utils"),i=function(){for(var s,l=[],o=0;o<256;o++){s=o;for(var a=0;a<8;a++)s=1&s?3988292384^s>>>1:s>>>1;l[o]=s}return l}();e.exports=function(s,l){return s!==void 0&&s.length?n.getTypeOf(s)!=="string"?function(o,a,u,f){var c=i,d=f+u;o^=-1;for(var h=f;h<d;h++)o=o>>>8^c[255&(o^a[h])];return-1^o}(0|l,s,s.length,0):function(o,a,u,f){var c=i,d=f+u;o^=-1;for(var h=f;h<d;h++)o=o>>>8^c[255&(o^a.charCodeAt(h))];return-1^o}(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){"use strict";var n=null;n=typeof Promise<"u"?Promise:t("lie"),e.exports={Promise:n}},{lie:37}],7:[function(t,e,r){"use strict";var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=t("pako"),s=t("./utils"),l=t("./stream/GenericWorker"),o=n?"uint8array":"array";function a(u,f){l.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=f,this.meta={}}r.magic="\b\0",s.inherits(a,l),a.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(o,u.data),!1)},a.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},a.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},a.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(f){u.push({data:f,meta:u.meta})}},r.compressWorker=function(u){return new a("Deflate",u)},r.uncompressWorker=function(){return new a("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,r){"use strict";function n(c,d){var h,p="";for(h=0;h<d;h++)p+=String.fromCharCode(255&c),c>>>=8;return p}function i(c,d,h,p,m,_){var v,y,A=c.file,I=c.compression,E=_!==o.utf8encode,L=s.transformTo("string",_(A.name)),M=s.transformTo("string",o.utf8encode(A.name)),V=A.comment,Z=s.transformTo("string",_(V)),B=s.transformTo("string",o.utf8encode(V)),G=M.length!==A.name.length,k=B.length!==V.length,R="",ue="",P="",he=A.dir,q=A.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};d&&!h||(Q.crc32=c.crc32,Q.compressedSize=c.compressedSize,Q.uncompressedSize=c.uncompressedSize);var N=0;d&&(N|=8),E||!G&&!k||(N|=2048);var U=0,ee=0;he&&(U|=16),m==="UNIX"?(ee=798,U|=function(de,Me){var Pe=de;return de||(Pe=Me?16893:33204),(65535&Pe)<<16}(A.unixPermissions,he)):(ee=20,U|=function(de){return 63&(de||0)}(A.dosPermissions)),v=q.getUTCHours(),v<<=6,v|=q.getUTCMinutes(),v<<=5,v|=q.getUTCSeconds()/2,y=q.getUTCFullYear()-1980,y<<=4,y|=q.getUTCMonth()+1,y<<=5,y|=q.getUTCDate(),G&&(ue=n(1,1)+n(a(L),4)+M,R+="up"+n(ue.length,2)+ue),k&&(P=n(1,1)+n(a(Z),4)+B,R+="uc"+n(P.length,2)+P);var fe="";return fe+=`
\0`,fe+=n(N,2),fe+=I.magic,fe+=n(v,2),fe+=n(y,2),fe+=n(Q.crc32,4),fe+=n(Q.compressedSize,4),fe+=n(Q.uncompressedSize,4),fe+=n(L.length,2),fe+=n(R.length,2),{fileRecord:u.LOCAL_FILE_HEADER+fe+L+R,dirRecord:u.CENTRAL_FILE_HEADER+n(ee,2)+fe+n(Z.length,2)+"\0\0\0\0"+n(U,4)+n(p,4)+L+R+Z}}var s=t("../utils"),l=t("../stream/GenericWorker"),o=t("../utf8"),a=t("../crc32"),u=t("../signature");function f(c,d,h,p){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=d,this.zipPlatform=h,this.encodeFileName=p,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(f,l),f.prototype.push=function(c){var d=c.meta.percent||0,h=this.entriesCount,p=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,l.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:h?(d+100*(h-p-1))/h:100}}))},f.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var d=this.streamFiles&&!c.file.dir;if(d){var h=i(c,d,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(c){this.accumulate=!1;var d=this.streamFiles&&!c.file.dir,h=i(c,d,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),d)this.push({data:function(p){return u.DATA_DESCRIPTOR+n(p.crc32,4)+n(p.compressedSize,4)+n(p.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var c=this.bytesWritten,d=0;d<this.dirRecords.length;d++)this.push({data:this.dirRecords[d],meta:{percent:100}});var h=this.bytesWritten-c,p=function(m,_,v,y,A){var I=s.transformTo("string",A(y));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(m,2)+n(m,2)+n(_,4)+n(v,4)+n(I.length,2)+I}(this.dirRecords.length,h,c,this.zipComment,this.encodeFileName);this.push({data:p,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(c){this._sources.push(c);var d=this;return c.on("data",function(h){d.processChunk(h)}),c.on("end",function(){d.closedSource(d.previous.streamInfo),d._sources.length?d.prepareNextSource():d.end()}),c.on("error",function(h){d.error(h)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(c){var d=this._sources;if(!l.prototype.error.call(this,c))return!1;for(var h=0;h<d.length;h++)try{d[h].error(c)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var c=this._sources,d=0;d<c.length;d++)c[d].lock()},e.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){"use strict";var n=t("../compressions"),i=t("./ZipFileWorker");r.generateWorker=function(s,l,o){var a=new i(l.streamFiles,o,l.platform,l.encodeFileName),u=0;try{s.forEach(function(f,c){u++;var d=function(_,v){var y=_||v,A=n[y];if(!A)throw new Error(y+" is not a valid compression method !");return A}(c.options.compression,l.compression),h=c.options.compressionOptions||l.compressionOptions||{},p=c.dir,m=c.date;c._compressWorker(d,h).withStreamInfo("file",{name:f,dir:p,date:m,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(a)}),a.entriesCount=u}catch(f){a.error(f)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new n;for(var s in this)typeof this[s]!="function"&&(i[s]=this[s]);return i}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.0",n.loadAsync=function(i,s){return new n().loadAsync(i,s)},n.external=t("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./external"),s=t("./utf8"),l=t("./zipEntries"),o=t("./stream/Crc32Probe"),a=t("./nodejsUtils");function u(f){return new i.Promise(function(c,d){var h=f.decompressed.getContentWorker().pipe(new o);h.on("error",function(p){d(p)}).on("end",function(){h.streamInfo.crc32!==f.decompressed.crc32?d(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}e.exports=function(f,c){var d=this;return c=n.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),a.isNode&&a.isStream(f)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",f,!0,c.optimizedBinaryString,c.base64).then(function(h){var p=new l(c);return p.load(h),p}).then(function(h){var p=[i.Promise.resolve(h)],m=h.files;if(c.checkCRC32)for(var _=0;_<m.length;_++)p.push(u(m[_]));return i.Promise.all(p)}).then(function(h){for(var p=h.shift(),m=p.files,_=0;_<m.length;_++){var v=m[_],y=v.fileNameStr,A=n.resolve(v.fileNameStr);d.file(A,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:c.createFolders}),v.dir||(d.file(A).unsafeOriginalName=y)}return p.zipComment.length&&(d.comment=p.zipComment),d})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../stream/GenericWorker");function s(l,o){i.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(o)}n.inherits(s,i),s.prototype._bindStream=function(l){var o=this;(this._stream=l).pause(),l.on("data",function(a){o.push({data:a,meta:{percent:0}})}).on("error",function(a){o.isPaused?this.generatedError=a:o.error(a)}).on("end",function(){o.isPaused?o._upstreamEnded=!0:o.end()})},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,r){"use strict";var n=t("readable-stream").Readable;function i(s,l,o){n.call(this,l),this._helper=s;var a=this;s.on("data",function(u,f){a.push(u)||a._helper.pause(),o&&o(f)}).on("error",function(u){a.emit("error",u)}).on("end",function(){a.push(null)})}t("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,e,r){"use strict";e.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,i);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,i)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var i=new Buffer(n);return i.fill(0),i},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,e,r){"use strict";function n(A,I,E){var L,M=s.getTypeOf(I),V=s.extend(E||{},a);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(A=m(A)),V.createFolders&&(L=p(A))&&_.call(this,L,!0);var Z=M==="string"&&V.binary===!1&&V.base64===!1;E&&E.binary!==void 0||(V.binary=!Z),(I instanceof u&&I.uncompressedSize===0||V.dir||!I||I.length===0)&&(V.base64=!1,V.binary=!0,I="",V.compression="STORE",M="string");var B=null;B=I instanceof u||I instanceof l?I:d.isNode&&d.isStream(I)?new h(A,I):s.prepareContent(A,I,V.binary,V.optimizedBinaryString,V.base64);var G=new f(A,B,V);this.files[A]=G}var i=t("./utf8"),s=t("./utils"),l=t("./stream/GenericWorker"),o=t("./stream/StreamHelper"),a=t("./defaults"),u=t("./compressedObject"),f=t("./zipObject"),c=t("./generate"),d=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),p=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var I=A.lastIndexOf("/");return 0<I?A.substring(0,I):""},m=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},_=function(A,I){return I=I!==void 0?I:a.createFolders,A=m(A),this.files[A]||n.call(this,A,null,{dir:!0,createFolders:I}),this.files[A]};function v(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var I,E,L;for(I in this.files)L=this.files[I],(E=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&A(E,L)},filter:function(A){var I=[];return this.forEach(function(E,L){A(E,L)&&I.push(L)}),I},file:function(A,I,E){if(arguments.length!==1)return A=this.root+A,n.call(this,A,I,E),this;if(v(A)){var L=A;return this.filter(function(V,Z){return!Z.dir&&L.test(V)})}var M=this.files[this.root+A];return M&&!M.dir?M:null},folder:function(A){if(!A)return this;if(v(A))return this.filter(function(M,V){return V.dir&&A.test(M)});var I=this.root+A,E=_.call(this,I),L=this.clone();return L.root=E.name,L},remove:function(A){A=this.root+A;var I=this.files[A];if(I||(A.slice(-1)!=="/"&&(A+="/"),I=this.files[A]),I&&!I.dir)delete this.files[A];else for(var E=this.filter(function(M,V){return V.name.slice(0,A.length)===A}),L=0;L<E.length;L++)delete this.files[E[L].name];return this},generate:function(A){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var I,E={};try{if((E=s.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");s.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var L=E.comment||this.comment||"";I=c.generateWorker(this,E,L)}catch(M){(I=new l("error")).error(M)}return new o(I,E.type||"string",E.mimeType)},generateAsync:function(A,I){return this.generateInternalStream(A).accumulate(I)},generateNodeStream:function(A,I){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(I)}};e.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,r){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,r){"use strict";var n=t("./DataReader");function i(s){n.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}t("../utils").inherits(i,n),i.prototype.byteAt=function(s){return this.data[this.zero+s]},i.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),o=s.charCodeAt(1),a=s.charCodeAt(2),u=s.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===o&&this.data[f+2]===a&&this.data[f+3]===u)return f-this.zero;return-1},i.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),o=s.charCodeAt(1),a=s.charCodeAt(2),u=s.charCodeAt(3),f=this.readData(4);return l===f[0]&&o===f[1]&&a===f[2]&&u===f[3]},i.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,e,r){"use strict";var n=t("../utils");function i(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(s){},readInt:function(s){var l,o=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)o=(o<<8)+this.byteAt(l);return this.index+=s,o},readString:function(s){return n.transformTo("string",this.readData(s))},readData:function(s){},lastIndexOfSignature:function(s){},readAndCheckSignature:function(s){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},e.exports=i},{"../utils":32}],19:[function(t,e,r){"use strict";var n=t("./Uint8ArrayReader");function i(s){n.call(this,s)}t("../utils").inherits(i,n),i.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,r){"use strict";var n=t("./DataReader");function i(s){n.call(this,s)}t("../utils").inherits(i,n),i.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},i.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},i.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},i.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,e,r){"use strict";var n=t("./ArrayReader");function i(s){n.call(this,s)}t("../utils").inherits(i,n),i.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../support"),s=t("./ArrayReader"),l=t("./StringReader"),o=t("./NodeBufferReader"),a=t("./Uint8ArrayReader");e.exports=function(u){var f=n.getTypeOf(u);return n.checkSupport(f),f!=="string"||i.uint8array?f==="nodebuffer"?new o(u):i.uint8array?new a(n.transformTo("uint8array",u)):new s(n.transformTo("array",u)):new l(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,e,r){"use strict";var n=t("./GenericWorker"),i=t("../utils");function s(l){n.call(this,"ConvertWorker to "+l),this.destType=l}i.inherits(s,n),s.prototype.processChunk=function(l){this.push({data:i.transformTo(this.destType,l.data),meta:l.meta})},e.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,r){"use strict";var n=t("./GenericWorker"),i=t("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,n),s.prototype.processChunk=function(l){this.streamInfo.crc32=i(l.data,this.streamInfo.crc32||0),this.push(l)},e.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./GenericWorker");function s(l){i.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}n.inherits(s,i),s.prototype.processChunk=function(l){if(l){var o=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=o+l.data.length}i.prototype.processChunk.call(this,l)},e.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./GenericWorker");function s(l){i.call(this,"DataWorker");var o=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(a){o.dataIsReady=!0,o.data=a,o.max=a&&a.length||0,o.type=n.getTypeOf(a),o.isPaused||o._tickAndRepeat()},function(a){o.error(a)})}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,o=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,o);break;case"uint8array":l=this.data.subarray(this.index,o);break;case"array":case"nodebuffer":l=this.data.slice(this.index,o)}return this.index=o,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,r){"use strict";function n(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,s){return this._listeners[i].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,s){if(this._listeners[i])for(var l=0;l<this._listeners[i].length;l++)this._listeners[i][l].call(this,s)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var s=this;return i.on("data",function(l){s.processChunk(l)}),i.on("end",function(){s.end()}),i.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,s){return this.extraStreamInfo[i]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},e.exports=n},{}],29:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./ConvertWorker"),s=t("./GenericWorker"),l=t("../base64"),o=t("../support"),a=t("../external"),u=null;if(o.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(d,h){return new a.Promise(function(p,m){var _=[],v=d._internalType,y=d._outputType,A=d._mimeType;d.on("data",function(I,E){_.push(I),h&&h(E)}).on("error",function(I){_=[],m(I)}).on("end",function(){try{var I=function(E,L,M){switch(E){case"blob":return n.newBlob(n.transformTo("arraybuffer",L),M);case"base64":return l.encode(L);default:return n.transformTo(E,L)}}(y,function(E,L){var M,V=0,Z=null,B=0;for(M=0;M<L.length;M++)B+=L[M].length;switch(E){case"string":return L.join("");case"array":return Array.prototype.concat.apply([],L);case"uint8array":for(Z=new Uint8Array(B),M=0;M<L.length;M++)Z.set(L[M],V),V+=L[M].length;return Z;case"nodebuffer":return Buffer.concat(L);default:throw new Error("concat : unsupported type '"+E+"'")}}(v,_),A);p(I)}catch(E){m(E)}_=[]}).resume()})}function c(d,h,p){var m=h;switch(h){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=h,this._mimeType=p,n.checkSupport(m),this._worker=d.pipe(new i(m)),d.lock()}catch(_){this._worker=new s("error"),this._worker.error(_)}}c.prototype={accumulate:function(d){return f(this,d)},on:function(d,h){var p=this;return d==="data"?this._worker.on(d,function(m){h.call(p,m.data,m.meta)}):this._worker.on(d,function(){n.delay(h,arguments,p)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(d){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},d)}},e.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=i.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,r){"use strict";for(var n=t("./utils"),i=t("./support"),s=t("./nodejsUtils"),l=t("./stream/GenericWorker"),o=new Array(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;o[254]=o[254]=1;function u(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}r.utf8encode=function(c){return i.nodebuffer?s.newBufferFrom(c,"utf-8"):function(d){var h,p,m,_,v,y=d.length,A=0;for(_=0;_<y;_++)(64512&(p=d.charCodeAt(_)))==55296&&_+1<y&&(64512&(m=d.charCodeAt(_+1)))==56320&&(p=65536+(p-55296<<10)+(m-56320),_++),A+=p<128?1:p<2048?2:p<65536?3:4;for(h=i.uint8array?new Uint8Array(A):new Array(A),_=v=0;v<A;_++)(64512&(p=d.charCodeAt(_)))==55296&&_+1<y&&(64512&(m=d.charCodeAt(_+1)))==56320&&(p=65536+(p-55296<<10)+(m-56320),_++),p<128?h[v++]=p:(p<2048?h[v++]=192|p>>>6:(p<65536?h[v++]=224|p>>>12:(h[v++]=240|p>>>18,h[v++]=128|p>>>12&63),h[v++]=128|p>>>6&63),h[v++]=128|63&p);return h}(c)},r.utf8decode=function(c){return i.nodebuffer?n.transformTo("nodebuffer",c).toString("utf-8"):function(d){var h,p,m,_,v=d.length,y=new Array(2*v);for(h=p=0;h<v;)if((m=d[h++])<128)y[p++]=m;else if(4<(_=o[m]))y[p++]=65533,h+=_-1;else{for(m&=_===2?31:_===3?15:7;1<_&&h<v;)m=m<<6|63&d[h++],_--;1<_?y[p++]=65533:m<65536?y[p++]=m:(m-=65536,y[p++]=55296|m>>10&1023,y[p++]=56320|1023&m)}return y.length!==p&&(y.subarray?y=y.subarray(0,p):y.length=p),n.applyFromCharCode(y)}(c=n.transformTo(i.uint8array?"uint8array":"array",c))},n.inherits(u,l),u.prototype.processChunk=function(c){var d=n.transformTo(i.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var h=d;(d=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),d.set(h,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var p=function(_,v){var y;for((v=v||_.length)>_.length&&(v=_.length),y=v-1;0<=y&&(192&_[y])==128;)y--;return y<0||y===0?v:y+o[_[y]]>v?y:v}(d),m=d;p!==d.length&&(i.uint8array?(m=d.subarray(0,p),this.leftOver=d.subarray(p,d.length)):(m=d.slice(0,p),this.leftOver=d.slice(p,d.length))),this.push({data:r.utf8decode(m),meta:c.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=u,n.inherits(f,l),f.prototype.processChunk=function(c){this.push({data:r.utf8encode(c.data),meta:c.meta})},r.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){"use strict";var n=t("./support"),i=t("./base64"),s=t("./nodejsUtils"),l=t("./external");function o(h){return h}function a(h,p){for(var m=0;m<h.length;++m)p[m]=255&h.charCodeAt(m);return p}t("setimmediate"),r.newBlob=function(h,p){r.checkSupport("blob");try{return new Blob([h],{type:p})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(h),m.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(h,p,m){var _=[],v=0,y=h.length;if(y<=m)return String.fromCharCode.apply(null,h);for(;v<y;)p==="array"||p==="nodebuffer"?_.push(String.fromCharCode.apply(null,h.slice(v,Math.min(v+m,y)))):_.push(String.fromCharCode.apply(null,h.subarray(v,Math.min(v+m,y)))),v+=m;return _.join("")},stringifyByChar:function(h){for(var p="",m=0;m<h.length;m++)p+=String.fromCharCode(h[m]);return p},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function f(h){var p=65536,m=r.getTypeOf(h),_=!0;if(m==="uint8array"?_=u.applyCanBeUsed.uint8array:m==="nodebuffer"&&(_=u.applyCanBeUsed.nodebuffer),_)for(;1<p;)try{return u.stringifyByChunk(h,m,p)}catch{p=Math.floor(p/2)}return u.stringifyByChar(h)}function c(h,p){for(var m=0;m<h.length;m++)p[m]=h[m];return p}r.applyFromCharCode=f;var d={};d.string={string:o,array:function(h){return a(h,new Array(h.length))},arraybuffer:function(h){return d.string.uint8array(h).buffer},uint8array:function(h){return a(h,new Uint8Array(h.length))},nodebuffer:function(h){return a(h,s.allocBuffer(h.length))}},d.array={string:f,array:o,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return s.newBufferFrom(h)}},d.arraybuffer={string:function(h){return f(new Uint8Array(h))},array:function(h){return c(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:o,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return s.newBufferFrom(new Uint8Array(h))}},d.uint8array={string:f,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:o,nodebuffer:function(h){return s.newBufferFrom(h)}},d.nodebuffer={string:f,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return d.nodebuffer.uint8array(h).buffer},uint8array:function(h){return c(h,new Uint8Array(h.length))},nodebuffer:o},r.transformTo=function(h,p){if(p=p||"",!h)return p;r.checkSupport(h);var m=r.getTypeOf(p);return d[m][h](p)},r.resolve=function(h){for(var p=h.split("/"),m=[],_=0;_<p.length;_++){var v=p[_];v==="."||v===""&&_!==0&&_!==p.length-1||(v===".."?m.pop():m.push(v))}return m.join("/")},r.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":n.nodebuffer&&s.isBuffer(h)?"nodebuffer":n.uint8array&&h instanceof Uint8Array?"uint8array":n.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(h){if(!n[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(h){var p,m,_="";for(m=0;m<(h||"").length;m++)_+="\\x"+((p=h.charCodeAt(m))<16?"0":"")+p.toString(16).toUpperCase();return _},r.delay=function(h,p,m){setImmediate(function(){h.apply(m||null,p||[])})},r.inherits=function(h,p){function m(){}m.prototype=p.prototype,h.prototype=new m},r.extend=function(){var h,p,m={};for(h=0;h<arguments.length;h++)for(p in arguments[h])arguments[h].hasOwnProperty(p)&&m[p]===void 0&&(m[p]=arguments[h][p]);return m},r.prepareContent=function(h,p,m,_,v){return l.Promise.resolve(p).then(function(y){return n.blob&&(y instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(y))!==-1)&&typeof FileReader<"u"?new l.Promise(function(A,I){var E=new FileReader;E.onload=function(L){A(L.target.result)},E.onerror=function(L){I(L.target.error)},E.readAsArrayBuffer(y)}):y}).then(function(y){var A=r.getTypeOf(y);return A?(A==="arraybuffer"?y=r.transformTo("uint8array",y):A==="string"&&(v?y=i.decode(y):m&&_!==!0&&(y=function(I){return a(I,n.uint8array?new Uint8Array(I.length):new Array(I.length))}(y))),y):l.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),i=t("./utils"),s=t("./signature"),l=t("./zipEntry"),o=(t("./utf8"),t("./support"));function a(u){this.files=[],this.loadOptions=u}a.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(f)+", expected "+i.pretty(u)+")")}},isSignature:function(u,f){var c=this.reader.index;this.reader.setIndex(u);var d=this.reader.readString(4)===f;return this.reader.setIndex(c),d},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),f=o.uint8array?"uint8array":"array",c=i.transformTo(f,u);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,f,c,d=this.zip64EndOfCentralSize-44;0<d;)u=this.reader.readInt(2),f=this.reader.readInt(4),c=this.reader.readData(f),this.zip64ExtensibleData[u]={id:u,length:f,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,f;for(u=0;u<this.files.length;u++)f=this.files[u],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(u=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var f=u;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var d=f-c;if(0<d)this.isSignature(f,s.CENTRAL_FILE_HEADER)||(this.reader.zero=d);else if(d<0)throw new Error("Corrupted zip: missing "+Math.abs(d)+" bytes.")},prepareReader:function(u){this.reader=n(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=a},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),i=t("./utils"),s=t("./compressedObject"),l=t("./crc32"),o=t("./utf8"),a=t("./compressions"),u=t("./support");function f(c,d){this.options=c,this.loadOptions=d}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var d,h;if(c.skip(22),this.fileNameLength=c.readInt(2),h=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((d=function(p){for(var m in a)if(a.hasOwnProperty(m)&&a[m].magic===p)return a[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,d,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var d=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(d),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(c){if(this.extraFields[1]){var d=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(c){var d,h,p,m=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<m;)d=c.readInt(2),h=c.readInt(2),p=c.readData(h),this.extraFields[d]={id:d,length:h,value:p};c.setIndex(m)},handleUTF8:function(){var c=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(d!==null)this.fileNameStr=d;else{var h=i.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var p=this.findExtraFieldUnicodeComment();if(p!==null)this.fileCommentStr=p;else{var m=i.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var d=n(c.value);return d.readInt(1)!==1||l(this.fileName)!==d.readInt(4)?null:o.utf8decode(d.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var d=n(c.value);return d.readInt(1)!==1||l(this.fileComment)!==d.readInt(4)?null:o.utf8decode(d.readData(c.length-5))}return null}},e.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,r){"use strict";function n(d,h,p){this.name=d,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=h,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}}var i=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),l=t("./utf8"),o=t("./compressedObject"),a=t("./stream/GenericWorker");n.prototype={internalStream:function(d){var h=null,p="string";try{if(!d)throw new Error("No output type specified.");var m=(p=d.toLowerCase())==="string"||p==="text";p!=="binarystring"&&p!=="text"||(p="string"),h=this._decompressWorker();var _=!this._dataBinary;_&&!m&&(h=h.pipe(new l.Utf8EncodeWorker)),!_&&m&&(h=h.pipe(new l.Utf8DecodeWorker))}catch(v){(h=new a("error")).error(v)}return new i(h,p,"")},async:function(d,h){return this.internalStream(d).accumulate(h)},nodeStream:function(d,h){return this.internalStream(d||"nodebuffer").toNodejsStream(h)},_compressWorker:function(d,h){if(this._data instanceof o&&this._data.compression.magic===d.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new l.Utf8EncodeWorker)),o.createWorkerFrom(p,d,h)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof a?this._data:new s(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<u.length;c++)n.prototype[u[c]]=f;e.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,r){(function(n){"use strict";var i,s,l=n.MutationObserver||n.WebKitMutationObserver;if(l){var o=0,a=new l(d),u=n.document.createTextNode("");a.observe(u,{characterData:!0}),i=function(){u.data=o=++o%2}}else if(n.setImmediate||n.MessageChannel===void 0)i="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var h=n.document.createElement("script");h.onreadystatechange=function(){d(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},n.document.documentElement.appendChild(h)}:function(){setTimeout(d,0)};else{var f=new n.MessageChannel;f.port1.onmessage=d,i=function(){f.port2.postMessage(0)}}var c=[];function d(){var h,p;s=!0;for(var m=c.length;m;){for(p=c,c=[],h=-1;++h<m;)p[h]();m=c.length}s=!1}e.exports=function(h){c.push(h)!==1||s||i()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,e,r){"use strict";var n=t("immediate");function i(){}var s={},l=["REJECTED"],o=["FULFILLED"],a=["PENDING"];function u(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,m!==i&&h(this,m)}function f(m,_,v){this.promise=m,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function c(m,_,v){n(function(){var y;try{y=_(v)}catch(A){return s.reject(m,A)}y===m?s.reject(m,new TypeError("Cannot resolve promise with itself")):s.resolve(m,y)})}function d(m){var _=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof _=="function")return function(){_.apply(m,arguments)}}function h(m,_){var v=!1;function y(E){v||(v=!0,s.reject(m,E))}function A(E){v||(v=!0,s.resolve(m,E))}var I=p(function(){_(A,y)});I.status==="error"&&y(I.value)}function p(m,_){var v={};try{v.value=m(_),v.status="success"}catch(y){v.status="error",v.value=y}return v}(e.exports=u).prototype.finally=function(m){if(typeof m!="function")return this;var _=this.constructor;return this.then(function(v){return _.resolve(m()).then(function(){return v})},function(v){return _.resolve(m()).then(function(){throw v})})},u.prototype.catch=function(m){return this.then(null,m)},u.prototype.then=function(m,_){if(typeof m!="function"&&this.state===o||typeof _!="function"&&this.state===l)return this;var v=new this.constructor(i);return this.state!==a?c(v,this.state===o?m:_,this.outcome):this.queue.push(new f(v,m,_)),v},f.prototype.callFulfilled=function(m){s.resolve(this.promise,m)},f.prototype.otherCallFulfilled=function(m){c(this.promise,this.onFulfilled,m)},f.prototype.callRejected=function(m){s.reject(this.promise,m)},f.prototype.otherCallRejected=function(m){c(this.promise,this.onRejected,m)},s.resolve=function(m,_){var v=p(d,_);if(v.status==="error")return s.reject(m,v.value);var y=v.value;if(y)h(m,y);else{m.state=o,m.outcome=_;for(var A=-1,I=m.queue.length;++A<I;)m.queue[A].callFulfilled(_)}return m},s.reject=function(m,_){m.state=l,m.outcome=_;for(var v=-1,y=m.queue.length;++v<y;)m.queue[v].callRejected(_);return m},u.resolve=function(m){return m instanceof this?m:s.resolve(new this(i),m)},u.reject=function(m){var _=new this(i);return s.reject(_,m)},u.all=function(m){var _=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=m.length,y=!1;if(!v)return this.resolve([]);for(var A=new Array(v),I=0,E=-1,L=new this(i);++E<v;)M(m[E],E);return L;function M(V,Z){_.resolve(V).then(function(B){A[Z]=B,++I!==v||y||(y=!0,s.resolve(L,A))},function(B){y||(y=!0,s.reject(L,B))})}},u.race=function(m){var _=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=m.length,y=!1;if(!v)return this.resolve([]);for(var A=-1,I=new this(i);++A<v;)E=m[A],_.resolve(E).then(function(L){y||(y=!0,s.resolve(I,L))},function(L){y||(y=!0,s.reject(I,L))});var E;return I}},{immediate:36}],38:[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,r){"use strict";var n=t("./zlib/deflate"),i=t("./utils/common"),s=t("./utils/strings"),l=t("./zlib/messages"),o=t("./zlib/zstream"),a=Object.prototype.toString,u=0,f=-1,c=0,d=8;function h(m){if(!(this instanceof h))return new h(m);this.options=i.assign({level:f,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},m||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var v=n.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(v!==u)throw new Error(l[v]);if(_.header&&n.deflateSetHeader(this.strm,_.header),_.dictionary){var y;if(y=typeof _.dictionary=="string"?s.string2buf(_.dictionary):a.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(v=n.deflateSetDictionary(this.strm,y))!==u)throw new Error(l[v]);this._dict_set=!0}}function p(m,_){var v=new h(_);if(v.push(m,!0),v.err)throw v.msg||l[v.err];return v.result}h.prototype.push=function(m,_){var v,y,A=this.strm,I=this.options.chunkSize;if(this.ended)return!1;y=_===~~_?_:_===!0?4:0,typeof m=="string"?A.input=s.string2buf(m):a.call(m)==="[object ArrayBuffer]"?A.input=new Uint8Array(m):A.input=m,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new i.Buf8(I),A.next_out=0,A.avail_out=I),(v=n.deflate(A,y))!==1&&v!==u)return this.onEnd(v),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||y!==4&&y!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(i.shrinkBuf(A.output,A.next_out))):this.onData(i.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&v!==1);return y===4?(v=n.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===u):y!==2||(this.onEnd(u),!(A.avail_out=0))},h.prototype.onData=function(m){this.chunks.push(m)},h.prototype.onEnd=function(m){m===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},r.Deflate=h,r.deflate=p,r.deflateRaw=function(m,_){return(_=_||{}).raw=!0,p(m,_)},r.gzip=function(m,_){return(_=_||{}).gzip=!0,p(m,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,r){"use strict";var n=t("./zlib/inflate"),i=t("./utils/common"),s=t("./utils/strings"),l=t("./zlib/constants"),o=t("./zlib/messages"),a=t("./zlib/zstream"),u=t("./zlib/gzheader"),f=Object.prototype.toString;function c(h){if(!(this instanceof c))return new c(h);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},h||{});var p=this.options;p.raw&&0<=p.windowBits&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&p.windowBits<16)||h&&h.windowBits||(p.windowBits+=32),15<p.windowBits&&p.windowBits<48&&(15&p.windowBits)==0&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var m=n.inflateInit2(this.strm,p.windowBits);if(m!==l.Z_OK)throw new Error(o[m]);this.header=new u,n.inflateGetHeader(this.strm,this.header)}function d(h,p){var m=new c(p);if(m.push(h,!0),m.err)throw m.msg||o[m.err];return m.result}c.prototype.push=function(h,p){var m,_,v,y,A,I,E=this.strm,L=this.options.chunkSize,M=this.options.dictionary,V=!1;if(this.ended)return!1;_=p===~~p?p:p===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof h=="string"?E.input=s.binstring2buf(h):f.call(h)==="[object ArrayBuffer]"?E.input=new Uint8Array(h):E.input=h,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new i.Buf8(L),E.next_out=0,E.avail_out=L),(m=n.inflate(E,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&M&&(I=typeof M=="string"?s.string2buf(M):f.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,m=n.inflateSetDictionary(this.strm,I)),m===l.Z_BUF_ERROR&&V===!0&&(m=l.Z_OK,V=!1),m!==l.Z_STREAM_END&&m!==l.Z_OK)return this.onEnd(m),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&m!==l.Z_STREAM_END&&(E.avail_in!==0||_!==l.Z_FINISH&&_!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=s.utf8border(E.output,E.next_out),y=E.next_out-v,A=s.buf2string(E.output,v),E.next_out=y,E.avail_out=L-y,y&&i.arraySet(E.output,E.output,v,y,0),this.onData(A)):this.onData(i.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(V=!0)}while((0<E.avail_in||E.avail_out===0)&&m!==l.Z_STREAM_END);return m===l.Z_STREAM_END&&(_=l.Z_FINISH),_===l.Z_FINISH?(m=n.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===l.Z_OK):_!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(E.avail_out=0))},c.prototype.onData=function(h){this.chunks.push(h)},c.prototype.onEnd=function(h){h===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},r.Inflate=c,r.inflate=d,r.inflateRaw=function(h,p){return(p=p||{}).raw=!0,d(h,p)},r.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,r){"use strict";var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(l){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var a=o.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var u in a)a.hasOwnProperty(u)&&(l[u]=a[u])}}return l},r.shrinkBuf=function(l,o){return l.length===o?l:l.subarray?l.subarray(0,o):(l.length=o,l)};var i={arraySet:function(l,o,a,u,f){if(o.subarray&&l.subarray)l.set(o.subarray(a,a+u),f);else for(var c=0;c<u;c++)l[f+c]=o[a+c]},flattenChunks:function(l){var o,a,u,f,c,d;for(o=u=0,a=l.length;o<a;o++)u+=l[o].length;for(d=new Uint8Array(u),o=f=0,a=l.length;o<a;o++)c=l[o],d.set(c,f),f+=c.length;return d}},s={arraySet:function(l,o,a,u,f){for(var c=0;c<u;c++)l[f+c]=o[a+c]},flattenChunks:function(l){return[].concat.apply([],l)}};r.setTyped=function(l){l?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],42:[function(t,e,r){"use strict";var n=t("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var l=new n.Buf8(256),o=0;o<256;o++)l[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function a(u,f){if(f<65537&&(u.subarray&&s||!u.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(u,f));for(var c="",d=0;d<f;d++)c+=String.fromCharCode(u[d]);return c}l[254]=l[254]=1,r.string2buf=function(u){var f,c,d,h,p,m=u.length,_=0;for(h=0;h<m;h++)(64512&(c=u.charCodeAt(h)))==55296&&h+1<m&&(64512&(d=u.charCodeAt(h+1)))==56320&&(c=65536+(c-55296<<10)+(d-56320),h++),_+=c<128?1:c<2048?2:c<65536?3:4;for(f=new n.Buf8(_),h=p=0;p<_;h++)(64512&(c=u.charCodeAt(h)))==55296&&h+1<m&&(64512&(d=u.charCodeAt(h+1)))==56320&&(c=65536+(c-55296<<10)+(d-56320),h++),c<128?f[p++]=c:(c<2048?f[p++]=192|c>>>6:(c<65536?f[p++]=224|c>>>12:(f[p++]=240|c>>>18,f[p++]=128|c>>>12&63),f[p++]=128|c>>>6&63),f[p++]=128|63&c);return f},r.buf2binstring=function(u){return a(u,u.length)},r.binstring2buf=function(u){for(var f=new n.Buf8(u.length),c=0,d=f.length;c<d;c++)f[c]=u.charCodeAt(c);return f},r.buf2string=function(u,f){var c,d,h,p,m=f||u.length,_=new Array(2*m);for(c=d=0;c<m;)if((h=u[c++])<128)_[d++]=h;else if(4<(p=l[h]))_[d++]=65533,c+=p-1;else{for(h&=p===2?31:p===3?15:7;1<p&&c<m;)h=h<<6|63&u[c++],p--;1<p?_[d++]=65533:h<65536?_[d++]=h:(h-=65536,_[d++]=55296|h>>10&1023,_[d++]=56320|1023&h)}return a(_,d)},r.utf8border=function(u,f){var c;for((f=f||u.length)>u.length&&(f=u.length),c=f-1;0<=c&&(192&u[c])==128;)c--;return c<0||c===0?f:c+l[u[c]]>f?c:f}},{"./common":41}],43:[function(t,e,r){"use strict";e.exports=function(n,i,s,l){for(var o=65535&n|0,a=n>>>16&65535|0,u=0;s!==0;){for(s-=u=2e3<s?2e3:s;a=a+(o=o+i[l++]|0)|0,--u;);o%=65521,a%=65521}return o|a<<16|0}},{}],44:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){"use strict";var n=function(){for(var i,s=[],l=0;l<256;l++){i=l;for(var o=0;o<8;o++)i=1&i?3988292384^i>>>1:i>>>1;s[l]=i}return s}();e.exports=function(i,s,l,o){var a=n,u=o+l;i^=-1;for(var f=o;f<u;f++)i=i>>>8^a[255&(i^s[f])];return-1^i}},{}],46:[function(t,e,r){"use strict";var n,i=t("../utils/common"),s=t("./trees"),l=t("./adler32"),o=t("./crc32"),a=t("./messages"),u=0,f=4,c=0,d=-2,h=-1,p=4,m=2,_=8,v=9,y=286,A=30,I=19,E=2*y+1,L=15,M=3,V=258,Z=V+M+1,B=42,G=113,k=1,R=2,ue=3,P=4;function he(b,re){return b.msg=a[re],re}function q(b){return(b<<1)-(4<b?9:0)}function Q(b){for(var re=b.length;0<=--re;)b[re]=0}function N(b){var re=b.state,J=re.pending;J>b.avail_out&&(J=b.avail_out),J!==0&&(i.arraySet(b.output,re.pending_buf,re.pending_out,J,b.next_out),b.next_out+=J,re.pending_out+=J,b.total_out+=J,b.avail_out-=J,re.pending-=J,re.pending===0&&(re.pending_out=0))}function U(b,re){s._tr_flush_block(b,0<=b.block_start?b.block_start:-1,b.strstart-b.block_start,re),b.block_start=b.strstart,N(b.strm)}function ee(b,re){b.pending_buf[b.pending++]=re}function fe(b,re){b.pending_buf[b.pending++]=re>>>8&255,b.pending_buf[b.pending++]=255&re}function de(b,re){var J,D,O=b.max_chain_length,j=b.strstart,le=b.prev_length,oe=b.nice_match,Y=b.strstart>b.w_size-Z?b.strstart-(b.w_size-Z):0,se=b.window,K=b.w_mask,ie=b.prev,me=b.strstart+V,De=se[j+le-1],Te=se[j+le];b.prev_length>=b.good_match&&(O>>=2),oe>b.lookahead&&(oe=b.lookahead);do if(se[(J=re)+le]===Te&&se[J+le-1]===De&&se[J]===se[j]&&se[++J]===se[j+1]){j+=2,J++;do;while(se[++j]===se[++J]&&se[++j]===se[++J]&&se[++j]===se[++J]&&se[++j]===se[++J]&&se[++j]===se[++J]&&se[++j]===se[++J]&&se[++j]===se[++J]&&se[++j]===se[++J]&&j<me);if(D=V-(me-j),j=me-V,le<D){if(b.match_start=re,oe<=(le=D))break;De=se[j+le-1],Te=se[j+le]}}while((re=ie[re&K])>Y&&--O!=0);return le<=b.lookahead?le:b.lookahead}function Me(b){var re,J,D,O,j,le,oe,Y,se,K,ie=b.w_size;do{if(O=b.window_size-b.lookahead-b.strstart,b.strstart>=ie+(ie-Z)){for(i.arraySet(b.window,b.window,ie,ie,0),b.match_start-=ie,b.strstart-=ie,b.block_start-=ie,re=J=b.hash_size;D=b.head[--re],b.head[re]=ie<=D?D-ie:0,--J;);for(re=J=ie;D=b.prev[--re],b.prev[re]=ie<=D?D-ie:0,--J;);O+=ie}if(b.strm.avail_in===0)break;if(le=b.strm,oe=b.window,Y=b.strstart+b.lookahead,se=O,K=void 0,K=le.avail_in,se<K&&(K=se),J=K===0?0:(le.avail_in-=K,i.arraySet(oe,le.input,le.next_in,K,Y),le.state.wrap===1?le.adler=l(le.adler,oe,K,Y):le.state.wrap===2&&(le.adler=o(le.adler,oe,K,Y)),le.next_in+=K,le.total_in+=K,K),b.lookahead+=J,b.lookahead+b.insert>=M)for(j=b.strstart-b.insert,b.ins_h=b.window[j],b.ins_h=(b.ins_h<<b.hash_shift^b.window[j+1])&b.hash_mask;b.insert&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[j+M-1])&b.hash_mask,b.prev[j&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=j,j++,b.insert--,!(b.lookahead+b.insert<M)););}while(b.lookahead<Z&&b.strm.avail_in!==0)}function Pe(b,re){for(var J,D;;){if(b.lookahead<Z){if(Me(b),b.lookahead<Z&&re===u)return k;if(b.lookahead===0)break}if(J=0,b.lookahead>=M&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+M-1])&b.hash_mask,J=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),J!==0&&b.strstart-J<=b.w_size-Z&&(b.match_length=de(b,J)),b.match_length>=M)if(D=s._tr_tally(b,b.strstart-b.match_start,b.match_length-M),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&b.lookahead>=M){for(b.match_length--;b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+M-1])&b.hash_mask,J=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart,--b.match_length!=0;);b.strstart++}else b.strstart+=b.match_length,b.match_length=0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else D=s._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;if(D&&(U(b,!1),b.strm.avail_out===0))return k}return b.insert=b.strstart<M-1?b.strstart:M-1,re===f?(U(b,!0),b.strm.avail_out===0?ue:P):b.last_lit&&(U(b,!1),b.strm.avail_out===0)?k:R}function Ee(b,re){for(var J,D,O;;){if(b.lookahead<Z){if(Me(b),b.lookahead<Z&&re===u)return k;if(b.lookahead===0)break}if(J=0,b.lookahead>=M&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+M-1])&b.hash_mask,J=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),b.prev_length=b.match_length,b.prev_match=b.match_start,b.match_length=M-1,J!==0&&b.prev_length<b.max_lazy_match&&b.strstart-J<=b.w_size-Z&&(b.match_length=de(b,J),b.match_length<=5&&(b.strategy===1||b.match_length===M&&4096<b.strstart-b.match_start)&&(b.match_length=M-1)),b.prev_length>=M&&b.match_length<=b.prev_length){for(O=b.strstart+b.lookahead-M,D=s._tr_tally(b,b.strstart-1-b.prev_match,b.prev_length-M),b.lookahead-=b.prev_length-1,b.prev_length-=2;++b.strstart<=O&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+M-1])&b.hash_mask,J=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),--b.prev_length!=0;);if(b.match_available=0,b.match_length=M-1,b.strstart++,D&&(U(b,!1),b.strm.avail_out===0))return k}else if(b.match_available){if((D=s._tr_tally(b,0,b.window[b.strstart-1]))&&U(b,!1),b.strstart++,b.lookahead--,b.strm.avail_out===0)return k}else b.match_available=1,b.strstart++,b.lookahead--}return b.match_available&&(D=s._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0),b.insert=b.strstart<M-1?b.strstart:M-1,re===f?(U(b,!0),b.strm.avail_out===0?ue:P):b.last_lit&&(U(b,!1),b.strm.avail_out===0)?k:R}function $e(b,re,J,D,O){this.good_length=b,this.max_lazy=re,this.nice_length=J,this.max_chain=D,this.func=O}function Re(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*E),this.dyn_dtree=new i.Buf16(2*(2*A+1)),this.bl_tree=new i.Buf16(2*(2*I+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(L+1),this.heap=new i.Buf16(2*y+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*y+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ze(b){var re;return b&&b.state?(b.total_in=b.total_out=0,b.data_type=m,(re=b.state).pending=0,re.pending_out=0,re.wrap<0&&(re.wrap=-re.wrap),re.status=re.wrap?B:G,b.adler=re.wrap===2?0:1,re.last_flush=u,s._tr_init(re),c):he(b,d)}function Ke(b){var re=ze(b);return re===c&&function(J){J.window_size=2*J.w_size,Q(J.head),J.max_lazy_match=n[J.level].max_lazy,J.good_match=n[J.level].good_length,J.nice_match=n[J.level].nice_length,J.max_chain_length=n[J.level].max_chain,J.strstart=0,J.block_start=0,J.lookahead=0,J.insert=0,J.match_length=J.prev_length=M-1,J.match_available=0,J.ins_h=0}(b.state),re}function We(b,re,J,D,O,j){if(!b)return d;var le=1;if(re===h&&(re=6),D<0?(le=0,D=-D):15<D&&(le=2,D-=16),O<1||v<O||J!==_||D<8||15<D||re<0||9<re||j<0||p<j)return he(b,d);D===8&&(D=9);var oe=new Re;return(b.state=oe).strm=b,oe.wrap=le,oe.gzhead=null,oe.w_bits=D,oe.w_size=1<<oe.w_bits,oe.w_mask=oe.w_size-1,oe.hash_bits=O+7,oe.hash_size=1<<oe.hash_bits,oe.hash_mask=oe.hash_size-1,oe.hash_shift=~~((oe.hash_bits+M-1)/M),oe.window=new i.Buf8(2*oe.w_size),oe.head=new i.Buf16(oe.hash_size),oe.prev=new i.Buf16(oe.w_size),oe.lit_bufsize=1<<O+6,oe.pending_buf_size=4*oe.lit_bufsize,oe.pending_buf=new i.Buf8(oe.pending_buf_size),oe.d_buf=1*oe.lit_bufsize,oe.l_buf=3*oe.lit_bufsize,oe.level=re,oe.strategy=j,oe.method=J,Ke(b)}n=[new $e(0,0,0,0,function(b,re){var J=65535;for(J>b.pending_buf_size-5&&(J=b.pending_buf_size-5);;){if(b.lookahead<=1){if(Me(b),b.lookahead===0&&re===u)return k;if(b.lookahead===0)break}b.strstart+=b.lookahead,b.lookahead=0;var D=b.block_start+J;if((b.strstart===0||b.strstart>=D)&&(b.lookahead=b.strstart-D,b.strstart=D,U(b,!1),b.strm.avail_out===0)||b.strstart-b.block_start>=b.w_size-Z&&(U(b,!1),b.strm.avail_out===0))return k}return b.insert=0,re===f?(U(b,!0),b.strm.avail_out===0?ue:P):(b.strstart>b.block_start&&(U(b,!1),b.strm.avail_out),k)}),new $e(4,4,8,4,Pe),new $e(4,5,16,8,Pe),new $e(4,6,32,32,Pe),new $e(4,4,16,16,Ee),new $e(8,16,32,32,Ee),new $e(8,16,128,128,Ee),new $e(8,32,128,256,Ee),new $e(32,128,258,1024,Ee),new $e(32,258,258,4096,Ee)],r.deflateInit=function(b,re){return We(b,re,_,15,8,0)},r.deflateInit2=We,r.deflateReset=Ke,r.deflateResetKeep=ze,r.deflateSetHeader=function(b,re){return b&&b.state?b.state.wrap!==2?d:(b.state.gzhead=re,c):d},r.deflate=function(b,re){var J,D,O,j;if(!b||!b.state||5<re||re<0)return b?he(b,d):d;if(D=b.state,!b.output||!b.input&&b.avail_in!==0||D.status===666&&re!==f)return he(b,b.avail_out===0?-5:d);if(D.strm=b,J=D.last_flush,D.last_flush=re,D.status===B)if(D.wrap===2)b.adler=0,ee(D,31),ee(D,139),ee(D,8),D.gzhead?(ee(D,(D.gzhead.text?1:0)+(D.gzhead.hcrc?2:0)+(D.gzhead.extra?4:0)+(D.gzhead.name?8:0)+(D.gzhead.comment?16:0)),ee(D,255&D.gzhead.time),ee(D,D.gzhead.time>>8&255),ee(D,D.gzhead.time>>16&255),ee(D,D.gzhead.time>>24&255),ee(D,D.level===9?2:2<=D.strategy||D.level<2?4:0),ee(D,255&D.gzhead.os),D.gzhead.extra&&D.gzhead.extra.length&&(ee(D,255&D.gzhead.extra.length),ee(D,D.gzhead.extra.length>>8&255)),D.gzhead.hcrc&&(b.adler=o(b.adler,D.pending_buf,D.pending,0)),D.gzindex=0,D.status=69):(ee(D,0),ee(D,0),ee(D,0),ee(D,0),ee(D,0),ee(D,D.level===9?2:2<=D.strategy||D.level<2?4:0),ee(D,3),D.status=G);else{var le=_+(D.w_bits-8<<4)<<8;le|=(2<=D.strategy||D.level<2?0:D.level<6?1:D.level===6?2:3)<<6,D.strstart!==0&&(le|=32),le+=31-le%31,D.status=G,fe(D,le),D.strstart!==0&&(fe(D,b.adler>>>16),fe(D,65535&b.adler)),b.adler=1}if(D.status===69)if(D.gzhead.extra){for(O=D.pending;D.gzindex<(65535&D.gzhead.extra.length)&&(D.pending!==D.pending_buf_size||(D.gzhead.hcrc&&D.pending>O&&(b.adler=o(b.adler,D.pending_buf,D.pending-O,O)),N(b),O=D.pending,D.pending!==D.pending_buf_size));)ee(D,255&D.gzhead.extra[D.gzindex]),D.gzindex++;D.gzhead.hcrc&&D.pending>O&&(b.adler=o(b.adler,D.pending_buf,D.pending-O,O)),D.gzindex===D.gzhead.extra.length&&(D.gzindex=0,D.status=73)}else D.status=73;if(D.status===73)if(D.gzhead.name){O=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>O&&(b.adler=o(b.adler,D.pending_buf,D.pending-O,O)),N(b),O=D.pending,D.pending===D.pending_buf_size)){j=1;break}j=D.gzindex<D.gzhead.name.length?255&D.gzhead.name.charCodeAt(D.gzindex++):0,ee(D,j)}while(j!==0);D.gzhead.hcrc&&D.pending>O&&(b.adler=o(b.adler,D.pending_buf,D.pending-O,O)),j===0&&(D.gzindex=0,D.status=91)}else D.status=91;if(D.status===91)if(D.gzhead.comment){O=D.pending;do{if(D.pending===D.pending_buf_size&&(D.gzhead.hcrc&&D.pending>O&&(b.adler=o(b.adler,D.pending_buf,D.pending-O,O)),N(b),O=D.pending,D.pending===D.pending_buf_size)){j=1;break}j=D.gzindex<D.gzhead.comment.length?255&D.gzhead.comment.charCodeAt(D.gzindex++):0,ee(D,j)}while(j!==0);D.gzhead.hcrc&&D.pending>O&&(b.adler=o(b.adler,D.pending_buf,D.pending-O,O)),j===0&&(D.status=103)}else D.status=103;if(D.status===103&&(D.gzhead.hcrc?(D.pending+2>D.pending_buf_size&&N(b),D.pending+2<=D.pending_buf_size&&(ee(D,255&b.adler),ee(D,b.adler>>8&255),b.adler=0,D.status=G)):D.status=G),D.pending!==0){if(N(b),b.avail_out===0)return D.last_flush=-1,c}else if(b.avail_in===0&&q(re)<=q(J)&&re!==f)return he(b,-5);if(D.status===666&&b.avail_in!==0)return he(b,-5);if(b.avail_in!==0||D.lookahead!==0||re!==u&&D.status!==666){var oe=D.strategy===2?function(Y,se){for(var K;;){if(Y.lookahead===0&&(Me(Y),Y.lookahead===0)){if(se===u)return k;break}if(Y.match_length=0,K=s._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++,K&&(U(Y,!1),Y.strm.avail_out===0))return k}return Y.insert=0,se===f?(U(Y,!0),Y.strm.avail_out===0?ue:P):Y.last_lit&&(U(Y,!1),Y.strm.avail_out===0)?k:R}(D,re):D.strategy===3?function(Y,se){for(var K,ie,me,De,Te=Y.window;;){if(Y.lookahead<=V){if(Me(Y),Y.lookahead<=V&&se===u)return k;if(Y.lookahead===0)break}if(Y.match_length=0,Y.lookahead>=M&&0<Y.strstart&&(ie=Te[me=Y.strstart-1])===Te[++me]&&ie===Te[++me]&&ie===Te[++me]){De=Y.strstart+V;do;while(ie===Te[++me]&&ie===Te[++me]&&ie===Te[++me]&&ie===Te[++me]&&ie===Te[++me]&&ie===Te[++me]&&ie===Te[++me]&&ie===Te[++me]&&me<De);Y.match_length=V-(De-me),Y.match_length>Y.lookahead&&(Y.match_length=Y.lookahead)}if(Y.match_length>=M?(K=s._tr_tally(Y,1,Y.match_length-M),Y.lookahead-=Y.match_length,Y.strstart+=Y.match_length,Y.match_length=0):(K=s._tr_tally(Y,0,Y.window[Y.strstart]),Y.lookahead--,Y.strstart++),K&&(U(Y,!1),Y.strm.avail_out===0))return k}return Y.insert=0,se===f?(U(Y,!0),Y.strm.avail_out===0?ue:P):Y.last_lit&&(U(Y,!1),Y.strm.avail_out===0)?k:R}(D,re):n[D.level].func(D,re);if(oe!==ue&&oe!==P||(D.status=666),oe===k||oe===ue)return b.avail_out===0&&(D.last_flush=-1),c;if(oe===R&&(re===1?s._tr_align(D):re!==5&&(s._tr_stored_block(D,0,0,!1),re===3&&(Q(D.head),D.lookahead===0&&(D.strstart=0,D.block_start=0,D.insert=0))),N(b),b.avail_out===0))return D.last_flush=-1,c}return re!==f?c:D.wrap<=0?1:(D.wrap===2?(ee(D,255&b.adler),ee(D,b.adler>>8&255),ee(D,b.adler>>16&255),ee(D,b.adler>>24&255),ee(D,255&b.total_in),ee(D,b.total_in>>8&255),ee(D,b.total_in>>16&255),ee(D,b.total_in>>24&255)):(fe(D,b.adler>>>16),fe(D,65535&b.adler)),N(b),0<D.wrap&&(D.wrap=-D.wrap),D.pending!==0?c:1)},r.deflateEnd=function(b){var re;return b&&b.state?(re=b.state.status)!==B&&re!==69&&re!==73&&re!==91&&re!==103&&re!==G&&re!==666?he(b,d):(b.state=null,re===G?he(b,-3):c):d},r.deflateSetDictionary=function(b,re){var J,D,O,j,le,oe,Y,se,K=re.length;if(!b||!b.state||(j=(J=b.state).wrap)===2||j===1&&J.status!==B||J.lookahead)return d;for(j===1&&(b.adler=l(b.adler,re,K,0)),J.wrap=0,K>=J.w_size&&(j===0&&(Q(J.head),J.strstart=0,J.block_start=0,J.insert=0),se=new i.Buf8(J.w_size),i.arraySet(se,re,K-J.w_size,J.w_size,0),re=se,K=J.w_size),le=b.avail_in,oe=b.next_in,Y=b.input,b.avail_in=K,b.next_in=0,b.input=re,Me(J);J.lookahead>=M;){for(D=J.strstart,O=J.lookahead-(M-1);J.ins_h=(J.ins_h<<J.hash_shift^J.window[D+M-1])&J.hash_mask,J.prev[D&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=D,D++,--O;);J.strstart=D,J.lookahead=M-1,Me(J)}return J.strstart+=J.lookahead,J.block_start=J.strstart,J.insert=J.lookahead,J.lookahead=0,J.match_length=J.prev_length=M-1,J.match_available=0,b.next_in=oe,b.input=Y,b.avail_in=le,J.wrap=j,c},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){"use strict";e.exports=function(n,i){var s,l,o,a,u,f,c,d,h,p,m,_,v,y,A,I,E,L,M,V,Z,B,G,k,R;s=n.state,l=n.next_in,k=n.input,o=l+(n.avail_in-5),a=n.next_out,R=n.output,u=a-(i-n.avail_out),f=a+(n.avail_out-257),c=s.dmax,d=s.wsize,h=s.whave,p=s.wnext,m=s.window,_=s.hold,v=s.bits,y=s.lencode,A=s.distcode,I=(1<<s.lenbits)-1,E=(1<<s.distbits)-1;e:do{v<15&&(_+=k[l++]<<v,v+=8,_+=k[l++]<<v,v+=8),L=y[_&I];t:for(;;){if(_>>>=M=L>>>24,v-=M,(M=L>>>16&255)===0)R[a++]=65535&L;else{if(!(16&M)){if((64&M)==0){L=y[(65535&L)+(_&(1<<M)-1)];continue t}if(32&M){s.mode=12;break e}n.msg="invalid literal/length code",s.mode=30;break e}V=65535&L,(M&=15)&&(v<M&&(_+=k[l++]<<v,v+=8),V+=_&(1<<M)-1,_>>>=M,v-=M),v<15&&(_+=k[l++]<<v,v+=8,_+=k[l++]<<v,v+=8),L=A[_&E];n:for(;;){if(_>>>=M=L>>>24,v-=M,!(16&(M=L>>>16&255))){if((64&M)==0){L=A[(65535&L)+(_&(1<<M)-1)];continue n}n.msg="invalid distance code",s.mode=30;break e}if(Z=65535&L,v<(M&=15)&&(_+=k[l++]<<v,(v+=8)<M&&(_+=k[l++]<<v,v+=8)),c<(Z+=_&(1<<M)-1)){n.msg="invalid distance too far back",s.mode=30;break e}if(_>>>=M,v-=M,(M=a-u)<Z){if(h<(M=Z-M)&&s.sane){n.msg="invalid distance too far back",s.mode=30;break e}if(G=m,(B=0)===p){if(B+=d-M,M<V){for(V-=M;R[a++]=m[B++],--M;);B=a-Z,G=R}}else if(p<M){if(B+=d+p-M,(M-=p)<V){for(V-=M;R[a++]=m[B++],--M;);if(B=0,p<V){for(V-=M=p;R[a++]=m[B++],--M;);B=a-Z,G=R}}}else if(B+=p-M,M<V){for(V-=M;R[a++]=m[B++],--M;);B=a-Z,G=R}for(;2<V;)R[a++]=G[B++],R[a++]=G[B++],R[a++]=G[B++],V-=3;V&&(R[a++]=G[B++],1<V&&(R[a++]=G[B++]))}else{for(B=a-Z;R[a++]=R[B++],R[a++]=R[B++],R[a++]=R[B++],2<(V-=3););V&&(R[a++]=R[B++],1<V&&(R[a++]=R[B++]))}break}}break}}while(l<o&&a<f);l-=V=v>>3,_&=(1<<(v-=V<<3))-1,n.next_in=l,n.next_out=a,n.avail_in=l<o?o-l+5:5-(l-o),n.avail_out=a<f?f-a+257:257-(a-f),s.hold=_,s.bits=v}},{}],49:[function(t,e,r){"use strict";var n=t("../utils/common"),i=t("./adler32"),s=t("./crc32"),l=t("./inffast"),o=t("./inftrees"),a=1,u=2,f=0,c=-2,d=1,h=852,p=592;function m(B){return(B>>>24&255)+(B>>>8&65280)+((65280&B)<<8)+((255&B)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(B){var G;return B&&B.state?(G=B.state,B.total_in=B.total_out=G.total=0,B.msg="",G.wrap&&(B.adler=1&G.wrap),G.mode=d,G.last=0,G.havedict=0,G.dmax=32768,G.head=null,G.hold=0,G.bits=0,G.lencode=G.lendyn=new n.Buf32(h),G.distcode=G.distdyn=new n.Buf32(p),G.sane=1,G.back=-1,f):c}function y(B){var G;return B&&B.state?((G=B.state).wsize=0,G.whave=0,G.wnext=0,v(B)):c}function A(B,G){var k,R;return B&&B.state?(R=B.state,G<0?(k=0,G=-G):(k=1+(G>>4),G<48&&(G&=15)),G&&(G<8||15<G)?c:(R.window!==null&&R.wbits!==G&&(R.window=null),R.wrap=k,R.wbits=G,y(B))):c}function I(B,G){var k,R;return B?(R=new _,(B.state=R).window=null,(k=A(B,G))!==f&&(B.state=null),k):c}var E,L,M=!0;function V(B){if(M){var G;for(E=new n.Buf32(512),L=new n.Buf32(32),G=0;G<144;)B.lens[G++]=8;for(;G<256;)B.lens[G++]=9;for(;G<280;)B.lens[G++]=7;for(;G<288;)B.lens[G++]=8;for(o(a,B.lens,0,288,E,0,B.work,{bits:9}),G=0;G<32;)B.lens[G++]=5;o(u,B.lens,0,32,L,0,B.work,{bits:5}),M=!1}B.lencode=E,B.lenbits=9,B.distcode=L,B.distbits=5}function Z(B,G,k,R){var ue,P=B.state;return P.window===null&&(P.wsize=1<<P.wbits,P.wnext=0,P.whave=0,P.window=new n.Buf8(P.wsize)),R>=P.wsize?(n.arraySet(P.window,G,k-P.wsize,P.wsize,0),P.wnext=0,P.whave=P.wsize):(R<(ue=P.wsize-P.wnext)&&(ue=R),n.arraySet(P.window,G,k-R,ue,P.wnext),(R-=ue)?(n.arraySet(P.window,G,k-R,R,0),P.wnext=R,P.whave=P.wsize):(P.wnext+=ue,P.wnext===P.wsize&&(P.wnext=0),P.whave<P.wsize&&(P.whave+=ue))),0}r.inflateReset=y,r.inflateReset2=A,r.inflateResetKeep=v,r.inflateInit=function(B){return I(B,15)},r.inflateInit2=I,r.inflate=function(B,G){var k,R,ue,P,he,q,Q,N,U,ee,fe,de,Me,Pe,Ee,$e,Re,ze,Ke,We,b,re,J,D,O=0,j=new n.Buf8(4),le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!B||!B.state||!B.output||!B.input&&B.avail_in!==0)return c;(k=B.state).mode===12&&(k.mode=13),he=B.next_out,ue=B.output,Q=B.avail_out,P=B.next_in,R=B.input,q=B.avail_in,N=k.hold,U=k.bits,ee=q,fe=Q,re=f;e:for(;;)switch(k.mode){case d:if(k.wrap===0){k.mode=13;break}for(;U<16;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}if(2&k.wrap&&N===35615){j[k.check=0]=255&N,j[1]=N>>>8&255,k.check=s(k.check,j,2,0),U=N=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&N)<<8)+(N>>8))%31){B.msg="incorrect header check",k.mode=30;break}if((15&N)!=8){B.msg="unknown compression method",k.mode=30;break}if(U-=4,b=8+(15&(N>>>=4)),k.wbits===0)k.wbits=b;else if(b>k.wbits){B.msg="invalid window size",k.mode=30;break}k.dmax=1<<b,B.adler=k.check=1,k.mode=512&N?10:12,U=N=0;break;case 2:for(;U<16;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}if(k.flags=N,(255&k.flags)!=8){B.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){B.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=N>>8&1),512&k.flags&&(j[0]=255&N,j[1]=N>>>8&255,k.check=s(k.check,j,2,0)),U=N=0,k.mode=3;case 3:for(;U<32;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}k.head&&(k.head.time=N),512&k.flags&&(j[0]=255&N,j[1]=N>>>8&255,j[2]=N>>>16&255,j[3]=N>>>24&255,k.check=s(k.check,j,4,0)),U=N=0,k.mode=4;case 4:for(;U<16;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}k.head&&(k.head.xflags=255&N,k.head.os=N>>8),512&k.flags&&(j[0]=255&N,j[1]=N>>>8&255,k.check=s(k.check,j,2,0)),U=N=0,k.mode=5;case 5:if(1024&k.flags){for(;U<16;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}k.length=N,k.head&&(k.head.extra_len=N),512&k.flags&&(j[0]=255&N,j[1]=N>>>8&255,k.check=s(k.check,j,2,0)),U=N=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(q<(de=k.length)&&(de=q),de&&(k.head&&(b=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),n.arraySet(k.head.extra,R,P,de,b)),512&k.flags&&(k.check=s(k.check,R,de,P)),q-=de,P+=de,k.length-=de),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(q===0)break e;for(de=0;b=R[P+de++],k.head&&b&&k.length<65536&&(k.head.name+=String.fromCharCode(b)),b&&de<q;);if(512&k.flags&&(k.check=s(k.check,R,de,P)),q-=de,P+=de,b)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(q===0)break e;for(de=0;b=R[P+de++],k.head&&b&&k.length<65536&&(k.head.comment+=String.fromCharCode(b)),b&&de<q;);if(512&k.flags&&(k.check=s(k.check,R,de,P)),q-=de,P+=de,b)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;U<16;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}if(N!==(65535&k.check)){B.msg="header crc mismatch",k.mode=30;break}U=N=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),B.adler=k.check=0,k.mode=12;break;case 10:for(;U<32;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}B.adler=k.check=m(N),U=N=0,k.mode=11;case 11:if(k.havedict===0)return B.next_out=he,B.avail_out=Q,B.next_in=P,B.avail_in=q,k.hold=N,k.bits=U,2;B.adler=k.check=1,k.mode=12;case 12:if(G===5||G===6)break e;case 13:if(k.last){N>>>=7&U,U-=7&U,k.mode=27;break}for(;U<3;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}switch(k.last=1&N,U-=1,3&(N>>>=1)){case 0:k.mode=14;break;case 1:if(V(k),k.mode=20,G!==6)break;N>>>=2,U-=2;break e;case 2:k.mode=17;break;case 3:B.msg="invalid block type",k.mode=30}N>>>=2,U-=2;break;case 14:for(N>>>=7&U,U-=7&U;U<32;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}if((65535&N)!=(N>>>16^65535)){B.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&N,U=N=0,k.mode=15,G===6)break e;case 15:k.mode=16;case 16:if(de=k.length){if(q<de&&(de=q),Q<de&&(de=Q),de===0)break e;n.arraySet(ue,R,P,de,he),q-=de,P+=de,Q-=de,he+=de,k.length-=de;break}k.mode=12;break;case 17:for(;U<14;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}if(k.nlen=257+(31&N),N>>>=5,U-=5,k.ndist=1+(31&N),N>>>=5,U-=5,k.ncode=4+(15&N),N>>>=4,U-=4,286<k.nlen||30<k.ndist){B.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;U<3;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}k.lens[le[k.have++]]=7&N,N>>>=3,U-=3}for(;k.have<19;)k.lens[le[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,J={bits:k.lenbits},re=o(0,k.lens,0,19,k.lencode,0,k.work,J),k.lenbits=J.bits,re){B.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;$e=(O=k.lencode[N&(1<<k.lenbits)-1])>>>16&255,Re=65535&O,!((Ee=O>>>24)<=U);){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}if(Re<16)N>>>=Ee,U-=Ee,k.lens[k.have++]=Re;else{if(Re===16){for(D=Ee+2;U<D;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}if(N>>>=Ee,U-=Ee,k.have===0){B.msg="invalid bit length repeat",k.mode=30;break}b=k.lens[k.have-1],de=3+(3&N),N>>>=2,U-=2}else if(Re===17){for(D=Ee+3;U<D;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}U-=Ee,b=0,de=3+(7&(N>>>=Ee)),N>>>=3,U-=3}else{for(D=Ee+7;U<D;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}U-=Ee,b=0,de=11+(127&(N>>>=Ee)),N>>>=7,U-=7}if(k.have+de>k.nlen+k.ndist){B.msg="invalid bit length repeat",k.mode=30;break}for(;de--;)k.lens[k.have++]=b}}if(k.mode===30)break;if(k.lens[256]===0){B.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,J={bits:k.lenbits},re=o(a,k.lens,0,k.nlen,k.lencode,0,k.work,J),k.lenbits=J.bits,re){B.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,J={bits:k.distbits},re=o(u,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,J),k.distbits=J.bits,re){B.msg="invalid distances set",k.mode=30;break}if(k.mode=20,G===6)break e;case 20:k.mode=21;case 21:if(6<=q&&258<=Q){B.next_out=he,B.avail_out=Q,B.next_in=P,B.avail_in=q,k.hold=N,k.bits=U,l(B,fe),he=B.next_out,ue=B.output,Q=B.avail_out,P=B.next_in,R=B.input,q=B.avail_in,N=k.hold,U=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;$e=(O=k.lencode[N&(1<<k.lenbits)-1])>>>16&255,Re=65535&O,!((Ee=O>>>24)<=U);){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}if($e&&(240&$e)==0){for(ze=Ee,Ke=$e,We=Re;$e=(O=k.lencode[We+((N&(1<<ze+Ke)-1)>>ze)])>>>16&255,Re=65535&O,!(ze+(Ee=O>>>24)<=U);){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}N>>>=ze,U-=ze,k.back+=ze}if(N>>>=Ee,U-=Ee,k.back+=Ee,k.length=Re,$e===0){k.mode=26;break}if(32&$e){k.back=-1,k.mode=12;break}if(64&$e){B.msg="invalid literal/length code",k.mode=30;break}k.extra=15&$e,k.mode=22;case 22:if(k.extra){for(D=k.extra;U<D;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}k.length+=N&(1<<k.extra)-1,N>>>=k.extra,U-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;$e=(O=k.distcode[N&(1<<k.distbits)-1])>>>16&255,Re=65535&O,!((Ee=O>>>24)<=U);){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}if((240&$e)==0){for(ze=Ee,Ke=$e,We=Re;$e=(O=k.distcode[We+((N&(1<<ze+Ke)-1)>>ze)])>>>16&255,Re=65535&O,!(ze+(Ee=O>>>24)<=U);){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}N>>>=ze,U-=ze,k.back+=ze}if(N>>>=Ee,U-=Ee,k.back+=Ee,64&$e){B.msg="invalid distance code",k.mode=30;break}k.offset=Re,k.extra=15&$e,k.mode=24;case 24:if(k.extra){for(D=k.extra;U<D;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}k.offset+=N&(1<<k.extra)-1,N>>>=k.extra,U-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){B.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(Q===0)break e;if(de=fe-Q,k.offset>de){if((de=k.offset-de)>k.whave&&k.sane){B.msg="invalid distance too far back",k.mode=30;break}Me=de>k.wnext?(de-=k.wnext,k.wsize-de):k.wnext-de,de>k.length&&(de=k.length),Pe=k.window}else Pe=ue,Me=he-k.offset,de=k.length;for(Q<de&&(de=Q),Q-=de,k.length-=de;ue[he++]=Pe[Me++],--de;);k.length===0&&(k.mode=21);break;case 26:if(Q===0)break e;ue[he++]=k.length,Q--,k.mode=21;break;case 27:if(k.wrap){for(;U<32;){if(q===0)break e;q--,N|=R[P++]<<U,U+=8}if(fe-=Q,B.total_out+=fe,k.total+=fe,fe&&(B.adler=k.check=k.flags?s(k.check,ue,fe,he-fe):i(k.check,ue,fe,he-fe)),fe=Q,(k.flags?N:m(N))!==k.check){B.msg="incorrect data check",k.mode=30;break}U=N=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;U<32;){if(q===0)break e;q--,N+=R[P++]<<U,U+=8}if(N!==(4294967295&k.total)){B.msg="incorrect length check",k.mode=30;break}U=N=0}k.mode=29;case 29:re=1;break e;case 30:re=-3;break e;case 31:return-4;case 32:default:return c}return B.next_out=he,B.avail_out=Q,B.next_in=P,B.avail_in=q,k.hold=N,k.bits=U,(k.wsize||fe!==B.avail_out&&k.mode<30&&(k.mode<27||G!==4))&&Z(B,B.output,B.next_out,fe-B.avail_out)?(k.mode=31,-4):(ee-=B.avail_in,fe-=B.avail_out,B.total_in+=ee,B.total_out+=fe,k.total+=fe,k.wrap&&fe&&(B.adler=k.check=k.flags?s(k.check,ue,fe,B.next_out-fe):i(k.check,ue,fe,B.next_out-fe)),B.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(ee==0&&fe===0||G===4)&&re===f&&(re=-5),re)},r.inflateEnd=function(B){if(!B||!B.state)return c;var G=B.state;return G.window&&(G.window=null),B.state=null,f},r.inflateGetHeader=function(B,G){var k;return B&&B.state?(2&(k=B.state).wrap)==0?c:((k.head=G).done=!1,f):c},r.inflateSetDictionary=function(B,G){var k,R=G.length;return B&&B.state?(k=B.state).wrap!==0&&k.mode!==11?c:k.mode===11&&i(1,G,R,0)!==k.check?-3:Z(B,G,R,R)?(k.mode=31,-4):(k.havedict=1,f):c},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,r){"use strict";var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(a,u,f,c,d,h,p,m){var _,v,y,A,I,E,L,M,V,Z=m.bits,B=0,G=0,k=0,R=0,ue=0,P=0,he=0,q=0,Q=0,N=0,U=null,ee=0,fe=new n.Buf16(16),de=new n.Buf16(16),Me=null,Pe=0;for(B=0;B<=15;B++)fe[B]=0;for(G=0;G<c;G++)fe[u[f+G]]++;for(ue=Z,R=15;1<=R&&fe[R]===0;R--);if(R<ue&&(ue=R),R===0)return d[h++]=20971520,d[h++]=20971520,m.bits=1,0;for(k=1;k<R&&fe[k]===0;k++);for(ue<k&&(ue=k),B=q=1;B<=15;B++)if(q<<=1,(q-=fe[B])<0)return-1;if(0<q&&(a===0||R!==1))return-1;for(de[1]=0,B=1;B<15;B++)de[B+1]=de[B]+fe[B];for(G=0;G<c;G++)u[f+G]!==0&&(p[de[u[f+G]]++]=G);if(E=a===0?(U=Me=p,19):a===1?(U=i,ee-=257,Me=s,Pe-=257,256):(U=l,Me=o,-1),B=k,I=h,he=G=N=0,y=-1,A=(Q=1<<(P=ue))-1,a===1&&852<Q||a===2&&592<Q)return 1;for(;;){for(L=B-he,V=p[G]<E?(M=0,p[G]):p[G]>E?(M=Me[Pe+p[G]],U[ee+p[G]]):(M=96,0),_=1<<B-he,k=v=1<<P;d[I+(N>>he)+(v-=_)]=L<<24|M<<16|V|0,v!==0;);for(_=1<<B-1;N&_;)_>>=1;if(_!==0?(N&=_-1,N+=_):N=0,G++,--fe[B]==0){if(B===R)break;B=u[f+p[G]]}if(ue<B&&(N&A)!==y){for(he===0&&(he=ue),I+=k,q=1<<(P=B-he);P+he<R&&!((q-=fe[P+he])<=0);)P++,q<<=1;if(Q+=1<<P,a===1&&852<Q||a===2&&592<Q)return 1;d[y=N&A]=ue<<24|P<<16|I-h|0}}return N!==0&&(d[I+N]=B-he<<24|64<<16|0),m.bits=ue,0}},{"../utils/common":41}],51:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,r){"use strict";var n=t("../utils/common"),i=0,s=1;function l(O){for(var j=O.length;0<=--j;)O[j]=0}var o=0,a=29,u=256,f=u+1+a,c=30,d=19,h=2*f+1,p=15,m=16,_=7,v=256,y=16,A=17,I=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=new Array(2*(f+2));l(Z);var B=new Array(2*c);l(B);var G=new Array(512);l(G);var k=new Array(256);l(k);var R=new Array(a);l(R);var ue,P,he,q=new Array(c);function Q(O,j,le,oe,Y){this.static_tree=O,this.extra_bits=j,this.extra_base=le,this.elems=oe,this.max_length=Y,this.has_stree=O&&O.length}function N(O,j){this.dyn_tree=O,this.max_code=0,this.stat_desc=j}function U(O){return O<256?G[O]:G[256+(O>>>7)]}function ee(O,j){O.pending_buf[O.pending++]=255&j,O.pending_buf[O.pending++]=j>>>8&255}function fe(O,j,le){O.bi_valid>m-le?(O.bi_buf|=j<<O.bi_valid&65535,ee(O,O.bi_buf),O.bi_buf=j>>m-O.bi_valid,O.bi_valid+=le-m):(O.bi_buf|=j<<O.bi_valid&65535,O.bi_valid+=le)}function de(O,j,le){fe(O,le[2*j],le[2*j+1])}function Me(O,j){for(var le=0;le|=1&O,O>>>=1,le<<=1,0<--j;);return le>>>1}function Pe(O,j,le){var oe,Y,se=new Array(p+1),K=0;for(oe=1;oe<=p;oe++)se[oe]=K=K+le[oe-1]<<1;for(Y=0;Y<=j;Y++){var ie=O[2*Y+1];ie!==0&&(O[2*Y]=Me(se[ie]++,ie))}}function Ee(O){var j;for(j=0;j<f;j++)O.dyn_ltree[2*j]=0;for(j=0;j<c;j++)O.dyn_dtree[2*j]=0;for(j=0;j<d;j++)O.bl_tree[2*j]=0;O.dyn_ltree[2*v]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function $e(O){8<O.bi_valid?ee(O,O.bi_buf):0<O.bi_valid&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function Re(O,j,le,oe){var Y=2*j,se=2*le;return O[Y]<O[se]||O[Y]===O[se]&&oe[j]<=oe[le]}function ze(O,j,le){for(var oe=O.heap[le],Y=le<<1;Y<=O.heap_len&&(Y<O.heap_len&&Re(j,O.heap[Y+1],O.heap[Y],O.depth)&&Y++,!Re(j,oe,O.heap[Y],O.depth));)O.heap[le]=O.heap[Y],le=Y,Y<<=1;O.heap[le]=oe}function Ke(O,j,le){var oe,Y,se,K,ie=0;if(O.last_lit!==0)for(;oe=O.pending_buf[O.d_buf+2*ie]<<8|O.pending_buf[O.d_buf+2*ie+1],Y=O.pending_buf[O.l_buf+ie],ie++,oe===0?de(O,Y,j):(de(O,(se=k[Y])+u+1,j),(K=E[se])!==0&&fe(O,Y-=R[se],K),de(O,se=U(--oe),le),(K=L[se])!==0&&fe(O,oe-=q[se],K)),ie<O.last_lit;);de(O,v,j)}function We(O,j){var le,oe,Y,se=j.dyn_tree,K=j.stat_desc.static_tree,ie=j.stat_desc.has_stree,me=j.stat_desc.elems,De=-1;for(O.heap_len=0,O.heap_max=h,le=0;le<me;le++)se[2*le]!==0?(O.heap[++O.heap_len]=De=le,O.depth[le]=0):se[2*le+1]=0;for(;O.heap_len<2;)se[2*(Y=O.heap[++O.heap_len]=De<2?++De:0)]=1,O.depth[Y]=0,O.opt_len--,ie&&(O.static_len-=K[2*Y+1]);for(j.max_code=De,le=O.heap_len>>1;1<=le;le--)ze(O,se,le);for(Y=me;le=O.heap[1],O.heap[1]=O.heap[O.heap_len--],ze(O,se,1),oe=O.heap[1],O.heap[--O.heap_max]=le,O.heap[--O.heap_max]=oe,se[2*Y]=se[2*le]+se[2*oe],O.depth[Y]=(O.depth[le]>=O.depth[oe]?O.depth[le]:O.depth[oe])+1,se[2*le+1]=se[2*oe+1]=Y,O.heap[1]=Y++,ze(O,se,1),2<=O.heap_len;);O.heap[--O.heap_max]=O.heap[1],function(Te,Xe){var et,Le,pt,Be,vt,pe,we=Xe.dyn_tree,nt=Xe.max_code,Ie=Xe.stat_desc.static_tree,kt=Xe.stat_desc.has_stree,fu=Xe.stat_desc.extra_bits,hi=Xe.stat_desc.extra_base,Pt=Xe.stat_desc.max_length,ln=0;for(Be=0;Be<=p;Be++)Te.bl_count[Be]=0;for(we[2*Te.heap[Te.heap_max]+1]=0,et=Te.heap_max+1;et<h;et++)Pt<(Be=we[2*we[2*(Le=Te.heap[et])+1]+1]+1)&&(Be=Pt,ln++),we[2*Le+1]=Be,nt<Le||(Te.bl_count[Be]++,vt=0,hi<=Le&&(vt=fu[Le-hi]),pe=we[2*Le],Te.opt_len+=pe*(Be+vt),kt&&(Te.static_len+=pe*(Ie[2*Le+1]+vt)));if(ln!==0){do{for(Be=Pt-1;Te.bl_count[Be]===0;)Be--;Te.bl_count[Be]--,Te.bl_count[Be+1]+=2,Te.bl_count[Pt]--,ln-=2}while(0<ln);for(Be=Pt;Be!==0;Be--)for(Le=Te.bl_count[Be];Le!==0;)nt<(pt=Te.heap[--et])||(we[2*pt+1]!==Be&&(Te.opt_len+=(Be-we[2*pt+1])*we[2*pt],we[2*pt+1]=Be),Le--)}}(O,j),Pe(se,De,O.bl_count)}function b(O,j,le){var oe,Y,se=-1,K=j[1],ie=0,me=7,De=4;for(K===0&&(me=138,De=3),j[2*(le+1)+1]=65535,oe=0;oe<=le;oe++)Y=K,K=j[2*(oe+1)+1],++ie<me&&Y===K||(ie<De?O.bl_tree[2*Y]+=ie:Y!==0?(Y!==se&&O.bl_tree[2*Y]++,O.bl_tree[2*y]++):ie<=10?O.bl_tree[2*A]++:O.bl_tree[2*I]++,se=Y,De=(ie=0)===K?(me=138,3):Y===K?(me=6,3):(me=7,4))}function re(O,j,le){var oe,Y,se=-1,K=j[1],ie=0,me=7,De=4;for(K===0&&(me=138,De=3),oe=0;oe<=le;oe++)if(Y=K,K=j[2*(oe+1)+1],!(++ie<me&&Y===K)){if(ie<De)for(;de(O,Y,O.bl_tree),--ie!=0;);else Y!==0?(Y!==se&&(de(O,Y,O.bl_tree),ie--),de(O,y,O.bl_tree),fe(O,ie-3,2)):ie<=10?(de(O,A,O.bl_tree),fe(O,ie-3,3)):(de(O,I,O.bl_tree),fe(O,ie-11,7));se=Y,De=(ie=0)===K?(me=138,3):Y===K?(me=6,3):(me=7,4)}}l(q);var J=!1;function D(O,j,le,oe){fe(O,(o<<1)+(oe?1:0),3),function(Y,se,K,ie){$e(Y),ie&&(ee(Y,K),ee(Y,~K)),n.arraySet(Y.pending_buf,Y.window,se,K,Y.pending),Y.pending+=K}(O,j,le,!0)}r._tr_init=function(O){J||(function(){var j,le,oe,Y,se,K=new Array(p+1);for(Y=oe=0;Y<a-1;Y++)for(R[Y]=oe,j=0;j<1<<E[Y];j++)k[oe++]=Y;for(k[oe-1]=Y,Y=se=0;Y<16;Y++)for(q[Y]=se,j=0;j<1<<L[Y];j++)G[se++]=Y;for(se>>=7;Y<c;Y++)for(q[Y]=se<<7,j=0;j<1<<L[Y]-7;j++)G[256+se++]=Y;for(le=0;le<=p;le++)K[le]=0;for(j=0;j<=143;)Z[2*j+1]=8,j++,K[8]++;for(;j<=255;)Z[2*j+1]=9,j++,K[9]++;for(;j<=279;)Z[2*j+1]=7,j++,K[7]++;for(;j<=287;)Z[2*j+1]=8,j++,K[8]++;for(Pe(Z,f+1,K),j=0;j<c;j++)B[2*j+1]=5,B[2*j]=Me(j,5);ue=new Q(Z,E,u+1,f,p),P=new Q(B,L,0,c,p),he=new Q(new Array(0),M,0,d,_)}(),J=!0),O.l_desc=new N(O.dyn_ltree,ue),O.d_desc=new N(O.dyn_dtree,P),O.bl_desc=new N(O.bl_tree,he),O.bi_buf=0,O.bi_valid=0,Ee(O)},r._tr_stored_block=D,r._tr_flush_block=function(O,j,le,oe){var Y,se,K=0;0<O.level?(O.strm.data_type===2&&(O.strm.data_type=function(ie){var me,De=4093624447;for(me=0;me<=31;me++,De>>>=1)if(1&De&&ie.dyn_ltree[2*me]!==0)return i;if(ie.dyn_ltree[18]!==0||ie.dyn_ltree[20]!==0||ie.dyn_ltree[26]!==0)return s;for(me=32;me<u;me++)if(ie.dyn_ltree[2*me]!==0)return s;return i}(O)),We(O,O.l_desc),We(O,O.d_desc),K=function(ie){var me;for(b(ie,ie.dyn_ltree,ie.l_desc.max_code),b(ie,ie.dyn_dtree,ie.d_desc.max_code),We(ie,ie.bl_desc),me=d-1;3<=me&&ie.bl_tree[2*V[me]+1]===0;me--);return ie.opt_len+=3*(me+1)+5+5+4,me}(O),Y=O.opt_len+3+7>>>3,(se=O.static_len+3+7>>>3)<=Y&&(Y=se)):Y=se=le+5,le+4<=Y&&j!==-1?D(O,j,le,oe):O.strategy===4||se===Y?(fe(O,2+(oe?1:0),3),Ke(O,Z,B)):(fe(O,4+(oe?1:0),3),function(ie,me,De,Te){var Xe;for(fe(ie,me-257,5),fe(ie,De-1,5),fe(ie,Te-4,4),Xe=0;Xe<Te;Xe++)fe(ie,ie.bl_tree[2*V[Xe]+1],3);re(ie,ie.dyn_ltree,me-1),re(ie,ie.dyn_dtree,De-1)}(O,O.l_desc.max_code+1,O.d_desc.max_code+1,K+1),Ke(O,O.dyn_ltree,O.dyn_dtree)),Ee(O),oe&&$e(O)},r._tr_tally=function(O,j,le){return O.pending_buf[O.d_buf+2*O.last_lit]=j>>>8&255,O.pending_buf[O.d_buf+2*O.last_lit+1]=255&j,O.pending_buf[O.l_buf+O.last_lit]=255&le,O.last_lit++,j===0?O.dyn_ltree[2*le]++:(O.matches++,j--,O.dyn_ltree[2*(k[le]+u+1)]++,O.dyn_dtree[2*U(j)]++),O.last_lit===O.lit_bufsize-1},r._tr_align=function(O){fe(O,2,3),de(O,v,Z),function(j){j.bi_valid===16?(ee(j,j.bi_buf),j.bi_buf=0,j.bi_valid=0):8<=j.bi_valid&&(j.pending_buf[j.pending++]=255&j.bi_buf,j.bi_buf>>=8,j.bi_valid-=8)}(O)}},{"../utils/common":41}],53:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,r){(function(n){(function(i,s){"use strict";if(!i.setImmediate){var l,o,a,u,f=1,c={},d=!1,h=i.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(i);p=p&&p.setTimeout?p:i,l={}.toString.call(i.process)==="[object process]"?function(y){process.nextTick(function(){_(y)})}:function(){if(i.postMessage&&!i.importScripts){var y=!0,A=i.onmessage;return i.onmessage=function(){y=!1},i.postMessage("","*"),i.onmessage=A,y}}()?(u="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",v,!1):i.attachEvent("onmessage",v),function(y){i.postMessage(u+y,"*")}):i.MessageChannel?((a=new MessageChannel).port1.onmessage=function(y){_(y.data)},function(y){a.port2.postMessage(y)}):h&&"onreadystatechange"in h.createElement("script")?(o=h.documentElement,function(y){var A=h.createElement("script");A.onreadystatechange=function(){_(y),A.onreadystatechange=null,o.removeChild(A),A=null},o.appendChild(A)}):function(y){setTimeout(_,0,y)},p.setImmediate=function(y){typeof y!="function"&&(y=new Function(""+y));for(var A=new Array(arguments.length-1),I=0;I<A.length;I++)A[I]=arguments[I+1];var E={callback:y,args:A};return c[f]=E,l(f),f++},p.clearImmediate=m}function m(y){delete c[y]}function _(y){if(d)setTimeout(_,0,y);else{var A=c[y];if(A){d=!0;try{(function(I){var E=I.callback,L=I.args;switch(L.length){case 0:E();break;case 1:E(L[0]);break;case 2:E(L[0],L[1]);break;case 3:E(L[0],L[1],L[2]);break;default:E.apply(s,L)}})(A)}finally{m(y),d=!1}}}}function v(y){y.source===i&&typeof y.data=="string"&&y.data.indexOf(u)===0&&_(+y.data.slice(u.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var ws=On(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});function ah(t,e){return t>e?1:t<e?-1:0}Tt.compareStrings=ah;function uh(t,e){return t-e}Tt.compareNumbers=uh;function fh(t){return-t}Tt.reverse=fh;function ch(t,e){return t.localeCompare(e,void 0,{sensitivity:"base"})}Tt.compareStringsCaseInsensitive=ch;function dh(t){return(e,r)=>{for(let n of t(e,r))if(n)return n;return 0}}Tt.sortFunction=dh});var _s=In(_i());function ae(){}function Ln(t){return t()}function gi(){return Object.create(null)}function Ve(t){t.forEach(Ln)}function fn(t){return typeof t=="function"}function ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}var sn;function Ue(t,e){return sn||(sn=document.createElement("a")),sn.href=e,t===sn.href}function vi(t){return Object.keys(t).length===0}function ki(t,...e){if(t==null)return ae;let r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function Et(t,e,r){t.$$.on_destroy.push(ki(e,r))}function yi(t){return t&&fn(t.destroy)?t.destroy:ae}var wi=!1;function gu(){wi=!0}function bu(){wi=!1}function C(t,e){t.appendChild(e)}function x(t,e,r){t.insertBefore(e,r||null)}function S(t){t.parentNode.removeChild(t)}function _e(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function T(t){return document.createElement(t)}function wt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ce(t){return document.createTextNode(t)}function z(){return ce(" ")}function be(){return ce("")}function Oe(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function $(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function vu(t){return Array.from(t.childNodes)}function Se(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Nn(t,e){t.value=e??""}function Ce(t,e,r,n){r===null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function ku(t,e,{bubbles:r=!1,cancelable:n=!1}={}){let i=document.createEvent("CustomEvent");return i.initCustomEvent(t,r,n,e),i}var je=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,r,n=null){this.e||(this.is_svg?this.e=wt(r.nodeName):this.e=T(r.nodeName),this.t=r,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let r=0;r<this.n.length;r+=1)x(this.t,this.n[r],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(S)}};var qt;function Wt(t){qt=t}function Mn(){if(!qt)throw new Error("Function called outside component initialization");return qt}function cn(t){Mn().$$.on_mount.push(t)}function Rn(){let t=Mn();return(e,r,{cancelable:n=!1}={})=>{let i=t.$$.callbacks[e];if(i){let s=ku(e,r,{cancelable:n});return i.slice().forEach(l=>{l.call(t,s)}),!s.defaultPrevented}return!0}}function zn(t,e){return Mn().$$.context.set(t,e),e}var Ut=[];var mt=[],an=[],bi=[],yu=Promise.resolve(),Dn=!1;function wu(){Dn||(Dn=!0,yu.then(Ai))}function Bn(t){an.push(t)}var Fn=new Set,on=0;function Ai(){let t=qt;do{for(;on<Ut.length;){let e=Ut[on];on++,Wt(e),Au(e.$$)}for(Wt(null),Ut.length=0,on=0;mt.length;)mt.pop()();for(let e=0;e<an.length;e+=1){let r=an[e];Fn.has(r)||(Fn.add(r),r())}an.length=0}while(Ut.length);for(;bi.length;)bi.pop()();Dn=!1,Fn.clear(),Wt(t)}function Au(t){if(t.fragment!==null){t.update(),Ve(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Bn)}}var un=new Set,yt;function te(){yt={r:0,c:[],p:yt}}function ne(){yt.r||Ve(yt.c),yt=yt.p}function g(t,e){t&&t.i&&(un.delete(t),t.i(e))}function w(t,e,r,n){if(t&&t.o){if(un.has(t))return;un.add(t),yt.c.push(()=>{un.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}var Si=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ci(t,e){w(t,1,1,()=>{e.delete(t.key)})}function xi(t,e,r,n,i,s,l,o,a,u,f,c){let d=t.length,h=s.length,p=d,m={};for(;p--;)m[t[p].key]=p;let _=[],v=new Map,y=new Map;for(p=h;p--;){let L=c(i,s,p),M=r(L),V=l.get(M);V?n&&V.p(L,e):(V=u(M,L),V.c()),v.set(M,_[p]=V),M in m&&y.set(M,Math.abs(p-m[M]))}let A=new Set,I=new Set;function E(L){g(L,1),L.m(o,f),l.set(L.key,L),f=L.first,h--}for(;d&&h;){let L=_[h-1],M=t[d-1],V=L.key,Z=M.key;L===M?(f=L.first,d--,h--):v.has(Z)?!l.has(V)||A.has(V)?E(L):I.has(Z)?d--:y.get(V)>y.get(Z)?(I.add(V),E(L)):(A.add(Z),d--):(a(M,l),d--)}for(;d--;){let L=t[d];v.has(L.key)||a(L,l)}for(;h;)E(_[h-1]);return _}function X(t){t&&t.c()}function H(t,e,r,n){let{fragment:i,on_mount:s,on_destroy:l,after_update:o}=t.$$;i&&i.m(e,r),n||Bn(()=>{let a=s.map(Ln).filter(fn);l?l.push(...a):Ve(a),t.$$.on_mount=[]}),o.forEach(Bn)}function W(t,e){let r=t.$$;r.fragment!==null&&(Ve(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function Su(t,e){t.$$.dirty[0]===-1&&(Ut.push(t),wu(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ke(t,e,r,n,i,s,l,o=[-1]){let a=qt;Wt(t);let u=t.$$={fragment:null,ctx:null,props:s,update:ae,not_equal:i,bound:gi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:gi(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};l&&l(u.root);let f=!1;if(u.ctx=r?r(t,e.props||{},(c,d,...h)=>{let p=h.length?h[0]:d;return u.ctx&&i(u.ctx[c],u.ctx[c]=p)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](p),f&&Su(t,c)),d}):[],u.update(),f=!0,Ve(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){gu();let c=vu(e.target);u.fragment&&u.fragment.l(c),c.forEach(S)}else u.fragment&&u.fragment.c();e.intro&&g(t.$$.fragment),H(t,e.target,e.anchor,e.customElement),bu(),Ai()}Wt(a)}var Cu;typeof HTMLElement=="function"&&(Cu=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(Ln).filter(fn);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,r){this[t]=r}disconnectedCallback(){Ve(this.$$.on_disconnect)}$destroy(){W(this,1),this.$destroy=ae}$on(t,e){let r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{let n=r.indexOf(e);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!vi(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var ve=class{$destroy(){W(this,1),this.$destroy=ae}$on(e,r){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!vi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};function xu(t){let e,r,n,i,s;return r=new xe({props:{s:t[0]}}),{c(){e=T("a"),X(r.$$.fragment),$(e,"href",n="##"+t[0]),$(e,"class",i=F.article(t[0])?"":"dead")},m(l,o){x(l,e,o),H(r,e,null),s=!0},p(l,o){let a={};o&1&&(a.s=l[0]),r.$set(a),(!s||o&1&&n!==(n="##"+l[0]))&&$(e,"href",n),(!s||o&1&&i!==(i=F.article(l[0])?"":"dead"))&&$(e,"class",i)},i(l){s||(g(r.$$.fragment,l),s=!0)},o(l){w(r.$$.fragment,l),s=!1},d(l){l&&S(e),W(r)}}}function Tu(t){let e,r;return{c(){e=T("em"),r=ce(t[0])},m(n,i){x(n,e,i),C(e,r)},p(n,i){i&1&&Se(r,n[0])},i:ae,o:ae,d(n){n&&S(e)}}}function Eu(t){let e,r,n,i,s,l=[Tu,xu],o=[];function a(u,f){return f&1&&(e=null),e==null&&(e=!isNaN(parseFloat(u[0]))),e?0:1}return r=a(t,-1),n=o[r]=l[r](t),{c(){n.c(),i=be()},m(u,f){o[r].m(u,f),x(u,i,f),s=!0},p(u,[f]){let c=r;r=a(u,f),r===c?o[r].p(u,f):(te(),w(o[c],1,1,()=>{o[c]=null}),ne(),n=o[r],n?n.p(u,f):(n=o[r]=l[r](u),n.c()),g(n,1),n.m(i.parentNode,i))},i(u){s||(g(n),s=!0)},o(u){w(n),s=!1},d(u){o[r].d(u),u&&S(i)}}}function $u(t,e,r){let{href:n}=e;return t.$$set=i=>{"href"in i&&r(0,n=i.href)},[n]}var Pn=class extends ve{constructor(e){super(),ke(this,e,$u,Eu,ge,{href:0})}},jn=Pn;function Ou(t){let e,r;return e=new jn({props:{href:t[0]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.href=n[0]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Iu(t){let e,r,n,i,s;return r=new jn({props:{href:t[0]}}),{c(){e=T("span"),X(r.$$.fragment),n=T("sup"),n.textContent="?",$(n,"class","tipmark"),$(e,"tooltip",i="tip_"+t[0])},m(l,o){x(l,e,o),H(r,e,null),C(e,n),s=!0},p(l,o){let a={};o&1&&(a.href=l[0]),r.$set(a),(!s||o&1&&i!==(i="tip_"+l[0]))&&$(e,"tooltip",i)},i(l){s||(g(r.$$.fragment,l),s=!0)},o(l){w(r.$$.fragment,l),s=!1},d(l){l&&S(e),W(r)}}}function Fu(t){let e,r,n,i,s=[Iu,Ou],l=[];function o(a,u){return"tip_"+a[0]in F.lang?0:1}return e=o(t,-1),r=l[e]=s[e](t),{c(){r.c(),n=be()},m(a,u){l[e].m(a,u),x(a,n,u),i=!0},p(a,[u]){let f=e;e=o(a,u),e===f?l[e].p(a,u):(te(),w(l[f],1,1,()=>{l[f]=null}),ne(),r=l[e],r?r.p(a,u):(r=l[e]=s[e](a),r.c()),g(r,1),r.m(n.parentNode,n))},i(a){i||(g(r),i=!0)},o(a){w(r),i=!1},d(a){l[e].d(a),a&&S(n)}}}function Du(t,e,r){let{href:n}=e;return t.$$set=i=>{"href"in i&&r(0,n=i.href)},t.$$.update=()=>{if(t.$$.dirty&1){e:n&&n.type&&r(0,n=n.type)}},[n]}var Un=class extends ve{constructor(e){super(),ke(this,e,Du,Fu,ge,{href:0})}},qe=Un;var $t=[];function Ht(t,e=ae){let r,n=new Set;function i(o){if(ge(t,o)&&(t=o,r)){let a=!$t.length;for(let u of n)u[1](),$t.push(u,t);if(a){for(let u=0;u<$t.length;u+=2)$t[u][0]($t[u+1]);$t.length=0}}}function s(o){i(o(t))}function l(o,a=ae){let u=[o,a];return n.add(u),n.size===1&&(r=e(i)||ae),o(t),()=>{n.delete(u),n.size===0&&(r(),r=null)}}return{set:i,update:s,subscribe:l}}var At=Ht(!1),dn=!1,St=Ht(!1),at=Ht("");function Ot(t){dn||At.update(e=>t??!e)}function Ti(t){dn=t??!dn,At.update(e=>dn)}var Xt=Ht(!1);function Bu(t){let e,r;return{c(){e=new je(!1),r=be(),e.a=r},m(n,i){e.m(t[0],n,i),x(n,r,i)},p(n,[i]){i&1&&e.p(n[0])},i:ae,o:ae,d(n){n&&S(r),n&&e.d()}}}function Lu(t,e,r){let{s:n}=e,{simple:i=!1}=e,{nobr:s=100}=e,l=!1,o;return o?.length<s&&(o=`<nobr>${o}</nobr>`),At.subscribe(a=>r(4,l=a)),t.$$set=a=>{"s"in a&&r(1,n=a.s),"simple"in a&&r(2,i=a.simple),"nobr"in a&&r(3,s=a.nobr)},t.$$.update=()=>{if(t.$$.dirty&23){e:l?r(0,o=n):(r(0,o=F.tr(n,i)),typeof o=="string"&&r(0,o=o.replace(/^([\u1000-\uFFFF]+)/,"<div class='inem'>$1</div>")))}},[o,n,i,s,l]}var Wn=class extends ve{constructor(e){super(),ke(this,e,Lu,Bu,ge,{s:1,simple:2,nobr:3})}},xe=Wn;function Nu(t){let e,r,n,i;return n=new xe({props:{s:t[0]}}),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),$(r,"colspan","2"),$(r,"class","table-subheader")},m(s,l){x(s,e,l),C(e,r),H(n,r,null),i=!0},p(s,[l]){let o={};l&1&&(o.s=s[0]),n.$set(o)},i(s){i||(g(n.$$.fragment,s),i=!0)},o(s){w(n.$$.fragment,s),i=!1},d(s){s&&S(e),W(n)}}}function Mu(t,e,r){let{text:n}=e;return t.$$set=i=>{"text"in i&&r(0,n=i.text)},[n]}var qn=class extends ve{constructor(e){super(),ke(this,e,Mu,Nu,ge,{text:0})}},Hn=qn;function Ei(t,e,r){let n=t.slice();return n[6]=e[r],n}function $i(t){let e,r,n,i,s,l,o=!t[2]&&Oi(t),a=t[2]&&Ii(t),u=[zu,Ru],f=[];function c(d,h){return d[1]?0:1}return n=c(t,-1),i=f[n]=u[n](t),{c(){o&&o.c(),e=z(),a&&a.c(),r=z(),i.c(),s=be()},m(d,h){o&&o.m(d,h),x(d,e,h),a&&a.m(d,h),x(d,r,h),f[n].m(d,h),x(d,s,h),l=!0},p(d,h){d[2]?o&&(te(),w(o,1,1,()=>{o=null}),ne()):o?(o.p(d,h),h&4&&g(o,1)):(o=Oi(d),o.c(),g(o,1),o.m(e.parentNode,e)),d[2]?a?(a.p(d,h),h&4&&g(a,1)):(a=Ii(d),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(te(),w(a,1,1,()=>{a=null}),ne());let p=n;n=c(d,h),n===p?f[n].p(d,h):(te(),w(f[p],1,1,()=>{f[p]=null}),ne(),i=f[n],i?i.p(d,h):(i=f[n]=u[n](d),i.c()),g(i,1),i.m(s.parentNode,s))},i(d){l||(g(o),g(a),g(i),l=!0)},o(d){w(o),w(a),w(i),l=!1},d(d){o&&o.d(d),d&&S(e),a&&a.d(d),d&&S(r),f[n].d(d),d&&S(s)}}}function Oi(t){let e,r,n,i,s,l,o;return n=new xe({props:{s:"A-Z"}}),{c(){e=T("div"),r=T("button"),X(n.$$.fragment),$(r,"style",i=t[4]?"":"text-decoration:line-through"),$(e,"class","links-page-button")},m(a,u){x(a,e,u),C(e,r),H(n,r,null),s=!0,l||(o=Oe(r,"click",t[5]),l=!0)},p(a,u){(!s||u&16&&i!==(i=a[4]?"":"text-decoration:line-through"))&&$(r,"style",i)},i(a){s||(g(n.$$.fragment,a),s=!0)},o(a){w(n.$$.fragment,a),s=!1},d(a){a&&S(e),W(n),l=!1,o()}}}function Ii(t){let e,r,n;return r=new ye({props:{val:t[2]}}),{c(){e=T("div"),X(r.$$.fragment),$(e,"class","links-page-header")},m(i,s){x(i,e,s),H(r,e,null),n=!0},p(i,s){let l={};s&4&&(l.val=i[2]),r.$set(l)},i(i){n||(g(r.$$.fragment,i),n=!0)},o(i){w(r.$$.fragment,i),n=!1},d(i){i&&S(e),W(r)}}}function Ru(t){let e,r;return e=new He({props:{items:t[3],sorted:!1}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&8&&(s.items=n[3]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function zu(t){let e,r,n,i,s=t[3],l=[];for(let a=0;a<s.length;a+=1)l[a]=Fi(Ei(t,s,a));let o=a=>w(l[a],1,1,()=>{l[a]=null});return{c(){e=T("div"),r=T("div"),n=T("ol");for(let a=0;a<l.length;a+=1)l[a].c();$(r,"class","cols"),$(e,"class","links-page")},m(a,u){x(a,e,u),C(e,r),C(r,n);for(let f=0;f<l.length;f+=1)l[f].m(n,null);i=!0},p(a,u){if(u&8){s=a[3];let f;for(f=0;f<s.length;f+=1){let c=Ei(a,s,f);l[f]?(l[f].p(c,u),g(l[f],1)):(l[f]=Fi(c),l[f].c(),g(l[f],1),l[f].m(n,null))}for(te(),f=s.length;f<l.length;f+=1)o(f);ne()}},i(a){if(!i){for(let u=0;u<s.length;u+=1)g(l[u]);i=!0}},o(a){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)w(l[u]);i=!1},d(a){a&&S(e),_e(l,a)}}}function Fi(t){let e,r,n,i;return r=new ye({props:{val:t[6]}}),{c(){e=T("li"),X(r.$$.fragment),n=z()},m(s,l){x(s,e,l),H(r,e,null),C(e,n),i=!0},p(s,l){let o={};l&8&&(o.val=s[6]),r.$set(o)},i(s){i||(g(r.$$.fragment,s),i=!0)},o(s){w(r.$$.fragment,s),i=!1},d(s){s&&S(e),W(r)}}}function Pu(t){let e,r,n=t[0]&&t[0].length>0&&$i(t);return{c(){n&&n.c(),e=be()},m(i,s){n&&n.m(i,s),x(i,e,s),r=!0},p(i,[s]){i[0]&&i[0].length>0?n?(n.p(i,s),s&1&&g(n,1)):(n=$i(i),n.c(),g(n,1),n.m(e.parentNode,e)):n&&(te(),w(n,1,1,()=>{n=null}),ne())},i(i){r||(g(n),r=!0)},o(i){w(n),r=!1},d(i){n&&n.d(i),i&&S(e)}}}function ju(t,e,r){let n;Et(t,St,u=>r(4,n=u));let{links:i}=e,{cols:s=!1}=e,{title:l=null}=e,o;St.subscribe(u=>{r(3,o=u?i.slice().sort((f,c)=>It(f)>It(c)?1:-1):i)});let a=u=>St.update(f=>!f);return t.$$set=u=>{"links"in u&&r(0,i=u.links),"cols"in u&&r(1,s=u.cols),"title"in u&&r(2,l=u.title)},[i,s,l,o,n,a]}var Xn=class extends ve{constructor(e){super(),ke(this,e,ju,Pu,ge,{links:0,cols:1,title:2})}},ft=Xn;function Di(t,e,r){let n=t.slice();return n[15]=e[r],n[9]=r,n}function Bi(t,e,r){let n=t.slice();return n[7]=e[r],n[9]=r,n}function Li(t,e,r){let n=t.slice();return n[11]=e[r],n[13]=r,n}function Ni(t,e,r){let n=t.slice();return n[7]=e[r],n[9]=r,n}function Mi(t,e,r){let n=t.slice();return n[7]=e[r],n[9]=r,n}function Uu(t){return{c:ae,m:ae,p:ae,i:ae,o:ae,d:ae}}function Wu(t){let e,r,n=t[5](t[0].map(qi)),i=[];for(let l=0;l<n.length;l+=1)i[l]=Ri(Di(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){e=T("span");for(let l=0;l<i.length;l+=1)i[l].c();$(e,"class","links-list")},m(l,o){x(l,e,o);for(let a=0;a<i.length;a+=1)i[a].m(e,null);r=!0},p(l,o){if(o&55){n=l[5](l[0].map(qi));let a;for(a=0;a<n.length;a+=1){let u=Di(l,n,a);i[a]?(i[a].p(u,o),g(i[a],1)):(i[a]=Ri(u),i[a].c(),g(i[a],1),i[a].m(e,null))}for(te(),a=n.length;a<i.length;a+=1)s(a);ne()}},i(l){if(!r){for(let o=0;o<n.length;o+=1)g(i[o]);r=!0}},o(l){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);r=!1},d(l){l&&S(e),_e(i,l)}}}function qu(t){let e,r,n=t[5](Object.keys(t[0])),i=[];for(let l=0;l<n.length;l+=1)i[l]=zi(Bi(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){e=T("span");for(let l=0;l<i.length;l+=1)i[l].c();$(e,"class","links-list")},m(l,o){x(l,e,o);for(let a=0;a<i.length;a+=1)i[a].m(e,null);r=!0},p(l,o){if(o&55){n=l[5](Object.keys(l[0]));let a;for(a=0;a<n.length;a+=1){let u=Bi(l,n,a);i[a]?(i[a].p(u,o),g(i[a],1)):(i[a]=zi(u),i[a].c(),g(i[a],1),i[a].m(e,null))}for(te(),a=n.length;a<i.length;a+=1)s(a);ne()}},i(l){if(!r){for(let o=0;o<n.length;o+=1)g(i[o]);r=!0}},o(l){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);r=!1},d(l){l&&S(e),_e(i,l)}}}function Hu(t){let e,r,n=Object.keys(t[0]),i=[];for(let l=0;l<n.length;l+=1)i[l]=ji(Li(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=be()},m(l,o){for(let a=0;a<i.length;a+=1)i[a].m(l,o);x(l,e,o),r=!0},p(l,o){if(o&17){n=Object.keys(l[0]);let a;for(a=0;a<n.length;a+=1){let u=Li(l,n,a);i[a]?(i[a].p(u,o),g(i[a],1)):(i[a]=ji(u),i[a].c(),g(i[a],1),i[a].m(e.parentNode,e))}for(te(),a=n.length;a<i.length;a+=1)s(a);ne()}},i(l){if(!r){for(let o=0;o<n.length;o+=1)g(i[o]);r=!0}},o(l){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);r=!1},d(l){_e(i,l),l&&S(e)}}}function Xu(t){let e,r,n=Object.keys(t[0]).sort(),i=[];for(let l=0;l<n.length;l+=1)i[l]=Ui(Ni(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){e=T("table");for(let l=0;l<i.length;l+=1)i[l].c();$(e,"class","number-table")},m(l,o){x(l,e,o);for(let a=0;a<i.length;a+=1)i[a].m(e,null);r=!0},p(l,o){if(o&1){n=Object.keys(l[0]).sort();let a;for(a=0;a<n.length;a+=1){let u=Ni(l,n,a);i[a]?(i[a].p(u,o),g(i[a],1)):(i[a]=Ui(u),i[a].c(),g(i[a],1),i[a].m(e,null))}for(te(),a=n.length;a<i.length;a+=1)s(a);ne()}},i(l){if(!r){for(let o=0;o<n.length;o+=1)g(i[o]);r=!0}},o(l){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);r=!1},d(l){l&&S(e),_e(i,l)}}}function Gu(t){let e,r,n,i=t[0],s=[];for(let o=0;o<i.length;o+=1)s[o]=Wi(Mi(t,i,o));let l=o=>w(s[o],1,1,()=>{s[o]=null});return{c(){e=T("div");for(let o=0;o<s.length;o+=1)s[o].c();$(e,"class","cols"),$(e,"style",r=`columns:${t[1]};`)},m(o,a){x(o,e,a);for(let u=0;u<s.length;u+=1)s[u].m(e,null);n=!0},p(o,a){if(a&1){i=o[0];let u;for(u=0;u<i.length;u+=1){let f=Mi(o,i,u);s[u]?(s[u].p(f,a),g(s[u],1)):(s[u]=Wi(f),s[u].c(),g(s[u],1),s[u].m(e,null))}for(te(),u=i.length;u<s.length;u+=1)l(u);ne()}(!n||a&2&&r!==(r=`columns:${o[1]};`))&&$(e,"style",r)},i(o){if(!n){for(let a=0;a<i.length;a+=1)g(s[a]);n=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);n=!1},d(o){o&&S(e),_e(s,o)}}}function Yu(t){let e;return{c(){e=ce("...")},m(r,n){x(r,e,n)},p:ae,i:ae,o:ae,d(r){r&&S(e)}}}function Zu(t){let e=F.tr("NULL")+"",r;return{c(){r=ce(e)},m(n,i){x(n,r,i)},p:ae,i:ae,o:ae,d(n){n&&S(r)}}}function Ku(t){let e,r=lt(t[9],{vertical:t[2],cols:t[1]})+"",n,i,s;return i=new qe({props:{href:t[15]}}),{c(){e=new je(!1),n=be(),X(i.$$.fragment),e.a=n},m(l,o){e.m(r,l,o),x(l,n,o),H(i,l,o),s=!0},p(l,o){(!s||o&6)&&r!==(r=lt(l[9],{vertical:l[2],cols:l[1]})+"")&&e.p(r);let a={};o&33&&(a.href=l[15]),i.$set(a)},i(l){s||(g(i.$$.fragment,l),s=!0)},o(l){w(i.$$.fragment,l),s=!1},d(l){l&&S(n),l&&e.d(),W(i,l)}}}function Vu(t){let e,r,n,i;return r=new He({props:{items:t[15],depth:t[4]-1}}),{c(){e=T("div"),X(r.$$.fragment),n=z(),$(e,"class","sublist")},m(s,l){x(s,e,l),H(r,e,null),C(e,n),i=!0},p(s,l){let o={};l&33&&(o.items=s[15]),l&16&&(o.depth=s[4]-1),r.$set(o)},i(s){i||(g(r.$$.fragment,s),i=!0)},o(s){w(r.$$.fragment,s),i=!1},d(s){s&&S(e),W(r)}}}function Ri(t){let e,r,n,i,s,l=[Vu,Ku],o=[];function a(u,f){return f&33&&(e=null),e==null&&(e=!!Array.isArray(u[15])),e?0:1}return r=a(t,-1),n=o[r]=l[r](t),{c(){n.c(),i=be()},m(u,f){o[r].m(u,f),x(u,i,f),s=!0},p(u,f){let c=r;r=a(u,f),r===c?o[r].p(u,f):(te(),w(o[c],1,1,()=>{o[c]=null}),ne(),n=o[r],n?n.p(u,f):(n=o[r]=l[r](u),n.c()),g(n,1),n.m(i.parentNode,i))},i(u){s||(g(n),s=!0)},o(u){w(n),s=!1},d(u){o[r].d(u),u&&S(i)}}}function zi(t){let e,r=lt(t[9],{vertical:t[2],cols:t[1]})+"",n,i,s,l,o;return i=new qe({props:{href:t[7]}}),l=new ye({props:{val:t[0][t[7]],depth:t[4]-1}}),{c(){e=new je(!1),n=ce("\u200F\u200F\u200E\u200E"),X(i.$$.fragment),s=ce(": "),X(l.$$.fragment),e.a=n},m(a,u){e.m(r,a,u),x(a,n,u),H(i,a,u),x(a,s,u),H(l,a,u),o=!0},p(a,u){(!o||u&6)&&r!==(r=lt(a[9],{vertical:a[2],cols:a[1]})+"")&&e.p(r);let f={};u&33&&(f.href=a[7]),i.$set(f);let c={};u&33&&(c.val=a[0][a[7]]),u&16&&(c.depth=a[4]-1),l.$set(c)},i(a){o||(g(i.$$.fragment,a),g(l.$$.fragment,a),o=!0)},o(a){w(i.$$.fragment,a),w(l.$$.fragment,a),o=!1},d(a){a&&e.d(),a&&S(n),W(i,a),a&&S(s),W(l,a)}}}function Pi(t){let e,r,n;return e=new ye({props:{val:t[11],depth:t[4]-1}}),{c(){X(e.$$.fragment),r=ce(" :")},m(i,s){H(e,i,s),x(i,r,s),n=!0},p(i,s){let l={};s&1&&(l.val=i[11]),s&16&&(l.depth=i[4]-1),e.$set(l)},i(i){n||(g(e.$$.fragment,i),n=!0)},o(i){w(e.$$.fragment,i),n=!1},d(i){W(e,i),i&&S(r)}}}function ji(t){let e,r=!Array.isArray(t[0]),n,i,s,l,o,a,u=r&&Pi(t);return s=new ye({props:{val:t[0][t[11]],depth:t[4]-1}}),{c(){e=T("div"),u&&u.c(),n=z(),i=T("div"),X(s.$$.fragment),l=z(),$(i,"class","sublist"),$(e,"class",o=t[13]>0&&"top-border")},m(f,c){x(f,e,c),u&&u.m(e,null),C(e,n),C(e,i),H(s,i,null),C(e,l),a=!0},p(f,c){c&1&&(r=!Array.isArray(f[0])),r?u?(u.p(f,c),c&1&&g(u,1)):(u=Pi(f),u.c(),g(u,1),u.m(e,n)):u&&(te(),w(u,1,1,()=>{u=null}),ne());let d={};c&1&&(d.val=f[0][f[11]]),c&16&&(d.depth=f[4]-1),s.$set(d)},i(f){a||(g(u),g(s.$$.fragment,f),a=!0)},o(f){w(u),w(s.$$.fragment,f),a=!1},d(f){f&&S(e),u&&u.d(),W(s)}}}function Ui(t){let e,r,n,i,s,l,o,a,u;return n=new qe({props:{href:t[7]}}),o=new qe({props:{href:t[0][t[7]]}}),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=z(),s=T("td"),l=T("em"),X(o.$$.fragment),a=z()},m(f,c){x(f,e,c),C(e,r),H(n,r,null),C(e,i),C(e,s),C(s,l),H(o,l,null),C(e,a),u=!0},p(f,c){let d={};c&1&&(d.href=f[7]),n.$set(d);let h={};c&1&&(h.href=f[0][f[7]]),o.$set(h)},i(f){u||(g(n.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){w(n.$$.fragment,f),w(o.$$.fragment,f),u=!1},d(f){f&&S(e),W(n),W(o)}}}function Wi(t){let e,r,n;return r=new qe({props:{href:t[7]}}),{c(){e=T("div"),X(r.$$.fragment)},m(i,s){x(i,e,s),H(r,e,null),n=!0},p(i,s){let l={};s&1&&(l.href=i[7]),r.$set(l)},i(i){n||(g(r.$$.fragment,i),n=!0)},o(i){w(r.$$.fragment,i),n=!1},d(i){i&&S(e),W(r)}}}function Qu(t){let e,r,n,i,s,l=[Zu,Yu,Gu,Xu,Hu,qu,Wu,Uu],o=[];function a(u,f){return f&1&&(e=null),u[0]==null?0:u[4]==0?1:u[1]?2:u[3]?3:(e==null&&(e=!!(Object.values(u[0])||[]).some(Ju)),e?4:u[0].length==null?5:u[0].map?6:7)}return r=a(t,-1),n=o[r]=l[r](t),{c(){n.c(),i=be()},m(u,f){o[r].m(u,f),x(u,i,f),s=!0},p(u,[f]){let c=r;r=a(u,f),r===c?o[r].p(u,f):(te(),w(o[c],1,1,()=>{o[c]=null}),ne(),n=o[r],n?n.p(u,f):(n=o[r]=l[r](u),n.c()),g(n,1),n.m(i.parentNode,i))},i(u){s||(g(n),s=!0)},o(u){w(n),s=!1},d(u){o[r].d(u),u&&S(i)}}}var Ju=t=>typeof t=="object",qi=t=>t?.type||t;function ef(t,e,r){let{items:n}=e,{cols:i=0}=e,{vertical:s=!1}=e,{numberTable:l=!1}=e,{depth:o=2}=e,{sorted:a=!1}=e,u;return t.$$set=f=>{"items"in f&&r(0,n=f.items),"cols"in f&&r(1,i=f.cols),"vertical"in f&&r(2,s=f.vertical),"numberTable"in f&&r(3,l=f.numberTable),"depth"in f&&r(4,o=f.depth),"sorted"in f&&r(6,a=f.sorted)},t.$$.update=()=>{if(t.$$.dirty&65){e:n instanceof Set&&r(0,n=[...n]),r(5,u=a?f=>F.sortStrings(f):f=>f)}},[n,i,s,l,o,u,a]}var Gn=class extends ve{constructor(e){super(),ke(this,e,ef,Qu,ge,{items:0,cols:1,vertical:2,numberTable:3,depth:4,sorted:6})}},He=Gn;function tf(t){let e,r;return e=new xe({props:{s:t[0],simple:t[3],nobr:t[4]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.s=n[0]),i&8&&(s.simple=n[3]),i&16&&(s.nobr=n[4]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function nf(t){let e,r,n,i,s;return r=new xe({props:{s:t[0]}}),{c(){e=T("span"),X(r.$$.fragment),n=T("sup"),n.textContent="?",$(n,"class","tipmark"),$(e,"tooltip",i="tip_"+t[0])},m(l,o){x(l,e,o),H(r,e,null),C(e,n),s=!0},p(l,o){let a={};o&1&&(a.s=l[0]),r.$set(a),(!s||o&1&&i!==(i="tip_"+l[0]))&&$(e,"tooltip",i)},i(l){s||(g(r.$$.fragment,l),s=!0)},o(l){w(r.$$.fragment,l),s=!1},d(l){l&&S(e),W(r)}}}function rf(t){let e,r;return{c(){e=T("img"),Ue(e.src,r=F.sprite(t[0]))||$(e,"src",r),$(e,"alt",t[0]),Ce(e,"max-width","320px")},m(n,i){x(n,e,i)},p(n,i){i&1&&!Ue(e.src,r=F.sprite(n[0]))&&$(e,"src",r),i&1&&$(e,"alt",n[0])},i:ae,o:ae,d(n){n&&S(e)}}}function lf(t){let e,r;return e=new qe({props:{href:t[0]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.href=n[0]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function sf(t){let e,r=t[0].toLocaleString()+"",n;return{c(){e=T("em"),n=ce(r),$(e,"class","num")},m(i,s){x(i,e,s),C(e,n)},p(i,s){s&1&&r!==(r=i[0].toLocaleString()+"")&&Se(n,r)},i:ae,o:ae,d(i){i&&S(e)}}}function of(t){let e,r,n;return r=new xe({props:{s:t[0].toString()}}),{c(){e=T("span"),X(r.$$.fragment),Ce(e,"color",t[0]?"lime":"red")},m(i,s){x(i,e,s),H(r,e,null),n=!0},p(i,s){let l={};s&1&&(l.s=i[0].toString()),r.$set(l),(!n||s&1)&&Ce(e,"color",i[0]?"lime":"red")},i(i){n||(g(r.$$.fragment,i),n=!0)},o(i){w(r.$$.fragment,i),n=!1},d(i){i&&S(e),W(r)}}}function af(t){let e,r;return e=new He({props:{items:t[0]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[0]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function uf(t){let e,r;return e=new He({props:{items:t[0],vertical:!1}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[0]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function ff(t){let e,r;return{c(){e=T("img"),Ue(e.src,r=F.obsSprite(t[1],t[0]))||$(e,"src",r),$(e,"alt",t[0]),Ce(e,"max-width","320px")},m(n,i){x(n,e,i)},p(n,i){i&3&&!Ue(e.src,r=F.obsSprite(n[1],n[0]))&&$(e,"src",r),i&1&&$(e,"alt",n[0])},i:ae,o:ae,d(n){n&&S(e)}}}function cf(t){let e;return{c(){e=ce("\u2012")},m(r,n){x(r,e,n)},p:ae,i:ae,o:ae,d(r){r&&S(e)}}}function df(t){let e;return{c(){e=ce("...")},m(r,n){x(r,e,n)},p:ae,i:ae,o:ae,d(r){r&&S(e)}}}function hf(t){let e,r,n,i,s,l,o,a,u=[df,cf,ff,uf,af,of,sf,lf,rf,nf,tf],f=[];function c(d,h){return h&1&&(e=null),h&1&&(r=null),h&9&&(n=null),h&1&&(i=null),d[2]==0?0:d[0]==null?1:d[1]?2:(e==null&&(e=!!Array.isArray(d[0])),e?3:d[0]instanceof Object?4:d[0]===!0||d[0]===!1?5:(r==null&&(r=!isNaN(+d[0])),r?6:(n==null&&(n=!!(F.article(d[0])&&!d[3])),n?7:(i==null&&(i=!!F.sprite(d[0],!0)),i?8:"tip_"+d[0]in F.lang?9:10))))}return s=c(t,-1),l=f[s]=u[s](t),{c(){l.c(),o=be()},m(d,h){f[s].m(d,h),x(d,o,h),a=!0},p(d,[h]){let p=s;s=c(d,h),s===p?f[s].p(d,h):(te(),w(f[p],1,1,()=>{f[p]=null}),ne(),l=f[s],l?l.p(d,h):(l=f[s]=u[s](d),l.c()),g(l,1),l.m(o.parentNode,o))},i(d){a||(g(l),a=!0)},o(d){w(l),a=!1},d(d){f[s].d(d),d&&S(o)}}}function pf(t,e,r){let{val:n}=e,{obs:i=null}=e,{depth:s=2}=e,{simple:l=!1}=e,{nobr:o=100}=e;return t.$$set=a=>{"val"in a&&r(0,n=a.val),"obs"in a&&r(1,i=a.obs),"depth"in a&&r(2,s=a.depth),"simple"in a&&r(3,l=a.simple),"nobr"in a&&r(4,o=a.nobr)},t.$$.update=()=>{if(t.$$.dirty&3){e:i&&console.log(F.obsSprite(i,n))}},[n,i,s,l,o]}var Yn=class extends ve{constructor(e){super(),ke(this,e,pf,hf,ge,{val:0,obs:1,depth:2,simple:3,nobr:4})}},ye=Yn;function Hi(t,e,r){let n=t.slice();return n[2]=e[r],n[4]=r,n}function Xi(t){let e,r=t[4]==0?"":t[1]?"</br>":", ",n,i,s;return i=new qe({props:{href:t[2]}}),{c(){e=new je(!1),n=z(),X(i.$$.fragment),e.a=n},m(l,o){e.m(r,l,o),x(l,n,o),H(i,l,o),s=!0},p(l,o){(!s||o&2)&&r!==(r=l[4]==0?"":l[1]?"</br>":", ")&&e.p(r);let a={};o&1&&(a.href=l[2]),i.$set(a)},i(l){s||(g(i.$$.fragment,l),s=!0)},o(l){w(i.$$.fragment,l),s=!1},d(l){l&&e.d(),l&&S(n),W(i,l)}}}function mf(t){let e,r,n=t[0],i=[];for(let l=0;l<n.length;l+=1)i[l]=Xi(Hi(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=be()},m(l,o){for(let a=0;a<i.length;a+=1)i[a].m(l,o);x(l,e,o),r=!0},p(l,[o]){if(o&3){n=l[0];let a;for(a=0;a<n.length;a+=1){let u=Hi(l,n,a);i[a]?(i[a].p(u,o),g(i[a],1)):(i[a]=Xi(u),i[a].c(),g(i[a],1),i[a].m(e.parentNode,e))}for(te(),a=n.length;a<i.length;a+=1)s(a);ne()}},i(l){if(!r){for(let o=0;o<n.length;o+=1)g(i[o]);r=!0}},o(l){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);r=!1},d(l){_e(i,l),l&&S(e)}}}function _f(t,e,r){let{items:n}=e,{vertical:i=!1}=e;return t.$$set=s=>{"items"in s&&r(0,n=s.items),"vertical"in s&&r(1,i=s.vertical)},[n,i]}var Zn=class extends ve{constructor(e){super(),ke(this,e,_f,mf,ge,{items:0,vertical:1})}},Kn=Zn;function Gi(t,e,r){let n=t.slice();return n[4]=e[r],n[6]=r,n}function Yi(t){let e;return{c(){e=ce("+")},m(r,n){x(r,e,n)},d(r){r&&S(e)}}}function gf(t){let e=" +",r;return{c(){r=ce(e)},m(n,i){x(n,r,i)},d(n){n&&S(r)}}}function bf(t){let e,r,n=t[4][0]+"",i,s,l=t[4][1]!=1?`\xD7<em>${t[4][1]}</em>`:"";return{c(){e=T("nobr"),r=new je(!1),i=be(),s=new je(!1),r.a=i,s.a=null},m(o,a){x(o,e,a),r.m(n,e),C(e,i),s.m(l,e)},p(o,a){a&2&&n!==(n=o[4][0]+"")&&r.p(n),a&2&&l!==(l=o[4][1]!=1?`\xD7<em>${o[4][1]}</em>`:"")&&s.p(l)},d(o){o&&S(e)}}}function vf(t){let e=t[4][1]+"",r;return{c(){r=ce(e)},m(n,i){x(n,r,i)},p(n,i){i&2&&e!==(e=n[4][1]+"")&&Se(r,e)},d(n){n&&S(r)}}}function kf(t){let e=t[4][1]*100+"",r;return{c(){r=ce(e)},m(n,i){x(n,r,i)},p(n,i){i&2&&e!==(e=n[4][1]*100+"")&&Se(r,e)},d(n){n&&S(r)}}}function Zi(t){let e,r,n=t[6]!=0&&gf(t);function i(o,a){return o[4][2]=="flatHundred"?kf:o[4][2]=="flatOne"?vf:bf}let s=i(t,-1),l=s(t);return{c(){n&&n.c(),e=z(),l.c(),r=be()},m(o,a){n&&n.m(o,a),x(o,e,a),l.m(o,a),x(o,r,a)},p(o,a){s===(s=i(o,a))&&l?l.p(o,a):(l.d(1),l=s(o),l&&(l.c(),l.m(r.parentNode,r)))},d(o){n&&n.d(o),o&&S(e),l.d(o),o&&S(r)}}}function yf(t){let e,r,n=t[1].length>0&&t[0]&&Yi(t),i=t[1],s=[];for(let l=0;l<i.length;l+=1)s[l]=Zi(Gi(t,i,l));return{c(){n&&n.c(),e=z();for(let l=0;l<s.length;l+=1)s[l].c();r=be()},m(l,o){n&&n.m(l,o),x(l,e,o);for(let a=0;a<s.length;a+=1)s[a].m(l,o);x(l,r,o)},p(l,[o]){if(l[1].length>0&&l[0]?n||(n=Yi(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),o&2){i=l[1];let a;for(a=0;a<i.length;a+=1){let u=Gi(l,i,a);s[a]?s[a].p(u,o):(s[a]=Zi(u),s[a].c(),s[a].m(r.parentNode,r))}for(;a<s.length;a+=1)s[a].d(1);s.length=i.length}},i:ae,o:ae,d(l){n&&n.d(l),l&&S(e),_e(s,l),l&&S(r)}}}function wf(t,e,r){let{bonus:n}=e,{plus:i=!1}=e;function s(o){if(!o)return[];let a=[];for(let u of Object.keys(o))if(o[u].length)for(let f in o[u]){let c=o[u][f];c!=0&&(f=f*1+1,a.push([`<a href="##${u}">${F.tr(u)}</a>`+(f==1?"":"<sup>"+f+"</sup>"),c,u]))}else o[u]!=0&&a.push([`<a href="##${u}">${F.tr(u)}</a>`,o[u],u]);return a=a.sort((u,f)=>u[0]=="flatHundred"||u[0]=="flatOne"||u[0]<f[0]?-1:1),a}let l;return t.$$set=o=>{"bonus"in o&&r(2,n=o.bonus),"plus"in o&&r(0,i=o.plus)},t.$$.update=()=>{if(t.$$.dirty&4){e:r(1,l=s(n))}},[i,l,n]}var Vn=class extends ve{constructor(e){super(),ke(this,e,wf,yf,ge,{bonus:2,plus:0})}},_t=Vn;function Ki(t,e,r){let n=t.slice();return n[5]=e[r][0],n[6]=e[r][1],n}function Af(t){let e,r,n,i=F.tr(t[1])+"",s,l,o=F.tr(t[2])+"",a,u,f,c=t[3].all,d=[];for(let p=0;p<c.length;p+=1)d[p]=Qi(Ki(t,c,p));let h=p=>w(d[p],1,1,()=>{d[p]=null});return{c(){e=T("table"),r=T("tr"),n=T("td"),s=ce(i),l=z(),a=ce(o),u=z();for(let p=0;p<d.length;p+=1)d[p].c();$(n,"colspan","2"),$(n,"class","table-header"),$(e,"class","main-table")},m(p,m){x(p,e,m),C(e,r),C(r,n),C(n,s),C(n,l),C(n,a),C(e,u);for(let _=0;_<d.length;_+=1)d[_].m(e,null);f=!0},p(p,m){if((!f||m&2)&&i!==(i=F.tr(p[1])+"")&&Se(s,i),(!f||m&4)&&o!==(o=F.tr(p[2])+"")&&Se(a,o),m&8){c=p[3].all;let _;for(_=0;_<c.length;_+=1){let v=Ki(p,c,_);d[_]?(d[_].p(v,m),g(d[_],1)):(d[_]=Qi(v),d[_].c(),g(d[_],1),d[_].m(e,null))}for(te(),_=c.length;_<d.length;_+=1)h(_);ne()}},i(p){if(!f){for(let m=0;m<c.length;m+=1)g(d[m]);f=!0}},o(p){d=d.filter(Boolean);for(let m=0;m<d.length;m+=1)w(d[m]);f=!1},d(p){p&&S(e),_e(d,p)}}}function Sf(t){let e;return{c(){e=ce("NULL")},m(r,n){x(r,e,n)},p:ae,i:ae,o:ae,d(r){r&&S(e)}}}function Vi(t){let e,r,n,i,s,l,o;return n=new ye({props:{val:t[5]}}),s=new ye({props:{val:t[6]}}),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=T("td"),X(s.$$.fragment),l=z()},m(a,u){x(a,e,u),C(e,r),H(n,r,null),C(e,i),H(s,i,null),C(e,l),o=!0},p(a,u){let f={};u&8&&(f.val=a[5]),n.$set(f);let c={};u&8&&(c.val=a[6]),s.$set(c)},i(a){o||(g(n.$$.fragment,a),g(s.$$.fragment,a),o=!0)},o(a){w(n.$$.fragment,a),w(s.$$.fragment,a),o=!1},d(a){a&&S(e),W(n),W(s)}}}function Qi(t){let e,r,n=t[6]!=[]&&Vi(t);return{c(){n&&n.c(),e=be()},m(i,s){n&&n.m(i,s),x(i,e,s),r=!0},p(i,s){i[6]!=[]?n?(n.p(i,s),s&8&&g(n,1)):(n=Vi(i),n.c(),g(n,1),n.m(e.parentNode,e)):n&&(te(),w(n,1,1,()=>{n=null}),ne())},i(i){r||(g(n),r=!0)},o(i){w(n),r=!1},d(i){n&&n.d(i),i&&S(e)}}}function Cf(t){let e,r,n,i,s=[Sf,Af],l=[];function o(a,u){return a[0]==null?0:1}return e=o(t,-1),r=l[e]=s[e](t),{c(){r.c(),n=be()},m(a,u){l[e].m(a,u),x(a,n,u),i=!0},p(a,[u]){let f=e;e=o(a,u),e===f?l[e].p(a,u):(te(),w(l[f],1,1,()=>{l[f]=null}),ne(),r=l[e],r?r.p(a,u):(r=l[e]=s[e](a),r.c()),g(r,1),r.m(n.parentNode,n))},i(a){i||(g(r),i=!0)},o(a){w(r),i=!1},d(a){l[e].d(a),a&&S(n)}}}function xf(t,e,r){let{entry:n}=e,{sort:i={}}=e,{title:s}=e,{subtitle:l=""}=e,o;return t.$$set=a=>{"entry"in a&&r(0,n=a.entry),"sort"in a&&r(4,i=a.sort),"title"in a&&r(1,s=a.title),"subtitle"in a&&r(2,l=a.subtitle)},t.$$.update=()=>{if(t.$$.dirty&17){e:console.log(n,i),r(3,o=Ne(n,i))}},[n,s,l,o,i]}var Qn=class extends ve{constructor(e){super(),ke(this,e,xf,Cf,ge,{entry:0,sort:4,title:1,subtitle:2})}},Ft=Qn;function Ji(t){let e,r=t[0],n=el(t);return{c(){e=T("div"),n.c(),$(e,"class","illustration")},m(i,s){x(i,e,s),n.m(e,null)},p(i,s){s&1&&ge(r,r=i[0])?(n.d(1),n=el(i),n.c(),n.m(e,null)):n.p(i,s)},d(i){i&&S(e),n.d(i)}}}function el(t){let e,r,n,i,s,l;return{c(){e=T("img"),$(e,"style",r=t[2]+(t[1]?"float:left":"")),$(e,"alt",n=t[0]||""),Ue(e.src,i=F.sprite(t[0]))||$(e,"src",i)},m(o,a){x(o,e,a),s||(l=[Oe(e,"load",t[4]),Oe(e,"error",t[5])],s=!0)},p(o,a){a&6&&r!==(r=o[2]+(o[1]?"float:left":""))&&$(e,"style",r),a&1&&n!==(n=o[0]||"")&&$(e,"alt",n),a&1&&!Ue(e.src,i=F.sprite(o[0]))&&$(e,"src",i)},d(o){o&&S(e),s=!1,Ve(l)}}}function Tf(t){let e=t[0]&&F.sprite(t[0]),r,n=e&&Ji(t);return{c(){n&&n.c(),r=be()},m(i,s){n&&n.m(i,s),x(i,r,s)},p(i,[s]){s&1&&(e=i[0]&&F.sprite(i[0])),e?n?n.p(i,s):(n=Ji(i),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},i:ae,o:ae,d(i){n&&n.d(i),i&&S(r)}}}function Ef(t,e,r){let{id:n}=e,{left:i=!1}=e,{style:s=""}=e;function l(u){u.onerror=null,u.src=Dt,u.style.border="none"}console.log(n);let o=u=>(u.target,void 0),a=u=>l(u.target);return t.$$set=u=>{"id"in u&&r(0,n=u.id),"left"in u&&r(1,i=u.left),"style"in u&&r(2,s=u.style)},[n,i,s,l,o,a]}var Jn=class extends ve{constructor(e){super(),ke(this,e,Ef,Tf,ge,{id:0,left:1,style:2})}},er=Jn;function _l(t){return typeof t>"u"||t===null}function $f(t){return typeof t=="object"&&t!==null}function Of(t){return Array.isArray(t)?t:_l(t)?[]:[t]}function If(t,e){var r,n,i,s;if(e)for(s=Object.keys(e),r=0,n=s.length;r<n;r+=1)i=s[r],t[i]=e[i];return t}function Ff(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Df(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Bf=_l,Lf=$f,Nf=Of,Mf=Ff,Rf=Df,zf=If,Ye={isNothing:Bf,isObject:Lf,toArray:Nf,repeat:Mf,isNegativeZero:Rf,extend:zf};function gl(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Yt(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=gl(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Yt.prototype=Object.create(Error.prototype);Yt.prototype.constructor=Yt;Yt.prototype.toString=function(e){return this.name+": "+gl(this,e)};var tt=Yt;function tr(t,e,r,n,i){var s="",l="",o=Math.floor(i/2)-1;return n-e>o&&(s=" ... ",e=n-o+s.length),r-n>o&&(l=" ...",r=n+o-l.length),{str:s+t.slice(e,r).replace(/\t/g,"\u2192")+l,pos:n-e+s.length}}function nr(t,e){return Ye.repeat(" ",e-t.length)+t}function Pf(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,l=-1;s=r.exec(t.buffer);)i.push(s.index),n.push(s.index+s[0].length),t.position<=s.index&&l<0&&(l=n.length-2);l<0&&(l=n.length-1);var o="",a,u,f=Math.min(t.line+e.linesAfter,i.length).toString().length,c=e.maxLength-(e.indent+f+3);for(a=1;a<=e.linesBefore&&!(l-a<0);a++)u=tr(t.buffer,n[l-a],i[l-a],t.position-(n[l]-n[l-a]),c),o=Ye.repeat(" ",e.indent)+nr((t.line-a+1).toString(),f)+" | "+u.str+`
`+o;for(u=tr(t.buffer,n[l],i[l],t.position,c),o+=Ye.repeat(" ",e.indent)+nr((t.line+1).toString(),f)+" | "+u.str+`
`,o+=Ye.repeat("-",e.indent+f+3+u.pos)+`^
`,a=1;a<=e.linesAfter&&!(l+a>=i.length);a++)u=tr(t.buffer,n[l+a],i[l+a],t.position-(n[l]-n[l+a]),c),o+=Ye.repeat(" ",e.indent)+nr((t.line+a+1).toString(),f)+" | "+u.str+`
`;return o.replace(/\n$/,"")}var jf=Pf,Uf=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Wf=["scalar","sequence","mapping"];function qf(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function Hf(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(Uf.indexOf(r)===-1)throw new tt('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=qf(e.styleAliases||null),Wf.indexOf(this.kind)===-1)throw new tt('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ze=Hf;function tl(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(s,l){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=l)}),r[i]=n}),r}function Xf(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function ir(t){return this.extend(t)}ir.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ze)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new tt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof Ze))throw new tt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new tt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new tt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof Ze))throw new tt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(ir.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=tl(i,"implicit"),i.compiledExplicit=tl(i,"explicit"),i.compiledTypeMap=Xf(i.compiledImplicit,i.compiledExplicit),i};var bl=ir,vl=new Ze("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),kl=new Ze("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),yl=new Ze("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),wl=new bl({explicit:[vl,kl,yl]});function Gf(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Yf(){return null}function Zf(t){return t===null}var Al=new Ze("tag:yaml.org,2002:null",{kind:"scalar",resolve:Gf,construct:Yf,predicate:Zf,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Kf(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Vf(t){return t==="true"||t==="True"||t==="TRUE"}function Qf(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Sl=new Ze("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Kf,construct:Vf,predicate:Qf,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Jf(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function ec(t){return 48<=t&&t<=55}function tc(t){return 48<=t&&t<=57}function nc(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Jf(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!ec(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!tc(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function rc(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function ic(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ye.isNegativeZero(t)}var Cl=new Ze("tag:yaml.org,2002:int",{kind:"scalar",resolve:nc,construct:rc,predicate:ic,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),lc=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function sc(t){return!(t===null||!lc.test(t)||t[t.length-1]==="_")}function oc(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var ac=/^[-+]?[0-9]+e/;function uc(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ye.isNegativeZero(t))return"-0.0";return r=t.toString(10),ac.test(r)?r.replace("e",".e"):r}function fc(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ye.isNegativeZero(t))}var xl=new Ze("tag:yaml.org,2002:float",{kind:"scalar",resolve:sc,construct:oc,predicate:fc,represent:uc,defaultStyle:"lowercase"}),Tl=wl.extend({implicit:[Al,Sl,Cl,xl]}),El=Tl,$l=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ol=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function cc(t){return t===null?!1:$l.exec(t)!==null||Ol.exec(t)!==null}function dc(t){var e,r,n,i,s,l,o,a=0,u=null,f,c,d;if(e=$l.exec(t),e===null&&(e=Ol.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(s=+e[4],l=+e[5],o=+e[6],e[7]){for(a=e[7].slice(0,3);a.length<3;)a+="0";a=+a}return e[9]&&(f=+e[10],c=+(e[11]||0),u=(f*60+c)*6e4,e[9]==="-"&&(u=-u)),d=new Date(Date.UTC(r,n,i,s,l,o,a)),u&&d.setTime(d.getTime()-u),d}function hc(t){return t.toISOString()}var Il=new Ze("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:cc,construct:dc,instanceOf:Date,represent:hc});function pc(t){return t==="<<"||t===null}var Fl=new Ze("tag:yaml.org,2002:merge",{kind:"scalar",resolve:pc}),ur=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function mc(t){if(t===null)return!1;var e,r,n=0,i=t.length,s=ur;for(r=0;r<i;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function _c(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,s=ur,l=0,o=[];for(e=0;e<i;e++)e%4===0&&e&&(o.push(l>>16&255),o.push(l>>8&255),o.push(l&255)),l=l<<6|s.indexOf(n.charAt(e));return r=i%4*6,r===0?(o.push(l>>16&255),o.push(l>>8&255),o.push(l&255)):r===18?(o.push(l>>10&255),o.push(l>>2&255)):r===12&&o.push(l>>4&255),new Uint8Array(o)}function gc(t){var e="",r=0,n,i,s=t.length,l=ur;for(n=0;n<s;n++)n%3===0&&n&&(e+=l[r>>18&63],e+=l[r>>12&63],e+=l[r>>6&63],e+=l[r&63]),r=(r<<8)+t[n];return i=s%3,i===0?(e+=l[r>>18&63],e+=l[r>>12&63],e+=l[r>>6&63],e+=l[r&63]):i===2?(e+=l[r>>10&63],e+=l[r>>4&63],e+=l[r<<2&63],e+=l[64]):i===1&&(e+=l[r>>2&63],e+=l[r<<4&63],e+=l[64],e+=l[64]),e}function bc(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Dl=new Ze("tag:yaml.org,2002:binary",{kind:"scalar",resolve:mc,construct:_c,predicate:bc,represent:gc}),vc=Object.prototype.hasOwnProperty,kc=Object.prototype.toString;function yc(t){if(t===null)return!0;var e=[],r,n,i,s,l,o=t;for(r=0,n=o.length;r<n;r+=1){if(i=o[r],l=!1,kc.call(i)!=="[object Object]")return!1;for(s in i)if(vc.call(i,s))if(!l)l=!0;else return!1;if(!l)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function wc(t){return t!==null?t:[]}var Bl=new Ze("tag:yaml.org,2002:omap",{kind:"sequence",resolve:yc,construct:wc}),Ac=Object.prototype.toString;function Sc(t){if(t===null)return!0;var e,r,n,i,s,l=t;for(s=new Array(l.length),e=0,r=l.length;e<r;e+=1){if(n=l[e],Ac.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[e]=[i[0],n[i[0]]]}return!0}function Cc(t){if(t===null)return[];var e,r,n,i,s,l=t;for(s=new Array(l.length),e=0,r=l.length;e<r;e+=1)n=l[e],i=Object.keys(n),s[e]=[i[0],n[i[0]]];return s}var Ll=new Ze("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Sc,construct:Cc}),xc=Object.prototype.hasOwnProperty;function Tc(t){if(t===null)return!0;var e,r=t;for(e in r)if(xc.call(r,e)&&r[e]!==null)return!1;return!0}function Ec(t){return t!==null?t:{}}var Nl=new Ze("tag:yaml.org,2002:set",{kind:"mapping",resolve:Tc,construct:Ec}),fr=El.extend({implicit:[Il,Fl],explicit:[Dl,Bl,Ll,Nl]}),bt=Object.prototype.hasOwnProperty,hn=1,Ml=2,Rl=3,pn=4,rr=1,$c=2,nl=3,Oc=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ic=/[\x85\u2028\u2029]/,Fc=/[,\[\]\{\}]/,zl=/^(?:!|!!|![a-z\-]+!)$/i,Pl=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function rl(t){return Object.prototype.toString.call(t)}function ut(t){return t===10||t===13}function xt(t){return t===9||t===32}function rt(t){return t===9||t===32||t===10||t===13}function Lt(t){return t===44||t===91||t===93||t===123||t===125}function Dc(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function Bc(t){return t===120?2:t===117?4:t===85?8:0}function Lc(t){return 48<=t&&t<=57?t-48:-1}function il(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function Nc(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var jl=new Array(256),Ul=new Array(256);for(Ct=0;Ct<256;Ct++)jl[Ct]=il(Ct)?1:0,Ul[Ct]=il(Ct);var Ct;function Mc(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||fr,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Wl(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=jf(r),new tt(e,r)}function Ae(t,e){throw Wl(t,e)}function mn(t,e){t.onWarning&&t.onWarning.call(null,Wl(t,e))}var ll={YAML:function(e,r,n){var i,s,l;e.version!==null&&Ae(e,"duplication of %YAML directive"),n.length!==1&&Ae(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&Ae(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),l=parseInt(i[2],10),s!==1&&Ae(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=l<2,l!==1&&l!==2&&mn(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,s;n.length!==2&&Ae(e,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],zl.test(i)||Ae(e,"ill-formed tag handle (first argument) of the TAG directive"),bt.call(e.tagMap,i)&&Ae(e,'there is a previously declared suffix for "'+i+'" tag handle'),Pl.test(s)||Ae(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{Ae(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s}};function gt(t,e,r,n){var i,s,l,o;if(e<r){if(o=t.input.slice(e,r),n)for(i=0,s=o.length;i<s;i+=1)l=o.charCodeAt(i),l===9||32<=l&&l<=1114111||Ae(t,"expected valid JSON character");else Oc.test(o)&&Ae(t,"the stream contains non-printable characters");t.result+=o}}function sl(t,e,r,n){var i,s,l,o;for(Ye.isObject(r)||Ae(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),l=0,o=i.length;l<o;l+=1)s=i[l],bt.call(e,s)||(e[s]=r[s],n[s]=!0)}function Nt(t,e,r,n,i,s,l,o,a){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&Ae(t,"nested arrays are not supported inside keys"),typeof i=="object"&&rl(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&rl(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,f=s.length;u<f;u+=1)sl(t,e,s[u],r);else sl(t,e,s,r);else!t.json&&!bt.call(r,i)&&bt.call(e,i)&&(t.line=l||t.line,t.lineStart=o||t.lineStart,t.position=a||t.position,Ae(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete r[i];return e}function cr(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Ae(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Ge(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;xt(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(ut(i))for(cr(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&mn(t,"deficient indentation"),n}function bn(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||rt(r)))}function dr(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ye.repeat(`
`,e-1))}function Rc(t,e,r){var n,i,s,l,o,a,u,f,c=t.kind,d=t.result,h;if(h=t.input.charCodeAt(t.position),rt(h)||Lt(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),rt(i)||r&&Lt(i)))return!1;for(t.kind="scalar",t.result="",s=l=t.position,o=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),rt(i)||r&&Lt(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),rt(n))break}else{if(t.position===t.lineStart&&bn(t)||r&&Lt(h))break;if(ut(h))if(a=t.line,u=t.lineStart,f=t.lineIndent,Ge(t,!1,-1),t.lineIndent>=e){o=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=l,t.line=a,t.lineStart=u,t.lineIndent=f;break}}o&&(gt(t,s,l,!1),dr(t,t.line-a),s=l=t.position,o=!1),xt(h)||(l=t.position+1),h=t.input.charCodeAt(++t.position)}return gt(t,s,l,!1),t.result?!0:(t.kind=c,t.result=d,!1)}function zc(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(gt(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else ut(r)?(gt(t,n,i,!0),dr(t,Ge(t,!1,e)),n=i=t.position):t.position===t.lineStart&&bn(t)?Ae(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Ae(t,"unexpected end of the stream within a single quoted scalar")}function Pc(t,e){var r,n,i,s,l,o;if(o=t.input.charCodeAt(t.position),o!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return gt(t,r,t.position,!0),t.position++,!0;if(o===92){if(gt(t,r,t.position,!0),o=t.input.charCodeAt(++t.position),ut(o))Ge(t,!1,e);else if(o<256&&jl[o])t.result+=Ul[o],t.position++;else if((l=Bc(o))>0){for(i=l,s=0;i>0;i--)o=t.input.charCodeAt(++t.position),(l=Dc(o))>=0?s=(s<<4)+l:Ae(t,"expected hexadecimal character");t.result+=Nc(s),t.position++}else Ae(t,"unknown escape sequence");r=n=t.position}else ut(o)?(gt(t,r,n,!0),dr(t,Ge(t,!1,e)),r=n=t.position):t.position===t.lineStart&&bn(t)?Ae(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}Ae(t,"unexpected end of the stream within a double quoted scalar")}function jc(t,e){var r=!0,n,i,s,l=t.tag,o,a=t.anchor,u,f,c,d,h,p=Object.create(null),m,_,v,y;if(y=t.input.charCodeAt(t.position),y===91)f=93,h=!1,o=[];else if(y===123)f=125,h=!0,o={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),y=t.input.charCodeAt(++t.position);y!==0;){if(Ge(t,!0,e),y=t.input.charCodeAt(t.position),y===f)return t.position++,t.tag=l,t.anchor=a,t.kind=h?"mapping":"sequence",t.result=o,!0;r?y===44&&Ae(t,"expected the node content, but found ','"):Ae(t,"missed comma between flow collection entries"),_=m=v=null,c=d=!1,y===63&&(u=t.input.charCodeAt(t.position+1),rt(u)&&(c=d=!0,t.position++,Ge(t,!0,e))),n=t.line,i=t.lineStart,s=t.position,Mt(t,e,hn,!1,!0),_=t.tag,m=t.result,Ge(t,!0,e),y=t.input.charCodeAt(t.position),(d||t.line===n)&&y===58&&(c=!0,y=t.input.charCodeAt(++t.position),Ge(t,!0,e),Mt(t,e,hn,!1,!0),v=t.result),h?Nt(t,o,p,_,m,v,n,i,s):c?o.push(Nt(t,null,p,_,m,v,n,i,s)):o.push(m),Ge(t,!0,e),y=t.input.charCodeAt(t.position),y===44?(r=!0,y=t.input.charCodeAt(++t.position)):r=!1}Ae(t,"unexpected end of the stream within a flow collection")}function Uc(t,e){var r,n,i=rr,s=!1,l=!1,o=e,a=0,u=!1,f,c;if(c=t.input.charCodeAt(t.position),c===124)n=!1;else if(c===62)n=!0;else return!1;for(t.kind="scalar",t.result="";c!==0;)if(c=t.input.charCodeAt(++t.position),c===43||c===45)rr===i?i=c===43?nl:$c:Ae(t,"repeat of a chomping mode identifier");else if((f=Lc(c))>=0)f===0?Ae(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?Ae(t,"repeat of an indentation width identifier"):(o=e+f-1,l=!0);else break;if(xt(c)){do c=t.input.charCodeAt(++t.position);while(xt(c));if(c===35)do c=t.input.charCodeAt(++t.position);while(!ut(c)&&c!==0)}for(;c!==0;){for(cr(t),t.lineIndent=0,c=t.input.charCodeAt(t.position);(!l||t.lineIndent<o)&&c===32;)t.lineIndent++,c=t.input.charCodeAt(++t.position);if(!l&&t.lineIndent>o&&(o=t.lineIndent),ut(c)){a++;continue}if(t.lineIndent<o){i===nl?t.result+=Ye.repeat(`
`,s?1+a:a):i===rr&&s&&(t.result+=`
`);break}for(n?xt(c)?(u=!0,t.result+=Ye.repeat(`
`,s?1+a:a)):u?(u=!1,t.result+=Ye.repeat(`
`,a+1)):a===0?s&&(t.result+=" "):t.result+=Ye.repeat(`
`,a):t.result+=Ye.repeat(`
`,s?1+a:a),s=!0,l=!0,a=0,r=t.position;!ut(c)&&c!==0;)c=t.input.charCodeAt(++t.position);gt(t,r,t.position,!1)}return!0}function ol(t,e){var r,n=t.tag,i=t.anchor,s=[],l,o=!1,a;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),a=t.input.charCodeAt(t.position);a!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Ae(t,"tab characters must not be used in indentation")),!(a!==45||(l=t.input.charCodeAt(t.position+1),!rt(l))));){if(o=!0,t.position++,Ge(t,!0,-1)&&t.lineIndent<=e){s.push(null),a=t.input.charCodeAt(t.position);continue}if(r=t.line,Mt(t,e,Rl,!1,!0),s.push(t.result),Ge(t,!0,-1),a=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&a!==0)Ae(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return o?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}function Wc(t,e,r){var n,i,s,l,o,a,u=t.tag,f=t.anchor,c={},d=Object.create(null),h=null,p=null,m=null,_=!1,v=!1,y;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),y=t.input.charCodeAt(t.position);y!==0;){if(!_&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Ae(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),s=t.line,(y===63||y===58)&&rt(n))y===63?(_&&(Nt(t,c,d,h,p,null,l,o,a),h=p=m=null),v=!0,_=!0,i=!0):_?(_=!1,i=!0):Ae(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,y=n;else{if(l=t.line,o=t.lineStart,a=t.position,!Mt(t,r,Ml,!1,!0))break;if(t.line===s){for(y=t.input.charCodeAt(t.position);xt(y);)y=t.input.charCodeAt(++t.position);if(y===58)y=t.input.charCodeAt(++t.position),rt(y)||Ae(t,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(Nt(t,c,d,h,p,null,l,o,a),h=p=m=null),v=!0,_=!1,i=!1,h=t.tag,p=t.result;else if(v)Ae(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=f,!0}else if(v)Ae(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=f,!0}if((t.line===s||t.lineIndent>e)&&(_&&(l=t.line,o=t.lineStart,a=t.position),Mt(t,e,pn,!0,i)&&(_?p=t.result:m=t.result),_||(Nt(t,c,d,h,p,m,l,o,a),h=p=m=null),Ge(t,!0,-1),y=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&y!==0)Ae(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return _&&Nt(t,c,d,h,p,null,l,o,a),v&&(t.tag=u,t.anchor=f,t.kind="mapping",t.result=c),v}function qc(t){var e,r=!1,n=!1,i,s,l;if(l=t.input.charCodeAt(t.position),l!==33)return!1;if(t.tag!==null&&Ae(t,"duplication of a tag property"),l=t.input.charCodeAt(++t.position),l===60?(r=!0,l=t.input.charCodeAt(++t.position)):l===33?(n=!0,i="!!",l=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do l=t.input.charCodeAt(++t.position);while(l!==0&&l!==62);t.position<t.length?(s=t.input.slice(e,t.position),l=t.input.charCodeAt(++t.position)):Ae(t,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!rt(l);)l===33&&(n?Ae(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),zl.test(i)||Ae(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),l=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),Fc.test(s)&&Ae(t,"tag suffix cannot contain flow indicator characters")}s&&!Pl.test(s)&&Ae(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{Ae(t,"tag name is malformed: "+s)}return r?t.tag=s:bt.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:Ae(t,'undeclared tag handle "'+i+'"'),!0}function Hc(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&Ae(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!rt(r)&&!Lt(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Ae(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Xc(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!rt(n)&&!Lt(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Ae(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),bt.call(t.anchorMap,r)||Ae(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Ge(t,!0,-1),!0}function Mt(t,e,r,n,i){var s,l,o,a=1,u=!1,f=!1,c,d,h,p,m,_;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=l=o=pn===r||Rl===r,n&&Ge(t,!0,-1)&&(u=!0,t.lineIndent>e?a=1:t.lineIndent===e?a=0:t.lineIndent<e&&(a=-1)),a===1)for(;qc(t)||Hc(t);)Ge(t,!0,-1)?(u=!0,o=s,t.lineIndent>e?a=1:t.lineIndent===e?a=0:t.lineIndent<e&&(a=-1)):o=!1;if(o&&(o=u||i),(a===1||pn===r)&&(hn===r||Ml===r?m=e:m=e+1,_=t.position-t.lineStart,a===1?o&&(ol(t,_)||Wc(t,_,m))||jc(t,m)?f=!0:(l&&Uc(t,m)||zc(t,m)||Pc(t,m)?f=!0:Xc(t)?(f=!0,(t.tag!==null||t.anchor!==null)&&Ae(t,"alias node should not have any properties")):Rc(t,m,hn===r)&&(f=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):a===0&&(f=o&&ol(t,_))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Ae(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),c=0,d=t.implicitTypes.length;c<d;c+=1)if(p=t.implicitTypes[c],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(bt.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,h=t.typeMap.multi[t.kind||"fallback"],c=0,d=h.length;c<d;c+=1)if(t.tag.slice(0,h[c].tag.length)===h[c].tag){p=h[c];break}p||Ae(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&Ae(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Ae(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||f}function Gc(t){var e=t.position,r,n,i,s=!1,l;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(l=t.input.charCodeAt(t.position))!==0&&(Ge(t,!0,-1),l=t.input.charCodeAt(t.position),!(t.lineIndent>0||l!==37));){for(s=!0,l=t.input.charCodeAt(++t.position),r=t.position;l!==0&&!rt(l);)l=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&Ae(t,"directive name must not be less than one character in length");l!==0;){for(;xt(l);)l=t.input.charCodeAt(++t.position);if(l===35){do l=t.input.charCodeAt(++t.position);while(l!==0&&!ut(l));break}if(ut(l))break;for(r=t.position;l!==0&&!rt(l);)l=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}l!==0&&cr(t),bt.call(ll,n)?ll[n](t,n,i):mn(t,'unknown document directive "'+n+'"')}if(Ge(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ge(t,!0,-1)):s&&Ae(t,"directives end mark is expected"),Mt(t,t.lineIndent-1,pn,!1,!0),Ge(t,!0,-1),t.checkLineBreaks&&Ic.test(t.input.slice(e,t.position))&&mn(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&bn(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ge(t,!0,-1));return}if(t.position<t.length-1)Ae(t,"end of the stream or a document separator is expected");else return}function ql(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new Mc(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,Ae(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Gc(r);return r.documents}function Yc(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=ql(t,r);if(typeof e!="function")return n;for(var i=0,s=n.length;i<s;i+=1)e(n[i])}function Zc(t,e){var r=ql(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new tt("expected a single document in the stream, but found more")}}var Kc=Yc,Vc=Zc,Hl={loadAll:Kc,load:Vc},Xl=Object.prototype.toString,Gl=Object.prototype.hasOwnProperty,hr=65279,Qc=9,Zt=10,Jc=13,ed=32,td=33,nd=34,lr=35,rd=37,id=38,ld=39,sd=42,Yl=44,od=45,_n=58,ad=61,ud=62,fd=63,cd=64,Zl=91,Kl=93,dd=96,Vl=123,hd=124,Ql=125,Qe={};Qe[0]="\\0";Qe[7]="\\a";Qe[8]="\\b";Qe[9]="\\t";Qe[10]="\\n";Qe[11]="\\v";Qe[12]="\\f";Qe[13]="\\r";Qe[27]="\\e";Qe[34]='\\"';Qe[92]="\\\\";Qe[133]="\\N";Qe[160]="\\_";Qe[8232]="\\L";Qe[8233]="\\P";var pd=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],md=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function _d(t,e){var r,n,i,s,l,o,a;if(e===null)return{};for(r={},n=Object.keys(e),i=0,s=n.length;i<s;i+=1)l=n[i],o=String(e[l]),l.slice(0,2)==="!!"&&(l="tag:yaml.org,2002:"+l.slice(2)),a=t.compiledTypeMap.fallback[l],a&&Gl.call(a.styleAliases,o)&&(o=a.styleAliases[o]),r[l]=o;return r}function gd(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new tt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Ye.repeat("0",n-e.length)+e}var bd=1,Kt=2;function vd(t){this.schema=t.schema||fr,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Ye.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=_d(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Kt:bd,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function al(t,e){for(var r=Ye.repeat(" ",e),n=0,i=-1,s="",l,o=t.length;n<o;)i=t.indexOf(`
`,n),i===-1?(l=t.slice(n),n=o):(l=t.slice(n,i+1),n=i+1),l.length&&l!==`
`&&(s+=r),s+=l;return s}function sr(t,e){return`
`+Ye.repeat(" ",t.indent*e)}function kd(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function gn(t){return t===ed||t===Qc}function Vt(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==hr||65536<=t&&t<=1114111}function ul(t){return Vt(t)&&t!==hr&&t!==Jc&&t!==Zt}function fl(t,e,r){var n=ul(t),i=n&&!gn(t);return(r?n:n&&t!==Yl&&t!==Zl&&t!==Kl&&t!==Vl&&t!==Ql)&&t!==lr&&!(e===_n&&!i)||ul(e)&&!gn(e)&&t===lr||e===_n&&i}function yd(t){return Vt(t)&&t!==hr&&!gn(t)&&t!==od&&t!==fd&&t!==_n&&t!==Yl&&t!==Zl&&t!==Kl&&t!==Vl&&t!==Ql&&t!==lr&&t!==id&&t!==sd&&t!==td&&t!==hd&&t!==ad&&t!==ud&&t!==ld&&t!==nd&&t!==rd&&t!==cd&&t!==dd}function wd(t){return!gn(t)&&t!==_n}function Gt(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Jl(t){var e=/^\n* /;return e.test(t)}var es=1,or=2,ts=3,ns=4,Bt=5;function Ad(t,e,r,n,i,s,l,o){var a,u=0,f=null,c=!1,d=!1,h=n!==-1,p=-1,m=yd(Gt(t,0))&&wd(Gt(t,t.length-1));if(e||l)for(a=0;a<t.length;u>=65536?a+=2:a++){if(u=Gt(t,a),!Vt(u))return Bt;m=m&&fl(u,f,o),f=u}else{for(a=0;a<t.length;u>=65536?a+=2:a++){if(u=Gt(t,a),u===Zt)c=!0,h&&(d=d||a-p-1>n&&t[p+1]!==" ",p=a);else if(!Vt(u))return Bt;m=m&&fl(u,f,o),f=u}d=d||h&&a-p-1>n&&t[p+1]!==" "}return!c&&!d?m&&!l&&!i(t)?es:s===Kt?Bt:or:r>9&&Jl(t)?Bt:l?s===Kt?Bt:or:d?ns:ts}function Sd(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Kt?'""':"''";if(!t.noCompatMode&&(pd.indexOf(e)!==-1||md.test(e)))return t.quotingType===Kt?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),l=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),o=n||t.flowLevel>-1&&r>=t.flowLevel;function a(u){return kd(t,u)}switch(Ad(e,o,t.indent,l,a,t.quotingType,t.forceQuotes&&!n,i)){case es:return e;case or:return"'"+e.replace(/'/g,"''")+"'";case ts:return"|"+cl(e,t.indent)+dl(al(e,s));case ns:return">"+cl(e,t.indent)+dl(al(Cd(e,l),s));case Bt:return'"'+xd(e)+'"';default:throw new tt("impossible error: invalid scalar style")}}()}function cl(t,e){var r=Jl(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),s=i?"+":n?"":"-";return r+s+`
`}function dl(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function Cd(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,hl(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",s,l;l=r.exec(t);){var o=l[1],a=l[2];s=a[0]===" ",n+=o+(!i&&!s&&a!==""?`
`:"")+hl(a,e),i=s}return n}function hl(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,s,l=0,o=0,a="";n=r.exec(t);)o=n.index,o-i>e&&(s=l>i?l:o,a+=`
`+t.slice(i,s),i=s+1),l=o;return a+=`
`,t.length-i>e&&l>i?a+=t.slice(i,l)+`
`+t.slice(l+1):a+=t.slice(i),a.slice(1)}function xd(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Gt(t,i),n=Qe[r],!n&&Vt(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||gd(r);return e}function Td(t,e,r){var n="",i=t.tag,s,l,o;for(s=0,l=r.length;s<l;s+=1)o=r[s],t.replacer&&(o=t.replacer.call(r,String(s),o)),(ct(t,e,o,!1,!1)||typeof o>"u"&&ct(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function pl(t,e,r,n){var i="",s=t.tag,l,o,a;for(l=0,o=r.length;l<o;l+=1)a=r[l],t.replacer&&(a=t.replacer.call(r,String(l),a)),(ct(t,e+1,a,!0,!0,!1,!0)||typeof a>"u"&&ct(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=sr(t,e)),t.dump&&Zt===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}function Ed(t,e,r){var n="",i=t.tag,s=Object.keys(r),l,o,a,u,f;for(l=0,o=s.length;l<o;l+=1)f="",n!==""&&(f+=", "),t.condenseFlow&&(f+='"'),a=s[l],u=r[a],t.replacer&&(u=t.replacer.call(r,a,u)),ct(t,e,a,!1,!1)&&(t.dump.length>1024&&(f+="? "),f+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),ct(t,e,u,!1,!1)&&(f+=t.dump,n+=f));t.tag=i,t.dump="{"+n+"}"}function $d(t,e,r,n){var i="",s=t.tag,l=Object.keys(r),o,a,u,f,c,d;if(t.sortKeys===!0)l.sort();else if(typeof t.sortKeys=="function")l.sort(t.sortKeys);else if(t.sortKeys)throw new tt("sortKeys must be a boolean or a function");for(o=0,a=l.length;o<a;o+=1)d="",(!n||i!=="")&&(d+=sr(t,e)),u=l[o],f=r[u],t.replacer&&(f=t.replacer.call(r,u,f)),ct(t,e+1,u,!0,!0,!0)&&(c=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,c&&(t.dump&&Zt===t.dump.charCodeAt(0)?d+="?":d+="? "),d+=t.dump,c&&(d+=sr(t,e)),ct(t,e+1,f,!0,c)&&(t.dump&&Zt===t.dump.charCodeAt(0)?d+=":":d+=": ",d+=t.dump,i+=d));t.tag=s,t.dump=i||"{}"}function ml(t,e,r){var n,i,s,l,o,a;for(i=r?t.explicitTypes:t.implicitTypes,s=0,l=i.length;s<l;s+=1)if(o=i[s],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof e=="object"&&e instanceof o.instanceOf)&&(!o.predicate||o.predicate(e))){if(r?o.multi&&o.representName?t.tag=o.representName(e):t.tag=o.tag:t.tag="?",o.represent){if(a=t.styleMap[o.tag]||o.defaultStyle,Xl.call(o.represent)==="[object Function]")n=o.represent(e,a);else if(Gl.call(o.represent,a))n=o.represent[a](e,a);else throw new tt("!<"+o.tag+'> tag resolver accepts not "'+a+'" style');t.dump=n}return!0}return!1}function ct(t,e,r,n,i,s,l){t.tag=null,t.dump=r,ml(t,r,!1)||ml(t,r,!0);var o=Xl.call(t.dump),a=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var f=o==="[object Object]"||o==="[object Array]",c,d;if(f&&(c=t.duplicates.indexOf(r),d=c!==-1),(t.tag!==null&&t.tag!=="?"||d||t.indent!==2&&e>0)&&(i=!1),d&&t.usedDuplicates[c])t.dump="*ref_"+c;else{if(f&&d&&!t.usedDuplicates[c]&&(t.usedDuplicates[c]=!0),o==="[object Object]")n&&Object.keys(t.dump).length!==0?($d(t,e,t.dump,i),d&&(t.dump="&ref_"+c+t.dump)):(Ed(t,e,t.dump),d&&(t.dump="&ref_"+c+" "+t.dump));else if(o==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!l&&e>0?pl(t,e-1,t.dump,i):pl(t,e,t.dump,i),d&&(t.dump="&ref_"+c+t.dump)):(Td(t,e,t.dump),d&&(t.dump="&ref_"+c+" "+t.dump));else if(o==="[object String]")t.tag!=="?"&&Sd(t,t.dump,e,s,a);else{if(o==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new tt("unacceptable kind of an object to dump "+o)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function Od(t,e){var r=[],n=[],i,s;for(ar(t,r,n),i=0,s=n.length;i<s;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(s)}function ar(t,e,r){var n,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)ar(t[i],e,r);else for(n=Object.keys(t),i=0,s=n.length;i<s;i+=1)ar(t[n[i]],e,r)}function Id(t,e){e=e||{};var r=new vd(e);r.noRefs||Od(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),ct(r,0,n,!0,!0)?r.dump+`
`:""}var Fd=Id,Dd={dump:Fd};function pr(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Bd=Ze,Ld=bl,Nd=wl,Md=Tl,Rd=El,zd=fr,Pd=Hl.load,jd=Hl.loadAll,Ud=Dd.dump,Wd=tt,qd={binary:Dl,float:xl,map:yl,null:Al,pairs:Ll,set:Nl,timestamp:Il,bool:Sl,int:Cl,merge:Fl,omap:Bl,seq:kl,str:vl},Hd=pr("safeLoad","load"),Xd=pr("safeLoadAll","loadAll"),Gd=pr("safeDump","dump"),Yd={Type:Bd,Schema:Ld,FAILSAFE_SCHEMA:Nd,JSON_SCHEMA:Md,CORE_SCHEMA:Rd,DEFAULT_SCHEMA:zd,load:Pd,loadAll:jd,dump:Ud,YAMLException:Wd,types:qd,safeLoad:Hd,safeLoadAll:Xd,safeDump:Gd},rs=Yd;async function vn(t){let e;try{e=await(await fetch(t)).text(),at.update(r=>r+" "+t)}catch(r){return console.error(r),null}return e}async function Qt(t){let e=await vn(t);return is(e,t)}function is(t,e){try{return rs.load(t,{json:!0,filename:e,onWarning:r=>{console.error(r.message)}})}catch(r){console.error(r.message)}}var Zd=/<\s*a[^>]*>(.*?)<\s*\/\s*a>/gi;async function Jt(t,e=!1){let r=await vn(t),n,i=[];for(;n=Zd.exec(r);)n[1]!="../"&&i.push(e?t+n[1]:n[1]);return i}function ls(t,e){var r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}async function mr(t){return(await fetch(t)).text()}function _r(t){return new Promise(e=>setTimeout(e,t))}function ss(t){var e=t.replace(/([A-Z])/g," $1");return e.split(" ").join("_").toLowerCase()}function os(t){return t.toUpperCase()}function gr(t){return t.substring(t.length-1)=="s"?t.substring(0,t.length-1):t}var kr=In(us());async function Kd(t){return t=await(await new kr.default().loadAsync(t,{base64:!0})).file("main").async("string"),t}async function fs(t){let e=new kr.default;return e.file("main",t),e.generateAsync({type:"base64",compression:"DEFLATE",compressionOptions:{level:6}})}var vr="/",Vd="";async function Qd(){let t=window.xpedia;if(t!=null){let e=await Kd(t);return JSON.parse(e)}}async function cs(){let[t,e,r]=await Promise.all([Qt(`${vr}user/options.cfg`),Jt(`${vr}user/mods/`,!0),Jt(`${Vd}mods/`,!0)]);e=[`${vr}standard/xcom1/`,...e];let n=[...e,...r],i={},s=await Promise.all(n.map(h=>Qt(`${h}/metadata.yml`)));for(let h in s){let p=s[h],m=n[h];i[p.id]={...p,dir:m}}let l=["xcom1",...t.mods.filter(h=>h.active).map(h=>h.id)],o=Object.keys(i).filter(h=>{let p=i[h];return(p.master==null||l.includes(p.master))&&r.includes(p.dir)});l=[...l,...o];let a=t.options.language,u=l.map(h=>i[h]);for(let h of u)h.rulDir=h.id=="xcom1"?h.dir:`${h.dir}Ruleset/`;u.map(h=>`${h.dir}Language/`).splice(1,0,"/standard/xcom1/Language/OXCE/");let[c,d]=await Promise.all([th(u),eh(u.map(h=>`${h.dir}Language/`))]);return{ruls:c,langs:d,mods:u}}var Jd=/^(.+)\.([0-9a-z\-]+)?$/i;function kn(t){let e=t.match(Jd);return e?{body:e[1],ext:e[2]}:{body:t,ext:""}}async function eh(t){let r=(await Promise.all(t.map(s=>Jt(s)))).map((s,l)=>s.filter(o=>["yml","html","txt"].includes(kn(o).ext)).map(o=>({lname:o,dir:t[l]}))).flat(),n={},i=await Promise.all(r.map(s=>{let l=`${s.dir}${s.lname}`;return kn(s.lname).ext=="yml"?Qt(l):vn(l)}));for(let s in i){let l=i[s],o=r[s].lname;if(typeof l=="object"){let a=Object.keys(l)[0];n[a]={...n[a]||{},...l[a]}}else{let a=kn(o);if(a.ext!="yml"){let u=kn(a.body);n[u.ext]=n[u.ext]||{},n[u.ext][u.body]=l}}}return n}async function th(t){let e=await Promise.all(t.map(s=>Jt(s.rulDir)));e=e.map(s=>s.filter(l=>l.substr(-4)==".rul"));let r=[];for(let s in t)r[s]=e[s].map(l=>({mod:t[s].id,path:`${t[s].rulDir}${l}`,modDir:t[s].dir}));let n=r.flat(1);return await Promise.all(n.map(async s=>({...await Qt(s.path),file:s})))}function yn(t){return new Promise(e=>{let r=indexedDB.open("xpedia",1);r.onupgradeneeded=()=>{let i=r.result.createObjectStore("cache",{keyPath:"id"})},r.onsuccess=()=>{let n=r.result,i=n.transaction("cache","readwrite"),s=i.objectStore("cache");if(t=="load"){let l=s.get(1);l.onsuccess=()=>{let o=l.result?.data;e(o?JSON.parse(o):null)}}else t=="wipe"?s.delete(1):s.put({id:1,data:JSON.stringify(t)}),e([]);i.oncomplete=()=>{n.close()}}})}var Rt;async function ds(t){at.set("loading from js");let e=await Qd();e?(Rt=!0,at.set(""),await _r(10)):(at.set("loading from cache"),e=await yn("load"),e||(at.set("loading from local files"),e=await cs(),yn(e))),at.update(r=>r+" parsing"),t.load(e),await _r(10)}var It=t=>F.tr(t),lt=(t,{vertical:e,cols:r}={vertical:!1,cols:0})=>t==0?"":e?"</br>":`<span class='list-divider'>&nbsp\xB7${t%(r||1)?"&nbsp":" "}</span>`,Dt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNv1OCegAAAANSURBVBhXY/j//z8DAAj8Av6IXwbgAAAAAElFTkSuQmCC",yr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMAUExURQAAAAMDAwMJCAgICAoKCg0NDQoTEQoTEgsUEg0XFQ0aGR4eHg0tKxMlIhUoJhgoKQ4zLw42LxUyLxcyLw45Mw45NRY0MBowMB81NxI9ORM/OBg+Ox8+OiEzMiE0NCA9PC89OjU2Nj09PRZDPRRFPR9BPBxEPSxCPxdEQRlFQhNLQhVKQxRMRBdPRR1MRh5ORx5VTiRKRCRKRihNSShOSDhHRDJIRTVLSDdOSjtKSD5KSiJVTClXTShVTzdTTSlXUCpWUSpXUCNbVCddVS9aUitfVyxcVz1SUDBYUiNhWStmXipuYThmYzdoYDdqYzl1az13bzV7ckVJSEBWUUNXU0hVVUBZV0JcWE9dXU5jW0pgXkZkYE1kYU1kYEZsZFBjYVBjYklwak51bUJ9dF91c1d4clt5dFp6dVt7dl55dF98eGBoaGZoaGhvbW1tbWdwb2J1b2Vyc2J6eWZ5eGN/e2h5eD2CeUGBd2aBfUiMgkOQg02Sh0qViU+ViUabi02Yjl6UjVabjVKfkWKFgGGLhX+AgH+KiWOakmick0ypm1WgklGhlFKpnFKrnlGwn1OvoFauoVWzpFaypVmwpFe8rlu5qW6xpmG8q2u5q265rX+2q1rBs17Jt1vLvF/NvVzPvGTDtmDHtmDIt2LIt2fJt2bLtmLGuGHHumXFuWbFumjHuW7FumHJuGHJuGPIuGDKuWPLuWPJu2DKumDKu2PKumLLumPLumPLu2XJuWXLuWXLu2TKumHNuWHNumDNu2PMu2TMu2XNu2HJvGPLvWLLvGPLvmXJvWXKvWbKvWfIvmHNvWHMvGHMvWLNvWLMvWPMvWPNvmfPvWnIumrJu2/Iu2jJvW7Lv2vMvWjOvGjNv2vNvm/MvW/Mv3LOv27QvmbPwG/RwnDSwnXSwX/Sx3rWyoePjYiMi4mSkJSXl5qfn6KlpIbDu4LEuYrIvYHSxIPTx4LUx47UyYrVzYPZyonYy5re08zMzMvQz9Hb2drf39rg39rh4N7k5ODj4uvs7AAAAOGYdbwAAAEAdFJOU////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wBT9wclAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACCElEQVQ4T2P4TwCQpCA3pSIrPaMkPhvKBwOEAqvUt1/u3rp86fqjaXFQIRBAKGh4d2PnruPnzp08fnijClQMCOAKmj9snbf3zJnz5/fsurppiQRUFElBx61t+85DwZ6F0lBRJAVvNqzZD5U/f2qzF1QUpiAvL8jOxMPe3t7R0dHGwdbFRCYvLw8sA1XAyvD3lSIDEHAZqoIohp/c36BmwyilP79ZgBJG5ycBScZfzP9gdsPpl63fgVJHzh/hZWDIefEDJg5X8IwjmJOd/dKx8+d3sLNxhjBBhREK/ieuX75r8/lz589fmLd9QZ04VBRJwf8Z83dfOA9UcfzsugmuUDEgQCiIvrQRHAi7N0ytDoWKAQFCwX/r5ScO7jx6+viUGiGoCAggKfivu2zextNrJtaKQflggKzgv3zlhN56N4QDQQBZQYH5f36+/P+lMVA+GMAVRCS0fG4EMeK/fvANMwOLgQBMgdXrDw9X6IOZPmsu3qt6CmYCAUxBW7KzzsH9nhb/i9tvNIn6QZSCALIb1FZfmO70aWm5HJQPBsgK/qt3rrx/vAzKgQJkBc+T7vRPXn9FA8qFALiCkszCWXe6BP9rzt3nH5UZDhVFKEj4eO/JTW8FIMuk+9TDnT0QUSCAmyBlEDg7AMRwn9mnq8wDFgMBJDfISQqCaS0RUzANAciOxAoIKPj/HwDL5k4xG94BrQAAAABJRU5ErkJggg==";async function hs(t=!1){document.body.style.cursor="wait";let e=document.getElementById("xpedia-js")?.src,r=await mr(e),n=document.getElementById("main-css"),i=n.href?await mr(n.href):n.innerHTML,s=F.src;if(t){let a={};a[st]=s.langs[st];let u=F.langName;u!=st&&(a[u]=s.langs[u]),s={...s,langs:a}}let l=await fs(JSON.stringify(s)),o=`
<head>
  <style>${i}</style>
  <script>
    window.xpedia = "${l}";
    window.gameDir = ".";
    window.xpediaDir = "xpedia/";
  <\/script>
  <script>${r}<\/script>
</head>`;ls("xpedia.html",o),document.body.style.cursor="default"}function wn(t){return`<span style="visibility:hidden">${t}</span>`}var F,st="en-US",ps={"BIGOBS.PCK":"big","FLOOROB.PCK":"floor","HANDOB.PCK":"hand","BASEBITS.PCK":"base","INTICON.PCK":"icon"};function wr(t,e){if(t!=null)return e?e.map(r=>t[r]!=null?[r,t[r]]:null).filter(r=>r!=null):[]}function Ne(t,e={}){if(t==null)return{all:[]};let r=wr(t,e.first),n=wr(t,e.last),i=wr(t,e.exclude),s=new Set([...e.first||[],...e.last||[],...e.exclude||[],"id","list","name"]),l=Object.entries(t).filter(([a,u])=>!s.has(a));e.sortBy?l=l.sort((a,u)=>e.sortBy(a[1])>e.sortBy(u[1])?1:-1):l=l.sort((a,u)=>a[0]>u[0]?1:-1);let o=[...r,...l,...n];return{first:r,misc:l,last:n,exclude:i,all:o}}var Ar=class{constructor(){this.articles=new _s.default;for(let e of Object.values(F.articles)){let r=["id","type","title","text"].map(n=>(e[n]||"").toLowerCase()).join(" ");this.articles.indexDocument(e.id,r)}}async findArticles(e){return this.articles.search(e)}},Fe=class{constructor(e,r){Object.assign(this,JSON.parse(JSON.stringify(e))),F[r]==null&&(F[r]={}),F[r][this.id]=this,ht.create({id:this.id,section:ss(r).toUpperCase()})}sortField(e,r=!1){return e=="id"&&!r?this.title:this[e]}get title(){return F.tr(this.id)}static reserve(e,r){let n=e.id||e.type||e.name;return F[r][n]?F[r][n]:new Fe(e,r)}addCategory(e){F.addCategory(e,this.id)}get name(){return this.id}set name(e){this.id==null&&(this.id=e)}get type(){return this.id}set type(e){this.id=e}},Sr=class extends Fe{constructor(r){super(r,"missionScripts");this.researchTriggers&&(this.researchNeeded=Object.keys(this.researchTriggers).filter(n=>this.researchTriggers[n]),this.researchForbidden=Object.keys(this.researchTriggers).filter(n=>!this.researchTriggers[n]))}},Cr=class extends Fe{},xr=class extends Fe{constructor(){super(...arguments);this.relatedScripts=[]}},Tr=class extends Fe{constructor(r){super(r,"eventScripts");let n=new Set([...Object.values(this.eventWeights||[]).map(i=>Object.keys(i)).flat(),...Object.keys(this.oneTimeRandomEvents||{})]);this.relatedEvents=[...n];for(let i of n)F.events[i]&&F.events[i].relatedScripts.push(this.type)}},Er=class extends Fe{constructor(r){super(r,"manufacture");if(this.requires)for(let n of this.requires){let i=F.research[n];!i||(i.manufacture||(i.manufacture=[]),i.manufacture.push(this.name))}if(this.producedItems)for(let n of Object.keys(this.producedItems)){let i=F.items[n];!i||(i.manufacture||(i.manufacture={}),i.manufacture[this.name]=this.producedItems[n])}if(this.requiredItems)for(let n of Object.keys(this.requiredItems)){let i=F.items[n];!i||(i.componentOf||(i.componentOf={}),i.componentOf[this.name]=this.requiredItems[n])}if(this.randomProducedItems){this.chanceSum=0;for(let n of this.randomProducedItems)this.chanceSum+=n[0]}ot.add("allowsManufacture",this.name,this.requiresBaseFunc)}},$r=class extends Fe{constructor(r){super(r,"soldierTransformation")}},Or=class extends Fe{constructor(r){super(r,"commendations");this.killCriteria&&(this.killCriteria=this.killCriteria.flat(2)),this.finalBonus=this.soldierBonusTypes&&F.soldierBonuses[this.soldierBonusTypes[this.soldierBonusTypes.length-1]]}sortField(r){let n=this.finalBonus;if(n&&r!="id"){if(n[r])return n[r];if(nn.includes(r))return n.stats&&n.stats[r]||0}return this[r]}},Ir=class extends Fe{constructor(r){super(r,"research");ot.add("allowsResearching",this.name,this.requiresBaseFunc)}},ot=class{constructor(e){this.id=e;ht.create({id:e,section:"SERVICES"})}static add(e,r,n){if(n)for(let i of n)i in F.baseServices||(F.baseServices[i]=new ot(i)),e in F.baseServices[i]||(F.baseServices[i][e]=[]),F.baseServices[i][e].push(r)}},Fr=class extends Fe{constructor(r){super(r,"alienDeployments");let n=new Set;for(let i of this.data||[])if(Array.isArray(i.itemSets)){let s=i.itemSets.flat();for(let l of s)n.add(l)}this.loot=[...n]}},Dr=class extends Fe{constructor(r){super(r,"craftWeapons");ot.add("canBuy",this.type,this.requiresBuyBaseFunc),this.weaponType="weaponType"+(this.weaponType||0),Fe.reserve({id:this.weaponType},"weaponTypes")}},Br=class extends Fe{constructor(r){super(r,"crafts");if(this.allWeaponTypes=this.allWeaponTypes||[],this.weaponTypes){for(let n in this.weaponTypes)Array.isArray(this.weaponTypes[n])||(this.weaponTypes[n]=[this.weaponTypes[n]]),this.weaponTypes[n]=this.weaponTypes[n].map(i=>{let s="weaponType"+i;return Fe.reserve({id:s},"weaponTypes"),this.allWeaponTypes.push(s),s});this.allWeaponTypes=[...new Set(this.allWeaponTypes)]}}},Lr=class extends Fe{constructor(r){super(r,"facilities");ot.add("providedBy",this.type,this.provideBaseFunc),ot.add("allowsBuilding",this.type,this.requiresBaseFunc),ot.add("forbidsBuilding",this.type,this.forbiddenBaseFunc),this.aliens&&ot.add("providedBy",this.type,[`prisonType${this.prisonType||1}`])}get kennel(){return this.prisonType==2?this.aliens:null}get prison(){return this.prisonType==2?null:this.aliens}},Nr=class extends Fe{constructor(r){super(r,"startingConditions")}};var nn=["tu","stamina","health","bravery","reactions","firing","throwing","strength","psiStrength","psiSkill","melee"],Mr=class extends Fe{constructor(r){super(r,"units");let n=F.armors[r.armor];if(n&&(n.users=n.users||[],n.users.push(this.type)),this.builtInWeaponSets){let i=new Set(this.builtInWeaponSets.flat());for(let s of i){let l=F.items[s];l&&(l.heldBy=l.heldBy||new Set,l.heldBy.add(this.type))}}}},nh={snap:15,auto:7,aimed:200},Rr=class{constructor(e,r){this.mode=r;this.possible=!1;this.flatTime=!1;this.shots=1;this.pellets=1;let n=r.charAt(0).toUpperCase()+r.substr(1),i=r=="ammo"&&e.battleType==2||r=="melee"&&e.battleType==3||r=="psi"&&e.battleType==9||r=="throw"&&[4,5].includes(e.battleType);if(r=="throw"&&!i||!(e["accuracy"+n]||e["cost"+n]||i))return null;r=="melee"&&e.battleType!=3?(this.damage=e.meleePower,this.damageBonus=e.meleeBonus,this.damageType=e.meleeType):e.compatibleAmmo||(this.damage=e.power,this.damageBonus=e.damageBonus,this.damageType=e.damageType),this.pellets=e.shotgunPellets||1,this.shots=r=="auto"?e.autoShots||3:1,this.name=r.substr(0,1).toUpperCase()+r.substr(1);let l="conf"+this.name;if(l in e){let o=e[l];o.name&&(this.name=F.str(o.name)),o.shots&&(this.shots=o.shots),delete e[l]}if(e[r+"AttackName"]&&(this.name=F.str(e[r+"AttackName"])),r=="melee"&&(this.alter=e.meleeAlter),(e.battleType==3||r!="melee")&&(this.alter=e.damageAlter),r!="ammo"){(r=="melee"&&e.battleType==3||r!="melee")&&e.flatRate&&(this.flatTime=e.flatRate),e["flat"+n]&&e["flat"+n].time&&(this.flatTime=!0),n=="Psi"&&(n="Use"),this.cost=this.cost=e["cost"+n]||{time:e["tu"+n],energy:0},this.accuracy=e["accuracy"+n]||100;let o=r=="throw"?e.throwMultiplier:r=="melee"?e.meleeMultiplier:e.accuracyMultiplier;if(!o){let a=r=="throw"?"throwing":r=="melee"?"melee":"firing";o={},o[a]=1}this.accuracyMultiplier=o,this.damageType!=null&&dt(e.id,[it[this.damageType]],"elements","weapon");for(let a in this.accuracyMultiplier||[])dt(e.id,[a],"stats","weaponDamage")}this.alter&&this.alter.ResistType&&(this.damageType=this.alter.ResistType),r+"Range"in e&&(this.alter=Object.assign({},this.alter||{}),this.alter.range=e[r+"Range"]);for(let o in this.alter)(o=="damageType"||o=="ResistType")&&(this.alter[o]=it[this.alter[o]]);this.range=e[r+"Range"]||e[r.substr(0,3)+"Range"]||this.alter&&this.alter.range||nh[r],e.maxRange<this.range&&(this.range=e.maxRange),this.alter&&e.maxRange<+this.alter.range&&(this.alter.range=`${e.maxRange}`),this.possible=!0}},ht=class{constructor(e){this.sections=[];this.id=e.id,this._text=e.text,this._title=e.title||e.id,this.image_id=e.image_id,F.articles[this.id]=this;let r=e.id;F.articles[r]=this,e.section&&this.addToSection(e.section)}get section(){return this.sections[0]?.id}static create({id:e,section:r}){if(F.sections[r]==null&&new An(r,!0),e in F.articles){let n=F.articles[e];return r&&!n.sections.find(i=>i.id==r)&&(n.addToSection(r),F.sections[r].add(n)),n}return new ht({id:e,section:r})}addToSection(e){let r;return e in F.sections?r=F.sections[e]:r=F.sections[e]=new An(e),this.id!=r.id&&r.add(this),this.sections.includes(r)||this.sections.push(r),r}get text(){return F.lang[this._text]||F.lang[this.id+"_UFOPEDIA"]}get title(){return F.tr(this._title)}},An=class{constructor(e,r=!1){this.id=e;this._articles=[];F.sections[e]=this,r?F.typeSectionsOrder.push(this):F.sectionsOrder.push(this),ht.create({id:e,section:e})}get articles(){return this._articles}get title(){return F.tr(this.id)}add(e){this._articles.includes(e)||this._articles.push(e),e.sections.includes(this)||e.sections.push(this)}},en=class{constructor(e){if(this.id=e.type||e.typeSingle,this.modDir=e.modDir,e.files&&(this._path=e.files[0],ps[this.id]))for(let[r,n]of Object.entries(e.files))new en({modDir:this.modDir,type:ps[this.id],ind:r,fileSingle:n});e.fileSingle&&(this._path=e.fileSingle),e.ind?F.obs[this.id][e.ind]=this:F.sprites[this.id]=this}get path(){let e=this.modDir+this._path;return window.gameDir&&e[0]=="/"?e=window.gameDir+e:window.xpediaDir&&e[0]!="/"&&(e=window.xpediaDir+e),e}},zr=class extends Fe{constructor(r){super(r,"armors");this.dollSprites={};this.armor={};if(this.size||(this.size=1),this.layersDefinition){let n=this.layersDefaultPrefix;for(let i in this.layersDefinition){let s=this.layersDefinition[i],l=[];for(let o in s){let a=s[o];if(a&&a.length){let u=n+"__"+o+"__"+a;l.push(F.sprite(u))}}this.dollSprites[i]=l}}else if(this.spriteInv){let n=this.spriteInv,i=n.length;if(this.spriteInv+".SPK"in F.sprites)this.dollSprites={0:[F.sprites[this.spriteInv+".SPK"].path]};else for(let s in F.sprites)s.substr(0,i)==n&&(this.dollSprites[s.substr(i,s.length-i-4)]=[F.sprites[s].path])}if(this.armor={Front:this.frontArmor,Side:this.sideArmor,Rear:this.rearArmor,Under:this.underArmor},this.storeItem&&F.items[this.storeItem]){let n=F.items[this.storeItem];n.armors||(n.armors=[]),n.armors.push(this.type)}for(let n of this.units||[]){let i=F.soldiers[n];i&&(i.armors=i.armors||[],i.armors.push(this.type))}}sortField(r){return nn.includes(r)?this.stats&&this.stats[r]||0:it.includes(r)?(this.damageModifier[it.indexOf(r)]||0)*100:F.soldiers[r]?this.units?.includes(r):this[r]}},Pr=class extends Fe{constructor(r){super(r,"items");this.invWidth=this.invWidth||1,this.invHeight=this.invHeight||1;let n=this;if("flatThrow"in n&&(n.flatThrowTime=n.flatThrow.time,delete n.flatThrow),ot.add("canBuyItem",this.type,this.requiresBuyBaseFunc),this.categories)for(let i of this.categories)F.addCategory(i,this.type);this.liveAlien&&this.recover&&!this.prisonType&&(this.prisonType=1),this.ammo&&(this.compatibleAmmo=[...this.compatibleAmmo||[],...Object.values(this.ammo).map(i=>i.compatibleAmmo).flat()]);for(let i in this.damageBonus||[]){let s=this.damageBonus[i];if(s!=0&&dt(this.id,[i],"stats","weaponDamage"),Array.isArray(s))for(let l in s)s[l]>0&&dt(this.id,[i],"stats","weaponDamage**"+(+l+1))}for(let i in this.meleeMultiplier||[])dt(this.id,[i],"stats","meleeAccuracy");this.damageType!=null&&dt(this.id,[it[this.damageType]],"elements","weapon")}get sprite(){if(this.bigSprite)return F.obsSprite("big",+this.bigSprite)}attacks(){if(!this._attacks){this._attacks=[];for(let r of["ammo","melee","snap","aimed","auto","throw","psi","panic","mindControl","use"]){let n=new Rr(this,r);n.possible&&this._attacks.push(n)}}return this.battleType==2&&(this._attacks[0].item=this,this._attacks[0].mode="ammo"),this._attacks}},tn=class{constructor(){this.articles={};this.articlesOrder=[];this.sections={};this.sectionsOrder=[];this.typeSectionsOrder=[];this.sprites={};this.raw={};this.search={};this.items={};this.categories={};this.armors={};this.units={};this.crafts={};this.facilities={};this.enviroEffects={};this.craftWeapons={};this.weaponTypes={};this.stats={};this.elements={};this.research={};this.soldierBonuses={};this.commendations={};this.soldierTransformation={};this.soldiers={};this.alienDeployments={};this.alienRaces={};this.manufacture={};this.startingConditions={};this.events={};this.eventScripts={};this.missionScripts={};this.alienMissions={};this.ufos={};this.terrains={};this.obs={big:[],floor:[],hand:[],base:[],icon:[]};this.sounds=[];this.baseServices={};this.redirect={};this.lang={};this.langs={};this.mods={};this.convertedLangs={};F=this}addCategory(e,r){let n=F.categories[e]||[];n.includes(r)||n.push(r),F.categories[e]=n}damageTypeName(e){return this.lang[it[e]]}sound(e){return this.sounds[e]}obsSprite(e,r){return(this.obs[e]||[])[r]?.path||Dt}combineFiles(e,r=!1){for(let n of r?e.reverse():e)if(n!=null)for(let i in n){let s=n[i],l=n.file.modDir;if(Array.isArray(s))for(let o of s)typeof o=="object"&&!Array.isArray(o)&&(o.modDir=l);if(i.substr(0,4)=="lang"&&Object.assign(this.lang,s),!(i in this.raw))this.raw[i]=s;else{let o=this.raw[i],a=s;if(o.concat)this.raw[i]=o.concat(a);else if(Array.isArray(a))for(let u of a)u in o&&typeof o[u]=="object"?Object.assign(o[u],a[u]):o[u]=a[u]}}}mergeRuls(e=!1){for(let r in this.raw){let n={},i={};if(r=="extraSprites")continue;let s=this.raw[r];if(!!Array.isArray(s)){for(let l of s){let o=l.type||l.id||l.name||l.delete||l.typeSingle;if(!(!o||i[o])){if("delete"in l){e?i[o]=!0:delete n[o];continue}if(o&&o in n)if(e)for(let a in l)a in n[o]||(n[o][a]=l[a]);else if(l.files){let a={...n[o].files,...l.files};Object.assign(n[o],l),n[o].files=a}else if(Array.isArray(l)){debugger;n[o]=n[o].concat(l)}else Object.assign(n[o],l);else n[o]=l}}this.raw[r]=Object.values(n)}}}convertLang(e){if(this.convertedLangs[e])return!1;let r=this.langs[e];if(!r.ALREADYCONVERTED){r.ALREADYCONVERTED="true";for(let n in r){let i=r[n];typeof i=="string"&&(i=i.replace(/^({NEWLINE})+/,""),i=i.replace(/{NEWLINE}/g,"<br/>"),i=i.replace(/{rul.str\("([^"]*)"\)}/g,(s,l)=>F.str(l)),r[n]=i)}return this.convertedLangs[e]=!0,!0}}parseType(e,r){for(let n of this.raw[e]||[])new(r||Fe)(n,e)}deleteModDirs(){for(let e in this.raw)if(Array.isArray(this.raw[e]))for(let r of this.raw[e])"modDir"in r&&delete r.modDir}parse(e){let r=!1;this.combineFiles(e,r),this.mergeRuls(r),this.sounds=[];for(let i of this.raw.extraSounds)for(let s of Object.entries(i.files))this.sounds[s[0]]=i.modDir+s[1];for(let i of this.raw.extraSprites)new en(i);this.deleteModDirs(),this.parseArticles(this.raw.ufopaedia);for(let[i,s]of Object.entries(rh))this.parseType(i,s);function n(i){if(i==null)return[];if(i=Object.values(i||[]),i==null)return[];i=i.flat();let s=i.map(o=>o.randomizedItems||[]).flat().map(o=>o?.itemList||[]).flat(),l=i.map(o=>o.items?Object.keys(o.items):[]).flat();return[...s,...l]}Je(this.units,"race","alienRaces","hasThisRace"),Je(this.alienRaces,"members","units","memberOf"),Je(this.soldierTransformation,"forbiddenPreviousTransformations",this.soldierTransformation,"blocksTransformations"),Je(this.alienDeployments,"loot",this.items,"loot"),Je(this.alienDeployments,"enviroEffects",this.enviroEffects,"deployments"),Je(this.craftWeapons,"weaponType",this.weaponTypes,"weapons","weaponTypes"),Je(this.crafts,"allWeaponTypes",this.weaponTypes,"crafts","weaponTypes"),Je(this.startingConditions,"allowedCraft",this.crafts,"startingConditions"),Je(this.alienDeployments,"startingCondition",this.startingConditions,"deployments"),Je(this.missionScripts,"researchNeeded",this.research,"unlocksMissions"),Je(this.missionScripts,"researchForbidden",this.research,"stopsMissions"),Je(this.alienMissions,i=>Object.values(i.raceWeights)?.map(s=>Object.keys(s)).flat(),"alienRaces","missions"),Je(this.ufos,i=>n(i.battlescapeTerrainData?.mapBlocks),this.items,"ufos"),Je(this.terrains,i=>n(i.mapBlocks),this.items,"terrains"),Je(this.terrains,"civilianTypes",this.units,"terrains"),Je(this.items,"spawnUnit",this.units,"spawnedBy");for(let i of Object.values(this.facilities))if(i.buildCostItems)for(let s of Object.keys(i.buildCostItems)){let l=F.items[s];!l||(l.componentOf||(l.componentOf={}),l.componentOf[i.type]=i.buildCostItems[s].build,l.manufacture||(l.manufacture={}),l.manufacture[i.type]=i.buildCostItems[s].refund)}for(let i of Object.values(this.items)){i.attacks();for(let s of i.compatibleAmmo||[]){let l=this.items[s];l&&(l.compatibleWeapons=l.compatibleWeapons||[],l.compatibleWeapons.push(i.type))}for(let s of i.requiresBuy||[]){let l=this.research[s];l&&(l.allowsBuying=[...l.allowsBuying||[],i.type])}}for(let i of[...Object.values(this.research)]){if(dt(i.name,i.dependencies,F.research,"leadsTo"),dt(i.name,i.getOneFree,F.research,"freeFrom"),i.lookup&&i.name!=i.lookup&&this.research[i.lookup]){let s=this.research[i.lookup];s.seeAlso=s.seeAlso||[],s.seeAlso.push(i.name);let l=this.article(i.lookup),o=this.article(i.name);F.lang[o.id]||(o._title=l._title),o._text=l._text,o.image_id=l.image_id}if(i.spawnedItem){let s=F.items[i.spawnedItem];s.spawnedBy=s.spawnedBy||[],s.spawnedBy.push(i.name)}}this.ourArmors=Object.values(this.armors).filter(i=>i.units).map(i=>i.type);for(let i of Object.keys(this.categories))this.categories[i].length&&ht.create({id:i,section:"CATEGORIES"});console.log("parse done")}sortedTypeSections(){return this.sortStrings(this.typeSectionsOrder.map(e=>e.id)).map(e=>this.sections[e])}parseArticles(e){for(let r of e)if(r.id){let n=new ht(r);this.articlesOrder.push(n),this.articles[n.id]=n}}findNextArticle(e,r,n,i=!1){if(!e)return null;n||(n=e.sections[0]);let s=n?n.articles:this.articlesOrder;i&&(s=this.sortArticlesByName(s));let l=s.findIndex(o=>o.id==e.id);if(l!=null){let o=l+r;return s[o]}}sortArticlesByName(e){return this.sortStrings(e.map(r=>r.id)).map(r=>this.articles[r])}str(e){return this.lang[e]||e}tr(e,r=!1){if(e==null)return"";let n=this.langs?.icon?this.langs.icon[e]:null;if(e in F.lang)e=F.lang[e];else if(typeof e=="string"){if(this.lang[ms[e]])return this.lang[ms[e]];e.substr(0,4)=="STR_"&&(e=e.substr(4)),e.includes("_")&&e.search(/[a-z]/)==-1?e=e.replace(/_/g," "):e=e.replace(/([^A-Z0-9])([A-Z0-9])/g,"$1 $2"),e=e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}return n&&!r&&(e=e==null?null:n+e),e}sprite(e,r=!1){return e in this.sprites?this.sprites[e].path:r?null:e}load({ruls:e,langs:r,mods:n}){this.src={ruls:e,langs:{},mods:n},this.mods=n,this.langs=r;for(let l in this.langs)this.src.langs[l]={...this.langs[l]};let i=Object.fromEntries(Object.keys(r).map(l=>[l,l==st?1e6:Object.keys(r[l]).length]));this.langNames=Object.keys(r).sort((l,o)=>i[o]-i[l]),this.langs.icon&&this.langNames.splice(this.langNames.indexOf("icon"));for(let l of this.langNames)if(!this.langs[st][l]){let o=l.match(/([a-z]+)/i);if(o?.length>0){let a=os(o[1]);a&&(this.langs[st][l]=a)}}this.parse(e),this.convertLang(st);let s=Object.keys(this.langs);s.length==3?this.selectLang(s.find(l=>l!=st&&l!="icon")):this.selectLang(st)}selectLang(e){return this.langs[e]?(this.langName=e,e==st?this.lang=this.langs[st]:(this.convertLang(e),this.lang={...this.langs[st],...this.langs[e]}),this.search[e]||(this.search[e]=new Ar),!0):(console.log("no language",e),!1)}linksByType(e){switch(e){case"CONDITIONS":return Object.keys(this.startingConditions).map(r=>"CONDITIONS_"+r)}return[]}bodiesCompare(e){for(let r in e)e[r].length==2&&(e[r]=(e[r].charAt(0)=="M"?"A":"B")+"0"+e[r].substr(1));return e[0]>e[1]?1:-1}article(e){return this.articles[this.redirect[e]]||this.articles[e]}sortStrings(e){let r=e.map(n=>[n,this.tr(n)]);return r=r.sort((n,i)=>n[1]>i[1]?1:-1),r.map(n=>n[0])}},ms={dependencies:"STR_DEPENDS_ON",seeAlso:"STR_ITEM_REQUIRED",requiresBaseFunc:"STR_SERVICES_REQUIRED",freeFrom:"STR_GET_FOR_FREE_FROM",leadsTo:"STR_LEADS_TO",unlocks:"STR_UNLOCKS",disables:"STR_DISABLES",getOneFree:"STR_GIVES_ONE_FOR_FREE",manufacture:"STR_REQUIRED_BY",randomProducedItems:"STR_RANDOM_PRODUCTION_DISCLAIMER",cost:"STR_COST"},rh={items:Pr,soldiers:Cr,alienRaces:Fe,armors:zr,units:Mr,crafts:Br,craftWeapons:Dr,ufos:Fe,facilities:Lr,events:xr,eventScripts:Tr,soldierTransformation:$r,startingConditions:Nr,missionScripts:Sr,alienMissions:Fe,alienDeployments:Fr,research:Ir,soldierBonuses:Fe,commendations:Or,manufacture:Er,enviroEffects:Fe,terrains:Fe,mapScripts:Fe,weaponTypes:Fe,stats:Fe},it=["STR_DAMAGE_NONE","STR_DAMAGE_ARMOR_PIERCING","STR_DAMAGE_INCENDIARY","STR_DAMAGE_HIGH_EXPLOSIVE","STR_DAMAGE_LASER_BEAM","STR_DAMAGE_PLASMA_BEAM","STR_DAMAGE_STUN","STR_DAMAGE_MELEE","STR_DAMAGE_ACID","STR_DAMAGE_SMOKE","STR_DAMAGE_10","STR_DAMAGE_11","STR_DAMAGE_12","STR_DAMAGE_13","STR_DAMAGE_14","STR_DAMAGE_15","STR_DAMAGE_16","STR_DAMAGE_17","STR_DAMAGE_18","STR_DAMAGE_19","STR_DAMAGE_20","STR_DAMAGE_21","STR_DAMAGE_22","STR_MANA"];function dt(t,e,r,n,i){if(typeof r=="string"&&(i=r,r=F[r]),e!=null){Array.isArray(e)||(e=[e]);for(let s of e){let l=r[s];l==null&&i!=null&&(l=r[s]=new Fe({id:s},i)),l!=null&&(l[n]=l[n]||[],l[n].indexOf(t)==-1&&l[n].push(t))}}}function Je(t,e,r,n,i){let s=typeof e=="function"?e:l=>l[e];for(let l of[...Object.values(t)])dt(l.id,s(l),r,n,i)}function gs(t,e,r){let n=t.slice();return n[1]=e[r][0],n[2]=e[r][1],n}function bs(t){let e,r;return e=new ft({props:{links:t[2],title:F.tr(t[1])}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.links=n[2]),i&1&&(s.title=F.tr(n[1])),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function ih(t){let e,r,n=Ne(t[0],{exclude:["type"]}).all,i=[];for(let l=0;l<n.length;l+=1)i[l]=bs(gs(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=be()},m(l,o){for(let a=0;a<i.length;a+=1)i[a].m(l,o);x(l,e,o),r=!0},p(l,[o]){if(o&1){n=Ne(l[0],{exclude:["type"]}).all;let a;for(a=0;a<n.length;a+=1){let u=gs(l,n,a);i[a]?(i[a].p(u,o),g(i[a],1)):(i[a]=bs(u),i[a].c(),g(i[a],1),i[a].m(e.parentNode,e))}for(te(),a=n.length;a<i.length;a+=1)s(a);ne()}},i(l){if(!r){for(let o=0;o<n.length;o+=1)g(i[o]);r=!0}},o(l){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);r=!1},d(l){_e(i,l),l&&S(e)}}}function lh(t,e,r){let{conditions:n}=e;return console.log(n),console.log(Ne(n)),t.$$set=i=>{"conditions"in i&&r(0,n=i.conditions)},[n]}var jr=class extends ve{constructor(e){super(),ke(this,e,lh,ih,ge,{conditions:0})}},vs=jr;function ks(t,e,r){let n=t.slice();n[1]=e[r];let i=F.baseServices[n[1]];return n[2]=i,n}function ys(t){let e,r,n,i,s,l,o,a,u,f,c;return i=new xe({props:{s:F.tr(t[1])}}),a=new He({props:{items:t[2].providedBy}}),{c(){e=T("tr"),r=T("td"),n=T("a"),X(i.$$.fragment),l=z(),o=T("td"),X(a.$$.fragment),u=z(),$(n,"class",".services"),$(n,"color","cyan"),$(n,"href",s="##"+t[1]),$(e,"class",f=t[1]==t[0]?"highlight":"")},m(d,h){x(d,e,h),C(e,r),C(r,n),H(i,n,null),C(e,l),C(e,o),H(a,o,null),C(e,u),c=!0},p(d,h){(!c||h&1&&f!==(f=d[1]==d[0]?"highlight":""))&&$(e,"class",f)},i(d){c||(g(i.$$.fragment,d),g(a.$$.fragment,d),c=!0)},o(d){w(i.$$.fragment,d),w(a.$$.fragment,d),c=!1},d(d){d&&S(e),W(i),W(a)}}}function sh(t){let e,r,n,i,s,l,o,a;i=new xe({props:{s:"Service"}}),l=new xe({props:{s:"Facility"}});let u=F.sortStrings(Object.keys(F.baseServices)),f=[];for(let d=0;d<u.length;d+=1)f[d]=ys(ks(t,u,d));let c=d=>w(f[d],1,1,()=>{f[d]=null});return{c(){e=T("table"),r=T("tr"),n=T("td"),X(i.$$.fragment),s=T("td"),X(l.$$.fragment),o=z();for(let d=0;d<f.length;d+=1)f[d].c();$(r,"class","table-header"),$(e,"class","main-table base-services")},m(d,h){x(d,e,h),C(e,r),C(r,n),H(i,n,null),C(r,s),H(l,s,null),C(e,o);for(let p=0;p<f.length;p+=1)f[p].m(e,null);a=!0},p(d,[h]){if(h&1){u=F.sortStrings(Object.keys(F.baseServices));let p;for(p=0;p<u.length;p+=1){let m=ks(d,u,p);f[p]?(f[p].p(m,h),g(f[p],1)):(f[p]=ys(m),f[p].c(),g(f[p],1),f[p].m(e,null))}for(te(),p=u.length;p<f.length;p+=1)c(p);ne()}},i(d){if(!a){g(i.$$.fragment,d),g(l.$$.fragment,d);for(let h=0;h<u.length;h+=1)g(f[h]);a=!0}},o(d){w(i.$$.fragment,d),w(l.$$.fragment,d),f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)w(f[h]);a=!1},d(d){d&&S(e),W(i),W(l),_e(f,d)}}}function oh(t,e,r){let{query:n=null}=e;return console.log(n),t.$$set=i=>{"query"in i&&r(0,n=i.query)},[n]}var Ur=class extends ve{constructor(e){super(),ke(this,e,oh,sh,ge,{query:0})}},Sn=Ur;var Wr=In(ws());function As(t,e,r){let n=t.slice();return n[22]=e[r],n}function Ss(t,e,r){let n=t.slice();return n[25]=e[r],n}function Cs(t,e,r){let n=t.slice();return n[25]=e[r],n}function xs(t,e,r){let n=t.slice();return n[25]=e[r],n[31]=r,n}function Ts(t,e,r){let n=t.slice();return n[25]=e[r],n[31]=r,n}function Es(t){let e,r=lt(t[31])+"",n,i,s,l,o,a,u;s=new xe({props:{s:t[25]}});function f(){return t[15](t[25])}return{c(){e=new je(!1),n=z(),i=T("span"),X(s.$$.fragment),e.a=n,$(i,"class",l="clickable "+(t[3].includes(t[25])?"on":"off"))},m(c,d){e.m(r,c,d),x(c,n,d),x(c,i,d),H(s,i,null),o=!0,a||(u=Oe(i,"click",f),a=!0)},p(c,d){t=c;let h={};d[0]&3&&(h.s=t[25]),s.$set(h),(!o||d[0]&11&&l!==(l="clickable "+(t[3].includes(t[25])?"on":"off")))&&$(i,"class",l)},i(c){o||(g(s.$$.fragment,c),o=!0)},o(c){w(s.$$.fragment,c),o=!1},d(c){c&&e.d(),c&&S(n),c&&S(i),W(s),a=!1,u()}}}function $s(t){let e,r,n=t[2],i=[];for(let l=0;l<n.length;l+=1)i[l]=Os(xs(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){e=T("p");for(let l=0;l<i.length;l+=1)i[l].c();$(e,"class","extra-fields")},m(l,o){x(l,e,o);for(let a=0;a<i.length;a+=1)i[a].m(e,null);r=!0},p(l,o){if(o[0]&1060){n=l[2];let a;for(a=0;a<n.length;a+=1){let u=xs(l,n,a);i[a]?(i[a].p(u,o),g(i[a],1)):(i[a]=Os(u),i[a].c(),g(i[a],1),i[a].m(e,null))}for(te(),a=n.length;a<i.length;a+=1)s(a);ne()}},i(l){if(!r){for(let o=0;o<n.length;o+=1)g(i[o]);r=!0}},o(l){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);r=!1},d(l){l&&S(e),_e(i,l)}}}function Os(t){let e,r=lt(t[31])+"",n,i,s,l,o,a,u;s=new xe({props:{s:t[25]}});function f(){return t[16](t[25])}return{c(){e=new je(!1),n=z(),i=T("span"),X(s.$$.fragment),e.a=n,$(i,"class",l="clickable "+(t[5]==t[25]?"on":"off"))},m(c,d){e.m(r,c,d),x(c,n,d),x(c,i,d),H(s,i,null),o=!0,a||(u=Oe(i,"click",f),a=!0)},p(c,d){t=c;let h={};d[0]&4&&(h.s=t[25]),s.$set(h),(!o||d[0]&36&&l!==(l="clickable "+(t[5]==t[25]?"on":"off")))&&$(i,"class",l)},i(c){o||(g(s.$$.fragment,c),o=!0)},o(c){w(s.$$.fragment,c),o=!1},d(c){c&&e.d(),c&&S(n),c&&S(i),W(s),a=!1,u()}}}function Is(t){let e,r,n=wn("\u25BC")+"",i,s,l,o,a=(t[6]!=t[25]?wn("\u25BC"):t[7]?"\u25BC":"\u25B2")+"",u,f,c,d,h;s=new xe({props:{s:t[25]}});function p(...v){return t[17](t[25],...v)}function m(...v){return t[18](t[25],...v)}function _(){return t[19](t[25])}return{c(){e=T("td"),r=T("span"),i=z(),X(s.$$.fragment),l=z(),o=T("span"),u=z(),Ce(r,"font-size","50%"),Ce(o,"font-size","50%"),$(e,"id",f="thead "+t[25]),$(e,"draggable","true")},m(v,y){x(v,e,y),C(e,r),r.innerHTML=n,C(e,i),H(s,e,null),C(e,l),C(e,o),o.innerHTML=a,C(e,u),c=!0,d||(h=[Oe(e,"dragstart",p),Oe(e,"drop",m),Oe(e,"dragover",ph),Oe(e,"click",_)],d=!0)},p(v,y){t=v;let A={};y[0]&8&&(A.s=t[25]),s.$set(A),(!c||y[0]&200)&&a!==(a=(t[6]!=t[25]?wn("\u25BC"):t[7]?"\u25BC":"\u25B2")+"")&&(o.innerHTML=a),(!c||y[0]&8&&f!==(f="thead "+t[25]))&&$(e,"id",f)},i(v){c||(g(s.$$.fragment,v),c=!0)},o(v){w(s.$$.fragment,v),c=!1},d(v){v&&S(e),W(s),d=!1,Ve(h)}}}function Fs(t){let e,r,n,i;return r=new ye({props:{nobr:20,val:t[22].sortField(t[25],!0)}}),{c(){e=T("td"),X(r.$$.fragment),$(e,"class",n="st-"+t[25])},m(s,l){x(s,e,l),H(r,e,null),i=!0},p(s,l){let o={};l[0]&24&&(o.val=s[22].sortField(s[25],!0)),r.$set(o),(!i||l[0]&8&&n!==(n="st-"+s[25]))&&$(e,"class",n)},i(s){i||(g(r.$$.fragment,s),i=!0)},o(s){w(r.$$.fragment,s),i=!1},d(s){s&&S(e),W(r)}}}function Ds(t){let e,r,n,i=t[3],s=[];for(let o=0;o<i.length;o+=1)s[o]=Fs(Ss(t,i,o));let l=o=>w(s[o],1,1,()=>{s[o]=null});return{c(){e=T("tr");for(let o=0;o<s.length;o+=1)s[o].c();r=z()},m(o,a){x(o,e,a);for(let u=0;u<s.length;u+=1)s[u].m(e,null);C(e,r),n=!0},p(o,a){if(a[0]&24){i=o[3];let u;for(u=0;u<i.length;u+=1){let f=Ss(o,i,u);s[u]?(s[u].p(f,a),g(s[u],1)):(s[u]=Fs(f),s[u].c(),g(s[u],1),s[u].m(e,r))}for(te(),u=i.length;u<s.length;u+=1)l(u);ne()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)g(s[a]);n=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)w(s[a]);n=!1},d(o){o&&S(e),_e(s,o)}}}function hh(t){let e,r,n,i,s,l,o,a,u=[...t[0],...t[1]],f=[];for(let A=0;A<u.length;A+=1)f[A]=Es(Ts(t,u,A));let c=A=>w(f[A],1,1,()=>{f[A]=null}),d=t[2].length>0&&$s(t),h=t[3],p=[];for(let A=0;A<h.length;A+=1)p[A]=Is(Cs(t,h,A));let m=A=>w(p[A],1,1,()=>{p[A]=null}),_=t[4],v=[];for(let A=0;A<_.length;A+=1)v[A]=Ds(As(t,_,A));let y=A=>w(v[A],1,1,()=>{v[A]=null});return{c(){e=T("p");for(let A=0;A<f.length;A+=1)f[A].c();r=z(),d&&d.c(),n=z(),i=T("table"),s=T("thead");for(let A=0;A<p.length;A+=1)p[A].c();l=z(),o=T("tbody");for(let A=0;A<v.length;A+=1)v[A].c();$(e,"class","extra-fields"),$(i,"class","section-table")},m(A,I){x(A,e,I);for(let E=0;E<f.length;E+=1)f[E].m(e,null);x(A,r,I),d&&d.m(A,I),x(A,n,I),x(A,i,I),C(i,s);for(let E=0;E<p.length;E+=1)p[E].m(s,null);C(i,l),C(i,o);for(let E=0;E<v.length;E+=1)v[E].m(o,null);a=!0},p(A,I){if(I[0]&523){u=[...A[0],...A[1]];let E;for(E=0;E<u.length;E+=1){let L=Ts(A,u,E);f[E]?(f[E].p(L,I),g(f[E],1)):(f[E]=Es(L),f[E].c(),g(f[E],1),f[E].m(e,null))}for(te(),E=u.length;E<f.length;E+=1)c(E);ne()}if(A[2].length>0?d?(d.p(A,I),I[0]&4&&g(d,1)):(d=$s(A),d.c(),g(d,1),d.m(n.parentNode,n)):d&&(te(),w(d,1,1,()=>{d=null}),ne()),I[0]&2504){h=A[3];let E;for(E=0;E<h.length;E+=1){let L=Cs(A,h,E);p[E]?(p[E].p(L,I),g(p[E],1)):(p[E]=Is(L),p[E].c(),g(p[E],1),p[E].m(s,null))}for(te(),E=h.length;E<p.length;E+=1)m(E);ne()}if(I[0]&24){_=A[4];let E;for(E=0;E<_.length;E+=1){let L=As(A,_,E);v[E]?(v[E].p(L,I),g(v[E],1)):(v[E]=Ds(L),v[E].c(),g(v[E],1),v[E].m(o,null))}for(te(),E=_.length;E<v.length;E+=1)y(E);ne()}},i(A){if(!a){for(let I=0;I<u.length;I+=1)g(f[I]);g(d);for(let I=0;I<h.length;I+=1)g(p[I]);for(let I=0;I<_.length;I+=1)g(v[I]);a=!0}},o(A){f=f.filter(Boolean);for(let I=0;I<f.length;I+=1)w(f[I]);w(d),p=p.filter(Boolean);for(let I=0;I<p.length;I+=1)w(p[I]);v=v.filter(Boolean);for(let I=0;I<v.length;I+=1)w(v[I]);a=!1},d(A){A&&S(e),_e(f,A),A&&S(r),d&&d.d(A),A&&S(n),A&&S(i),_e(p,A),_e(v,A)}}}var ph=t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"};function mh(t,e,r){let{entries:n}=e,{fields:i}=e,{extraFields:s=[]}=e,{filters:l=[]}=e,o,{aId:a}=e,u,f,c,d,h=!1;cn(()=>{});function p(Z){Z&&(Z!=d?(r(6,d=Z),r(7,h=Z!="id")):r(7,h=!h)),o.includes(Z)&&m()}function m(){r(4,c=[...n]),f&&r(4,c=c.filter(Z=>Z.sortField(f))),r(4,c=c.sort((Z,B)=>(Z.sortField(d)||0)>(B.sortField(d)||0)==h?-1:1))}function _(Z){o.includes(Z)?o.splice(o.indexOf(Z),1):r(3,o=[...o,Z]),r(3,o=[...o])}function v(Z){Z==f?r(5,f=null):r(5,f=Z),m()}function y(Z,B){let G=o.indexOf(Z);if(G==-1)return;o.splice(G,1);let k=o.indexOf(B);k==G&&k++,k==-1&&(k=0),o.splice(k,0,Z),r(3,o=[...o])}function A(){let Z=localStorage["xpediaColumnOrder"+a];r(3,o=Z?.split(",")||["id",...i]),r(14,u=a)}let I=Z=>_(Z),E=Z=>v(Z),L=(Z,B)=>B.dataTransfer.setData("field",Z),M=(Z,B)=>y(B.dataTransfer.getData("field"),Z),V=Z=>p(Z);return t.$$set=Z=>{"entries"in Z&&r(12,n=Z.entries),"fields"in Z&&r(0,i=Z.fields),"extraFields"in Z&&r(1,s=Z.extraFields),"filters"in Z&&r(2,l=Z.filters),"aId"in Z&&r(13,a=Z.aId)},t.$$.update=()=>{if(t.$$.dirty[0]&28696){e:r(4,c=c||[...n]),(u==null||u!=a)&&A(),localStorage["xpediaColumnOrder"+a]=o.join(",")}},[i,s,l,o,c,f,d,h,p,_,v,y,n,a,u,I,E,L,M,V]}var qr=class extends ve{constructor(e){super(),ke(this,e,mh,hh,ge,{entries:12,fields:0,extraFields:1,filters:2,aId:13},null,[-1,-1])}},rn=qr;function Bs(t){let e,r,n,i,s;return{c(){e=T("span"),r=T("canvas"),$(r,"class","pixelated"),Ce(r,"display",t[2]?"inline":"none"),$(e,"href",t[0]),$(e,"class","canvas-image")},m(l,o){x(l,e,o),C(e,r),t[9](r),i||(s=yi(n=t[3].call(null,r)),i=!0)},p(l,o){o&4&&Ce(r,"display",l[2]?"inline":"none"),o&1&&$(e,"href",l[0])},d(l){l&&S(e),t[9](null),i=!1,s()}}}function _h(t){let e=t[0],r,n=Bs(t);return{c(){n.c(),r=be()},m(i,s){n.m(i,s),x(i,r,s)},p(i,[s]){s&1&&ge(e,e=i[0])?(n.d(1),n=Bs(i),n.c(),n.m(r.parentNode,r)):n.p(i,s)},i:ae,o:ae,d(i){i&&S(r),n.d(i)}}}function gh(t,e,r){let{src:n=null}=e,{maxWidth:i=1e6}=e,{maxHeight:s=1e6}=e,{zoom:l=1}=e,{item:o=null}=e,a,u,f=null,c=!1;function d(){a!=null&&(r(1,a.width=Math.min(i,f.naturalWidth*l),a),r(1,a.height=Math.min(s,f.naturalHeight*l),a),u.imageSmoothingEnabled=!1,u.mozImageSmoothingEnabled=!1,u.webkitImageSmoothingEnabled=!1,u.drawImage(f,0,0,f.naturalWidth*l,f.naturalHeight*l),r(2,c=!0))}function h(m){r(1,a=m),u=a.getContext("2d"),r(8,f=new Image),r(8,f.onload=d,f),r(8,f.src=n,f)}function p(m){mt[m?"unshift":"push"](()=>{a=m,r(1,a)})}return t.$$set=m=>{"src"in m&&r(0,n=m.src),"maxWidth"in m&&r(4,i=m.maxWidth),"maxHeight"in m&&r(5,s=m.maxHeight),"zoom"in m&&r(6,l=m.zoom),"item"in m&&r(7,o=m.item)},t.$$.update=()=>{if(t.$$.dirty&385){e:o&&(r(0,n=F.sprite(o.sprite)),r(4,i=32*o.invWidth),r(5,s=32*o.invHeight)),n&&f&&(r(2,c=!1),r(8,f.src=n,f))}},[n,a,c,h,i,s,l,o,f,p]}var Hr=class extends ve{constructor(e){super(),ke(this,e,gh,_h,ge,{src:0,maxWidth:4,maxHeight:5,zoom:6,item:7})}},Cn=Hr;function Ls(t,e,r){let n=t.slice();return n[1]=e[r],n[3]=r,n}function Ns(t){let e;return{c(){e=T("sup"),e.textContent="?",$(e,"class","tipmark")},m(r,n){x(r,e,n)},d(r){r&&S(e)}}}function Ms(t){let e,r=lt(t[3])+"",n,i,s,l,o,a,u,f,c,d,h,p=(F.lang[t[1]+"_"+t[0][t[1]]]||"")+"",m,_;l=new xe({props:{s:t[1]}});let v="tip_"+t[1]in F.lang&&Ns(t);return c=new ye({props:{val:t[0][t[1]]}}),{c(){e=new je(!1),n=ce("\xA0"),i=T("nobr"),s=T("span"),X(l.$$.fragment),o=z(),v&&v.c(),a=ce(`\r
            :`),f=z(),X(c.$$.fragment),d=z(),h=new je(!1),m=z(),e.a=n,$(s,"tooltip",u="tip_"+t[1]),h.a=m},m(y,A){e.m(r,y,A),x(y,n,A),x(y,i,A),C(i,s),H(l,s,null),C(s,o),v&&v.m(s,null),C(s,a),C(i,f),H(c,i,null),C(i,d),h.m(p,i),C(i,m),_=!0},p(y,A){let I={};A&1&&(I.s=y[1]),l.$set(I),"tip_"+y[1]in F.lang?v||(v=Ns(y),v.c(),v.m(s,a)):v&&(v.d(1),v=null),(!_||A&1&&u!==(u="tip_"+y[1]))&&$(s,"tooltip",u);let E={};A&1&&(E.val=y[0][y[1]]),c.$set(E),(!_||A&1)&&p!==(p=(F.lang[y[1]+"_"+y[0][y[1]]]||"")+"")&&h.p(p)},i(y){_||(g(l.$$.fragment,y),g(c.$$.fragment,y),_=!0)},o(y){w(l.$$.fragment,y),w(c.$$.fragment,y),_=!1},d(y){y&&e.d(),y&&S(n),y&&S(i),W(l),v&&v.d(),W(c)}}}function bh(t){let e,r,n,i,s=Object.keys(t[0]).sort(),l=[];for(let a=0;a<s.length;a+=1)l[a]=Ms(Ls(t,s,a));let o=a=>w(l[a],1,1,()=>{l[a]=null});return{c(){e=T("tr"),r=T("td"),n=T("small");for(let a=0;a<l.length;a+=1)l[a].c();$(r,"colspan","4"),$(r,"class","attacks-alter")},m(a,u){x(a,e,u),C(e,r),C(r,n);for(let f=0;f<l.length;f+=1)l[f].m(n,null);i=!0},p(a,[u]){if(u&1){s=Object.keys(a[0]).sort();let f;for(f=0;f<s.length;f+=1){let c=Ls(a,s,f);l[f]?(l[f].p(c,u),g(l[f],1)):(l[f]=Ms(c),l[f].c(),g(l[f],1),l[f].m(n,null))}for(te(),f=s.length;f<l.length;f+=1)o(f);ne()}},i(a){if(!i){for(let u=0;u<s.length;u+=1)g(l[u]);i=!0}},o(a){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)w(l[u]);i=!1},d(a){a&&S(e),_e(l,a)}}}function vh(t,e,r){let{items:n}=e;return t.$$set=i=>{"items"in i&&r(0,n=i.items)},[n]}var Xr=class extends ve{constructor(e){super(),ke(this,e,vh,bh,ge,{items:0})}},xn=Xr;function Rs(t,e,r){let n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function zs(t,e,r){let n=t.slice();return n[14]=e[r],n[13]=r,n}function Ps(t,e,r){let n=t.slice();return n[11]=e[r],n[13]=r,n}function js(t,e,r){let n=t.slice();return n[16]=e[r],n}function Us(t,e,r){let n=t.slice();return n[19]=e[r],n}function Ws(t){let e,r,n,i,s=t[1].length>0&&qs(t);return{c(){e=T("tr"),r=T("td"),n=T("div"),s&&s.c(),$(r,"colspan","2"),$(r,"class","td-attacks-table")},m(l,o){x(l,e,o),C(e,r),C(r,n),s&&s.m(n,null),i=!0},p(l,o){l[1].length>0?s?(s.p(l,o),o&2&&g(s,1)):(s=qs(l),s.c(),g(s,1),s.m(n,null)):s&&(te(),w(s,1,1,()=>{s=null}),ne())},i(l){i||(g(s),i=!0)},o(l){w(s),i=!1},d(l){l&&S(e),s&&s.d()}}}function qs(t){let e,r,n,i,s,l,o;function a(m,_){return m[0].battleType==2?yh:kh}let u=a(t,-1),f=u(t),c=t[1],d=[];for(let m=0;m<c.length;m+=1)d[m]=Qs(js(t,c,m));let h=m=>w(d[m],1,1,()=>{d[m]=null}),p=t[0].damageAlter&&t[0].battleType!=2&&Js(t);return{c(){e=T("table"),r=T("thead"),f.c(),n=z(),i=T("td"),i.textContent=`${F.tr("damage")}`,s=z();for(let m=0;m<d.length;m+=1)d[m].c();l=z(),p&&p.c(),$(e,"class","attacks-table")},m(m,_){x(m,e,_),C(e,r),f.m(r,null),C(r,n),C(r,i),C(e,s);for(let v=0;v<d.length;v+=1)d[v].m(e,null);C(e,l),p&&p.m(e,null),o=!0},p(m,_){if(u===(u=a(m,_))&&f?f.p(m,_):(f.d(1),f=u(m),f&&(f.c(),f.m(r,n))),_&3){c=m[1];let v;for(v=0;v<c.length;v+=1){let y=js(m,c,v);d[v]?(d[v].p(y,_),g(d[v],1)):(d[v]=Qs(y),d[v].c(),g(d[v],1),d[v].m(e,l))}for(te(),v=c.length;v<d.length;v+=1)h(v);ne()}m[0].damageAlter&&m[0].battleType!=2?p?(p.p(m,_),_&1&&g(p,1)):(p=Js(m),p.c(),g(p,1),p.m(e,null)):p&&(te(),w(p,1,1,()=>{p=null}),ne())},i(m){if(!o){for(let _=0;_<c.length;_+=1)g(d[_]);g(p),o=!0}},o(m){d=d.filter(Boolean);for(let _=0;_<d.length;_+=1)w(d[_]);w(p),o=!1},d(m){m&&S(e),f.d(),_e(d,m),p&&p.d()}}}function kh(t){let e,r,n,i,s;return{c(){e=T("td"),e.textContent=`${F.tr("mode")}`,r=z(),n=T("td"),n.textContent=`${F.tr("accuracy")}`,i=z(),s=T("td"),s.textContent=`${F.tr("cost")}`},m(l,o){x(l,e,o),x(l,r,o),x(l,n,o),x(l,i,o),x(l,s,o)},p:ae,d(l){l&&S(e),l&&S(r),l&&S(n),l&&S(i),l&&S(s)}}}function yh(t){let e;return{c(){e=T("td"),$(e,"colspan","3")},m(r,n){x(r,e,n)},p:ae,d(r){r&&S(e)}}}function wh(t){let e,r=F.str(t[16].name)+"",n,i=t[16].shots==1?"":"\xD7"+t[16].shots,s,l,o,a,u=t[16].accuracy+"",f,c="%",d,h,p,m,_,v,y,A,I,E=t[16].cost.time+"",L,M,V=t[16].flatTime?"":"%",Z,B,G,k,R,ue=t[16].range&&Hs(t);_=new _t({props:{bonus:t[16].accuracyMultiplier}});let P=Object.keys(t[16].cost),he=[];for(let Q=0;Q<P.length;Q+=1)he[Q]=Gs(Us(t,P,Q));let q=Q=>w(he[Q],1,1,()=>{he[Q]=null});return{c(){e=T("td"),n=ce(r),s=ce(i),l=z(),o=T("td"),a=T("em"),f=ce(u),d=ce(c),h=z(),ue&&ue.c(),p=T("br"),m=z(),X(_.$$.fragment),v=z(),y=T("td"),A=T("nobr"),I=T("em"),L=ce(E),M=z(),Z=ce(V),B=z(),G=T("small"),G.textContent=`${F.str("TU")}`,k=z();for(let Q=0;Q<he.length;Q+=1)he[Q].c();$(a,"class","big-number")},m(Q,N){x(Q,e,N),C(e,n),C(e,s),x(Q,l,N),x(Q,o,N),C(o,a),C(a,f),C(o,d),C(o,h),ue&&ue.m(o,null),C(o,p),C(o,m),H(_,o,null),x(Q,v,N),x(Q,y,N),C(y,A),C(A,I),C(I,L),C(A,M),C(A,Z),C(A,B),C(A,G),C(y,k);for(let U=0;U<he.length;U+=1)he[U].m(y,null);R=!0},p(Q,N){(!R||N&2)&&r!==(r=F.str(Q[16].name)+"")&&Se(n,r),(!R||N&2)&&i!==(i=Q[16].shots==1?"":"\xD7"+Q[16].shots)&&Se(s,i),(!R||N&2)&&u!==(u=Q[16].accuracy+"")&&Se(f,u),Q[16].range?ue?ue.p(Q,N):(ue=Hs(Q),ue.c(),ue.m(o,p)):ue&&(ue.d(1),ue=null);let U={};if(N&2&&(U.bonus=Q[16].accuracyMultiplier),_.$set(U),(!R||N&2)&&E!==(E=Q[16].cost.time+"")&&Se(L,E),(!R||N&2)&&V!==(V=Q[16].flatTime?"":"%")&&Se(Z,V),N&2){P=Object.keys(Q[16].cost);let ee;for(ee=0;ee<P.length;ee+=1){let fe=Us(Q,P,ee);he[ee]?(he[ee].p(fe,N),g(he[ee],1)):(he[ee]=Gs(fe),he[ee].c(),g(he[ee],1),he[ee].m(y,null))}for(te(),ee=P.length;ee<he.length;ee+=1)q(ee);ne()}},i(Q){if(!R){g(_.$$.fragment,Q);for(let N=0;N<P.length;N+=1)g(he[N]);R=!0}},o(Q){w(_.$$.fragment,Q),he=he.filter(Boolean);for(let N=0;N<he.length;N+=1)w(he[N]);R=!1},d(Q){Q&&S(e),Q&&S(l),Q&&S(o),ue&&ue.d(),W(_),Q&&S(v),Q&&S(y),_e(he,Q)}}}function Ah(t){let e,r,n,i,s,l,o,a,u,f=F.tr("Shots")+"",c,d,h=t[16].item.clipSize+"",p,m,_=F.tr("Wgt")+"",v,y,A=t[16].item.weight+"",I,E;return r=new Cn({props:{src:F.sprite(t[16].item.sprite),maxWidth:32*t[16].item.invWidth,maxHeight:32*t[16].item.invHeight,zoom:"2"}}),s=new qe({props:{href:t[16].item.type}}),{c(){e=T("td"),X(r.$$.fragment),n=z(),i=T("td"),X(s.$$.fragment),l=z(),o=T("br"),a=z(),u=T("small"),c=ce(f),d=ce(": "),p=ce(h),m=z(),v=ce(_),y=ce(": "),I=ce(A),$(e,"class","item-ammo-img"),$(i,"colspan","2")},m(L,M){x(L,e,M),H(r,e,null),x(L,n,M),x(L,i,M),H(s,i,null),C(i,l),C(i,o),C(i,a),C(i,u),C(u,c),C(u,d),C(u,p),C(u,m),C(u,v),C(u,y),C(u,I),E=!0},p(L,M){let V={};M&2&&(V.src=F.sprite(L[16].item.sprite)),M&2&&(V.maxWidth=32*L[16].item.invWidth),M&2&&(V.maxHeight=32*L[16].item.invHeight),r.$set(V);let Z={};M&2&&(Z.href=L[16].item.type),s.$set(Z),(!E||M&2)&&h!==(h=L[16].item.clipSize+"")&&Se(p,h),(!E||M&2)&&A!==(A=L[16].item.weight+"")&&Se(I,A)},i(L){E||(g(r.$$.fragment,L),g(s.$$.fragment,L),E=!0)},o(L){w(r.$$.fragment,L),w(s.$$.fragment,L),E=!1},d(L){L&&S(e),W(r),L&&S(n),L&&S(i),W(s)}}}function Hs(t){let e,r=F.str("at !N! m").replace("!N!",`<em>${t[16].range}</em>`)+"",n;return{c(){e=new je(!1),n=z(),e.a=n},m(i,s){e.m(r,i,s),x(i,n,s)},p(i,s){s&2&&r!==(r=F.str("at !N! m").replace("!N!",`<em>${i[16].range}</em>`)+"")&&e.p(r)},d(i){i&&e.d(),i&&S(n)}}}function Xs(t){let e,r,n,i,s,l,o=F.str(t[19])+"",a,u,f;return i=new ye({props:{val:t[16].cost[t[19]]}}),{c(){e=T("br"),r=z(),n=T("nobr"),X(i.$$.fragment),s=z(),l=T("small"),a=ce(o),u=z()},m(c,d){x(c,e,d),x(c,r,d),x(c,n,d),H(i,n,null),C(n,s),C(n,l),C(l,a),C(n,u),f=!0},p(c,d){let h={};d&2&&(h.val=c[16].cost[c[19]]),i.$set(h),(!f||d&2)&&o!==(o=F.str(c[19])+"")&&Se(a,o)},i(c){f||(g(i.$$.fragment,c),f=!0)},o(c){w(i.$$.fragment,c),f=!1},d(c){c&&S(e),c&&S(r),c&&S(n),W(i)}}}function Gs(t){let e,r,n=t[19]!="time"&&t[16].cost[t[19]]!=0&&Xs(t);return{c(){n&&n.c(),e=be()},m(i,s){n&&n.m(i,s),x(i,e,s),r=!0},p(i,s){i[19]!="time"&&i[16].cost[i[19]]!=0?n?(n.p(i,s),s&2&&g(n,1)):(n=Xs(i),n.c(),g(n,1),n.m(e.parentNode,e)):n&&(te(),w(n,1,1,()=>{n=null}),ne())},i(i){r||(g(n),r=!0)},o(i){w(n),r=!1},d(i){n&&n.d(i),i&&S(e)}}}function Ys(t){let e=t[16].pellets>1&&t[16].damageBonus?"(":"",r,n,i,s=(t[16].damage||0)+"",l,o,a,u,f,c=t[16].pellets>1&&t[16].damageBonus?")":"",d,h,p=t[16].pellets>1?" \xD7"+t[16].pellets:"",m,_,v,y,A,I;u=new _t({props:{plus:!0,bonus:t[16].damageBonus}});let E=t[16].damageType&&Zs(t);return{c(){r=ce(e),n=z(),i=T("em"),l=ce(s),o=z(),a=T("small"),X(u.$$.fragment),f=z(),d=ce(c),h=z(),m=ce(p),_=z(),v=T("br"),y=z(),E&&E.c(),A=be()},m(L,M){x(L,r,M),x(L,n,M),x(L,i,M),C(i,l),x(L,o,M),x(L,a,M),H(u,a,null),C(a,f),C(a,d),x(L,h,M),x(L,m,M),x(L,_,M),x(L,v,M),x(L,y,M),E&&E.m(L,M),x(L,A,M),I=!0},p(L,M){(!I||M&2)&&e!==(e=L[16].pellets>1&&L[16].damageBonus?"(":"")&&Se(r,e),(!I||M&2)&&s!==(s=(L[16].damage||0)+"")&&Se(l,s);let V={};M&2&&(V.bonus=L[16].damageBonus),u.$set(V),(!I||M&2)&&c!==(c=L[16].pellets>1&&L[16].damageBonus?")":"")&&Se(d,c),(!I||M&2)&&p!==(p=L[16].pellets>1?" \xD7"+L[16].pellets:"")&&Se(m,p),L[16].damageType?E?(E.p(L,M),M&2&&g(E,1)):(E=Zs(L),E.c(),g(E,1),E.m(A.parentNode,A)):E&&(te(),w(E,1,1,()=>{E=null}),ne())},i(L){I||(g(u.$$.fragment,L),g(E),I=!0)},o(L){w(u.$$.fragment,L),w(E),I=!1},d(L){L&&S(r),L&&S(n),L&&S(i),L&&S(o),L&&S(a),W(u),L&&S(h),L&&S(m),L&&S(_),L&&S(v),L&&S(y),E&&E.d(L),L&&S(A)}}}function Zs(t){let e,r;return e=new qe({props:{href:it[t[16].damageType]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&2&&(s.href=it[n[16].damageType]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Ks(t){let e,r;return e=new xn({props:{items:t[0].meleeAlter}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[0].meleeAlter),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Vs(t){let e,r;return e=new xn({props:{items:t[16].alter}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&2&&(s.items=n[16].alter),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Qs(t){let e,r,n,i,s,l,o,a,u,f=[Ah,wh],c=[];function d(_,v){return _[16].mode=="ammo"?0:1}r=d(t,-1),n=c[r]=f[r](t);let h=("damage"in t[16]||"damageType"in t[16])&&Ys(t),p=t[16].mode=="melee"&&t[0].meleeAlter&&Ks(t),m=t[16].mode=="ammo"&&t[16].alter&&Vs(t);return{c(){e=T("tr"),n.c(),i=z(),s=T("td"),h&&h.c(),l=z(),p&&p.c(),o=z(),m&&m.c(),a=be()},m(_,v){x(_,e,v),c[r].m(e,null),C(e,i),C(e,s),h&&h.m(s,null),x(_,l,v),p&&p.m(_,v),x(_,o,v),m&&m.m(_,v),x(_,a,v),u=!0},p(_,v){let y=r;r=d(_,v),r===y?c[r].p(_,v):(te(),w(c[y],1,1,()=>{c[y]=null}),ne(),n=c[r],n?n.p(_,v):(n=c[r]=f[r](_),n.c()),g(n,1),n.m(e,i)),"damage"in _[16]||"damageType"in _[16]?h?(h.p(_,v),v&2&&g(h,1)):(h=Ys(_),h.c(),g(h,1),h.m(s,null)):h&&(te(),w(h,1,1,()=>{h=null}),ne()),_[16].mode=="melee"&&_[0].meleeAlter?p?(p.p(_,v),v&3&&g(p,1)):(p=Ks(_),p.c(),g(p,1),p.m(o.parentNode,o)):p&&(te(),w(p,1,1,()=>{p=null}),ne()),_[16].mode=="ammo"&&_[16].alter?m?(m.p(_,v),v&2&&g(m,1)):(m=Vs(_),m.c(),g(m,1),m.m(a.parentNode,a)):m&&(te(),w(m,1,1,()=>{m=null}),ne())},i(_){u||(g(n),g(h),g(p),g(m),u=!0)},o(_){w(n),w(h),w(p),w(m),u=!1},d(_){_&&S(e),c[r].d(),h&&h.d(),_&&S(l),p&&p.d(_),_&&S(o),m&&m.d(_),_&&S(a)}}}function Js(t){let e,r;return e=new xn({props:{items:t[0].damageAlter}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[0].damageAlter),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Sh(t){let e,r,n,i,s,l,o,a,u,f,c,d,h,p;n=new ye({props:{val:t[7]}});let m=[Bh,Dh,Fh,Ih,Oh,$h,Eh,Th,xh],_=[];function v(y,A){return A&24&&(l=null),A&24&&(o=null),A&24&&(a=null),A&24&&(u=null),A&24&&(f=null),l==null&&(l=!!["manufacture"].includes(y[7])),l?0:(o==null&&(o=!!["damageBonus","meleeBonus","accuracyMultiplier","meleeMultiplier","closeQuartersMultiplier"].includes(y[7])),o?1:(a==null&&(a=!!["damageType","meleeType"].includes(y[7])),a?2:y[7]=="battleType"?3:(u==null&&(u=!!y[7].includes("Sound")),u?4:(f==null&&(f=!!["floorSprite","handSprite"].includes(y[7])),f?5:y[7]=="prisonType"?6:y[7]=="costBuy"?7:8))))}return c=v(t,-1),d=_[c]=m[c](t),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=z(),s=T("td"),d.c(),h=z(),$(s,"class","item-right-column")},m(y,A){x(y,e,A),C(e,r),H(n,r,null),C(e,i),C(e,s),_[c].m(s,null),C(e,h),p=!0},p(y,A){let I={};A&24&&(I.val=y[7]),n.$set(I);let E=c;c=v(y,A),c===E?_[c].p(y,A):(te(),w(_[E],1,1,()=>{_[E]=null}),ne(),d=_[c],d?d.p(y,A):(d=_[c]=m[c](y),d.c()),g(d,1),d.m(s,null))},i(y){p||(g(n.$$.fragment,y),g(d),p=!0)},o(y){w(n.$$.fragment,y),w(d),p=!1},d(y){y&&S(e),W(n),_[c].d()}}}function Ch(t){let e,r=t[3].misc.length>0&&no(t);return{c(){r&&r.c(),e=be()},m(n,i){r&&r.m(n,i),x(n,e,i)},p(n,i){n[3].misc.length>0?r?r.p(n,i):(r=no(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:ae,o:ae,d(n){r&&r.d(n),n&&S(e)}}}function xh(t){let e,r;return e=new ye({props:{val:t[8]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&24&&(s.val=n[8]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Th(t){let e,r,n,i;return e=new ye({props:{val:t[8]}}),n=new ye({props:{val:t[0].requiresBuy||""}}),{c(){X(e.$$.fragment),r=z(),X(n.$$.fragment)},m(s,l){H(e,s,l),x(s,r,l),H(n,s,l),i=!0},p(s,l){let o={};l&24&&(o.val=s[8]),e.$set(o);let a={};l&1&&(a.val=s[0].requiresBuy||""),n.$set(a)},i(s){i||(g(e.$$.fragment,s),g(n.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(n.$$.fragment,s),i=!1},d(s){W(e,s),s&&S(r),W(n,s)}}}function Eh(t){let e,r;return e=new qe({props:{href:"prisonType"+t[8]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&24&&(s.href="prisonType"+n[8]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function $h(t){let e,r=t[8]+"",n,i,s,l,o,a;return{c(){e=T("a"),n=ce(r),s=z(),l=T("img"),Ce(e,"vertical-align","top"),$(e,"href",i=F.obsSprite(t[7],t[8])),$(l,"class","item-img sprite"),$(l,"alt",o=t[8]),Ue(l.src,a=F.obsSprite(t[7],t[8]))||$(l,"src",a)},m(u,f){x(u,e,f),C(e,n),x(u,s,f),x(u,l,f)},p(u,f){f&24&&r!==(r=u[8]+"")&&Se(n,r),f&24&&i!==(i=F.obsSprite(u[7],u[8]))&&$(e,"href",i),f&24&&o!==(o=u[8])&&$(l,"alt",o),f&24&&!Ue(l.src,a=F.obsSprite(u[7],u[8]))&&$(l,"src",a)},i:ae,o:ae,d(u){u&&S(e),u&&S(s),u&&S(l)}}}function Oh(t){let e,r=t[5](t[8]),n=[];for(let i=0;i<r.length;i+=1)n[i]=eo(zs(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=be()},m(i,s){for(let l=0;l<n.length;l+=1)n[l].m(i,s);x(i,e,s)},p(i,s){if(s&56){r=i[5](i[8]);let l;for(l=0;l<r.length;l+=1){let o=zs(i,r,l);n[l]?n[l].p(o,s):(n[l]=eo(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},i:ae,o:ae,d(i){_e(n,i),i&&S(e)}}}function Ih(t){let e=t[8]+"",r,n,i=F.tr("battleType"+t[8])+"",s;return{c(){r=ce(e),n=ce(": "),s=ce(i)},m(l,o){x(l,r,o),x(l,n,o),x(l,s,o)},p(l,o){o&24&&e!==(e=l[8]+"")&&Se(r,e),o&24&&i!==(i=F.tr("battleType"+l[8])+"")&&Se(s,i)},i:ae,o:ae,d(l){l&&S(r),l&&S(n),l&&S(s)}}}function Fh(t){let e=F.damageTypeName(t[8])+"",r;return{c(){r=ce(e)},m(n,i){x(n,r,i)},p(n,i){i&24&&e!==(e=F.damageTypeName(n[8])+"")&&Se(r,e)},i:ae,o:ae,d(n){n&&S(r)}}}function Dh(t){let e,r;return e=new _t({props:{bonus:t[8]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&24&&(s.bonus=n[8]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Bh(t){let e,r,n=Object.keys(t[8]),i=[];for(let l=0;l<n.length;l+=1)i[l]=to(Ps(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=be()},m(l,o){for(let a=0;a<i.length;a+=1)i[a].m(l,o);x(l,e,o),r=!0},p(l,o){if(o&24){n=Object.keys(l[8]);let a;for(a=0;a<n.length;a+=1){let u=Ps(l,n,a);i[a]?(i[a].p(u,o),g(i[a],1)):(i[a]=to(u),i[a].c(),g(i[a],1),i[a].m(e.parentNode,e))}for(te(),a=n.length;a<i.length;a+=1)s(a);ne()}},i(l){if(!r){for(let o=0;o<n.length;o+=1)g(i[o]);r=!0}},o(l){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);r=!1},d(l){_e(i,l),l&&S(e)}}}function eo(t){let e,r=t[13]>0?"<br/>":"",n,i,s,l;return{c(){e=new je(!1),n=z(),i=T("audio"),s=ce("Audio tag not working"),e.a=n,i.controls=!0,Ue(i.src,l=t[14])||$(i,"src",l)},m(o,a){e.m(r,o,a),x(o,n,a),x(o,i,a),C(i,s)},p(o,a){a&24&&!Ue(i.src,l=o[14])&&$(i,"src",l)},d(o){o&&e.d(),o&&S(n),o&&S(i)}}}function to(t){let e,r,n,i,s,l,o,a,u;return r=new ye({props:{val:t[11]}}),i=new ye({props:{val:F.manufacture[t[11]]?.requiredItems||""}}),l=new ye({props:{val:F.manufacture[t[11]]?.producedItems||""}}),{c(){e=T("div"),X(r.$$.fragment),n=ce(`:\r
                `),X(i.$$.fragment),s=ce(` \u2192\r
                `),X(l.$$.fragment),o=z(),$(e,"class",a=t[13]>0&&"top-border")},m(f,c){x(f,e,c),H(r,e,null),C(e,n),H(i,e,null),C(e,s),H(l,e,null),C(e,o),u=!0},p(f,c){let d={};c&24&&(d.val=f[11]),r.$set(d);let h={};c&24&&(h.val=F.manufacture[f[11]]?.requiredItems||""),i.$set(h);let p={};c&24&&(p.val=F.manufacture[f[11]]?.producedItems||""),l.$set(p)},i(f){u||(g(r.$$.fragment,f),g(i.$$.fragment,f),g(l.$$.fragment,f),u=!0)},o(f){w(r.$$.fragment,f),w(i.$$.fragment,f),w(l.$$.fragment,f),u=!1},d(f){f&&S(e),W(r),W(i),W(l)}}}function no(t){let e,r,n,i=t[4]?"Hide":"See",s,l,o,a,u;return{c(){e=T("tr"),r=T("td"),n=T("button"),s=ce(i),l=ce(" details"),o=z(),$(n,"class","btn-hover-effect btn-hover-effect--effect-1"),$(r,"colspan","2")},m(f,c){x(f,e,c),C(e,r),C(r,n),C(n,s),C(n,l),C(e,o),a||(u=Oe(n,"click",t[6]),a=!0)},p(f,c){c&16&&i!==(i=f[4]?"Hide":"See")&&Se(s,i)},d(f){f&&S(e),a=!1,u()}}}function ro(t){let e,r,n,i,s=[Ch,Sh],l=[];function o(a,u){return a[7]=="anal"?0:1}return e=o(t,-1),r=l[e]=s[e](t),{c(){r.c(),n=be()},m(a,u){l[e].m(a,u),x(a,n,u),i=!0},p(a,u){let f=e;e=o(a,u),e===f?l[e].p(a,u):(te(),w(l[f],1,1,()=>{l[f]=null}),ne(),r=l[e],r?r.p(a,u):(r=l[e]=s[e](a),r.c()),g(r,1),r.m(n.parentNode,n))},i(a){i||(g(r),i=!0)},o(a){w(r),i=!1},d(a){l[e].d(a),a&&S(n)}}}function Lh(t){let e,r,n,i,s,l,o,a=(t[0].sprite&&t[0].sprite!="Resources/Blanks/Blank.png"||t[1].length>0)&&Ws(t),u=t[4]?[...t[3].first,["anal"],...t[3].misc]:[...t[3].first,["anal"]],f=[];for(let d=0;d<u.length;d+=1)f[d]=ro(Rs(t,u,d));let c=d=>w(f[d],1,1,()=>{f[d]=null});return{c(){e=T("table"),r=T("tr"),n=T("td"),i=ce(t[2]),s=z(),a&&a.c(),l=z();for(let d=0;d<f.length;d+=1)f[d].c();$(n,"colspan","2"),$(r,"class","table-header"),$(e,"class","main-table")},m(d,h){x(d,e,h),C(e,r),C(r,n),C(n,i),C(e,s),a&&a.m(e,null),C(e,l);for(let p=0;p<f.length;p+=1)f[p].m(e,null);o=!0},p(d,[h]){if((!o||h&4)&&Se(i,d[2]),d[0].sprite&&d[0].sprite!="Resources/Blanks/Blank.png"||d[1].length>0?a?(a.p(d,h),h&3&&g(a,1)):(a=Ws(d),a.c(),g(a,1),a.m(e,l)):a&&(te(),w(a,1,1,()=>{a=null}),ne()),h&57){u=d[4]?[...d[3].first,["anal"],...d[3].misc]:[...d[3].first,["anal"]];let p;for(p=0;p<u.length;p+=1){let m=Rs(d,u,p);f[p]?(f[p].p(m,h),g(f[p],1)):(f[p]=ro(m),f[p].c(),g(f[p],1),f[p].m(e,null))}for(te(),p=u.length;p<f.length;p+=1)c(p);ne()}},i(d){if(!o){g(a);for(let h=0;h<u.length;h+=1)g(f[h]);o=!0}},o(d){w(a),f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)w(f[h]);o=!1},d(d){d&&S(e),a&&a.d(),_e(f,d)}}}function Nh(t,e,r){let{entry:n}=e,i,s,l,o=!1;function a(f){return f?(f.length||(f=[f]),f.map(c=>F.sounds[c]).filter(c=>c)):[]}let u=f=>r(4,o=!o);return t.$$set=f=>{"entry"in f&&r(0,n=f.entry)},t.$$.update=()=>{if(t.$$.dirty&3){e:{if(console.info(n),r(1,s=n.attacks().slice()),r(2,i=(n.battleType?F.tr("battleType"+n.battleType)+" ":"")+F.tr("Item")),n.compatibleAmmo)for(let f of n.compatibleAmmo){let d=F.items[f].attacks()[0];s.push(d)}r(3,l=Ne(n,{first:["costBuy","costSell","tuUse","monthlySalary","monthlyMaintenance","invHeight","invWidth","weight","size","isConsumable","maxRange","medikitTargetSelf","medikitType","stimulant","stunRecovery","dropoff","costPrime","costUnprime","twoHanded","blockBothHands","oneHandedPenalty","kneelBonus","blastRadius","requires","categories","armors","compatibleWeapons","clipSize","liveAlien","recover","prisonType","manufacture","componentOf","loot","ufos","terrains","spawnUnit"],exclude:["requiresBuy","sprite","type","compatibleAmmo","_attacks","damageAlter","accuracyMelee","accuracyMultiplier","accuracySnap","costAuto","costMelee","costSnap","damageBonus","damageType"]})),console.info(s)}}},[n,s,i,l,o,a,u]}var Gr=class extends ve{constructor(e){super(),ke(this,e,Nh,Lh,ge,{entry:0})}},Tn=Gr;function io(t,e,r){let n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n[10]=r,n}function lo(t,e,r){let n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function so(t,e,r){let n=t.slice();return n[15]=e[r],n[10]=r,n}function oo(t,e,r){let n=t.slice();return n[12]=e[r],n}function ao(t,e,r){let n=t.slice();return n[11]=e[r][0],n[19]=e[r][1],n[10]=r,n}function uo(t,e,r){let n=t.slice();return n[21]=e[r],n[23]=r,n}function fo(t,e,r){let n=t.slice();return n[24]=e[r],n[10]=r,n}function co(t,e,r){let n=t.slice();return n[26]=e[r],n[23]=r,n}function ho(t){let e,r,n,i;return n=new He({props:{items:t[2]}}),{c(){e=T("span"),e.textContent="- see also",r=z(),X(n.$$.fragment),Ce(e,"color","white")},m(s,l){x(s,e,l),x(s,r,l),H(n,s,l),i=!0},p(s,l){let o={};l&4&&(o.items=s[2]),n.$set(o)},i(s){i||(g(n.$$.fragment,s),i=!0)},o(s){w(n.$$.fragment,s),i=!1},d(s){s&&S(e),s&&S(r),W(n,s)}}}function po(t){let e,r,n=t[3]?"Hide":"See",i,s,l,o;return{c(){e=T("p"),r=T("button"),i=ce(n),s=ce(" all variants"),$(r,"class","btn-hover-effect btn-hover-effect--effect-1")},m(a,u){x(a,e,u),C(e,r),C(r,i),C(r,s),l||(o=Oe(r,"click",t[5]),l=!0)},p(a,u){u&8&&n!==(n=a[3]?"Hide":"See")&&Se(i,n)},d(a){a&&S(e),l=!1,o()}}}function mo(t){let e,r,n,i=Object.keys(t[0].dollSprites).sort(t[6]),s=[];for(let o=0;o<i.length;o+=1)s[o]=vo(fo(t,i,o));let l=!t[3]&&ko(t);return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=z(),r=T("div"),l&&l.c(),$(r,"style",n=`min-height:${t[3]?(Math.floor(Object.keys(t[0].dollSprites).length/En)+1)*120:120}px;margin-left:175px;`)},m(o,a){for(let u=0;u<s.length;u+=1)s[u].m(o,a);x(o,e,a),x(o,r,a),l&&l.m(r,null)},p(o,a){if(a&25){i=Object.keys(o[0].dollSprites).sort(o[6]);let u;for(u=0;u<i.length;u+=1){let f=fo(o,i,u);s[u]?s[u].p(f,a):(s[u]=vo(f),s[u].c(),s[u].m(e.parentNode,e))}for(;u<s.length;u+=1)s[u].d(1);s.length=i.length}o[3]?l&&(l.d(1),l=null):l?l.p(o,a):(l=ko(o),l.c(),l.m(r,null)),a&9&&n!==(n=`min-height:${o[3]?(Math.floor(Object.keys(o[0].dollSprites).length/En)+1)*120:120}px;margin-left:175px;`)&&$(r,"style",n)},d(o){_e(s,o),o&&S(e),o&&S(r),l&&l.d()}}}function _o(t){let e,r,n=t[3]&&go(t),i=t[0].dollSprites[t[24]],s=[];for(let l=0;l<i.length;l+=1)s[l]=bo(co(t,i,l));return{c(){e=T("div"),n&&n.c(),r=z();for(let l=0;l<s.length;l+=1)s[l].c();$(e,"class","armor"),Ce(e,"left",t[10]%En*80+"px"),Ce(e,"top",Math.floor(t[10]/En)*120+"px")},m(l,o){x(l,e,o),n&&n.m(e,null),C(e,r);for(let a=0;a<s.length;a+=1)s[a].m(e,null)},p(l,o){if(l[3]?n?n.p(l,o):(n=go(l),n.c(),n.m(e,r)):n&&(n.d(1),n=null),o&17){i=l[0].dollSprites[l[24]];let a;for(a=0;a<i.length;a+=1){let u=co(l,i,a);s[a]?s[a].p(u,o):(s[a]=bo(u),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=i.length}},d(l){l&&S(e),n&&n.d(),_e(s,l)}}}function go(t){let e,r=t[24]+"",n;return{c(){e=T("div"),n=ce(r),$(e,"class","armor-variant")},m(i,s){x(i,e,s),C(e,n)},p(i,s){s&1&&r!==(r=i[24]+"")&&Se(n,r)},d(i){i&&S(e)}}}function bo(t){let e,r,n;return{c(){e=T("img"),Ue(e.src,r=t[26])||$(e,"src",r),$(e,"alt",n=t[24]),$(e,"onerror",t[4]),$(e,"class","armor-layer")},m(i,s){x(i,e,s)},p(i,s){s&1&&!Ue(e.src,r=i[26])&&$(e,"src",r),s&1&&n!==(n=i[24])&&$(e,"alt",n)},d(i){i&&S(e)}}}function vo(t){let e,r=(t[3]||t[10]==0)&&_o(t);return{c(){r&&r.c(),e=be()},m(n,i){r&&r.m(n,i),x(n,e,i)},p(n,i){n[3]||n[10]==0?r?r.p(n,i):(r=_o(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(n){r&&r.d(n),n&&S(e)}}}function ko(t){let e;return{c(){e=T("p")},m(r,n){x(r,e,n),e.innerHTML=t[1]},p(r,n){n&2&&(e.innerHTML=r[1])},d(r){r&&S(e)}}}function yo(t){let e,r,n,i,s,l,o;n=new xe({props:{s:t[12]}});let a=Ne(t[0][t[12]]).all,u=[];for(let c=0;c<a.length;c+=1)u[c]=Ao(ao(t,a,c));let f=c=>w(u[c],1,1,()=>{u[c]=null});return{c(){e=T("div"),r=T("header"),X(n.$$.fragment),i=z();for(let c=0;c<u.length;c+=1)u[c].c();s=z(),$(e,"class",l="armor-column "+(t[12]=="damageModifier"&&"armor-column-resists"))},m(c,d){x(c,e,d),C(e,r),H(n,r,null),C(e,i);for(let h=0;h<u.length;h+=1)u[h].m(e,null);C(e,s),o=!0},p(c,d){if(d&1){a=Ne(c[0][c[12]]).all;let h;for(h=0;h<a.length;h+=1){let p=ao(c,a,h);u[h]?(u[h].p(p,d),g(u[h],1)):(u[h]=Ao(p),u[h].c(),g(u[h],1),u[h].m(e,s))}for(te(),h=a.length;h<u.length;h+=1)f(h);ne()}},i(c){if(!o){g(n.$$.fragment,c);for(let d=0;d<a.length;d+=1)g(u[d]);o=!0}},o(c){w(n.$$.fragment,c),u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)w(u[d]);o=!1},d(c){c&&S(e),W(n),_e(u,c)}}}function Mh(t){let e,r;return e=new ye({props:{val:t[11]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[11]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Rh(t){let e,r;return e=new qe({props:{href:it[t[11]]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.href=it[n[11]]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function zh(t){let e,r,n,i,s=[Uh,jh],l=[];function o(a,u){return a[12]=="damageModifier"?0:1}return r=o(t,-1),n=l[r]=s[r](t),{c(){e=T("em"),n.c()},m(a,u){x(a,e,u),l[r].m(e,null),i=!0},p(a,u){n.p(a,u)},i(a){i||(g(n),i=!0)},o(a){w(n),i=!1},d(a){a&&S(e),l[r].d()}}}function Ph(t){let e,r,n=Object.keys(t[19]),i=[];for(let l=0;l<n.length;l+=1)i[l]=wo(uo(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=be()},m(l,o){for(let a=0;a<i.length;a+=1)i[a].m(l,o);x(l,e,o),r=!0},p(l,o){if(o&1){n=Object.keys(l[19]);let a;for(a=0;a<n.length;a+=1){let u=uo(l,n,a);i[a]?(i[a].p(u,o),g(i[a],1)):(i[a]=wo(u),i[a].c(),g(i[a],1),i[a].m(e.parentNode,e))}for(te(),a=n.length;a<i.length;a+=1)s(a);ne()}},i(l){if(!r){for(let o=0;o<n.length;o+=1)g(i[o]);r=!0}},o(l){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);r=!1},d(l){_e(i,l),l&&S(e)}}}function jh(t){let e,r;return e=new ye({props:{val:t[19]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[19]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Uh(t){let e,r=~~(t[19]*100)+"",n,i;return{c(){e=T("span"),n=ce(r),$(e,"style",i=`text-weight:bold; color:hsl(${~~(t[19]*70)}, 100%, 50%);`)},m(s,l){x(s,e,l),C(e,n)},p(s,l){l&1&&r!==(r=~~(s[19]*100)+"")&&Se(n,r),l&1&&i!==(i=`text-weight:bold; color:hsl(${~~(s[19]*70)}, 100%, 50%);`)&&$(e,"style",i)},i:ae,o:ae,d(s){s&&S(e)}}}function Wh(t){let e;return{c(){e=T("br")},m(r,n){x(r,e,n)},d(r){r&&S(e)}}}function wo(t){let e,r,n,i,s,l,o=t[23]!=0&&Wh(t);return r=new ye({props:{val:t[21]}}),s=new ye({props:{val:t[19][t[21]]}}),{c(){o&&o.c(),e=z(),X(r.$$.fragment),n=ce(`\r
                        :\r
                        `),i=T("em"),X(s.$$.fragment)},m(a,u){o&&o.m(a,u),x(a,e,u),H(r,a,u),x(a,n,u),x(a,i,u),H(s,i,null),l=!0},p(a,u){let f={};u&1&&(f.val=a[21]),r.$set(f);let c={};u&1&&(c.val=a[19][a[21]]),s.$set(c)},i(a){l||(g(r.$$.fragment,a),g(s.$$.fragment,a),l=!0)},o(a){w(r.$$.fragment,a),w(s.$$.fragment,a),l=!1},d(a){o&&o.d(a),a&&S(e),W(r,a),a&&S(n),a&&S(i),W(s)}}}function Ao(t){let e,r,n,i,s,l,o,a,u=[Rh,Mh],f=[];function c(m,_){return m[12]=="damageModifier"?0:1}r=c(t,-1),n=f[r]=u[r](t);let d=[Ph,zh],h=[];function p(m,_){return m[12]=="recovery"?0:1}return l=p(t,-1),o=h[l]=d[l](t),{c(){e=T("div"),n.c(),i=z(),s=T("div"),o.c()},m(m,_){x(m,e,_),f[r].m(e,null),x(m,i,_),x(m,s,_),h[l].m(s,null),a=!0},p(m,_){n.p(m,_),o.p(m,_)},i(m){a||(g(n),g(o),a=!0)},o(m){w(n),w(o),a=!1},d(m){m&&S(e),f[r].d(),m&&S(i),m&&S(s),h[l].d()}}}function So(t){let e,r,n=t[0][t[12]]&&yo(t);return{c(){n&&n.c(),e=be()},m(i,s){n&&n.m(i,s),x(i,e,s),r=!0},p(i,s){i[0][i[12]]?n?(n.p(i,s),s&1&&g(n,1)):(n=yo(i),n.c(),g(n,1),n.m(e.parentNode,e)):n&&(te(),w(n,1,1,()=>{n=null}),ne())},i(i){r||(g(n),r=!0)},o(i){w(n),r=!1},d(i){n&&n.d(i),i&&S(e)}}}function qh(t){let e,r;return e=new ye({props:{val:t[12]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[12]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Hh(t){let e,r;return e=new ye({props:{val:t[12].filter(Eo)}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[12].filter(Eo)),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Xh(t){let e,r;return e=new _t({props:{bonus:t[12]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.bonus=n[12]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Gh(t){let e,r=t[12]+"",n,i;return{c(){e=T("a"),n=ce(r),$(e,"href",i=F.sprite(t[12]))},m(s,l){x(s,e,l),C(e,n)},p(s,l){l&1&&r!==(r=s[12]+"")&&Se(n,r),l&1&&i!==(i=F.sprite(s[12]))&&$(e,"href",i)},i:ae,o:ae,d(s){s&&S(e)}}}function Yh(t){let e,r;return e=new ye({props:{val:t[12][0]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[12][0]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Zh(t){let e,r=t[12],n=[];for(let i=0;i<r.length;i+=1)n[i]=Co(so(t,r,i));return{c(){e=T("table");for(let i=0;i<n.length;i+=1)n[i].c();$(e,"class","number-table")},m(i,s){x(i,e,s);for(let l=0;l<n.length;l+=1)n[l].m(e,null)},p(i,s){if(s&1){r=i[12];let l;for(l=0;l<r.length;l+=1){let o=so(i,r,l);n[l]?n[l].p(o,s):(n[l]=Co(o),n[l].c(),n[l].m(e,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},i:ae,o:ae,d(i){i&&S(e),_e(n,i)}}}function Co(t){let e,r,n=F.damageTypeName(t[10])+"",i,s,l,o=Math.round(t[15]*100)+"",a,u;return{c(){e=T("tr"),r=T("td"),i=ce(n),s=z(),l=T("td"),a=ce(o),u=ce("%"),$(r,"width","50%"),$(r,"class","number-table1"),$(l,"width","50%"),$(l,"class","number-table2")},m(f,c){x(f,e,c),C(e,r),C(r,i),C(e,s),C(e,l),C(l,a),C(l,u)},p(f,c){c&1&&o!==(o=Math.round(f[15]*100)+"")&&Se(a,o)},d(f){f&&S(e)}}}function xo(t){let e,r,n,i,s,l,o,a,u,f,c;n=new ye({props:{val:t[11]}});let d=[Zh,Yh,Gh,Xh,Hh,qh],h=[];function p(m,_){return _&1&&(l=null),_&1&&(o=null),_&1&&(a=null),m[11]=="damageModifier"?0:(l==null&&(l=!!["corpseBattle"].includes(m[11])),l?1:m[11]=="spriteSheet"?2:(o==null&&(o=!!["psiDefence","meleeDodge"].includes(m[11])),o?3:(a==null&&(a=!!["builtInWeapons","users","units"].includes(m[11])),a?4:5)))}return u=p(t,-1),f=h[u]=d[u](t),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=z(),s=T("td"),f.c()},m(m,_){x(m,e,_),C(e,r),H(n,r,null),C(e,i),C(e,s),h[u].m(s,null),c=!0},p(m,_){let v={};_&1&&(v.val=m[11]),n.$set(v);let y=u;u=p(m,_),u===y?h[u].p(m,_):(te(),w(h[y],1,1,()=>{h[y]=null}),ne(),f=h[u],f?f.p(m,_):(f=h[u]=d[u](m),f.c()),g(f,1),f.m(s,null))},i(m){c||(g(n.$$.fragment,m),g(f),c=!0)},o(m){w(n.$$.fragment,m),w(f),c=!1},d(m){m&&S(e),W(n),h[u].d()}}}function To(t){let e,r,n,i,s,l,o,a;return n=new ye({props:{val:t[7]}}),l=new _t({props:{bonus:t[8]}}),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=z(),s=T("td"),X(l.$$.fragment),o=z()},m(u,f){x(u,e,f),C(e,r),H(n,r,null),C(e,i),C(e,s),H(l,s,null),C(e,o),a=!0},p(u,f){let c={};f&1&&(c.val=u[7]),n.$set(c);let d={};f&1&&(d.bonus=u[8]),l.$set(d)},i(u){a||(g(n.$$.fragment,u),g(l.$$.fragment,u),a=!0)},o(u){w(n.$$.fragment,u),w(l.$$.fragment,u),a=!1},d(u){u&&S(e),W(n),W(l)}}}function Kh(t){let e,r,n,i,s,l,o,a,u,f=Object.keys(t[0].dollSprites).length>1,c,d,h,p,m,_,v,y,A,I;i=new xe({props:{s:"Armor"}});let E=t[2].length>0&&ho(t),L=f&&po(t),M=t[0].dollSprites&&mo(t),V=["stats","armor","damageModifier"],Z=[];for(let q=0;q<3;q+=1)Z[q]=So(oo(t,V,q));let B=q=>w(Z[q],1,1,()=>{Z[q]=null}),G=Ne(t[0],{exclude:["recovery","type","layersDefinition","spriteFaceColor","spriteHairColor","spriteUtileColor","spriteFaceGroup","spriteHairGroup","spriteUtileGroup","customArmorPreviewIndex","dollSprites","layersDefaultPrefix","frontArmor","sideArmor","rearArmor","underArmor","spriteInv","armor","damageModifier","stats"],first:["builtInWeapons","size"]}).all,k=[];for(let q=0;q<G.length;q+=1)k[q]=xo(lo(t,G,q));let R=q=>w(k[q],1,1,()=>{k[q]=null});y=new Hn({props:{text:"recovery"}});let ue=Ne(t[0].recovery).all,P=[];for(let q=0;q<ue.length;q+=1)P[q]=To(io(t,ue,q));let he=q=>w(P[q],1,1,()=>{P[q]=null});return{c(){e=T("table"),r=T("tr"),n=T("td"),X(i.$$.fragment),s=z(),E&&E.c(),l=z(),o=T("tr"),a=T("td"),u=T("div"),L&&L.c(),c=z(),M&&M.c(),d=z(),h=T("tr"),p=T("td"),m=T("div");for(let q=0;q<3;q+=1)Z[q].c();_=z();for(let q=0;q<k.length;q+=1)k[q].c();v=z(),X(y.$$.fragment),A=z();for(let q=0;q<P.length;q+=1)P[q].c();$(n,"colspan","2"),$(r,"class","table-header"),$(u,"class","armors"),$(a,"colspan","2"),$(m,"class","flex-horisontal"),Ce(m,"max-width","95vw"),$(p,"colspan","2"),$(e,"class","main-table")},m(q,Q){x(q,e,Q),C(e,r),C(r,n),H(i,n,null),C(n,s),E&&E.m(n,null),C(e,l),C(e,o),C(o,a),C(a,u),L&&L.m(u,null),C(u,c),M&&M.m(u,null),C(e,d),C(e,h),C(h,p),C(p,m);for(let N=0;N<3;N+=1)Z[N].m(m,null);C(e,_);for(let N=0;N<k.length;N+=1)k[N].m(e,null);C(e,v),H(y,e,null),C(e,A);for(let N=0;N<P.length;N+=1)P[N].m(e,null);I=!0},p(q,[Q]){if(q[2].length>0?E?(E.p(q,Q),Q&4&&g(E,1)):(E=ho(q),E.c(),g(E,1),E.m(n,null)):E&&(te(),w(E,1,1,()=>{E=null}),ne()),Q&1&&(f=Object.keys(q[0].dollSprites).length>1),f?L?L.p(q,Q):(L=po(q),L.c(),L.m(u,c)):L&&(L.d(1),L=null),q[0].dollSprites?M?M.p(q,Q):(M=mo(q),M.c(),M.m(u,null)):M&&(M.d(1),M=null),Q&1){V=["stats","armor","damageModifier"];let N;for(N=0;N<3;N+=1){let U=oo(q,V,N);Z[N]?(Z[N].p(U,Q),g(Z[N],1)):(Z[N]=So(U),Z[N].c(),g(Z[N],1),Z[N].m(m,null))}for(te(),N=3;N<3;N+=1)B(N);ne()}if(Q&1){G=Ne(q[0],{exclude:["recovery","type","layersDefinition","spriteFaceColor","spriteHairColor","spriteUtileColor","spriteFaceGroup","spriteHairGroup","spriteUtileGroup","customArmorPreviewIndex","dollSprites","layersDefaultPrefix","frontArmor","sideArmor","rearArmor","underArmor","spriteInv","armor","damageModifier","stats"],first:["builtInWeapons","size"]}).all;let N;for(N=0;N<G.length;N+=1){let U=lo(q,G,N);k[N]?(k[N].p(U,Q),g(k[N],1)):(k[N]=xo(U),k[N].c(),g(k[N],1),k[N].m(e,v))}for(te(),N=G.length;N<k.length;N+=1)R(N);ne()}if(Q&1){ue=Ne(q[0].recovery).all;let N;for(N=0;N<ue.length;N+=1){let U=io(q,ue,N);P[N]?(P[N].p(U,Q),g(P[N],1)):(P[N]=To(U),P[N].c(),g(P[N],1),P[N].m(e,null))}for(te(),N=ue.length;N<P.length;N+=1)he(N);ne()}},i(q){if(!I){g(i.$$.fragment,q),g(E);for(let Q=0;Q<3;Q+=1)g(Z[Q]);for(let Q=0;Q<G.length;Q+=1)g(k[Q]);g(y.$$.fragment,q);for(let Q=0;Q<ue.length;Q+=1)g(P[Q]);I=!0}},o(q){w(i.$$.fragment,q),w(E),Z=Z.filter(Boolean);for(let Q=0;Q<3;Q+=1)w(Z[Q]);k=k.filter(Boolean);for(let Q=0;Q<k.length;Q+=1)w(k[Q]);w(y.$$.fragment,q),P=P.filter(Boolean);for(let Q=0;Q<P.length;Q+=1)w(P[Q]);I=!1},d(q){q&&S(e),W(i),E&&E.d(),L&&L.d(),M&&M.d(),_e(Z,q),_e(k,q),W(y),_e(P,q)}}}var En=6;var Eo=t=>t.substr(0,8)!="INV_NULL";function Vh(t,e,r){let{entry:n}=e,{text:i}=e,s=!1,l=[],o=()=>{this.onerror=null,console.log(this.src+" not found"),this.src=Dt},a=f=>r(3,s=!s),u=(f,c)=>F.bodiesCompare([f,c]);return t.$$set=f=>{"entry"in f&&r(0,n=f.entry),"text"in f&&r(1,i=f.text)},t.$$.update=()=>{if(t.$$.dirty&5){e:if(console.log(n),r(2,l=[]),"storeItem"in n&&n.storeItem!="STR_NONE"&&n.storeItem!=n.type&&l.push(n.storeItem),"users"in n)for(let f of n.users.filter(c=>c.substr(0,8)!="INV_NULL"&&c!=n.type&&"##"+c!=window.location.hash&&c!=n.type))l.push(f)}},[n,i,l,s,o,a,u]}var Yr=class extends ve{constructor(e){super(),ke(this,e,Vh,Kh,ge,{entry:0,text:1})}},$o=Yr;function Oo(t,e,r){let n=t.slice();return n[2]=e[r][0],n[3]=e[r][1],n}function Qh(t){let e,r;return e=new ye({props:{val:t[3]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[3]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Jh(t){let e,r,n,i,s,l;return e=new ye({props:{obs:"base",val:33+t[3]}}),n=new ye({props:{obs:"icon",val:t[3]+11}}),s=new ye({props:{obs:"icon",val:t[3]}}),{c(){X(e.$$.fragment),r=z(),X(n.$$.fragment),i=z(),X(s.$$.fragment)},m(o,a){H(e,o,a),x(o,r,a),H(n,o,a),x(o,i,a),H(s,o,a),l=!0},p(o,a){let u={};a&1&&(u.val=33+o[3]),e.$set(u);let f={};a&1&&(f.val=o[3]+11),n.$set(f);let c={};a&1&&(c.val=o[3]),s.$set(c)},i(o){l||(g(e.$$.fragment,o),g(n.$$.fragment,o),g(s.$$.fragment,o),l=!0)},o(o){w(e.$$.fragment,o),w(n.$$.fragment,o),w(s.$$.fragment,o),l=!1},d(o){W(e,o),o&&S(r),W(n,o),o&&S(i),W(s,o)}}}function ep(t){let e,r;return e=new ye({props:{val:t[3].map(t[1])}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[3].map(n[1])),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Io(t){let e,r,n,i,s,l,o,a;r=new ye({props:{val:t[2]}});let u=[ep,Jh,Qh],f=[];function c(d,h){return d[2]=="weaponStrings"?0:d[2]=="sprite"?1:2}return s=c(t,-1),l=f[s]=u[s](t),{c(){e=T("tr"),X(r.$$.fragment),n=z(),i=T("td"),l.c(),o=z()},m(d,h){x(d,e,h),H(r,e,null),C(e,n),C(e,i),f[s].m(i,null),C(e,o),a=!0},p(d,h){let p={};h&1&&(p.val=d[2]),r.$set(p);let m=s;s=c(d,h),s===m?f[s].p(d,h):(te(),w(f[m],1,1,()=>{f[m]=null}),ne(),l=f[s],l?l.p(d,h):(l=f[s]=u[s](d),l.c()),g(l,1),l.m(i,null))},i(d){a||(g(r.$$.fragment,d),g(l),a=!0)},o(d){w(r.$$.fragment,d),w(l),a=!1},d(d){d&&S(e),W(r),f[s].d()}}}function tp(t){let e,r,n,i,s,l=Ne(t[0],{first:["speedMax","soldiers"],exclude:["type","battlescapeTerrainData","craftInventoryTile","deployment"]}).all,o=[];for(let u=0;u<l.length;u+=1)o[u]=Io(Oo(t,l,u));let a=u=>w(o[u],1,1,()=>{o[u]=null});return{c(){e=T("table"),r=T("tr"),n=T("td"),n.textContent=`${F.tr("Craft")}`,i=z();for(let u=0;u<o.length;u+=1)o[u].c();$(n,"colspan","2"),$(r,"class","table-header"),$(e,"class","main-table")},m(u,f){x(u,e,f),C(e,r),C(r,n),C(e,i);for(let c=0;c<o.length;c+=1)o[c].m(e,null);s=!0},p(u,[f]){if(f&1){l=Ne(u[0],{first:["speedMax","soldiers"],exclude:["type","battlescapeTerrainData","craftInventoryTile","deployment"]}).all;let c;for(c=0;c<l.length;c+=1){let d=Oo(u,l,c);o[c]?(o[c].p(d,f),g(o[c],1)):(o[c]=Io(d),o[c].c(),g(o[c],1),o[c].m(e,null))}for(te(),c=l.length;c<o.length;c+=1)a(c);ne()}},i(u){if(!s){for(let f=0;f<l.length;f+=1)g(o[f]);s=!0}},o(u){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)w(o[f]);s=!1},d(u){u&&S(e),_e(o,u)}}}function np(t,e,r){let{entry:n}=e,i=s=>F.tr(s).replace(">{ALT}{0}","");return t.$$set=s=>{"entry"in s&&r(0,n=s.entry)},t.$$.update=()=>{if(t.$$.dirty&1){e:console.info(n)}},[n,i]}var Zr=class extends ve{constructor(e){super(),ke(this,e,np,tp,ge,{entry:0})}},Fo=Zr;function Do(t,e,r){let n=t.slice();return n[1]=e[r],n}function Bo(t){let e,r,n,i,s,l,o,a;return n=new ye({props:{val:t[1][0]}}),l=new ye({props:{val:t[1][1]}}),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=z(),s=T("td"),X(l.$$.fragment),o=z(),$(r,"class","padding-right")},m(u,f){x(u,e,f),C(e,r),H(n,r,null),C(e,i),C(e,s),H(l,s,null),C(e,o),a=!0},p(u,f){let c={};f&1&&(c.val=u[1][0]),n.$set(c);let d={};f&1&&(d.val=u[1][1]),l.$set(d)},i(u){a||(g(n.$$.fragment,u),g(l.$$.fragment,u),a=!0)},o(u){w(n.$$.fragment,u),w(l.$$.fragment,u),a=!1},d(u){u&&S(e),W(n),W(l)}}}function Lo(t){let e=!["type"].includes(t[1][0]),r,n,i=e&&Bo(t);return{c(){i&&i.c(),r=be()},m(s,l){i&&i.m(s,l),x(s,r,l),n=!0},p(s,l){l&1&&(e=!["type"].includes(s[1][0])),e?i?(i.p(s,l),l&1&&g(i,1)):(i=Bo(s),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(te(),w(i,1,1,()=>{i=null}),ne())},i(s){n||(g(i),n=!0)},o(s){w(i),n=!1},d(s){i&&i.d(s),s&&S(r)}}}function No(t){let e,r;return e=new Tn({props:{entry:F.items[t[0].launcher],title:"Launcher: "+F.tr(t[0].launcher)}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.entry=F.items[n[0].launcher]),i&1&&(s.title="Launcher: "+F.tr(n[0].launcher)),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function rp(t){let e,r,n,i,s,l,o=Object.entries(t[0]).sort(Mo),a=[];for(let c=0;c<o.length;c+=1)a[c]=Lo(Do(t,o,c));let u=c=>w(a[c],1,1,()=>{a[c]=null}),f=t[0].launcher&&No(t);return{c(){e=T("table"),r=T("tr"),r.innerHTML='<td colspan="2">Weapon</td>',n=z();for(let c=0;c<a.length;c+=1)a[c].c();i=z(),f&&f.c(),s=be(),$(r,"class","table-header"),$(e,"class","main-table")},m(c,d){x(c,e,d),C(e,r),C(e,n);for(let h=0;h<a.length;h+=1)a[h].m(e,null);x(c,i,d),f&&f.m(c,d),x(c,s,d),l=!0},p(c,[d]){if(d&1){o=Object.entries(c[0]).sort(Mo);let h;for(h=0;h<o.length;h+=1){let p=Do(c,o,h);a[h]?(a[h].p(p,d),g(a[h],1)):(a[h]=Lo(p),a[h].c(),g(a[h],1),a[h].m(e,null))}for(te(),h=o.length;h<a.length;h+=1)u(h);ne()}c[0].launcher?f?(f.p(c,d),d&1&&g(f,1)):(f=No(c),f.c(),g(f,1),f.m(s.parentNode,s)):f&&(te(),w(f,1,1,()=>{f=null}),ne())},i(c){if(!l){for(let d=0;d<o.length;d+=1)g(a[d]);g(f),l=!0}},o(c){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)w(a[d]);w(f),l=!1},d(c){c&&S(e),_e(a,c),c&&S(i),f&&f.d(c),c&&S(s)}}}var Mo=(t,e)=>t[0]>e[0]?1:-1;function ip(t,e,r){let{entry:n}=e;return t.$$set=i=>{"entry"in i&&r(0,n=i.entry)},t.$$.update=()=>{if(t.$$.dirty&1){e:console.log(n)}},[n]}var Kr=class extends ve{constructor(e){super(),ke(this,e,ip,rp,ge,{entry:0})}},Ro=Kr;function zo(t,e,r){let n=t.slice();return n[2]=e[r][0],n[3]=e[r][1],n}function Po(t){let e,r,n,i,s,l,o;return n=new ye({props:{val:t[2],simple:!0}}),s=new ye({props:{val:t[3]}}),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=T("td"),X(s.$$.fragment),l=z()},m(a,u){x(a,e,u),C(e,r),H(n,r,null),C(e,i),H(s,i,null),C(e,l),o=!0},p(a,u){let f={};u&1&&(f.val=a[2]),n.$set(f);let c={};u&1&&(c.val=a[3]),s.$set(c)},i(a){o||(g(n.$$.fragment,a),g(s.$$.fragment,a),o=!0)},o(a){w(n.$$.fragment,a),w(s.$$.fragment,a),o=!1},d(a){a&&S(e),W(n),W(s)}}}function lp(t){let e,r,n,i,s,l=t[0].all,o=[];for(let u=0;u<l.length;u+=1)o[u]=Po(zo(t,l,u));let a=u=>w(o[u],1,1,()=>{o[u]=null});return{c(){e=T("table"),r=T("tr"),n=T("td"),n.textContent=`${F.tr("Unit")}`,i=z();for(let u=0;u<o.length;u+=1)o[u].c();$(n,"colspan","2"),$(n,"class","table-header"),$(e,"class","main-table")},m(u,f){x(u,e,f),C(e,r),C(r,n),C(e,i);for(let c=0;c<o.length;c+=1)o[c].m(e,null);s=!0},p(u,[f]){if(f&1){l=u[0].all;let c;for(c=0;c<l.length;c+=1){let d=zo(u,l,c);o[c]?(o[c].p(d,f),g(o[c],1)):(o[c]=Po(d),o[c].c(),g(o[c],1),o[c].m(e,null))}for(te(),c=l.length;c<o.length;c+=1)a(c);ne()}},i(u){if(!s){for(let f=0;f<l.length;f+=1)g(o[f]);s=!0}},o(u){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)w(o[f]);s=!1},d(u){u&&S(e),_e(o,u)}}}function sp(t,e,r){let{entry:n}=e,i;return t.$$set=s=>{"entry"in s&&r(1,n=s.entry)},t.$$.update=()=>{if(t.$$.dirty&2){e:console.log(n),r(0,i=Ne(n,{first:["stats","armor","canSurrender"],last:Object.keys(n).filter(s=>s.indexOf("ound")!=-1),exclude:["type"]}))}},[i,n]}var Vr=class extends ve{constructor(e){super(),ke(this,e,sp,lp,ge,{entry:1})}},jo=Vr;function Uo(t,e,r){let n=t.slice();return n[3]=e[r][0],n[4]=e[r][1],n}function Wo(t,e,r){let n=t.slice();return n[3]=e[r],n}function op(t){let e,r,n,i,s,l,o,a;return n=new ye({props:{val:t[3]}}),l=new ye({props:{val:t[4]}}),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=z(),s=T("td"),X(l.$$.fragment),o=z()},m(u,f){x(u,e,f),C(e,r),H(n,r,null),C(e,i),C(e,s),H(l,s,null),C(e,o),a=!0},p(u,f){let c={};f&1&&(c.val=u[3]),n.$set(c);let d={};f&1&&(d.val=u[4]),l.$set(d)},i(u){a||(g(n.$$.fragment,u),g(l.$$.fragment,u),a=!0)},o(u){w(n.$$.fragment,u),w(l.$$.fragment,u),a=!1},d(u){u&&S(e),W(n),W(l)}}}function ap(t){let e,r,n=F.tr(t[3])+"",i,s,l,o,a=Object.keys(t[4]),u=[];for(let c=0;c<a.length;c+=1)u[c]=qo(Wo(t,a,c));let f=c=>w(u[c],1,1,()=>{u[c]=null});return{c(){e=T("tr"),r=T("td"),i=ce(n),s=z();for(let c=0;c<u.length;c+=1)u[c].c();l=be(),$(r,"colspan","2"),$(r,"class","table-subheader")},m(c,d){x(c,e,d),C(e,r),C(r,i),x(c,s,d);for(let h=0;h<u.length;h+=1)u[h].m(c,d);x(c,l,d),o=!0},p(c,d){if((!o||d&1)&&n!==(n=F.tr(c[3])+"")&&Se(i,n),d&5){a=Object.keys(c[4]);let h;for(h=0;h<a.length;h+=1){let p=Wo(c,a,h);u[h]?(u[h].p(p,d),g(u[h],1)):(u[h]=qo(p),u[h].c(),g(u[h],1),u[h].m(l.parentNode,l))}for(te(),h=a.length;h<u.length;h+=1)f(h);ne()}},i(c){if(!o){for(let d=0;d<a.length;d+=1)g(u[d]);o=!0}},o(c){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)w(u[d]);o=!1},d(c){c&&S(e),c&&S(s),_e(u,c),c&&S(l)}}}function up(t){let e,r;return e=new Kn({props:{items:t[4],vertical:!0}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[4]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function fp(t){let e,r,n,i,s,l,o,a,u;return n=new xe({props:{s:t[3]}}),o=new He({props:{items:t[4]}}),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=z(),s=T("tr"),l=T("td"),X(o.$$.fragment),a=z(),$(r,"colspan","2"),$(r,"class","table-subheader"),$(l,"colspan","2"),$(l,"class","centered-text")},m(f,c){x(f,e,c),C(e,r),H(n,r,null),C(r,i),x(f,s,c),C(s,l),H(o,l,null),C(l,a),u=!0},p(f,c){let d={};c&1&&(d.s=f[3]),n.$set(d);let h={};c&1&&(h.items=f[4]),o.$set(h)},i(f){u||(g(n.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){w(n.$$.fragment,f),w(o.$$.fragment,f),u=!1},d(f){f&&S(e),W(n),f&&S(s),W(o)}}}function qo(t){let e,r,n,i,s,l,o;return n=new ye({props:{val:t[3]}}),l=new He({props:{items:t[4][t[3]]}}),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=ce(":"),s=T("td"),X(l.$$.fragment)},m(a,u){x(a,e,u),C(e,r),H(n,r,null),C(r,i),C(e,s),H(l,s,null),o=!0},p(a,u){let f={};u&1&&(f.val=a[3]),n.$set(f);let c={};u&1&&(c.items=a[4][a[3]]),l.$set(c)},i(a){o||(g(n.$$.fragment,a),g(l.$$.fragment,a),o=!0)},o(a){w(n.$$.fragment,a),w(l.$$.fragment,a),o=!1},d(a){a&&S(e),W(n),W(l)}}}function Ho(t){let e,r,n,i,s,l,o=[fp,up,ap,op],a=[];function u(f,c){return c&1&&(e=null),c&1&&(r=null),e==null&&(e=!!(f[2].includes(f[3])&&f[4]&&f[4].length>0)),e?0:(r==null&&(r=!!["requiresBaseFunc"].includes(f[3])),r?1:f[3]=="getOneFreeProtected"?2:3)}return n=u(t,-1),i=a[n]=o[n](t),{c(){i.c(),s=be()},m(f,c){a[n].m(f,c),x(f,s,c),l=!0},p(f,c){let d=n;n=u(f,c),n===d?a[n].p(f,c):(te(),w(a[d],1,1,()=>{a[d]=null}),ne(),i=a[n],i?i.p(f,c):(i=a[n]=o[n](f),i.c()),g(i,1),i.m(s.parentNode,s))},i(f){l||(g(i),l=!0)},o(f){w(i),l=!1},d(f){a[n].d(f),f&&S(s)}}}function cp(t){let e,r,n,i,s,l,o=Ne(t[0],{last:t[2],exclude:["name"]}).all,a=[];for(let f=0;f<o.length;f+=1)a[f]=Ho(Uo(t,o,f));let u=f=>w(a[f],1,1,()=>{a[f]=null});return{c(){e=T("table"),r=T("tr"),n=T("td"),i=ce(t[1]),s=z();for(let f=0;f<a.length;f+=1)a[f].c();$(n,"colspan","2"),$(r,"class","table-header"),$(e,"class","main-table")},m(f,c){x(f,e,c),C(e,r),C(r,n),C(n,i),C(e,s);for(let d=0;d<a.length;d+=1)a[d].m(e,null);l=!0},p(f,[c]){if((!l||c&2)&&Se(i,f[1]),c&5){o=Ne(f[0],{last:f[2],exclude:["name"]}).all;let d;for(d=0;d<o.length;d+=1){let h=Uo(f,o,d);a[d]?(a[d].p(h,c),g(a[d],1)):(a[d]=Ho(h),a[d].c(),g(a[d],1),a[d].m(e,null))}for(te(),d=o.length;d<a.length;d+=1)u(d);ne()}},i(f){if(!l){for(let c=0;c<o.length;c+=1)g(a[c]);l=!0}},o(f){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)w(a[c]);l=!1},d(f){f&&S(e),_e(a,f)}}}function dp(t,e,r){let{entry:n}=e,{title:i=F.tr("Research")}=e,s=["unlocks","seeAlso","requiresBaseFunc","manufacture","allowsBuying","freeFrom","dependencies","leadsTo","disables","getOneFree","getOneFreeProtected"];return t.$$set=l=>{"entry"in l&&r(0,n=l.entry),"title"in l&&r(1,i=l.title)},t.$$.update=()=>{if(t.$$.dirty&1){e:console.log(n)}},[n,i,s]}var Qr=class extends ve{constructor(e){super(),ke(this,e,dp,cp,ge,{entry:0,title:1})}},Xo=Qr;function Go(t,e,r){let n=t.slice();return n[1]=e[r],n}function Yo(t,e,r){let n=t.slice();return n[4]=e[r],n}function Zo(t,e,r){let n=t.slice();return n[7]=e[r],n[9]=r,n}function Ko(t){let e,r,n,i,s,l,o,a;n=new ye({props:{val:"randomProducedItems"}});let u=t[0].randomProducedItems,f=[];for(let d=0;d<u.length;d+=1)f[d]=Jo(Yo(t,u,d));let c=d=>w(f[d],1,1,()=>{f[d]=null});return{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=z(),s=T("tr"),l=T("td"),o=T("table");for(let d=0;d<f.length;d+=1)f[d].c();$(r,"colspan","2"),$(r,"class","table-subheader"),$(o,"class","number-table"),$(o,"width","100%"),Ce(o,"margin","0px"),$(l,"colspan","2")},m(d,h){x(d,e,h),C(e,r),H(n,r,null),x(d,i,h),x(d,s,h),C(s,l),C(l,o);for(let p=0;p<f.length;p+=1)f[p].m(o,null);a=!0},p(d,h){if(h&1){u=d[0].randomProducedItems;let p;for(p=0;p<u.length;p+=1){let m=Yo(d,u,p);f[p]?(f[p].p(m,h),g(f[p],1)):(f[p]=Jo(m),f[p].c(),g(f[p],1),f[p].m(o,null))}for(te(),p=u.length;p<f.length;p+=1)c(p);ne()}},i(d){if(!a){g(n.$$.fragment,d);for(let h=0;h<u.length;h+=1)g(f[h]);a=!0}},o(d){w(n.$$.fragment,d),f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)w(f[h]);a=!1},d(d){d&&S(e),W(n),d&&S(i),d&&S(s),_e(f,d)}}}function Vo(t){let e;return{c(){e=T("tr"),e.innerHTML='<td colspan="2" style="text-align:center;">NOTHING</td>'},m(r,n){x(r,e,n)},d(r){r&&S(e)}}}function Qo(t){let e,r,n=t[4][1][t[7]]+"",i,s,l,o;return l=new qe({props:{href:t[7]}}),{c(){e=T("tr"),r=T("td"),i=ce(n),s=T("td"),X(l.$$.fragment)},m(a,u){x(a,e,u),C(e,r),C(r,i),C(e,s),H(l,s,null),o=!0},p(a,u){(!o||u&1)&&n!==(n=a[4][1][a[7]]+"")&&Se(i,n);let f={};u&1&&(f.href=a[7]),l.$set(f)},i(a){o||(g(l.$$.fragment,a),o=!0)},o(a){w(l.$$.fragment,a),o=!1},d(a){a&&S(e),W(l)}}}function Jo(t){let e=Object.keys(t[4][1]).length==0,r,n,i,s,l,o=t[4][0]+"",a,u,f=(t[4][0]/t[0].chanceSum*100).toFixed(3)+"",c,d,h,p=e&&Vo(t),m=Object.keys(t[4][1]).sort(),_=[];for(let y=0;y<m.length;y+=1)_[y]=Qo(Zo(t,m,y));let v=y=>w(_[y],1,1,()=>{_[y]=null});return{c(){p&&p.c(),r=z();for(let y=0;y<_.length;y+=1)_[y].c();n=z(),i=T("tr"),s=T("td"),l=ce("\xD7"),a=ce(o),u=ce(" / "),c=ce(f),d=ce("%"),$(s,"colspan","2"),Ce(s,"text-align","center"),Ce(s,"border-bottom","solid 0.3px #382C44")},m(y,A){p&&p.m(y,A),x(y,r,A);for(let I=0;I<_.length;I+=1)_[I].m(y,A);x(y,n,A),x(y,i,A),C(i,s),C(s,l),C(s,a),C(s,u),C(s,c),C(s,d),h=!0},p(y,A){if(A&1&&(e=Object.keys(y[4][1]).length==0),e?p||(p=Vo(y),p.c(),p.m(r.parentNode,r)):p&&(p.d(1),p=null),A&1){m=Object.keys(y[4][1]).sort();let I;for(I=0;I<m.length;I+=1){let E=Zo(y,m,I);_[I]?(_[I].p(E,A),g(_[I],1)):(_[I]=Qo(E),_[I].c(),g(_[I],1),_[I].m(n.parentNode,n))}for(te(),I=m.length;I<_.length;I+=1)v(I);ne()}(!h||A&1)&&o!==(o=y[4][0]+"")&&Se(a,o),(!h||A&1)&&f!==(f=(y[4][0]/y[0].chanceSum*100).toFixed(3)+"")&&Se(c,f)},i(y){if(!h){for(let A=0;A<m.length;A+=1)g(_[A]);h=!0}},o(y){_=_.filter(Boolean);for(let A=0;A<_.length;A+=1)w(_[A]);h=!1},d(y){p&&p.d(y),y&&S(r),_e(_,y),y&&S(n),y&&S(i)}}}function ea(t){let e,r,n,i,s,l,o,a,u,f;n=new ye({props:{val:t[1][0]}});let c=[pp,hp],d=[];function h(p,m){return m&1&&(l=null),l==null&&(l=!!["requiresBaseFunc","producedItems","requiredItems"].includes(p[1][0])),l?0:1}return o=h(t,-1),a=d[o]=c[o](t),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=z(),s=T("td"),a.c(),u=z(),$(r,"class","padding-right")},m(p,m){x(p,e,m),C(e,r),H(n,r,null),C(e,i),C(e,s),d[o].m(s,null),C(e,u),f=!0},p(p,m){let _={};m&1&&(_.val=p[1][0]),n.$set(_);let v=o;o=h(p,m),o===v?d[o].p(p,m):(te(),w(d[v],1,1,()=>{d[v]=null}),ne(),a=d[o],a?a.p(p,m):(a=d[o]=c[o](p),a.c()),g(a,1),a.m(s,null))},i(p){f||(g(n.$$.fragment,p),g(a),f=!0)},o(p){w(n.$$.fragment,p),w(a),f=!1},d(p){p&&S(e),W(n),d[o].d()}}}function hp(t){let e,r;return e=new ye({props:{val:t[1][1]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[1][1]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function pp(t){let e,r;return e=new He({props:{items:t[1][1]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[1][1]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function ta(t){let e=!["name","randomProducedItems"].includes(t[1][0]),r,n,i=e&&ea(t);return{c(){i&&i.c(),r=be()},m(s,l){i&&i.m(s,l),x(s,r,l),n=!0},p(s,l){l&1&&(e=!["name","randomProducedItems"].includes(s[1][0])),e?i?(i.p(s,l),l&1&&g(i,1)):(i=ea(s),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(te(),w(i,1,1,()=>{i=null}),ne())},i(s){n||(g(i),n=!0)},o(s){w(i),n=!1},d(s){i&&i.d(s),s&&S(r)}}}function mp(t){let e,r,n,i,s,l,o="randomProducedItems"in t[0]&&Ko(t),a=Object.entries(t[0]).sort(na),u=[];for(let c=0;c<a.length;c+=1)u[c]=ta(Go(t,a,c));let f=c=>w(u[c],1,1,()=>{u[c]=null});return{c(){e=T("table"),r=T("tr"),n=T("td"),n.textContent=`${F.str("Manufacture")}`,i=z(),o&&o.c(),s=z();for(let c=0;c<u.length;c+=1)u[c].c();$(n,"colspan","2"),$(r,"class","table-header"),$(e,"class","main-table")},m(c,d){x(c,e,d),C(e,r),C(r,n),C(e,i),o&&o.m(e,null),C(e,s);for(let h=0;h<u.length;h+=1)u[h].m(e,null);l=!0},p(c,[d]){if("randomProducedItems"in c[0]?o?(o.p(c,d),d&1&&g(o,1)):(o=Ko(c),o.c(),g(o,1),o.m(e,s)):o&&(te(),w(o,1,1,()=>{o=null}),ne()),d&1){a=Object.entries(c[0]).sort(na);let h;for(h=0;h<a.length;h+=1){let p=Go(c,a,h);u[h]?(u[h].p(p,d),g(u[h],1)):(u[h]=ta(p),u[h].c(),g(u[h],1),u[h].m(e,null))}for(te(),h=a.length;h<u.length;h+=1)f(h);ne()}},i(c){if(!l){g(o);for(let d=0;d<a.length;d+=1)g(u[d]);l=!0}},o(c){w(o),u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)w(u[d]);l=!1},d(c){c&&S(e),o&&o.d(),_e(u,c)}}}var na=(t,e)=>t[0]>e[0]?1:-1;function _p(t,e,r){let{entry:n}=e;return t.$$set=i=>{"entry"in i&&r(0,n=i.entry)},t.$$.update=()=>{if(t.$$.dirty&1){e:console.log(n)}},[n]}var Jr=class extends ve{constructor(e){super(),ke(this,e,_p,mp,ge,{entry:0})}},ra=Jr;function ia(t,e,r){let n=t.slice();return n[1]=e[r],n[3]=r,n}function la(t,e,r){let n=t.slice();return n[4]=e[r],n[6]=r,n}function sa(t,e,r){let n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function gp(t){let e,r;return e=new ye({props:{val:t[8]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[8]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function bp(t){let e,r;return{c(){e=T("img"),$(e,"class","sprite"),$(e,"alt","X"),Ue(e.src,r=F.sprite(t[8]))||$(e,"src",r),$(e,"onerror","this.onerror=null; this.src='xpedia/0.jpg'")},m(n,i){x(n,e,i)},p(n,i){i&1&&!Ue(e.src,r=F.sprite(n[8]))&&$(e,"src",r)},i:ae,o:ae,d(n){n&&S(e)}}}function oa(t){let e,r,n=F.tr(t[7])+"",i,s,l,o,a,u,f=[bp,gp],c=[];function d(h,p){return p&1&&(l=null),l==null&&(l=!!["modSprite"].includes(h[7])),l?0:1}return o=d(t,-1),a=c[o]=f[o](t),{c(){e=T("tr"),r=T("td"),i=z(),s=T("td"),a.c(),$(r,"class","padding-right")},m(h,p){x(h,e,p),C(e,r),r.innerHTML=n,C(e,i),C(e,s),c[o].m(s,null),u=!0},p(h,p){(!u||p&1)&&n!==(n=F.tr(h[7])+"")&&(r.innerHTML=n);let m=o;o=d(h,p),o===m?c[o].p(h,p):(te(),w(c[m],1,1,()=>{c[m]=null}),ne(),a=c[o],a?a.p(h,p):(a=c[o]=f[o](h),a.c()),g(a,1),a.m(s,null))},i(h){u||(g(a),u=!0)},o(h){w(a),u=!1},d(h){h&&S(e),c[o].d()}}}function aa(t){let e,r,n,i,s,l,o,a,u=Object.keys(t[0].raceBonus).sort(),f=[];for(let d=0;d<u.length;d+=1)f[d]=fa(ia(t,u,d));let c=d=>w(f[d],1,1,()=>{f[d]=null});return{c(){e=T("tr"),r=T("td"),n=T("table"),i=T("tr"),s=T("td"),s.textContent=`${F.tr("raceBonus")}`,l=T("td"),o=z();for(let d=0;d<f.length;d+=1)f[d].c();$(s,"colspan","2"),$(n,"class","number-table"),$(r,"colspan","2")},m(d,h){x(d,e,h),C(e,r),C(r,n),C(n,i),C(i,s),C(i,l),C(i,o);for(let p=0;p<f.length;p+=1)f[p].m(i,null);a=!0},p(d,h){if(h&1){u=Object.keys(d[0].raceBonus).sort();let p;for(p=0;p<u.length;p+=1){let m=ia(d,u,p);f[p]?(f[p].p(m,h),g(f[p],1)):(f[p]=fa(m),f[p].c(),g(f[p],1),f[p].m(i,null))}for(te(),p=u.length;p<f.length;p+=1)c(p);ne()}},i(d){if(!a){for(let h=0;h<u.length;h+=1)g(f[h]);a=!0}},o(d){f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)w(f[h]);a=!1},d(d){d&&S(e),_e(f,d)}}}function ua(t){let e=F.tr(t[4])+"",r,n,i,s,l,o;return s=new qe({props:{href:t[0].raceBonus[t[1]][t[4]]}}),{c(){r=ce(e),n=ce(":\xA0"),i=T("em"),X(s.$$.fragment),l=T("br")},m(a,u){x(a,r,u),x(a,n,u),x(a,i,u),H(s,i,null),x(a,l,u),o=!0},p(a,u){(!o||u&1)&&e!==(e=F.tr(a[4])+"")&&Se(r,e);let f={};u&1&&(f.href=a[0].raceBonus[a[1]][a[4]]),s.$set(f)},i(a){o||(g(s.$$.fragment,a),o=!0)},o(a){w(s.$$.fragment,a),o=!1},d(a){a&&S(r),a&&S(n),a&&S(i),W(s),a&&S(l)}}}function fa(t){let e,r,n=F.tr(t[1])+"",i,s,l,o,a=Object.keys(t[0].raceBonus[t[1]]).sort(),u=[];for(let c=0;c<a.length;c+=1)u[c]=ua(la(t,a,c));let f=c=>w(u[c],1,1,()=>{u[c]=null});return{c(){e=T("tr"),r=T("td"),i=ce(n),s=T("td");for(let c=0;c<u.length;c+=1)u[c].c();l=z()},m(c,d){x(c,e,d),C(e,r),C(r,i),C(e,s);for(let h=0;h<u.length;h+=1)u[h].m(s,null);C(s,l),o=!0},p(c,d){if((!o||d&1)&&n!==(n=F.tr(c[1])+"")&&Se(i,n),d&1){a=Object.keys(c[0].raceBonus[c[1]]).sort();let h;for(h=0;h<a.length;h+=1){let p=la(c,a,h);u[h]?(u[h].p(p,d),g(u[h],1)):(u[h]=ua(p),u[h].c(),g(u[h],1),u[h].m(s,l))}for(te(),h=a.length;h<u.length;h+=1)f(h);ne()}},i(c){if(!o){for(let d=0;d<a.length;d+=1)g(u[d]);o=!0}},o(c){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)w(u[d]);o=!1},d(c){c&&S(e),_e(u,c)}}}function vp(t){let e,r,n,i,s,l=Ne(t[0],{last:["raceBonus","type","battlescapeTerrainData","craftInventoryTile","deployment"]}).all,o=[];for(let f=0;f<l.length;f+=1)o[f]=oa(sa(t,l,f));let a=f=>w(o[f],1,1,()=>{o[f]=null}),u=t[0].raceBonus&&aa(t);return{c(){e=T("table"),r=T("tr"),r.innerHTML='<td colspan="2">Craft</td>',n=z();for(let f=0;f<o.length;f+=1)o[f].c();i=z(),u&&u.c(),$(r,"class","table-header"),$(e,"class","main-table")},m(f,c){x(f,e,c),C(e,r),C(e,n);for(let d=0;d<o.length;d+=1)o[d].m(e,null);C(e,i),u&&u.m(e,null),s=!0},p(f,[c]){if(c&1){l=Ne(f[0],{last:["raceBonus","type","battlescapeTerrainData","craftInventoryTile","deployment"]}).all;let d;for(d=0;d<l.length;d+=1){let h=sa(f,l,d);o[d]?(o[d].p(h,c),g(o[d],1)):(o[d]=oa(h),o[d].c(),g(o[d],1),o[d].m(e,i))}for(te(),d=l.length;d<o.length;d+=1)a(d);ne()}f[0].raceBonus?u?(u.p(f,c),c&1&&g(u,1)):(u=aa(f),u.c(),g(u,1),u.m(e,null)):u&&(te(),w(u,1,1,()=>{u=null}),ne())},i(f){if(!s){for(let c=0;c<l.length;c+=1)g(o[c]);g(u),s=!0}},o(f){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)w(o[c]);w(u),s=!1},d(f){f&&S(e),_e(o,f),u&&u.d()}}}function kp(t,e,r){let{entry:n}=e;return t.$$set=i=>{"entry"in i&&r(0,n=i.entry)},t.$$.update=()=>{if(t.$$.dirty&1){e:console.info(n)}},[n]}var ei=class extends ve{constructor(e){super(),ke(this,e,kp,vp,ge,{entry:0})}},ca=ei;function da(t,e,r){let n=t.slice();return n[3]=e[r],n[5]=r,n}function ha(t,e,r){let n=t.slice();return n[3]=e[r],n[7]=r,n}function pa(t){let e,r;return{c(){e=T("img"),$(e,"class","facility sprite"),$(e,"onerror","this.onerror=null; this.src='xpedia/0.jpg'"),$(e,"alt","X"),Ue(e.src,r=F.obsSprite("base",t[1]*1+t[7]*t[0]+t[5]))||$(e,"src",r)},m(n,i){x(n,e,i)},p(n,i){i&3&&!Ue(e.src,r=F.obsSprite("base",n[1]*1+n[7]*n[0]+n[5]))&&$(e,"src",r)},d(n){n&&S(e)}}}function ma(t){let e,r={length:t[0]},n=[];for(let i=0;i<r.length;i+=1)n[i]=pa(ha(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=be()},m(i,s){for(let l=0;l<n.length;l+=1)n[l].m(i,s);x(i,e,s)},p(i,s){if(s&3){r={length:i[0]};let l;for(l=0;l<r.length;l+=1){let o=ha(i,r,l);n[l]?n[l].p(o,s):(n[l]=pa(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},d(i){_e(n,i),i&&S(e)}}}function yp(t){let e,r={length:t[0]},n=[];for(let i=0;i<r.length;i+=1)n[i]=ma(da(t,r,i));return{c(){e=T("div");for(let i=0;i<n.length;i+=1)n[i].c();$(e,"class","tight"),Ce(e,"columns",t[0]),Ce(e,"width",64*t[0]+"px"),Ce(e,"margin-bottom",(t[2]?-64*t[0]:0)+"px")},m(i,s){x(i,e,s);for(let l=0;l<n.length;l+=1)n[l].m(e,null)},p(i,[s]){if(s&3){r={length:i[0]};let l;for(l=0;l<r.length;l+=1){let o=da(i,r,l);n[l]?n[l].p(o,s):(n[l]=ma(o),n[l].c(),n[l].m(e,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}s&1&&Ce(e,"columns",i[0]),s&1&&Ce(e,"width",64*i[0]+"px"),s&5&&Ce(e,"margin-bottom",(i[2]?-64*i[0]:0)+"px")},i:ae,o:ae,d(i){i&&S(e),_e(n,i)}}}function wp(t,e,r){let{size:n,prop:i,bottom:s}=e;return t.$$set=l=>{"size"in l&&r(0,n=l.size),"prop"in l&&r(1,i=l.prop),"bottom"in l&&r(2,s=l.bottom)},[n,i,s]}var ti=class extends ve{constructor(e){super(),ke(this,e,wp,yp,ge,{size:0,prop:1,bottom:2})}},$n=ti;function _a(t,e,r){let n=t.slice();return n[4]=e[r][0],n[5]=e[r][1],n}function ga(t,e,r){let n=t.slice();return n[8]=e[r],n[10]=r,n}function ba(t){let e,r,n,i,s,l,o,a,u,f,c,d,h;n=new ye({props:{val:t[4]}});let p=[Tp,xp,Cp,Sp,Ap],m=[];function _(v,y){return y&1&&(l=null),y&1&&(o=null),y&1&&(a=null),y&1&&(u=null),l==null&&(l=!!["buildCostItems"].includes(v[4])),l?0:(o==null&&(o=!!["storageTiles"].includes(v[4])),o?1:(a==null&&(a=!!["provideBaseFunc","requiresBaseFunc","forbiddenBaseFunc"].includes(v[4])),a?2:(u==null&&(u=!!["spriteFacility","spriteShape"].includes(v[4])),u?3:4)))}return f=_(t,-1),c=m[f]=p[f](t),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=z(),s=T("td"),c.c(),d=z(),$(r,"class","padding-right")},m(v,y){x(v,e,y),C(e,r),H(n,r,null),C(e,i),C(e,s),m[f].m(s,null),C(e,d),h=!0},p(v,y){let A={};y&1&&(A.val=v[4]),n.$set(A);let I=f;f=_(v,y),f===I?m[f].p(v,y):(te(),w(m[I],1,1,()=>{m[I]=null}),ne(),c=m[f],c?c.p(v,y):(c=m[f]=p[f](v),c.c()),g(c,1),c.m(s,null))},i(v){h||(g(n.$$.fragment,v),g(c),h=!0)},o(v){w(n.$$.fragment,v),w(c),h=!1},d(v){v&&S(e),W(n),m[f].d()}}}function Ap(t){let e,r;return e=new ye({props:{val:t[5]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[5]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Sp(t){let e,r,n,i,s=[$p,Ep],l=[];function o(a,u){return a[0].spriteFacility?0:1}return e=o(t,-1),r=l[e]=s[e](t),{c(){r.c(),n=be()},m(a,u){l[e].m(a,u),x(a,n,u),i=!0},p(a,u){let f=e;e=o(a,u),e===f?l[e].p(a,u):(te(),w(l[f],1,1,()=>{l[f]=null}),ne(),r=l[e],r?r.p(a,u):(r=l[e]=s[e](a),r.c()),g(r,1),r.m(n.parentNode,n))},i(a){i||(g(r),i=!0)},o(a){w(r),i=!1},d(a){l[e].d(a),a&&S(n)}}}function Cp(t){let e,r;return e=new He({props:{items:t[5],vertical:!0}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[5]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function xp(t){let e,r,n,i,s,l,o,a,u=t[2]&&va(t);return{c(){e=T("div"),r=T("div"),n=T("button"),n.textContent="Expand",i=z(),s=T("div"),u&&u.c(),$(n,"class","button")},m(f,c){x(f,e,c),C(e,r),C(r,n),C(e,i),C(e,s),u&&u.m(s,null),l=!0,o||(a=Oe(n,"click",t[3]),o=!0)},p(f,c){f[2]?u?(u.p(f,c),c&4&&g(u,1)):(u=va(f),u.c(),g(u,1),u.m(s,null)):u&&(te(),w(u,1,1,()=>{u=null}),ne())},i(f){l||(g(u),l=!0)},o(f){w(u),l=!1},d(f){f&&S(e),u&&u.d(),o=!1,a()}}}function Tp(t){let e,r,n=Object.keys(t[5]).sort(),i=[];for(let l=0;l<n.length;l+=1)i[l]=ka(ga(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=be()},m(l,o){for(let a=0;a<i.length;a+=1)i[a].m(l,o);x(l,e,o),r=!0},p(l,o){if(o&1){n=Object.keys(l[5]).sort();let a;for(a=0;a<n.length;a+=1){let u=ga(l,n,a);i[a]?(i[a].p(u,o),g(i[a],1)):(i[a]=ka(u),i[a].c(),g(i[a],1),i[a].m(e.parentNode,e))}for(te(),a=n.length;a<i.length;a+=1)s(a);ne()}},i(l){if(!r){for(let o=0;o<n.length;o+=1)g(i[o]);r=!0}},o(l){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);r=!1},d(l){_e(i,l),l&&S(e)}}}function Ep(t){let e,r;return e=new $n({props:{size:t[1],prop:t[5]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&2&&(s.size=n[1]),i&1&&(s.prop=n[5]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function $p(t){let e,r,n,i;return e=new $n({props:{size:t[1],prop:t[5],bottom:!0}}),n=new $n({props:{size:t[1],prop:t[0].spriteFacility}}),{c(){X(e.$$.fragment),r=z(),X(n.$$.fragment)},m(s,l){H(e,s,l),x(s,r,l),H(n,s,l),i=!0},p(s,l){let o={};l&2&&(o.size=s[1]),l&1&&(o.prop=s[5]),e.$set(o);let a={};l&2&&(a.size=s[1]),l&1&&(a.prop=s[0].spriteFacility),n.$set(a)},i(s){i||(g(e.$$.fragment,s),g(n.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(n.$$.fragment,s),i=!1},d(s){W(e,s),s&&S(r),W(n,s)}}}function va(t){let e,r,n;return r=new He({props:{items:t[5],vertical:!0}}),{c(){e=T("div"),X(r.$$.fragment),Ce(e,"columns","6")},m(i,s){x(i,e,s),H(r,e,null),n=!0},p(i,s){let l={};s&1&&(l.items=i[5]),r.$set(l)},i(i){n||(g(r.$$.fragment,i),n=!0)},o(i){w(r.$$.fragment,i),n=!1},d(i){i&&S(e),W(r)}}}function Op(t){let e;return{c(){e=T("br")},m(r,n){x(r,e,n)},d(r){r&&S(e)}}}function ka(t){let e,r,n,i=t[5][t[8]].build+"",s,l,o=t[5][t[8]].refund+"",a,u,f=t[10]!=0&&Op(t);return r=new qe({props:{href:t[8]}}),{c(){f&&f.c(),e=z(),X(r.$$.fragment),n=ce(`\r
              : `),s=ce(i),l=ce(" / "),a=ce(o)},m(c,d){f&&f.m(c,d),x(c,e,d),H(r,c,d),x(c,n,d),x(c,s,d),x(c,l,d),x(c,a,d),u=!0},p(c,d){let h={};d&1&&(h.href=c[8]),r.$set(h),(!u||d&1)&&i!==(i=c[5][c[8]].build+"")&&Se(s,i),(!u||d&1)&&o!==(o=c[5][c[8]].refund+"")&&Se(a,o)},i(c){u||(g(r.$$.fragment,c),u=!0)},o(c){w(r.$$.fragment,c),u=!1},d(c){f&&f.d(c),c&&S(e),W(r,c),c&&S(n),c&&S(s),c&&S(l),c&&S(a)}}}function ya(t){let e=!["type","battlescapeTerrainData","craftInventoryTile","deployment"].includes(t[4]),r,n,i=e&&ba(t);return{c(){i&&i.c(),r=be()},m(s,l){i&&i.m(s,l),x(s,r,l),n=!0},p(s,l){l&1&&(e=!["type","battlescapeTerrainData","craftInventoryTile","deployment"].includes(s[4])),e?i?(i.p(s,l),l&1&&g(i,1)):(i=ba(s),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(te(),w(i,1,1,()=>{i=null}),ne())},i(s){n||(g(i),n=!0)},o(s){w(i),n=!1},d(s){i&&i.d(s),s&&S(r)}}}function Ip(t){let e,r,n,i,s,l=Ne(t[0],{first:["spriteShape"],exclude:["spriteFacility"]}).all,o=[];for(let u=0;u<l.length;u+=1)o[u]=ya(_a(t,l,u));let a=u=>w(o[u],1,1,()=>{o[u]=null});return{c(){e=T("table"),r=T("tr"),n=T("td"),n.textContent=`${F.tr("Facility")}`,i=z();for(let u=0;u<o.length;u+=1)o[u].c();$(n,"colspan","2"),$(r,"class","table-header"),$(e,"class","main-table")},m(u,f){x(u,e,f),C(e,r),C(r,n),C(e,i);for(let c=0;c<o.length;c+=1)o[c].m(e,null);s=!0},p(u,[f]){if(f&7){l=Ne(u[0],{first:["spriteShape"],exclude:["spriteFacility"]}).all;let c;for(c=0;c<l.length;c+=1){let d=_a(u,l,c);o[c]?(o[c].p(d,f),g(o[c],1)):(o[c]=ya(d),o[c].c(),g(o[c],1),o[c].m(e,null))}for(te(),c=l.length;c<o.length;c+=1)a(c);ne()}},i(u){if(!s){for(let f=0;f<l.length;f+=1)g(o[f]);s=!0}},o(u){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)w(o[f]);s=!1},d(u){u&&S(e),_e(o,u)}}}function Fp(t,e,r){let{entry:n}=e,i=!1,s=1,l=o=>r(2,i=!i);return t.$$set=o=>{"entry"in o&&r(0,n=o.entry)},t.$$.update=()=>{if(t.$$.dirty&3){e:r(1,s=n.size||1),console.log(s),console.info(n)}},[n,s,i,l]}var ni=class extends ve{constructor(e){super(),ke(this,e,Fp,Ip,ge,{entry:0})}},wa=ni;function Aa(t,e,r){let n=t.slice();return n[1]=e[r],n}function Sa(t){let e,r,n,i,s,l,o;return n=new ye({props:{val:t[1][0]}}),l=new He({props:{items:t[1][1]}}),{c(){e=T("tr"),r=T("td"),X(n.$$.fragment),i=z(),s=T("td"),X(l.$$.fragment)},m(a,u){x(a,e,u),C(e,r),H(n,r,null),C(e,i),C(e,s),H(l,s,null),o=!0},p(a,u){let f={};u&1&&(f.val=a[1][0]),n.$set(f);let c={};u&1&&(c.items=a[1][1]),l.$set(c)},i(a){o||(g(n.$$.fragment,a),g(l.$$.fragment,a),o=!0)},o(a){w(n.$$.fragment,a),w(l.$$.fragment,a),o=!1},d(a){a&&S(e),W(n),W(l)}}}function Ca(t){let e=!["id"].includes(t[1][0]),r,n,i=e&&Sa(t);return{c(){i&&i.c(),r=be()},m(s,l){i&&i.m(s,l),x(s,r,l),n=!0},p(s,l){l&1&&(e=!["id"].includes(s[1][0])),e?i?(i.p(s,l),l&1&&g(i,1)):(i=Sa(s),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(te(),w(i,1,1,()=>{i=null}),ne())},i(s){n||(g(i),n=!0)},o(s){w(i),n=!1},d(s){i&&i.d(s),s&&S(r)}}}function Dp(t){let e,r,n=Object.entries(t[0]).sort(xa),i=[];for(let l=0;l<n.length;l+=1)i[l]=Ca(Aa(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){e=T("table");for(let l=0;l<i.length;l+=1)i[l].c();$(e,"class","main-table")},m(l,o){x(l,e,o);for(let a=0;a<i.length;a+=1)i[a].m(e,null);r=!0},p(l,[o]){if(o&1){n=Object.entries(l[0]).sort(xa);let a;for(a=0;a<n.length;a+=1){let u=Aa(l,n,a);i[a]?(i[a].p(u,o),g(i[a],1)):(i[a]=Ca(u),i[a].c(),g(i[a],1),i[a].m(e,null))}for(te(),a=n.length;a<i.length;a+=1)s(a);ne()}},i(l){if(!r){for(let o=0;o<n.length;o+=1)g(i[o]);r=!0}},o(l){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)w(i[o]);r=!1},d(l){l&&S(e),_e(i,l)}}}var xa=(t,e)=>(t[0]=="providedBy"?-10:10)+(t[0]>e[0]?1:-1);function Bp(t,e,r){let{entry:n}=e;return t.$$set=i=>{"entry"in i&&r(0,n=i.entry)},[n]}var ri=class extends ve{constructor(e){super(),ke(this,e,Bp,Dp,ge,{entry:0})}},Ta=ri;function Ea(t,e,r){let n=t.slice();return n[2]=e[r],n[4]=r,n}function $a(t,e){let r,n,i;return n=new Ft({props:{entry:e[2],title:"Stage",subtitle:`${e[4]+1}`}}),{key:t,first:null,c(){r=be(),X(n.$$.fragment),this.first=r},m(s,l){x(s,r,l),H(n,s,l),i=!0},p(s,l){e=s;let o={};l&2&&(o.entry=e[2]),l&2&&(o.subtitle=`${e[4]+1}`),n.$set(o)},i(s){i||(g(n.$$.fragment,s),i=!0)},o(s){w(n.$$.fragment,s),i=!1},d(s){s&&S(r),W(n,s)}}}function Lp(t){let e,r,n,i=[],s=new Map,l;e=new Ft({props:{entry:t[0],title:"Commendation",sort:{exclude:["type","criteria","soldierBonusTypes"]}}});let o=t[1],a=u=>u[4];for(let u=0;u<o.length;u+=1){let f=Ea(t,o,u),c=a(f);s.set(c,i[u]=$a(c,f))}return{c(){X(e.$$.fragment),r=z(),n=T("div");for(let u=0;u<i.length;u+=1)i[u].c();$(n,"class","no-break-column")},m(u,f){H(e,u,f),x(u,r,f),x(u,n,f);for(let c=0;c<i.length;c+=1)i[c].m(n,null);l=!0},p(u,[f]){let c={};f&1&&(c.entry=u[0]),e.$set(c),f&2&&(o=u[1],te(),i=xi(i,f,a,1,u,o,s,n,Ci,$a,null,Ea),ne())},i(u){if(!l){g(e.$$.fragment,u);for(let f=0;f<o.length;f+=1)g(i[f]);l=!0}},o(u){w(e.$$.fragment,u);for(let f=0;f<i.length;f+=1)w(i[f]);l=!1},d(u){W(e,u),u&&S(r),u&&S(n);for(let f=0;f<i.length;f+=1)i[f].d()}}}function Np(t,e,r){let{entry:n}=e,i;return t.$$set=s=>{"entry"in s&&r(0,n=s.entry)},t.$$.update=()=>{if(t.$$.dirty&1){e:{let s=[];for(let l=0;l<10;l++){let o=n.soldierBonusTypes?n.soldierBonusTypes[l]:null,a={...F.soldierBonuses[o]||{},criteria:{}};for(let u in n.criteria)a.criteria[u]=n.criteria[u][l];Object.keys(a).length>0&&(s[l]=a)}r(1,i=s)}}},[n,i]}var ii=class extends ve{constructor(e){super(),ke(this,e,Np,Lp,ge,{entry:0})}},Oa=ii;function Ia(t,e,r){let n=t.slice();return n[5]=e[r][0],n[6]=e[r][1],n}function Fa(t){let e,r,n,i,s=F.items[t[1]]?.sprite&&t[0]&&F.items[t[1]].battleType!=2&&Da(t);return{c(){e=T("div"),s&&s.c(),r=z(),n=new je(!1),n.a=null,$(e,"class","main-table main-text")},m(l,o){x(l,e,o),s&&s.m(e,null),C(e,r),n.m(t[0],e),i=!0},p(l,o){F.items[l[1]]?.sprite&&l[0]&&F.items[l[1]].battleType!=2?s?(s.p(l,o),o&3&&g(s,1)):(s=Da(l),s.c(),g(s,1),s.m(e,r)):s&&(te(),w(s,1,1,()=>{s=null}),ne()),(!i||o&1)&&n.p(l[0])},i(l){i||(g(s),i=!0)},o(l){w(s),i=!1},d(l){l&&S(e),s&&s.d()}}}function Da(t){let e,r,n;return r=new Cn({props:{item:F.items[t[1]],zoom:2}}),{c(){e=T("div"),X(r.$$.fragment),$(e,"class","article-text-image")},m(i,s){x(i,e,s),H(r,e,null),n=!0},p(i,s){let l={};s&2&&(l.item=F.items[i[1]]),r.$set(l)},i(i){n||(g(r.$$.fragment,i),n=!0)},o(i){w(r.$$.fragment,i),n=!1},d(i){i&&S(e),W(r)}}}function Mp(t){let e,r;return e=new Ft({props:{entry:F[t[5]][t[1]],sort:t[6].sort,title:t[6].title!=null?t[6].title:gr(t[5])}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&2&&(s.entry=F[n[5]][n[1]]),i&2&&(s.sort=n[6].sort),i&2&&(s.title=n[6].title!=null?n[6].title:gr(n[5])),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Rp(t){let e,r,n;var i=t[6];function s(l){return{props:{entry:F[l[5]][l[1]],text:l[0]}}}return i&&(e=new i(s(t))),{c(){e&&X(e.$$.fragment),r=be()},m(l,o){e&&H(e,l,o),x(l,r,o),n=!0},p(l,o){let a={};if(o&2&&(a.entry=F[l[5]][l[1]]),o&1&&(a.text=l[0]),i!==(i=l[6])){if(e){te();let u=e;w(u.$$.fragment,1,0,()=>{W(u,1)}),ne()}i?(e=new i(s(l)),X(e.$$.fragment),g(e.$$.fragment,1),H(e,r.parentNode,r)):e=null}else i&&e.$set(a)},i(l){n||(e&&g(e.$$.fragment,l),n=!0)},o(l){e&&w(e.$$.fragment,l),n=!1},d(l){l&&S(r),e&&W(e,l)}}}function Ba(t){let e,r,n,i,s=[Rp,Mp],l=[];function o(a,u){return typeof a[6]=="function"?0:1}return e=o(t,-1),r=l[e]=s[e](t),{c(){r.c(),n=be()},m(a,u){l[e].m(a,u),x(a,n,u),i=!0},p(a,u){let f=e;e=o(a,u),e===f?l[e].p(a,u):(te(),w(l[f],1,1,()=>{l[f]=null}),ne(),r=l[e],r?r.p(a,u):(r=l[e]=s[e](a),r.c()),g(r,1),r.m(n.parentNode,n))},i(a){i||(g(r),i=!0)},o(a){w(r),i=!1},d(a){l[e].d(a),a&&S(n)}}}function zp(t){let e,r,n,i=!t[2]&&t[0]&&Fa(t),s=Object.entries(t[3]).filter(t[4]),l=[];for(let a=0;a<s.length;a+=1)l[a]=Ba(Ia(t,s,a));let o=a=>w(l[a],1,1,()=>{l[a]=null});return{c(){i&&i.c(),e=z();for(let a=0;a<l.length;a+=1)l[a].c();r=be()},m(a,u){i&&i.m(a,u),x(a,e,u);for(let f=0;f<l.length;f+=1)l[f].m(a,u);x(a,r,u),n=!0},p(a,[u]){if(!a[2]&&a[0]?i?(i.p(a,u),u&5&&g(i,1)):(i=Fa(a),i.c(),g(i,1),i.m(e.parentNode,e)):i&&(te(),w(i,1,1,()=>{i=null}),ne()),u&11){s=Object.entries(a[3]).filter(a[4]);let f;for(f=0;f<s.length;f+=1){let c=Ia(a,s,f);l[f]?(l[f].p(c,u),g(l[f],1)):(l[f]=Ba(c),l[f].c(),g(l[f],1),l[f].m(r.parentNode,r))}for(te(),f=s.length;f<l.length;f+=1)o(f);ne()}},i(a){if(!n){g(i);for(let u=0;u<s.length;u+=1)g(l[u]);n=!0}},o(a){w(i),l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)w(l[u]);n=!1},d(a){i&&i.d(a),a&&S(e),_e(l,a),a&&S(r)}}}function Pp(t,e,r){let{text:n}=e,{id:i}=e,s,l={stats:{},elements:{},armors:$o,units:jo,items:Tn,baseServices:Ta,crafts:Fo,craftWeapons:Ro,ufos:ca,weaponTypes:{},facilities:wa,soldierBonuses:{},eventScripts:{title:"Event Script"},soldierTransformation:{},soldiers:{sort:{first:["statCaps"],last:["armors"]}},alienRaces:{title:"Race"},events:{},missionScripts:{sort:{exclude:["researchNeeded","researchForbidden"]}},alienMissions:{},startingConditions:{},enviroEffects:{},terrains:{sort:{last:["mapBlocks"]}},mapScripts:{},commendations:Oa,manufacture:ra,research:Xo,alienDeployments:{sort:{first:["startingCondition","loot"]}}},o=([a])=>F[a][i];return t.$$set=a=>{"text"in a&&r(0,n=a.text),"id"in a&&r(1,i=a.id)},t.$$.update=()=>{if(t.$$.dirty&2){e:r(2,s=i in F.armors?F.armors[i]:i in F.units&&F.units[i].armor?F.armors[F.units[i].armor]:null)}},[n,i,s,l,o]}var li=class extends ve{constructor(e){super(),ke(this,e,Pp,zp,ge,{text:0,id:1})}},La=li;function jp(t){let e,r;return e=new ft({props:{links:F.sections[t[0].id].articles.map(Pa)}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.links=F.sections[n[0].id].articles.map(Pa)),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Up(t){let e,r;return e=new vs({props:{conditions:F.startingConditions[t[0].id]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.conditions=F.startingConditions[n[0].id]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Wp(t){let e,r;return e=new rn({props:{aId:t[4],entries:Object.values(F.armors),fields:["size","frontArmor","sideArmor","rearArmor","underArmor"],extraFields:[...it,...nn,"visibilityAtDark","visibilityAtDay","camouflageAtDark","camouflageAtDay"],filters:Object.keys(F.soldiers)}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&16&&(s.aId=n[4]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function qp(t){let e,r;return e=new rn({props:{aId:t[4],entries:Object.values(F.crafts),fields:["speedMax","soldiers","vehicles","weapons","damageMax"]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&16&&(s.aId=n[4]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Hp(t){let e,r;return e=new rn({props:{aId:t[4],entries:Object.values(F.commendations),fields:["description",...nn,"visibilityAtDark"],extraFields:["visibilityAtDay","camouflageAtDark","camouflageAtDay"]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&16&&(s.aId=n[4]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Xp(t){let e,r;return e=new rn({props:{aId:t[4],entries:Object.values(F.facilities),fields:["size","monthlyCost","storage","personnel","workshops","kennel","prison"],extraFields:["buildCost","buildTime","manaRecoveryPerDay","sickBayAbsoluteBonus","sickBayRelativeBonus"]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&16&&(s.aId=n[4]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Gp(t){let e,r,n;var i=Sn;function s(l){return{}}return i&&(e=new i(s(t))),{c(){e&&X(e.$$.fragment),r=be()},m(l,o){e&&H(e,l,o),x(l,r,o),n=!0},p(l,o){if(i!==(i=Sn)){if(e){te();let a=e;w(a.$$.fragment,1,0,()=>{W(a,1)}),ne()}i?(e=new i(s(l)),X(e.$$.fragment),g(e.$$.fragment,1),H(e,r.parentNode,r)):e=null}},i(l){n||(e&&g(e.$$.fragment,l),n=!0)},o(l){e&&w(e.$$.fragment,l),n=!1},d(l){l&&S(r),e&&W(e,l)}}}function Na(t){let e,r;return e=new ft({props:{links:F.categories[t[0].id]}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.links=F.categories[n[0].id]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Ma(t){let e,r;return e=new er({props:{id:t[0].image_id}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.id=n[0].image_id),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Ra(t){let e,r,n,i,s,l,o,a,u,f,c,d,h,p,m,_,v,y,A,I,E,L,M,V,Z,B,G,k,R;n=new xe({props:{s:t[0].title}}),d=new ye({props:{val:t[0].sections.map(za).filter(t[9])}});let ue=[Gp,Xp,Hp,qp,Wp,Up,jp],P=[];function he(ee,fe){return ee[0].id=="SERVICES"?0:ee[0].id=="FACILITIES"?1:ee[0].id=="COMMENDATIONS"?2:ee[0].id=="CRAFTS"?3:ee[0].id=="ARMORS"?4:ee[0].id=="CONDITIONS"?5:ee[0].section==ee[0].id?6:-1}~(m=he(t,-1))&&(_=P[m]=ue[m](t));let q=t[0].section=="CATEGORIES"&&t[0].id!="CATEGORIES"&&Na(t);var Q=t[3];function N(ee){return{props:{query:ee[1]}}}Q&&(E=new Q(N(t))),M=new La({props:{id:t[0].id,text:t[2]}});let U=!(t[0].id in F.units)&&Ma(t);return{c(){e=T("h1"),r=T("nobr"),X(n.$$.fragment),i=z(),s=T("span"),l=z(),o=T("button"),o.textContent="\u21E6",a=z(),u=T("button"),u.textContent="\u21E8",f=z(),c=T("div"),X(d.$$.fragment),h=ce("\xA0"),p=z(),_&&_.c(),v=z(),q&&q.c(),y=z(),A=T("div"),I=T("div"),E&&X(E.$$.fragment),L=z(),X(M.$$.fragment),V=z(),U&&U.c(),Z=z(),B=T("div"),B.textContent="\xA0",Ce(s,"flex","1"),$(o,"class","page-turn"),$(u,"class","page-turn"),$(c,"class","section-list"),Ce(B,"height","200px"),$(I,"class","main-flex"),Ce(A,"max-width","100%")},m(ee,fe){x(ee,e,fe),C(e,r),H(n,r,null),C(e,i),C(e,s),C(e,l),C(e,o),C(e,a),C(e,u),x(ee,f,fe),x(ee,c,fe),H(d,c,null),C(c,h),x(ee,p,fe),~m&&P[m].m(ee,fe),x(ee,v,fe),q&&q.m(ee,fe),x(ee,y,fe),x(ee,A,fe),C(A,I),E&&H(E,I,null),C(I,L),H(M,I,null),C(I,V),U&&U.m(I,null),C(I,Z),C(I,B),G=!0,k||(R=[Oe(o,"click",t[7]),Oe(u,"click",t[8])],k=!0)},p(ee,fe){let de={};fe&1&&(de.s=ee[0].title),n.$set(de);let Me={};fe&1&&(Me.val=ee[0].sections.map(za).filter(ee[9])),d.$set(Me);let Pe=m;m=he(ee,fe),m===Pe?~m&&P[m].p(ee,fe):(_&&(te(),w(P[Pe],1,1,()=>{P[Pe]=null}),ne()),~m?(_=P[m],_?_.p(ee,fe):(_=P[m]=ue[m](ee),_.c()),g(_,1),_.m(v.parentNode,v)):_=null),ee[0].section=="CATEGORIES"&&ee[0].id!="CATEGORIES"?q?(q.p(ee,fe),fe&1&&g(q,1)):(q=Na(ee),q.c(),g(q,1),q.m(y.parentNode,y)):q&&(te(),w(q,1,1,()=>{q=null}),ne());let Ee={};if(fe&2&&(Ee.query=ee[1]),Q!==(Q=ee[3])){if(E){te();let Re=E;w(Re.$$.fragment,1,0,()=>{W(Re,1)}),ne()}Q?(E=new Q(N(ee)),X(E.$$.fragment),g(E.$$.fragment,1),H(E,I,L)):E=null}else Q&&E.$set(Ee);let $e={};fe&1&&($e.id=ee[0].id),fe&4&&($e.text=ee[2]),M.$set($e),ee[0].id in F.units?U&&(te(),w(U,1,1,()=>{U=null}),ne()):U?(U.p(ee,fe),fe&1&&g(U,1)):(U=Ma(ee),U.c(),g(U,1),U.m(I,Z))},i(ee){G||(g(n.$$.fragment,ee),g(d.$$.fragment,ee),g(_),g(q),E&&g(E.$$.fragment,ee),g(M.$$.fragment,ee),g(U),G=!0)},o(ee){w(n.$$.fragment,ee),w(d.$$.fragment,ee),w(_),w(q),E&&w(E.$$.fragment,ee),w(M.$$.fragment,ee),w(U),G=!1},d(ee){ee&&S(e),W(n),ee&&S(f),ee&&S(c),W(d),ee&&S(p),~m&&P[m].d(ee),ee&&S(v),q&&q.d(ee),ee&&S(y),ee&&S(A),E&&W(E),W(M),U&&U.d(),k=!1,Ve(R)}}}function Yp(t){let e,r,n=t[0]?.id,i,s;document.title=e=F.tr(t[0].title||"XPedia");let l=Ra(t);return{c(){r=z(),l.c(),i=be()},m(o,a){x(o,r,a),l.m(o,a),x(o,i,a),s=!0},p(o,[a]){(!s||a&1)&&e!==(e=F.tr(o[0].title||"XPedia"))&&(document.title=e),a&1&&ge(n,n=o[0]?.id)?(te(),w(l,1,1,ae),ne(),l=Ra(o),l.c(),g(l,1),l.m(i.parentNode,i)):l.p(o,a)},i(o){s||(g(l),s=!0)},o(o){w(l),s=!1},d(o){o&&S(r),o&&S(i),l.d(o)}}}var za=t=>t.id,Pa=t=>t.id;function Zp(t,e,r){var n;let i=Rn(),{article:s={}}=e,{query:l}=e,o,a=!1,u,f=h=>i("prev"),c=h=>i("next"),d=h=>h!=s.id;return t.$$set=h=>{"article"in h&&r(0,s=h.article),"query"in h&&r(1,l=h.query)},t.$$.update=()=>{if(t.$$.dirty&69){e:{if(s==null)debugger;if(r(2,o=s.text||""),o==""){let h=r(6,n=F.research[s.id])===null||n===void 0?void 0:n.lookup;h&&r(2,o=F.tr(h))}r(3,a=s.section=="OTHER"?{BaseServices:Sn}[s.id]:!1),r(4,u=s.id)}}},[s,l,o,a,u,i,n,f,c,d]}var si=class extends ve{constructor(e){super(),ke(this,e,Zp,Yp,ge,{article:0,query:1})}},ja=si;function Kp(t){let e,r,n,i,s,l;return{c(){e=wt("svg"),r=wt("g"),n=wt("g"),i=wt("animateTransform"),s=wt("path"),$(i,"attributeName","transform"),$(i,"type","rotate"),$(i,"values","0;360"),$(i,"keyTimes","0;1"),$(i,"dur","3s"),$(i,"repeatCount","indefinite"),$(s,"d","M37.43995192304605 -6.5 L47.43995192304605 -6.5 L47.43995192304605 6.5 L37.43995192304605 6.5 A38 38 0 0 1 35.67394948182593 13.090810836924174 L35.67394948182593 13.090810836924174 L44.33420351967032 18.090810836924174 L37.83420351967032 29.34914108612188 L29.17394948182593 24.34914108612188 A38 38 0 0 1 24.34914108612188 29.17394948182593 L24.34914108612188 29.17394948182593 L29.34914108612188 37.83420351967032 L18.090810836924184 44.33420351967032 L13.090810836924183 35.67394948182593 A38 38 0 0 1 6.5 37.43995192304605 L6.5 37.43995192304605 L6.500000000000001 47.43995192304605 L-6.499999999999995 47.43995192304606 L-6.499999999999996 37.43995192304606 A38 38 0 0 1 -13.09081083692417 35.67394948182593 L-13.09081083692417 35.67394948182593 L-18.09081083692417 44.33420351967032 L-29.34914108612187 37.834203519670325 L-24.349141086121872 29.173949481825936 A38 38 0 0 1 -29.17394948182592 24.34914108612189 L-29.17394948182592 24.34914108612189 L-37.83420351967031 29.349141086121893 L-44.33420351967031 18.0908108369242 L-35.67394948182592 13.090810836924193 A38 38 0 0 1 -37.43995192304605 6.5000000000000036 L-37.43995192304605 6.5000000000000036 L-47.43995192304605 6.500000000000004 L-47.43995192304606 -6.499999999999993 L-37.43995192304606 -6.499999999999994 A38 38 0 0 1 -35.67394948182593 -13.090810836924167 L-35.67394948182593 -13.090810836924167 L-44.33420351967032 -18.090810836924163 L-37.834203519670325 -29.34914108612187 L-29.173949481825936 -24.34914108612187 A38 38 0 0 1 -24.349141086121893 -29.17394948182592 L-24.349141086121893 -29.17394948182592 L-29.349141086121897 -37.834203519670304 L-18.0908108369242 -44.334203519670304 L-13.090810836924195 -35.67394948182592 A38 38 0 0 1 -6.500000000000005 -37.43995192304605 L-6.500000000000005 -37.43995192304605 L-6.500000000000007 -47.43995192304605 L6.49999999999999 -47.43995192304606 L6.499999999999992 -37.43995192304606 A38 38 0 0 1 13.090810836924149 -35.67394948182594 L13.090810836924149 -35.67394948182594 L18.090810836924142 -44.33420351967033 L29.349141086121847 -37.83420351967034 L24.349141086121854 -29.17394948182595 A38 38 0 0 1 29.17394948182592 -24.349141086121893 L29.17394948182592 -24.349141086121893 L37.834203519670304 -29.349141086121897 L44.334203519670304 -18.0908108369242 L35.67394948182592 -13.090810836924197 A38 38 0 0 1 37.43995192304605 -6.500000000000007 M0 -20A20 20 0 1 0 0 20 A20 20 0 1 0 0 -20"),$(s,"fill","#c5523f"),$(s,"id","path8"),Ce(s,"fill","#64ccbc"),Ce(s,"fill-opacity","1"),$(n,"id","g6"),Ce(n,"fill","#64ccbc"),Ce(n,"fill-opacity","1"),$(r,"transform",l="translate(50 50) scale("+t[0]+")"),$(r,"id","g4"),Ce(r,"fill","#64ccbc"),Ce(r,"fill-opacity","1")},m(o,a){x(o,e,a),C(e,r),C(r,n),C(n,i),C(n,s)},p(o,[a]){a&1&&l!==(l="translate(50 50) scale("+o[0]+")")&&$(r,"transform",l)},i:ae,o:ae,d(o){o&&S(e)}}}function Vp(t,e,r){let{size:n=1}=e;return t.$$set=i=>{"size"in i&&r(0,n=i.size)},[n]}var oi=class extends ve{constructor(e){super(),ke(this,e,Vp,Kp,ge,{size:0})}},ai=oi;function Qp(t){let e,r,n,i,s;return r=new xe({props:{s:t[0]}}),{c(){e=T("button"),X(r.$$.fragment),$(e,"class","download")},m(l,o){x(l,e,o),H(r,e,null),n=!0,i||(s=Oe(e,"click",t[2]),i=!0)},p(l,[o]){let a={};o&1&&(a.s=l[0]),r.$set(a)},i(l){n||(g(r.$$.fragment,l),n=!0)},o(l){w(r.$$.fragment,l),n=!1},d(l){l&&S(e),W(r),i=!1,s()}}}function Jp(t,e,r){let{title:n="Export"}=e,{onlyCurrent:i=!1}=e,s=()=>hs(i);return t.$$set=l=>{"title"in l&&r(0,n=l.title),"onlyCurrent"in l&&r(1,i=l.onlyCurrent)},[n,i,s]}var ui=class extends ve{constructor(e){super(),ke(this,e,Jp,Qp,ge,{title:0,onlyCurrent:1})}},fi=ui;function ci(t,e){let r,n,i,s=150,l=100,o=300,a,u;t.addEventListener("touchstart",function(f){let c=f.changedTouches[0];i=0,r=c.pageX,n=c.pageY,u=Date.now()},!1),t.addEventListener("touchend",function(f){let c=f.changedTouches[0];i=c.pageX-r,a=Date.now()-u;let d=a<=o&&Math.abs(i)<s&&Math.abs(c.pageY-n)<=l;if(d){let p=f.target;for(;p!=null&&d;){let m=p.tagName;(m=="A"||m=="BUTTON"||m=="INPUT"||m=="NAV")&&(d=!1),p=p.parentElement}}let h=a<=o&&Math.abs(i)>=s&&Math.abs(c.pageY-n)<=l;d&&e(c.pageX>window.innerWidth/2)},!1)}var{document:zt}=Si;function Ua(t,e,r){let n=t.slice();return n[55]=e[r],n}function Wa(t,e,r){let n=t.slice();return n[58]=e[r],n[60]=r,n}function qa(t,e,r){let n=t.slice();return n[58]=e[r],n[60]=r,n}function Ha(t,e,r){let n=t.slice();return n[62]=e[r],n}function Xa(t,e,r){let n=t.slice();return n[19]=e[r],n}function Ga(t,e,r){let n=t.slice();return n[58]=e[r],n[60]=r,n}function Ya(t,e,r){let n=t.slice();return n[58]=e[r],n[60]=r,n}function Za(t){let e;return zt.title=e=It("XPedia"),{c:ae,m:ae,d:ae}}function em(t){let e=t[19],r,n,i=iu(t);return{c(){i.c(),r=be()},m(s,l){i.m(s,l),x(s,r,l),n=!0},p(s,l){l[0]&524288&&ge(e,e=s[19])?(te(),w(i,1,1,ae),ne(),i=iu(s),i.c(),g(i,1),i.m(r.parentNode,r)):i.p(s,l)},i(s){n||(g(i),n=!0)},o(s){w(i),n=!1},d(s){s&&S(r),i.d(s)}}}function tm(t){let e,r,n,i,s;return i=new ai({props:{scale:2}}),{c(){e=ce(t[17]),r=z(),n=T("div"),X(i.$$.fragment),$(n,"class","centered")},m(l,o){x(l,e,o),x(l,r,o),x(l,n,o),H(i,n,null),s=!0},p(l,o){(!s||o[0]&131072)&&Se(e,l[17])},i(l){s||(g(i.$$.fragment,l),s=!0)},o(l){w(i.$$.fragment,l),s=!1},d(l){l&&S(e),l&&S(r),l&&S(n),W(i)}}}function Ka(t){let e,r,n,i;return r=new xe({props:{s:t[58].id}}),{c(){e=T("a"),X(r.$$.fragment),$(e,"href",n="##"+t[58].id)},m(s,l){x(s,e,l),H(r,e,null),i=!0},p:ae,i(s){i||(g(r.$$.fragment,s),i=!0)},o(s){w(r.$$.fragment,s),i=!1},d(s){s&&S(e),W(r)}}}function Va(t){let e,r,n,i,s;return r=new xe({props:{s:t[58].id}}),{c(){e=T("a"),X(r.$$.fragment),$(e,"href",n="##"+t[58].id),$(e,"class",i=["FACILITIES","COMMENDATIONS","CRAFTS","ARMORS"].includes(t[58].id)&&"section-has-table")},m(l,o){x(l,e,o),H(r,e,null),s=!0},p:ae,i(l){s||(g(r.$$.fragment,l),s=!0)},o(l){w(r.$$.fragment,l),s=!1},d(l){l&&S(e),W(r)}}}function nm(t){let e,r,n;return{c(){e=T("button"),e.textContent="\u2B6F",$(e,"class","navbar-button")},m(i,s){x(i,e,s),r||(n=Oe(e,"click",t[34]),r=!0)},p:ae,d(i){i&&S(e),r=!1,n()}}}function rm(t){let e,r,n;return{c(){e=T("button"),e.innerHTML=`<span style="font-size:150%">A</span> 
          <span style="font-size:75%">A</span>`,$(e,"class","navbar-button")},m(i,s){x(i,e,s),r||(n=Oe(e,"click",t[35]),r=!0)},p:ae,d(i){i&&S(e),r=!1,n()}}}function im(t){let e,r,n,i,s,l,o,a,u,f;i=new xe({props:{s:F.langName}});let c=F.langNames,d=[];for(let p=0;p<c.length;p+=1)d[p]=Qa(Xa(t,c,p));let h=p=>w(d[p],1,1,()=>{d[p]=null});return{c(){e=T("div"),r=T("button"),n=T("big"),X(i.$$.fragment),s=z(),l=T("div");for(let p=0;p<d.length;p+=1)d[p].c();$(r,"class","navbar-button"),$(l,"class","navbar-dropdown"),$(l,"style",o=t[11]?"visibility:visible":"visibility:hidden"),$(e,"class","navbar-dropdown-container select-language")},m(p,m){x(p,e,m),C(e,r),C(r,n),H(i,n,null),C(e,s),C(e,l);for(let _=0;_<d.length;_+=1)d[_].m(l,null);a=!0,u||(f=[Oe(r,"mousedown",t[36]),Oe(e,"mouseover",t[38]),Oe(e,"mouseout",t[39])],u=!0)},p(p,m){if(m[0]&4194304){c=F.langNames;let _;for(_=0;_<c.length;_+=1){let v=Xa(p,c,_);d[_]?(d[_].p(v,m),g(d[_],1)):(d[_]=Qa(v),d[_].c(),g(d[_],1),d[_].m(l,null))}for(te(),_=c.length;_<d.length;_+=1)h(_);ne()}(!a||m[0]&2048&&o!==(o=p[11]?"visibility:visible":"visibility:hidden"))&&$(l,"style",o)},i(p){if(!a){g(i.$$.fragment,p);for(let m=0;m<c.length;m+=1)g(d[m]);a=!0}},o(p){w(i.$$.fragment,p),d=d.filter(Boolean);for(let m=0;m<d.length;m+=1)w(d[m]);a=!1},d(p){p&&S(e),W(i),_e(d,p),u=!1,Ve(f)}}}function Qa(t){let e,r,n,i,s,l,o;n=new xe({props:{s:t[19]}});function a(...u){return t[37](t[19],...u)}return{c(){e=T("div"),r=T("nobr"),X(n.$$.fragment),i=z(),$(e,"class","clickable")},m(u,f){x(u,e,f),C(e,r),H(n,r,null),C(e,i),s=!0,l||(o=Oe(e,"click",a),l=!0)},p(u,f){t=u},i(u){s||(g(n.$$.fragment,u),s=!0)},o(u){w(n.$$.fragment,u),s=!1},d(u){u&&S(e),W(n),l=!1,o()}}}function Ja(t){let e,r,n,i,s,l,o,a,u,f,c;n=new xe({props:{s:"A-Z"}});let d=t[15](t[5]?.articles)||[],h=[];for(let m=0;m<d.length;m+=1)h[m]=eu(Ha(t,d,m));let p=m=>w(h[m],1,1,()=>{h[m]=null});return{c(){e=T("nav"),r=T("button"),X(n.$$.fragment),s=z(),l=T("div");for(let m=0;m<h.length;m+=1)h[m].c();o=z(),a=T("br"),$(r,"class","side-sort-button"),$(r,"style",i=t[2]?"":"text-decoration:line-through"),$(l,"class","menu-list"),$(e,"class","sidebar")},m(m,_){x(m,e,_),C(e,r),H(n,r,null),C(e,s),C(e,l);for(let v=0;v<h.length;v+=1)h[v].m(l,null);C(e,o),C(e,a),u=!0,f||(c=Oe(r,"click",t[41]),f=!0)},p(m,_){if((!u||_[0]&4&&i!==(i=m[2]?"":"text-decoration:line-through"))&&$(r,"style",i),_[0]&32993){d=m[15](m[5]?.articles)||[];let v;for(v=0;v<d.length;v+=1){let y=Ha(m,d,v);h[v]?(h[v].p(y,_),g(h[v],1)):(h[v]=eu(y),h[v].c(),g(h[v],1),h[v].m(l,null))}for(te(),v=d.length;v<h.length;v+=1)p(v);ne()}},i(m){if(!u){g(n.$$.fragment,m);for(let _=0;_<d.length;_+=1)g(h[_]);u=!0}},o(m){w(n.$$.fragment,m),h=h.filter(Boolean);for(let _=0;_<h.length;_+=1)w(h[_]);u=!1},d(m){m&&S(e),W(n),_e(h,m),f=!1,c()}}}function lm(t){let e,r,n,i,s,l,o;return r=new xe({props:{s:t[62].id}}),{c(){e=T("a"),X(r.$$.fragment),n=z(),$(e,"class","side-link"),$(e,"href",i="##"+t[62].id)},m(a,u){x(a,e,u),H(r,e,null),C(e,n),s=!0,l||(o=Oe(e,"click",t[43]),l=!0)},p(a,u){let f={};u[0]&32800&&(f.s=a[62].id),r.$set(f),(!s||u[0]&32800&&i!==(i="##"+a[62].id))&&$(e,"href",i)},i(a){s||(g(r.$$.fragment,a),s=!0)},o(a){w(r.$$.fragment,a),s=!1},d(a){a&&S(e),W(r),l=!1,o()}}}function sm(t){let e,r,n,i,s;return r=new xe({props:{s:t[62].id}}),{c(){e=T("a"),X(r.$$.fragment),n=z(),$(e,"href",i="##"+t[62].id),$(e,"class","active-article-option side-link")},m(l,o){x(l,e,o),H(r,e,null),C(e,n),t[42](e),s=!0},p(l,o){let a={};o[0]&32800&&(a.s=l[62].id),r.$set(a),(!s||o[0]&32800&&i!==(i="##"+l[62].id))&&$(e,"href",i)},i(l){s||(g(r.$$.fragment,l),s=!0)},o(l){w(r.$$.fragment,l),s=!1},d(l){l&&S(e),W(r),t[42](null)}}}function eu(t){let e,r,n,i,s=[sm,lm],l=[];function o(a,u){return a[0]&&a[0].id==a[62].id?0:1}return e=o(t,[-1,-1,-1]),r=l[e]=s[e](t),{c(){r.c(),n=be()},m(a,u){l[e].m(a,u),x(a,n,u),i=!0},p(a,u){let f=e;e=o(a,u),e===f?l[e].p(a,u):(te(),w(l[f],1,1,()=>{l[f]=null}),ne(),r=l[e],r?r.p(a,u):(r=l[e]=s[e](a),r.c()),g(r,1),r.m(n.parentNode,n))},i(a){i||(g(r),i=!0)},o(a){w(r),i=!1},d(a){l[e].d(a),a&&S(n)}}}function om(t){let e,r,n,i,s,l,o,a,u,f,c,d,h,p,m,_,v,y,A,I,E;r=new xe({props:{s:"Pedia sections"}});let L=F.sectionsOrder,M=[];for(let R=0;R<L.length;R+=1)M[R]=tu(qa(t,L,R));o=new xe({props:{s:"Extra sections"}});let V=F.typeSectionsOrder,Z=[];for(let R=0;R<V.length;R+=1)Z[R]=nu(Wa(t,V,R));d=new xe({props:{s:"Mods"}});let B=F.mods,G=[];for(let R=0;R<B.length;R+=1)G[R]=ru(Ua(t,B,R));v=new xe({props:{s:"About XPedia"}});let k=!Rt&&fm(t);return I=new xe({props:{s:"aboutxpedia"}}),{c(){e=T("h2"),X(r.$$.fragment),n=z(),i=T("p");for(let R=0;R<M.length;R+=1)M[R].c();s=z(),l=T("h2"),X(o.$$.fragment),a=z(),u=T("p");for(let R=0;R<Z.length;R+=1)Z[R].c();f=z(),c=T("h2"),X(d.$$.fragment),h=z(),p=T("ul");for(let R=0;R<G.length;R+=1)G[R].c();m=z(),_=T("h2"),X(v.$$.fragment),y=z(),k&&k.c(),A=z(),X(I.$$.fragment)},m(R,ue){x(R,e,ue),H(r,e,null),x(R,n,ue),x(R,i,ue);for(let P=0;P<M.length;P+=1)M[P].m(i,null);x(R,s,ue),x(R,l,ue),H(o,l,null),x(R,a,ue),x(R,u,ue);for(let P=0;P<Z.length;P+=1)Z[P].m(u,null);x(R,f,ue),x(R,c,ue),H(d,c,null),x(R,h,ue),x(R,p,ue);for(let P=0;P<G.length;P+=1)G[P].m(p,null);x(R,m,ue),x(R,_,ue),H(v,_,null),x(R,y,ue),k&&k.m(R,ue),x(R,A,ue),H(I,R,ue),E=!0},p(R,ue){if(ue&0){L=F.sectionsOrder;let P;for(P=0;P<L.length;P+=1){let he=qa(R,L,P);M[P]?M[P].p(he,ue):(M[P]=tu(he),M[P].c(),M[P].m(i,null))}for(;P<M.length;P+=1)M[P].d(1);M.length=L.length}if(ue&0){V=F.typeSectionsOrder;let P;for(P=0;P<V.length;P+=1){let he=Wa(R,V,P);Z[P]?Z[P].p(he,ue):(Z[P]=nu(he),Z[P].c(),Z[P].m(u,null))}for(;P<Z.length;P+=1)Z[P].d(1);Z.length=V.length}if(ue&0){B=F.mods;let P;for(P=0;P<B.length;P+=1){let he=Ua(R,B,P);G[P]?G[P].p(he,ue):(G[P]=ru(he),G[P].c(),G[P].m(p,null))}for(;P<G.length;P+=1)G[P].d(1);G.length=B.length}Rt||k.p(R,ue)},i(R){E||(g(r.$$.fragment,R),g(o.$$.fragment,R),g(d.$$.fragment,R),g(v.$$.fragment,R),g(k),g(I.$$.fragment,R),E=!0)},o(R){w(r.$$.fragment,R),w(o.$$.fragment,R),w(d.$$.fragment,R),w(v.$$.fragment,R),w(k),w(I.$$.fragment,R),E=!1},d(R){R&&S(e),W(r),R&&S(n),R&&S(i),_e(M,R),R&&S(s),R&&S(l),W(o),R&&S(a),R&&S(u),_e(Z,R),R&&S(f),R&&S(c),W(d),R&&S(h),R&&S(p),_e(G,R),R&&S(m),R&&S(_),W(v),R&&S(y),k&&k.d(R),R&&S(A),W(I,R)}}}function am(t){let e,r;return e=new ja({props:{article:t[0],query:t[4]}}),e.$on("prev",t[47]),e.$on("next",t[48]),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p(n,i){let s={};i[0]&1&&(s.article=n[0]),i[0]&16&&(s.query=n[4]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function um(t){let e,r,n,i,s,l,o,a,u,f,c=[pm,hm,dm,cm],d=[];function h(p,m){return p[3]&&p[3].length>0?0:p[4].length<2?1:p[8]||p[14]?2:3}return o=h(t,[-1,-1,-1]),a=d[o]=c[o](t),{c(){e=ce(`Searching "\r
        `),r=T("em"),n=ce(t[4]),i=ce(`\r
        ":\r
        `),s=T("br"),l=z(),a.c(),u=be()},m(p,m){x(p,e,m),x(p,r,m),C(r,n),x(p,i,m),x(p,s,m),x(p,l,m),d[o].m(p,m),x(p,u,m),f=!0},p(p,m){(!f||m[0]&16)&&Se(n,p[4]);let _=o;o=h(p,m),o===_?d[o].p(p,m):(te(),w(d[_],1,1,()=>{d[_]=null}),ne(),a=d[o],a?a.p(p,m):(a=d[o]=c[o](p),a.c()),g(a,1),a.m(u.parentNode,u))},i(p){f||(g(a),f=!0)},o(p){w(a),f=!1},d(p){p&&S(e),p&&S(r),p&&S(i),p&&S(s),p&&S(l),d[o].d(p),p&&S(u)}}}function tu(t){let e,r=lt(t[60])+"",n,i,s=t[58].title+"",l,o;return{c(){e=new je(!1),n=z(),i=T("a"),l=ce(s),e.a=n,$(i,"href",o="##"+t[58].id)},m(a,u){e.m(r,a,u),x(a,n,u),x(a,i,u),C(i,l)},p:ae,d(a){a&&e.d(),a&&S(n),a&&S(i)}}}function nu(t){let e,r=lt(t[60])+"",n,i,s=t[58].title+"",l,o;return{c(){e=new je(!1),n=z(),i=T("a"),l=ce(s),e.a=n,$(i,"href",o="##"+t[58].id)},m(a,u){e.m(r,a,u),x(a,n,u),x(a,i,u),C(i,l)},p:ae,d(a){a&&e.d(),a&&S(n),a&&S(i)}}}function ru(t){let e,r=t[55].name+"",n,i,s=t[55].version+"",l;return{c(){e=T("li"),n=ce(r),i=z(),l=ce(s)},m(o,a){x(o,e,a),C(e,n),C(e,i),C(e,l)},p:ae,d(o){o&&S(e)}}}function fm(t){let e,r,n,i,s,l,o,a,u,f,c,d;return r=new xe({props:{s:"Export"}}),i=new xe({props:{s:"aboutexport"}}),o=new fi({props:{title:"Export all languages"}}),u=new fi({props:{title:"Export current ("+F.tr(F.langName)+") only",onlyCurrent:!0}}),{c(){e=T("h4"),X(r.$$.fragment),n=z(),X(i.$$.fragment),s=T("br"),l=z(),X(o.$$.fragment),a=z(),X(u.$$.fragment),f=z(),c=T("br")},m(h,p){x(h,e,p),H(r,e,null),x(h,n,p),H(i,h,p),x(h,s,p),x(h,l,p),H(o,h,p),x(h,a,p),H(u,h,p),x(h,f,p),x(h,c,p),d=!0},p:ae,i(h){d||(g(r.$$.fragment,h),g(i.$$.fragment,h),g(o.$$.fragment,h),g(u.$$.fragment,h),d=!0)},o(h){w(r.$$.fragment,h),w(i.$$.fragment,h),w(o.$$.fragment,h),w(u.$$.fragment,h),d=!1},d(h){h&&S(e),W(r),h&&S(n),W(i,h),h&&S(s),h&&S(l),W(o,h),h&&S(a),W(u,h),h&&S(f),h&&S(c)}}}function cm(t){let e,r,n;return r=new xe({props:{s:"Nothing found"}}),{c(){e=T("i"),X(r.$$.fragment)},m(i,s){x(i,e,s),H(r,e,null),n=!0},p:ae,i(i){n||(g(r.$$.fragment,i),n=!0)},o(i){w(r.$$.fragment,i),n=!1},d(i){i&&S(e),W(r)}}}function dm(t){let e,r;return e=new ai({props:{size:.5}}),{c(){X(e.$$.fragment)},m(n,i){H(e,n,i),r=!0},p:ae,i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function hm(t){let e;return{c(){e=T("i"),e.textContent="Query too short"},m(r,n){x(r,e,n)},p:ae,i:ae,o:ae,d(r){r&&S(e)}}}function pm(t){let e,r,n,i,s;return e=new ft({props:{links:t[3].filter(t[45])}}),i=new ft({props:{links:t[3].filter(t[46]),title:" "}}),{c(){X(e.$$.fragment),r=T("br"),n=z(),X(i.$$.fragment)},m(l,o){H(e,l,o),x(l,r,o),x(l,n,o),H(i,l,o),s=!0},p(l,o){let a={};o[0]&24&&(a.links=l[3].filter(l[45])),e.$set(a);let u={};o[0]&24&&(u.links=l[3].filter(l[46])),i.$set(u)},i(l){s||(g(e.$$.fragment,l),g(i.$$.fragment,l),s=!0)},o(l){w(e.$$.fragment,l),w(i.$$.fragment,l),s=!1},d(l){W(e,l),l&&S(r),l&&S(n),W(i,l)}}}function iu(t){let e,r,n,i,s,l,o,a,u,f,c,d,h,p,m,_,v,y,A,I,E,L,M,V,Z=(t[5]?F.tr(t[5].id):"")+"",B,G,k,R,ue,P,he,q,Q,N,U,ee,fe,de,Me,Pe,Ee,$e,Re,ze,Ke,We,b,re,J,D,O,j,le,oe;_=new xe({props:{s:"HOME"}});let Y=F.sectionsOrder,se=[];for(let pe=0;pe<Y.length;pe+=1)se[pe]=Ka(Ya(t,Y,pe));let K=pe=>w(se[pe],1,1,()=>{se[pe]=null}),ie=F.sortedTypeSections(),me=[];for(let pe=0;pe<ie.length;pe+=1)me[pe]=Va(Ga(t,ie,pe));let De=pe=>w(me[pe],1,1,()=>{me[pe]=null}),Te=!Rt&&nm(t),Xe=lu&&rm(t),et=F.langNames?.length>1&&im(t),Le=t[9]&&Ja(t),pt=[um,am,om],Be=[];function vt(pe,we){return pe[4]&&pe[13]?0:pe[0]?1:2}return b=vt(t,[-1,-1,-1]),re=Be[b]=pt[b](t),{c(){e=T("nav"),r=T("div"),n=T("div"),i=T("img"),l=z(),o=T("nobr"),a=T("span"),a.textContent=`${F.tr("XPedia")}\xA0`,u=z(),f=T("span"),f.textContent="\u02C5",c=z(),d=T("div"),h=T("div"),p=T("div"),m=T("a"),X(_.$$.fragment),v=z(),y=T("div"),A=z();for(let pe=0;pe<se.length;pe+=1)se[pe].c();I=z(),E=T("div");for(let pe=0;pe<me.length;pe+=1)me[pe].c();M=z(),V=T("a"),B=ce(Z),k=z(),R=T("div"),ue=ce("\u{1F441}"),he=z(),q=T("div"),Q=z(),Te&&Te.c(),N=z(),Xe&&Xe.c(),U=z(),et&&et.c(),ee=z(),fe=T("div"),de=T("input"),Pe=z(),Le&&Le.c(),Ee=z(),$e=T("button"),Re=T("span"),Re.textContent="\u2261",Ke=z(),We=T("div"),re.c(),D=z(),O=T("div"),O.textContent="Tooltip",Ue(i.src,s=yr)||$(i,"src",s),$(i,"alt","XPedia"),$(i,"class","xpedia-icon"),$(a,"class","on-wide"),Ce(f,"transform","scale(1.5,0.75)"),Ce(f,"display","inline-block"),$(n,"class","navbar-button dropdown-button"),$(m,"href","##MAIN"),Ce(m,"text-decoration","underline"),Ce(y,"height","0.5em"),$(p,"class","navbar-auto navbar-list"),$(E,"class","navbar-custom navbar-list"),$(h,"class","flex-horisontal"),Ce(h,"flex-wrap","nowrap"),$(d,"class","navbar-dropdown"),$(d,"style",L=t[10]?"visibility:visible":"visibility:hidden"),$(r,"class","navbar-dropdown-container"),$(V,"class","navbar-button navbar-current-article"),$(V,"href",G="##"+(t[5]?t[5].id:"MAIN")),$(R,"class",P="navbar-button "+(t[18]?"reveal-lock":"")),$(R,"id","reveal"),$(q,"class","stretcher"),$(de,"class","input"),$(de,"type","text"),$(de,"id","search-string"),$(de,"placeholder",Me=It("Search...")),$(fe,"class","navbar-search"),$(e,"class","navbar flex-horisontal"),Ce(Re,"font-size","150%"),$($e,"class","side-hide-button"),$($e,"style",ze=t[9]?"":"left:1em;"),$(We,"class","main"),$(We,"id","main"),$(We,"style",J=t[9]?"":"padding-left:1rem;"),$(O,"class","tooltip fadein")},m(pe,we){x(pe,e,we),C(e,r),C(r,n),C(n,i),C(n,l),C(n,o),C(o,a),C(o,u),C(o,f),C(r,c),C(r,d),C(d,h),C(h,p),C(p,m),H(_,m,null),C(p,v),C(p,y),C(p,A);for(let nt=0;nt<se.length;nt+=1)se[nt].m(p,null);C(h,I),C(h,E);for(let nt=0;nt<me.length;nt+=1)me[nt].m(E,null);C(e,M),C(e,V),C(V,B),C(e,k),C(e,R),C(R,ue),C(e,he),C(e,q),C(e,Q),Te&&Te.m(e,null),C(e,N),Xe&&Xe.m(e,null),C(e,U),et&&et.m(e,null),C(e,ee),C(e,fe),C(fe,de),Nn(de,t[4]),x(pe,Pe,we),Le&&Le.m(pe,we),x(pe,Ee,we),x(pe,$e,we),C($e,Re),x(pe,Ke,we),x(pe,We,we),Be[b].m(We,null),x(pe,D,we),x(pe,O,we),t[49](O),j=!0,le||(oe=[Oe(n,"mousedown",t[28]),Oe(r,"mouseover",t[29]),Oe(r,"mouseout",t[30]),Oe(R,"mouseover",t[31]),Oe(R,"mouseout",t[32]),Oe(R,"click",t[33]),Oe(de,"input",t[40]),Oe(de,"keyup",t[25]),Oe($e,"click",t[44])],le=!0)},p(pe,we){if(we&0){Y=F.sectionsOrder;let Ie;for(Ie=0;Ie<Y.length;Ie+=1){let kt=Ya(pe,Y,Ie);se[Ie]?(se[Ie].p(kt,we),g(se[Ie],1)):(se[Ie]=Ka(kt),se[Ie].c(),g(se[Ie],1),se[Ie].m(p,null))}for(te(),Ie=Y.length;Ie<se.length;Ie+=1)K(Ie);ne()}if(we&0){ie=F.sortedTypeSections();let Ie;for(Ie=0;Ie<ie.length;Ie+=1){let kt=Ga(pe,ie,Ie);me[Ie]?(me[Ie].p(kt,we),g(me[Ie],1)):(me[Ie]=Va(kt),me[Ie].c(),g(me[Ie],1),me[Ie].m(E,null))}for(te(),Ie=ie.length;Ie<me.length;Ie+=1)De(Ie);ne()}(!j||we[0]&1024&&L!==(L=pe[10]?"visibility:visible":"visibility:hidden"))&&$(d,"style",L),(!j||we[0]&32)&&Z!==(Z=(pe[5]?F.tr(pe[5].id):"")+"")&&Se(B,Z),(!j||we[0]&32&&G!==(G="##"+(pe[5]?pe[5].id:"MAIN")))&&$(V,"href",G),(!j||we[0]&262144&&P!==(P="navbar-button "+(pe[18]?"reveal-lock":"")))&&$(R,"class",P),Rt||Te.p(pe,we),lu&&Xe.p(pe,we),F.langNames?.length>1&&et.p(pe,we),we[0]&16&&de.value!==pe[4]&&Nn(de,pe[4]),pe[9]?Le?(Le.p(pe,we),we[0]&512&&g(Le,1)):(Le=Ja(pe),Le.c(),g(Le,1),Le.m(Ee.parentNode,Ee)):Le&&(te(),w(Le,1,1,()=>{Le=null}),ne()),(!j||we[0]&512&&ze!==(ze=pe[9]?"":"left:1em;"))&&$($e,"style",ze);let nt=b;b=vt(pe,we),b===nt?Be[b].p(pe,we):(te(),w(Be[nt],1,1,()=>{Be[nt]=null}),ne(),re=Be[b],re?re.p(pe,we):(re=Be[b]=pt[b](pe),re.c()),g(re,1),re.m(We,null)),(!j||we[0]&512&&J!==(J=pe[9]?"":"padding-left:1rem;"))&&$(We,"style",J)},i(pe){if(!j){g(_.$$.fragment,pe);for(let we=0;we<Y.length;we+=1)g(se[we]);for(let we=0;we<ie.length;we+=1)g(me[we]);g(et),g(Le),g(re),j=!0}},o(pe){w(_.$$.fragment,pe),se=se.filter(Boolean);for(let we=0;we<se.length;we+=1)w(se[we]);me=me.filter(Boolean);for(let we=0;we<me.length;we+=1)w(me[we]);w(et),w(Le),w(re),j=!1},d(pe){pe&&S(e),W(_),_e(se,pe),_e(me,pe),Te&&Te.d(),Xe&&Xe.d(),et&&et.d(),pe&&S(Pe),Le&&Le.d(pe),pe&&S(Ee),pe&&S($e),pe&&S(Ke),pe&&S(We),Be[b].d(),pe&&S(D),pe&&S(O),t[49](null),le=!1,Ve(oe)}}}function mm(t){let e,r,n,i,s,l,o,a,u,f,c=!t[0]&&Za(t),d=[tm,em],h=[];function p(m,_){return m[16]?1:0}return o=p(t,[-1,-1,-1]),a=h[o]=d[o](t),{c(){c&&c.c(),e=T("meta"),r=T("meta"),n=T("style"),s=T("link"),l=z(),a.c(),u=be(),$(e,"charset","utf8"),$(r,"name","keywords"),$(r,"content","OpenXCom"),Ue(n.src,i="main.css")||$(n,"src",i),$(s,"rel","icon"),$(s,"type","image/png"),$(s,"href",yr)},m(m,_){c&&c.m(zt.head,null),C(zt.head,e),C(zt.head,r),C(zt.head,n),C(zt.head,s),x(m,l,_),h[o].m(m,_),x(m,u,_),f=!0},p(m,_){m[0]?c&&(c.d(1),c=null):c||(c=Za(m),c.c(),c.m(e.parentNode,e));let v=o;o=p(m,_),o===v?h[o].p(m,_):(te(),w(h[v],1,1,()=>{h[v]=null}),ne(),a=h[o],a?a.p(m,_):(a=h[o]=d[o](m),a.c()),g(a,1),a.m(u.parentNode,u))},i(m){f||(g(a),f=!0)},o(m){w(a),f=!1},d(m){c&&c.d(m),S(e),S(r),S(n),S(s),m&&S(l),h[o].d(m),m&&S(u)}}}var lu=!0;function su(t,e){return t.toLowerCase().indexOf(e)!=-1}function ou(t){window.location.hash="##"+t}function _m(t,e,r){let n,i,s,l;Et(t,Xt,K=>r(16,i=K)),Et(t,at,K=>r(17,s=K)),Et(t,At,K=>r(18,l=K));let o=null,a=null,u="",f=null,c,d=!1,h="",p=null,m=!0,_=!1,v=!1,y=!1,A,I=!1,E=!1,L=!1,M="ontouchstart"in window,V;zn("main",{revealed:()=>At}),Xt.subscribe(K=>{K&&(G(),ue())});let Z;St.subscribe(K=>{Z=K,B()});function B(){!E||(localStorage.xpediaSettings=JSON.stringify({hugeFont:_,seeSide:m,lang:V,sortArticles:L,linksPageSorted:Z}),console.log("ss",localStorage.xpediaSettings))}function G(){try{console.log("ls",localStorage.xpediaSettings);let K=JSON.parse(localStorage.xpediaSettings);K&&typeof K=="object"&&(r(1,_=K.hugeFont),r(9,m=K.seeSide),r(2,L=K.sortArticles),St.set(K.linksPageSorted),k(K.lang))}catch(K){console.error(K)}E=!0}function k(K){F.selectLang(K)&&r(19,V=K),B()}let R;async function ue(){r(10,v=r(11,y=!1));let K=decodeURI(document.location.hash);if(K.substring(0,2)=="##"){if(h=K.substring(2),h=="MAIN"&&r(4,u=""),r(13,I=!1),h){let ie=h.indexOf("::");ie!=-1&&(r(4,u=h.substring(ie+2)),h=h.substring(0,ie)),h=="SEARCH"?(r(13,I=!0),u.length>=2?(r(14,R=!0),r(3,a=await F.search[F.langName].findArticles(u)),r(14,R=!1)):r(3,a=0),r(0,o=null)):(r(3,a=null),(!o||o.id!=h)&&r(0,o=F.article(h))),console.log(h),console.log(o)}o&&o.sections&&(o.sections.includes(f)||r(5,f=o.sections[0])),c&&P()}}function P(){setTimeout(()=>c?.scrollIntoView({behavior:"smooth",block:"center"}),50)}function he(K){let ie=F.findNextArticle(o,K,f,L);ie&&ou(ie.id)}function q(K){p&&clearTimeout(p),r(8,p=setTimeout(()=>{ou("SEARCH::"+K.target.value),r(8,p=null)},K.key=="Enter"?10:300))}window.onhashchange=ue;function Q(K=null){K===null?r(10,v=!v):M||r(10,v=K)}document.addEventListener("keydown",K=>{let ie=K.key;ie=="ArrowRight"&&he(1),ie=="ArrowLeft"&&he(-1)}),ci(document.body,K=>{he(K?1:-1)}),window.addEventListener("mousemove",async K=>{if(A){let ie=K.target;for(;ie&&ie.attributes&&!("tooltip"in ie.attributes);)ie=ie.parentNode;if(ie&&ie.attributes&&ie.attributes.tooltip){let me=ie.attributes.tooltip,De=K.target.getBoundingClientRect();r(12,A.style.left=De.left+De.width/2+"px",A),r(12,A.style.top=De.top+"px",A);let Te=me.value;N(Te in F.lang&&!K.shiftKey?F.lang[Te]:Te.substring(4))}else N(null)}});function N(K){r(12,A.innerHTML=K,A);let ie=A.classList;K?ie.add("visible"):ie.remove("visible")}let U=K=>Q(),ee=K=>Q(!0),fe=K=>Q(!1),de=K=>{Ot(!0)},Me=K=>{Ot(!1)},Pe=K=>{Ti(),B()},Ee=K=>{yn("wipe"),location.reload()},$e=K=>r(1,_=!_),Re=K=>r(11,y=!y),ze=(K,ie)=>k(K),Ke=K=>!M&&r(11,y=!0),We=K=>!M&&r(11,y=!1);function b(){u=this.value,r(4,u)}let re=K=>{r(2,L=!L),P(),B()};function J(K){mt[K?"unshift":"push"](()=>{c=K,r(6,c)})}let D=()=>{r(7,d=!0)},O=K=>{K.button==0&&r(9,m=!m),B()},j=K=>su(F.tr(K),u),le=K=>!su(F.tr(K),u),oe=K=>he(-1),Y=K=>he(1);function se(K){mt[K?"unshift":"push"](()=>{A=K,r(12,A)})}return t.$$.update=()=>{if(t.$$.dirty[0]&3){e:o&&console.info(o),document.documentElement.style.fontSize=_?"18pt":"12pt"}if(t.$$.dirty[0]&4){e:r(15,n=K=>L?[...K||[]].sort((ie,me)=>ie.title>me.title?1:-1):K)}},[o,_,L,a,u,f,c,d,p,m,v,y,A,I,R,n,i,s,l,V,M,B,k,P,he,q,Q,G,U,ee,fe,de,Me,Pe,Ee,$e,Re,ze,Ke,We,b,re,J,D,O,j,le,oe,Y,se]}var di=class extends ve{constructor(e){super(),ke(this,e,_m,mm,ge,{loadState:27},null,[-1,-1,-1])}get loadState(){return this.$$.ctx[27]}},au=di;var uu;function gm(){vm(),document.body.innerHTML="",document.body.style.display="block",new tn,ds(F).then(()=>{Xt.set(!0)}),uu=new au({target:document.body})}addEventListener("load",gm);addEventListener("hashchange",t=>{location.hash.substring(0,8)!="##SEARCH"&&document.getElementById("search-string")?.blur()});var ub=uu,bm=!1;function vm(){addEventListener("keydown",t=>{switch(t.code){case"KeyQ":if(!bm)break;let e=document.getElementById("search-string");e&&e instanceof HTMLInputElement&&e!=document.activeElement&&(e.value="",setInterval(()=>e.focus(),1));break;case"ShiftLeft":case"ShiftRight":Ot(!0);break}}),addEventListener("keyup",t=>{switch(t.code){case"ShiftLeft":case"ShiftRight":Ot(!1);break}})}})();
/*!

JSZip v3.10.0 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=xpedia.js.map
