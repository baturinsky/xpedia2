(()=>{var La=Object.create;var Ur=Object.defineProperty;var Ba=Object.getOwnPropertyDescriptor;var za=Object.getOwnPropertyNames;var Pa=Object.getPrototypeOf,ja=Object.prototype.hasOwnProperty;var Rt=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var qr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ua=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of za(e))!ja.call(t,i)&&i!==r&&Ur(t,i,{get:()=>e[i],enumerable:!(n=Ba(e,i))||n.enumerable});return t};var Wr=(t,e,r)=>(r=t!=null?La(Pa(t)):{},Ua(e||!t||!t.__esModule?Ur(r,"default",{value:t,enumerable:!0}):r,t));var Gr=qr((Ip,Hr)=>{Hr.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=t,r.c=e,r.p="",r(0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INDEX_MODES=void 0;var n=r(1),i=l(n),s=r(2);function l(a){return a&&a.__esModule?a:{default:a}}e.default=i.default,e.INDEX_MODES=s.INDEX_MODES},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(6),s=l(i);function l(u){return u&&u.__esModule?u:{default:u}}function a(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var o=function u(){var f=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.caseSensitive,h=c.indexMode,p=c.matchAnyToken,m=c.tokenizePattern;a(this,u),this.indexDocument=function(_,b){return f._search.indexDocument(_,b),f},this.search=function(_){return f._search.search(_)},this.terminate=function(){f._search.terminate()},typeof window<"u"&&window.Worker?this._search=new s.default({indexMode:h,matchAnyToken:p,tokenizePattern:m,caseSensitive:d}):this._search=new n.SearchUtility({indexMode:h,matchAnyToken:p,tokenizePattern:m,caseSensitive:d})};e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SearchUtility=e.INDEX_MODES=void 0;var n=r(3),i=l(n),s=r(4);function l(a){return a&&a.__esModule?a:{default:a}}e.default=i.default,e.INDEX_MODES=s.INDEX_MODES,e.SearchUtility=i.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function f(c,d){for(var h=0;h<d.length;h++){var p=d[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}return function(c,d,h){return d&&f(c.prototype,d),h&&f(c,h),c}}(),i=r(4),s=r(5),l=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function o(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}var u=function(){function f(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=d.caseSensitive,p=h===void 0?!1:h,m=d.indexMode,_=m===void 0?i.INDEX_MODES.ALL_SUBSTRINGS:m,b=d.matchAnyToken,y=b===void 0?!1:b,S=d.tokenizePattern,R=S===void 0?/\s+/:S;o(this,f),this.indexDocument=function(M,F){c._uids[M]=!0;var L=c._tokenize(c._sanitize(F));return L.forEach(function(V){var ue=c._expandToken(V);ue.forEach(function(D){c._searchIndex.indexDocument(D,M)})}),c},this.search=function(M){if(M){var F=c._tokenize(c._sanitize(M));return c._searchIndex.search(F,c._matchAnyToken)}else return Object.keys(c._uids)},this.terminate=function(){},this._caseSensitive=p,this._indexMode=_,this._matchAnyToken=y,this._tokenizePattern=R,this._searchIndex=new l.default,this._uids={}}return n(f,[{key:"getCaseSensitive",value:function(){return this._caseSensitive}},{key:"getIndexMode",value:function(){return this._indexMode}},{key:"getMatchAnyToken",value:function(){return this._matchAnyToken}},{key:"getTokenizePattern",value:function(){return this._tokenizePattern}},{key:"setCaseSensitive",value:function(d){this._caseSensitive=d}},{key:"setIndexMode",value:function(d){if(Object.keys(this._uids).length>0)throw Error("indexMode cannot be changed once documents have been indexed");this._indexMode=d}},{key:"setMatchAnyToken",value:function(d){this._matchAnyToken=d}},{key:"setTokenizePattern",value:function(d){this._tokenizePattern=d}},{key:"_expandToken",value:function(d){switch(this._indexMode){case i.INDEX_MODES.EXACT_WORDS:return[d];case i.INDEX_MODES.PREFIXES:return this._expandPrefixTokens(d);case i.INDEX_MODES.ALL_SUBSTRINGS:default:return this._expandAllSubstringTokens(d)}}},{key:"_expandAllSubstringTokens",value:function(d){var h=[];try{for(var p=0,m=d.length;p<m;++p)for(var _="",b=p;b<m;++b)_+=d.charAt(b),h.push(_)}catch(y){console.error('Unable to parse token "'+d+'" '+y)}return h}},{key:"_expandPrefixTokens",value:function(d){var h=[];try{for(var p=0,m=d.length;p<m;++p)h.push(d.substr(0,p+1))}catch(_){console.error('Unable to parse token "'+d+'" '+_)}return h}},{key:"_sanitize",value:function(d){return this._caseSensitive?d.trim():d.trim().toLocaleLowerCase()}},{key:"_tokenize",value:function(d){return d.split(this._tokenizePattern).filter(function(h){return h})}}]),f}();e.default=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.INDEX_MODES={ALL_SUBSTRINGS:"ALL_SUBSTRINGS",EXACT_WORDS:"EXACT_WORDS",PREFIXES:"PREFIXES"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function s(l,a){for(var o=0;o<a.length;o++){var u=a[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(l,u.key,u)}}return function(l,a,o){return a&&s(l.prototype,a),o&&s(l,o),l}}();function n(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}var i=function(){function s(){n(this,s),this.tokenToUidMap={}}return r(s,[{key:"indexDocument",value:function(a,o){this.tokenToUidMap[a]||(this.tokenToUidMap[a]={}),this.tokenToUidMap[a][o]=o}},{key:"search",value:function(a,o){var u=this,f={},c={},d=!1;a.forEach(function(m){var _=u.tokenToUidMap[m]||{};if(d)if(o)for(var S in _)f[S]=_[S],c[S]=(c[S]||0)+1;else for(var y in f)_[y]||delete f[y];else{d=!0;for(var b in _)f[b]=_[b],c[b]=1}});var h=[];for(var p in f)h.push(f[p]);return o&&h.sort(function(m,_){return c[_]-c[m]}),h}}]),s}();e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(7),i=s(n);function s(l){return l&&l.__esModule?l:{default:l}}e.default=i.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function u(f,c){for(var d=0;d<c.length;d++){var h=c[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}return function(f,c,d){return c&&u(f.prototype,c),d&&u(f,d),f}}(),i=r(8),s=l(i);function l(u){return u&&u.__esModule?u:{default:u}}function a(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}var o=function(){function u(){var f=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=c.caseSensitive,h=c.indexMode,p=c.matchAnyToken,m=c.tokenizePattern,_=c.WorkerClass;a(this,u),this.indexDocument=function(b,y){return f._worker.postMessage({method:"indexDocument",text:y,uid:b}),f},this.search=function(b){return new Promise(function(y,S){var R=s.default.v4(),M={callbackId:R,complete:!1,error:null,reject:S,resolve:y,results:null};f._worker.postMessage({method:"search",query:b,callbackId:R}),f._callbackQueue.push(M),f._callbackIdMap[R]=M})},this.terminate=function(){f._worker.terminate()},_||(_=r(10)),this._callbackQueue=[],this._callbackIdMap={},this._worker=new _,this._worker.onerror=function(b){if(b.data){var y=b.data,S=y.callbackId,R=y.error;f._updateQueue({callbackId:S,error:R})}else console.error(b)},this._worker.onmessage=function(b){var y=b.data,S=y.callbackId,R=y.results;f._updateQueue({callbackId:S,results:R})},d&&this._worker.postMessage({method:"setCaseSensitive",caseSensitive:d}),h&&this._worker.postMessage({method:"setIndexMode",indexMode:h}),p&&this._worker.postMessage({method:"setMatchAnyToken",matchAnyToken:p}),m&&this._worker.postMessage({method:"setTokenizePattern",tokenizePattern:m})}return n(u,[{key:"_updateQueue",value:function(c){var d=c.callbackId,h=c.error,p=c.results,m=this._callbackIdMap[d];for(m.complete=!0,m.error=h,m.results=p;this._callbackQueue.length;){var _=this._callbackQueue[0];if(!_.complete)break;this._callbackQueue.shift(),delete this._callbackIdMap[_.callbackId],_.error?_.reject(_.error):_.resolve(_.results)}}}]),u}();e.default=o},function(t,e,r){for(var n=r(9),i=[],s={},l=0;l<256;l++)i[l]=(l+256).toString(16).substr(1),s[i[l]]=l;function a(b,y,S){var R=y&&S||0,M=0;for(y=y||[],b.toLowerCase().replace(/[0-9a-f]{2}/g,function(F){M<16&&(y[R+M++]=s[F])});M<16;)y[R+M++]=0;return y}function o(b,y){var S=y||0,R=i;return R[b[S++]]+R[b[S++]]+R[b[S++]]+R[b[S++]]+"-"+R[b[S++]]+R[b[S++]]+"-"+R[b[S++]]+R[b[S++]]+"-"+R[b[S++]]+R[b[S++]]+"-"+R[b[S++]]+R[b[S++]]+R[b[S++]]+R[b[S++]]+R[b[S++]]+R[b[S++]]}var u=n(),f=[u[0]|1,u[1],u[2],u[3],u[4],u[5]],c=(u[6]<<8|u[7])&16383,d=0,h=0;function p(b,y,S){var R=y&&S||0,M=y||[];b=b||{};var F=b.clockseq!==void 0?b.clockseq:c,L=b.msecs!==void 0?b.msecs:new Date().getTime(),V=b.nsecs!==void 0?b.nsecs:h+1,ue=L-d+(V-h)/1e4;if(ue<0&&b.clockseq===void 0&&(F=F+1&16383),(ue<0||L>d)&&b.nsecs===void 0&&(V=0),V>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=L,h=V,c=F,L+=122192928e5;var D=((L&268435455)*1e4+V)%4294967296;M[R++]=D>>>24&255,M[R++]=D>>>16&255,M[R++]=D>>>8&255,M[R++]=D&255;var G=L/4294967296*1e4&268435455;M[R++]=G>>>8&255,M[R++]=G&255,M[R++]=G>>>24&15|16,M[R++]=G>>>16&255,M[R++]=F>>>8|128,M[R++]=F&255;for(var k=b.node||f,Z=0;Z<6;Z++)M[R+Z]=k[Z];return y||o(M)}function m(b,y,S){var R=y&&S||0;typeof b=="string"&&(y=b=="binary"?new Array(16):null,b=null),b=b||{};var M=b.random||(b.rng||n)();if(M[6]=M[6]&15|64,M[8]=M[8]&63|128,y)for(var F=0;F<16;F++)y[R+F]=M[F];return y||o(M)}var _=m;_.v1=p,_.v4=m,_.parse=a,_.unparse=o,t.exports=_},function(t,e){(function(r){var n,i=r.crypto||r.msCrypto;if(i&&i.getRandomValues){var s=new Uint8Array(16);n=function(){return i.getRandomValues(s),s}}if(!n){var l=new Array(16);n=function(){for(var a=0,o;a<16;a++)(a&3)===0&&(o=Math.random()*4294967296),l[a]=o>>>((a&3)<<3)&255;return l}}t.exports=n}).call(e,function(){return this}())},function(t,e,r){t.exports=function(){return r(11)(`/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";

	var _util = __webpack_require__(1);

	/**
	 * Search entry point to web worker.
	 * Builds search index and performs searches on separate thread from the ui.
	 */

	var searchUtility = new _util.SearchUtility();

	self.addEventListener("message", function (event) {
	  var data = event.data;
	  var method = data.method;


	  switch (method) {
	    case "indexDocument":
	      var uid = data.uid,
	          text = data.text;


	      searchUtility.indexDocument(uid, text);
	      break;
	    case "search":
	      var callbackId = data.callbackId,
	          query = data.query;


	      var results = searchUtility.search(query);

	      self.postMessage({ callbackId: callbackId, results: results });
	      break;
	    case "setCaseSensitive":
	      var caseSensitive = data.caseSensitive;


	      searchUtility.setCaseSensitive(caseSensitive);
	      break;
	    case "setIndexMode":
	      var indexMode = data.indexMode;


	      searchUtility.setIndexMode(indexMode);
	      break;
	    case "setMatchAnyToken":
	      var matchAnyToken = data.matchAnyToken;


	      searchUtility.setMatchAnyToken(matchAnyToken);
	      break;
	    case "setTokenizePattern":
	      var tokenizePattern = data.tokenizePattern;


	      searchUtility.setTokenizePattern(tokenizePattern);
	      break;
	  }
	}, false);

/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";

	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	exports.SearchUtility = exports.INDEX_MODES = undefined;

	var _SearchUtility = __webpack_require__(2);

	var _SearchUtility2 = _interopRequireDefault(_SearchUtility);

	var _constants = __webpack_require__(3);

	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

	exports.default = _SearchUtility2.default;
	exports.INDEX_MODES = _constants.INDEX_MODES;
	exports.SearchUtility = _SearchUtility2.default;

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";

	Object.defineProperty(exports, "__esModule", {
	  value: true
	});

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	var _constants = __webpack_require__(3);

	var _SearchIndex = __webpack_require__(4);

	var _SearchIndex2 = _interopRequireDefault(_SearchIndex);

	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	/**
	 * Synchronous client-side full-text search utility.
	 * Forked from JS search (github.com/bvaughn/js-search).
	 */
	var SearchUtility = function () {

	  /**
	   * Constructor.
	   *
	   * @param indexMode See #setIndexMode
	   * @param tokenizePattern See #setTokenizePattern
	   * @param caseSensitive See #setCaseSensitive
	   * @param matchAnyToken See #setMatchAnyToken
	   */
	  function SearchUtility() {
	    var _this = this;

	    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
	        _ref$caseSensitive = _ref.caseSensitive,
	        caseSensitive = _ref$caseSensitive === undefined ? false : _ref$caseSensitive,
	        _ref$indexMode = _ref.indexMode,
	        indexMode = _ref$indexMode === undefined ? _constants.INDEX_MODES.ALL_SUBSTRINGS : _ref$indexMode,
	        _ref$matchAnyToken = _ref.matchAnyToken,
	        matchAnyToken = _ref$matchAnyToken === undefined ? false : _ref$matchAnyToken,
	        _ref$tokenizePattern = _ref.tokenizePattern,
	        tokenizePattern = _ref$tokenizePattern === undefined ? /\\s+/ : _ref$tokenizePattern;

	    _classCallCheck(this, SearchUtility);

	    this.indexDocument = function (uid, text) {
	      _this._uids[uid] = true;

	      var fieldTokens = _this._tokenize(_this._sanitize(text));

	      fieldTokens.forEach(function (fieldToken) {
	        var expandedTokens = _this._expandToken(fieldToken);

	        expandedTokens.forEach(function (expandedToken) {
	          _this._searchIndex.indexDocument(expandedToken, uid);
	        });
	      });

	      return _this;
	    };

	    this.search = function (query) {
	      if (!query) {
	        return Object.keys(_this._uids);
	      } else {
	        var tokens = _this._tokenize(_this._sanitize(query));

	        return _this._searchIndex.search(tokens, _this._matchAnyToken);
	      }
	    };

	    this.terminate = function () {};

	    this._caseSensitive = caseSensitive;
	    this._indexMode = indexMode;
	    this._matchAnyToken = matchAnyToken;
	    this._tokenizePattern = tokenizePattern;

	    this._searchIndex = new _SearchIndex2.default();
	    this._uids = {};
	  }

	  /**
	   * Returns a constant representing the current case-sensitive bit.
	   */


	  _createClass(SearchUtility, [{
	    key: "getCaseSensitive",
	    value: function getCaseSensitive() {
	      return this._caseSensitive;
	    }

	    /**
	     * Returns a constant representing the current index mode.
	     */

	  }, {
	    key: "getIndexMode",
	    value: function getIndexMode() {
	      return this._indexMode;
	    }

	    /**
	     * Returns a constant representing the current match-any-token bit.
	     */

	  }, {
	    key: "getMatchAnyToken",
	    value: function getMatchAnyToken() {
	      return this._matchAnyToken;
	    }

	    /**
	     * Returns a constant representing the current tokenize pattern.
	     */

	  }, {
	    key: "getTokenizePattern",
	    value: function getTokenizePattern() {
	      return this._tokenizePattern;
	    }

	    /**
	     * Adds or updates a uid in the search index and associates it with the specified text.
	     * Note that at this time uids can only be added or updated in the index, not removed.
	     *
	     * @param uid Uniquely identifies a searchable object
	     * @param text Text to associate with uid
	     */


	    /**
	     * Searches the current index for the specified query text.
	     * Only uids matching all of the words within the text will be accepted,
	     * unless matchAny is set to true.
	     * If an empty query string is provided all indexed uids will be returned.
	     *
	     * Document searches are case-insensitive by default (e.g. "search" will match "Search").
	     * Document searches use substring matching by default (e.g. "na" and "me" will both match "name").
	     *
	     * @param query Searchable query text
	     * @return Array of uids
	     */

	  }, {
	    key: "setCaseSensitive",


	    /**
	     * Sets a new case-sensitive bit
	     */
	    value: function setCaseSensitive(caseSensitive) {
	      this._caseSensitive = caseSensitive;
	    }

	    /**
	     * Sets a new index mode.
	     * See util/constants/INDEX_MODES
	     */

	  }, {
	    key: "setIndexMode",
	    value: function setIndexMode(indexMode) {
	      if (Object.keys(this._uids).length > 0) {
	        throw Error("indexMode cannot be changed once documents have been indexed");
	      }

	      this._indexMode = indexMode;
	    }

	    /**
	     * Sets a new match-any-token bit
	     */

	  }, {
	    key: "setMatchAnyToken",
	    value: function setMatchAnyToken(matchAnyToken) {
	      this._matchAnyToken = matchAnyToken;
	    }

	    /**
	     * Sets a new tokenize pattern (regular expression)
	     */

	  }, {
	    key: "setTokenizePattern",
	    value: function setTokenizePattern(pattern) {
	      this._tokenizePattern = pattern;
	    }

	    /**
	     *  Added to make class adhere to interface. Add cleanup code as needed.
	     */

	  }, {
	    key: "_expandToken",


	    /**
	     * Index strategy based on 'all-substrings-index-strategy.ts' in github.com/bvaughn/js-search/
	     *
	     * @private
	     */
	    value: function _expandToken(token) {
	      switch (this._indexMode) {
	        case _constants.INDEX_MODES.EXACT_WORDS:
	          return [token];
	        case _constants.INDEX_MODES.PREFIXES:
	          return this._expandPrefixTokens(token);
	        case _constants.INDEX_MODES.ALL_SUBSTRINGS:
	        default:
	          return this._expandAllSubstringTokens(token);
	      }
	    }
	  }, {
	    key: "_expandAllSubstringTokens",
	    value: function _expandAllSubstringTokens(token) {
	      var expandedTokens = [];

	      // String.prototype.charAt() may return surrogate halves instead of whole characters.
	      // When this happens in the context of a web-worker it can cause Chrome to crash.
	      // Catching the error is a simple solution for now; in the future I may try to better support non-BMP characters.
	      // Resources:
	      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charAt
	      // https://mathiasbynens.be/notes/javascript-unicode
	      try {
	        for (var i = 0, length = token.length; i < length; ++i) {
	          var substring = "";

	          for (var j = i; j < length; ++j) {
	            substring += token.charAt(j);
	            expandedTokens.push(substring);
	          }
	        }
	      } catch (error) {
	        console.error("Unable to parse token \\"" + token + "\\" " + error);
	      }

	      return expandedTokens;
	    }
	  }, {
	    key: "_expandPrefixTokens",
	    value: function _expandPrefixTokens(token) {
	      var expandedTokens = [];

	      // String.prototype.charAt() may return surrogate halves instead of whole characters.
	      // When this happens in the context of a web-worker it can cause Chrome to crash.
	      // Catching the error is a simple solution for now; in the future I may try to better support non-BMP characters.
	      // Resources:
	      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charAt
	      // https://mathiasbynens.be/notes/javascript-unicode
	      try {
	        for (var i = 0, length = token.length; i < length; ++i) {
	          expandedTokens.push(token.substr(0, i + 1));
	        }
	      } catch (error) {
	        console.error("Unable to parse token \\"" + token + "\\" " + error);
	      }

	      return expandedTokens;
	    }

	    /**
	     * @private
	     */

	  }, {
	    key: "_sanitize",
	    value: function _sanitize(string) {
	      return this._caseSensitive ? string.trim() : string.trim().toLocaleLowerCase();
	    }

	    /**
	     * @private
	     */

	  }, {
	    key: "_tokenize",
	    value: function _tokenize(text) {
	      return text.split(this._tokenizePattern).filter(function (text) {
	        return text;
	      }); // Remove empty tokens
	    }
	  }]);

	  return SearchUtility;
	}();

	exports.default = SearchUtility;

/***/ },
/* 3 */
/***/ function(module, exports) {

	"use strict";

	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	var INDEX_MODES = exports.INDEX_MODES = {
	  // Indexes for all substring searches (e.g. the term "cat" is indexed as "c", "ca", "cat", "a", "at", and "t").
	  // Based on 'all-substrings-index-strategy' from js-search;
	  // github.com/bvaughn/js-search/blob/master/source/index-strategy/all-substrings-index-strategy.ts
	  ALL_SUBSTRINGS: "ALL_SUBSTRINGS",

	  // Indexes for exact word matches only.
	  // Based on 'exact-word-index-strategy' from js-search;
	  // github.com/bvaughn/js-search/blob/master/source/index-strategy/exact-word-index-strategy.ts
	  EXACT_WORDS: "EXACT_WORDS",

	  // Indexes for prefix searches (e.g. the term "cat" is indexed as "c", "ca", and "cat" allowing prefix search lookups).
	  // Based on 'prefix-index-strategy' from js-search;
	  // github.com/bvaughn/js-search/blob/master/source/index-strategy/prefix-index-strategy.ts
	  PREFIXES: "PREFIXES"
	};

/***/ },
/* 4 */
/***/ function(module, exports) {

	"use strict";

	Object.defineProperty(exports, "__esModule", {
	  value: true
	});

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	/**
	 * Maps search tokens to uids using a trie structure.
	 */
	var SearchIndex = function () {
	  function SearchIndex() {
	    _classCallCheck(this, SearchIndex);

	    this.tokenToUidMap = {};
	  }

	  /**
	   * Maps the specified token to a uid.
	   *
	   * @param token Searchable token (e.g. "road")
	   * @param uid Identifies a document within the searchable corpus
	   */


	  _createClass(SearchIndex, [{
	    key: "indexDocument",
	    value: function indexDocument(token, uid) {
	      if (!this.tokenToUidMap[token]) {
	        this.tokenToUidMap[token] = {};
	      }

	      this.tokenToUidMap[token][uid] = uid;
	    }

	    /**
	     * Finds uids that have been mapped to the set of tokens specified.
	     * Only uids that have been mapped to all tokens will be returned.
	     *
	     * @param tokens Array of searchable tokens (e.g. ["long", "road"])
	     * @param matchAnyToken Whether to match any token. Default is false.
	     * @return Array of uids that have been associated with the set of search tokens
	     */

	  }, {
	    key: "search",
	    value: function search(tokens, matchAnyToken) {
	      var _this = this;

	      var uidMap = {};
	      var uidMatches = {};
	      var initialized = false;

	      tokens.forEach(function (token) {
	        var currentUidMap = _this.tokenToUidMap[token] || {};

	        if (!initialized) {
	          initialized = true;

	          for (var _uid in currentUidMap) {
	            uidMap[_uid] = currentUidMap[_uid];
	            uidMatches[_uid] = 1;
	          }
	        } else {
	          // Delete existing matches if using and AND query (the default)
	          // Otherwise add new results to the matches
	          if (!matchAnyToken) {
	            for (var _uid2 in uidMap) {
	              if (!currentUidMap[_uid2]) {
	                delete uidMap[_uid2];
	              }
	            }
	          } else {
	            for (var _uid3 in currentUidMap) {
	              uidMap[_uid3] = currentUidMap[_uid3];
	              uidMatches[_uid3] = (uidMatches[_uid3] || 0) + 1;
	            }
	          }
	        }
	      });

	      var uids = [];
	      for (var _uid4 in uidMap) {
	        uids.push(uidMap[_uid4]);
	      }

	      // Sort according to most matches, if match any token is set.
	      if (matchAnyToken) {
	        uids.sort(function (a, b) {
	          return uidMatches[b] - uidMatches[a];
	        });
	      }

	      return uids;
	    }
	  }]);

	  return SearchIndex;
	}();

	exports.default = SearchIndex;

/***/ }
/******/ ]);`,r.p+"5cafaba60d6eb1f43c8f.worker.js")}},function(t,e){var r=window.URL||window.webkitURL;t.exports=function(n,i){try{try{var s;try{var l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;s=new l,s.append(n),s=s.getBlob()}catch{s=new Blob([n])}return new Worker(r.createObjectURL(s))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(n))}}catch{if(!i)throw Error("Inline worker is not supported");return new Worker(i)}}}])});var _a=qr((ma,Lr)=>{(function(t){typeof ma=="object"&&typeof Lr<"u"?Lr.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=t()})(function(){return function t(e,r,n){function i(a,o){if(!r[a]){if(!e[a]){var u=typeof Rt=="function"&&Rt;if(!o&&u)return u(a,!0);if(s)return s(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(d){var h=e[a][1][d];return i(h||d)},c,c.exports,t,e,r,n)}return r[a].exports}for(var s=typeof Rt=="function"&&Rt,l=0;l<n.length;l++)i(n[l]);return i}({1:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(l){for(var a,o,u,f,c,d,h,p=[],m=0,_=l.length,b=_,y=n.getTypeOf(l)!=="string";m<l.length;)b=_-m,u=y?(a=l[m++],o=m<_?l[m++]:0,m<_?l[m++]:0):(a=l.charCodeAt(m++),o=m<_?l.charCodeAt(m++):0,m<_?l.charCodeAt(m++):0),f=a>>2,c=(3&a)<<4|o>>4,d=1<b?(15&o)<<2|u>>6:64,h=2<b?63&u:64,p.push(s.charAt(f)+s.charAt(c)+s.charAt(d)+s.charAt(h));return p.join("")},r.decode=function(l){var a,o,u,f,c,d,h=0,p=0,m="data:";if(l.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var _,b=3*(l=l.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&b--,l.charAt(l.length-2)===s.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=i.uint8array?new Uint8Array(0|b):new Array(0|b);h<l.length;)a=s.indexOf(l.charAt(h++))<<2|(f=s.indexOf(l.charAt(h++)))>>4,o=(15&f)<<4|(c=s.indexOf(l.charAt(h++)))>>2,u=(3&c)<<6|(d=s.indexOf(l.charAt(h++))),_[p++]=a,c!==64&&(_[p++]=o),d!==64&&(_[p++]=u);return _}},{"./support":30,"./utils":32}],2:[function(t,e,r){"use strict";var n=t("./external"),i=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function a(o,u,f,c,d){this.compressedSize=o,this.uncompressedSize=u,this.crc32=f,this.compression=c,this.compressedContent=d}a.prototype={getContentWorker:function(){var o=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),u=this;return o.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),o},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(o,u,f){return o.pipe(new s).pipe(new l("uncompressedSize")).pipe(u.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",u)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){"use strict";var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(i){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,r){"use strict";var n=t("./utils"),i=function(){for(var s,l=[],a=0;a<256;a++){s=a;for(var o=0;o<8;o++)s=1&s?3988292384^s>>>1:s>>>1;l[a]=s}return l}();e.exports=function(s,l){return s!==void 0&&s.length?n.getTypeOf(s)!=="string"?function(a,o,u,f){var c=i,d=f+u;a^=-1;for(var h=f;h<d;h++)a=a>>>8^c[255&(a^o[h])];return-1^a}(0|l,s,s.length,0):function(a,o,u,f){var c=i,d=f+u;a^=-1;for(var h=f;h<d;h++)a=a>>>8^c[255&(a^o.charCodeAt(h))];return-1^a}(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){"use strict";var n=null;n=typeof Promise<"u"?Promise:t("lie"),e.exports={Promise:n}},{lie:37}],7:[function(t,e,r){"use strict";var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=t("pako"),s=t("./utils"),l=t("./stream/GenericWorker"),a=n?"uint8array":"array";function o(u,f){l.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=f,this.meta={}}r.magic="\b\0",s.inherits(o,l),o.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(a,u.data),!1)},o.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},o.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},o.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(f){u.push({data:f,meta:u.meta})}},r.compressWorker=function(u){return new o("Deflate",u)},r.uncompressWorker=function(){return new o("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,r){"use strict";function n(c,d){var h,p="";for(h=0;h<d;h++)p+=String.fromCharCode(255&c),c>>>=8;return p}function i(c,d,h,p,m,_){var b,y,S=c.file,R=c.compression,M=_!==a.utf8encode,F=s.transformTo("string",_(S.name)),L=s.transformTo("string",a.utf8encode(S.name)),V=S.comment,ue=s.transformTo("string",_(V)),D=s.transformTo("string",a.utf8encode(V)),G=L.length!==S.name.length,k=D.length!==V.length,Z="",_e="",Y="",be=S.dir,U=S.date,K={crc32:0,compressedSize:0,uncompressedSize:0};d&&!h||(K.crc32=c.crc32,K.compressedSize=c.compressedSize,K.uncompressedSize=c.uncompressedSize);var N=0;d&&(N|=8),M||!G&&!k||(N|=2048);var j=0,me=0;be&&(j|=16),m==="UNIX"?(me=798,j|=function(he,Be){var je=he;return he||(je=Be?16893:33204),(65535&je)<<16}(S.unixPermissions,be)):(me=20,j|=function(he){return 63&(he||0)}(S.dosPermissions)),b=U.getUTCHours(),b<<=6,b|=U.getUTCMinutes(),b<<=5,b|=U.getUTCSeconds()/2,y=U.getUTCFullYear()-1980,y<<=4,y|=U.getUTCMonth()+1,y<<=5,y|=U.getUTCDate(),G&&(_e=n(1,1)+n(o(F),4)+L,Z+="up"+n(_e.length,2)+_e),k&&(Y=n(1,1)+n(o(ue),4)+D,Z+="uc"+n(Y.length,2)+Y);var de="";return de+=`
\0`,de+=n(N,2),de+=R.magic,de+=n(b,2),de+=n(y,2),de+=n(K.crc32,4),de+=n(K.compressedSize,4),de+=n(K.uncompressedSize,4),de+=n(F.length,2),de+=n(Z.length,2),{fileRecord:u.LOCAL_FILE_HEADER+de+F+Z,dirRecord:u.CENTRAL_FILE_HEADER+n(me,2)+de+n(ue.length,2)+"\0\0\0\0"+n(j,4)+n(p,4)+F+Z+ue}}var s=t("../utils"),l=t("../stream/GenericWorker"),a=t("../utf8"),o=t("../crc32"),u=t("../signature");function f(c,d,h,p){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=d,this.zipPlatform=h,this.encodeFileName=p,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(f,l),f.prototype.push=function(c){var d=c.meta.percent||0,h=this.entriesCount,p=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,l.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:h?(d+100*(h-p-1))/h:100}}))},f.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var d=this.streamFiles&&!c.file.dir;if(d){var h=i(c,d,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(c){this.accumulate=!1;var d=this.streamFiles&&!c.file.dir,h=i(c,d,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),d)this.push({data:function(p){return u.DATA_DESCRIPTOR+n(p.crc32,4)+n(p.compressedSize,4)+n(p.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var c=this.bytesWritten,d=0;d<this.dirRecords.length;d++)this.push({data:this.dirRecords[d],meta:{percent:100}});var h=this.bytesWritten-c,p=function(m,_,b,y,S){var R=s.transformTo("string",S(y));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(m,2)+n(m,2)+n(_,4)+n(b,4)+n(R.length,2)+R}(this.dirRecords.length,h,c,this.zipComment,this.encodeFileName);this.push({data:p,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(c){this._sources.push(c);var d=this;return c.on("data",function(h){d.processChunk(h)}),c.on("end",function(){d.closedSource(d.previous.streamInfo),d._sources.length?d.prepareNextSource():d.end()}),c.on("error",function(h){d.error(h)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(c){var d=this._sources;if(!l.prototype.error.call(this,c))return!1;for(var h=0;h<d.length;h++)try{d[h].error(c)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var c=this._sources,d=0;d<c.length;d++)c[d].lock()},e.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){"use strict";var n=t("../compressions"),i=t("./ZipFileWorker");r.generateWorker=function(s,l,a){var o=new i(l.streamFiles,a,l.platform,l.encodeFileName),u=0;try{s.forEach(function(f,c){u++;var d=function(_,b){var y=_||b,S=n[y];if(!S)throw new Error(y+" is not a valid compression method !");return S}(c.options.compression,l.compression),h=c.options.compressionOptions||l.compressionOptions||{},p=c.dir,m=c.date;c._compressWorker(d,h).withStreamInfo("file",{name:f,dir:p,date:m,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(o)}),o.entriesCount=u}catch(f){o.error(f)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new n;for(var s in this)typeof this[s]!="function"&&(i[s]=this[s]);return i}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.0",n.loadAsync=function(i,s){return new n().loadAsync(i,s)},n.external=t("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./external"),s=t("./utf8"),l=t("./zipEntries"),a=t("./stream/Crc32Probe"),o=t("./nodejsUtils");function u(f){return new i.Promise(function(c,d){var h=f.decompressed.getContentWorker().pipe(new a);h.on("error",function(p){d(p)}).on("end",function(){h.streamInfo.crc32!==f.decompressed.crc32?d(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}e.exports=function(f,c){var d=this;return c=n.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),o.isNode&&o.isStream(f)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",f,!0,c.optimizedBinaryString,c.base64).then(function(h){var p=new l(c);return p.load(h),p}).then(function(h){var p=[i.Promise.resolve(h)],m=h.files;if(c.checkCRC32)for(var _=0;_<m.length;_++)p.push(u(m[_]));return i.Promise.all(p)}).then(function(h){for(var p=h.shift(),m=p.files,_=0;_<m.length;_++){var b=m[_],y=b.fileNameStr,S=n.resolve(b.fileNameStr);d.file(S,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:c.createFolders}),b.dir||(d.file(S).unsafeOriginalName=y)}return p.zipComment.length&&(d.comment=p.zipComment),d})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../stream/GenericWorker");function s(l,a){i.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(a)}n.inherits(s,i),s.prototype._bindStream=function(l){var a=this;(this._stream=l).pause(),l.on("data",function(o){a.push({data:o,meta:{percent:0}})}).on("error",function(o){a.isPaused?this.generatedError=o:a.error(o)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,r){"use strict";var n=t("readable-stream").Readable;function i(s,l,a){n.call(this,l),this._helper=s;var o=this;s.on("data",function(u,f){o.push(u)||o._helper.pause(),a&&a(f)}).on("error",function(u){o.emit("error",u)}).on("end",function(){o.push(null)})}t("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,e,r){"use strict";e.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,i);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,i)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var i=new Buffer(n);return i.fill(0),i},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,e,r){"use strict";function n(S,R,M){var F,L=s.getTypeOf(R),V=s.extend(M||{},o);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(S=m(S)),V.createFolders&&(F=p(S))&&_.call(this,F,!0);var ue=L==="string"&&V.binary===!1&&V.base64===!1;M&&M.binary!==void 0||(V.binary=!ue),(R instanceof u&&R.uncompressedSize===0||V.dir||!R||R.length===0)&&(V.base64=!1,V.binary=!0,R="",V.compression="STORE",L="string");var D=null;D=R instanceof u||R instanceof l?R:d.isNode&&d.isStream(R)?new h(S,R):s.prepareContent(S,R,V.binary,V.optimizedBinaryString,V.base64);var G=new f(S,D,V);this.files[S]=G}var i=t("./utf8"),s=t("./utils"),l=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),o=t("./defaults"),u=t("./compressedObject"),f=t("./zipObject"),c=t("./generate"),d=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),p=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var R=S.lastIndexOf("/");return 0<R?S.substring(0,R):""},m=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},_=function(S,R){return R=R!==void 0?R:o.createFolders,S=m(S),this.files[S]||n.call(this,S,null,{dir:!0,createFolders:R}),this.files[S]};function b(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var R,M,F;for(R in this.files)F=this.files[R],(M=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&S(M,F)},filter:function(S){var R=[];return this.forEach(function(M,F){S(M,F)&&R.push(F)}),R},file:function(S,R,M){if(arguments.length!==1)return S=this.root+S,n.call(this,S,R,M),this;if(b(S)){var F=S;return this.filter(function(V,ue){return!ue.dir&&F.test(V)})}var L=this.files[this.root+S];return L&&!L.dir?L:null},folder:function(S){if(!S)return this;if(b(S))return this.filter(function(L,V){return V.dir&&S.test(L)});var R=this.root+S,M=_.call(this,R),F=this.clone();return F.root=M.name,F},remove:function(S){S=this.root+S;var R=this.files[S];if(R||(S.slice(-1)!=="/"&&(S+="/"),R=this.files[S]),R&&!R.dir)delete this.files[S];else for(var M=this.filter(function(L,V){return V.name.slice(0,S.length)===S}),F=0;F<M.length;F++)delete this.files[M[F].name];return this},generate:function(S){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var R,M={};try{if((M=s.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");s.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var F=M.comment||this.comment||"";R=c.generateWorker(this,M,F)}catch(L){(R=new l("error")).error(L)}return new a(R,M.type||"string",M.mimeType)},generateAsync:function(S,R){return this.generateInternalStream(S).accumulate(R)},generateNodeStream:function(S,R){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(R)}};e.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,r){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,r){"use strict";var n=t("./DataReader");function i(s){n.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}t("../utils").inherits(i,n),i.prototype.byteAt=function(s){return this.data[this.zero+s]},i.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),a=s.charCodeAt(1),o=s.charCodeAt(2),u=s.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===a&&this.data[f+2]===o&&this.data[f+3]===u)return f-this.zero;return-1},i.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),a=s.charCodeAt(1),o=s.charCodeAt(2),u=s.charCodeAt(3),f=this.readData(4);return l===f[0]&&a===f[1]&&o===f[2]&&u===f[3]},i.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,e,r){"use strict";var n=t("../utils");function i(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(s){},readInt:function(s){var l,a=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)a=(a<<8)+this.byteAt(l);return this.index+=s,a},readString:function(s){return n.transformTo("string",this.readData(s))},readData:function(s){},lastIndexOfSignature:function(s){},readAndCheckSignature:function(s){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},e.exports=i},{"../utils":32}],19:[function(t,e,r){"use strict";var n=t("./Uint8ArrayReader");function i(s){n.call(this,s)}t("../utils").inherits(i,n),i.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,r){"use strict";var n=t("./DataReader");function i(s){n.call(this,s)}t("../utils").inherits(i,n),i.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},i.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},i.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},i.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,e,r){"use strict";var n=t("./ArrayReader");function i(s){n.call(this,s)}t("../utils").inherits(i,n),i.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../support"),s=t("./ArrayReader"),l=t("./StringReader"),a=t("./NodeBufferReader"),o=t("./Uint8ArrayReader");e.exports=function(u){var f=n.getTypeOf(u);return n.checkSupport(f),f!=="string"||i.uint8array?f==="nodebuffer"?new a(u):i.uint8array?new o(n.transformTo("uint8array",u)):new s(n.transformTo("array",u)):new l(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,e,r){"use strict";var n=t("./GenericWorker"),i=t("../utils");function s(l){n.call(this,"ConvertWorker to "+l),this.destType=l}i.inherits(s,n),s.prototype.processChunk=function(l){this.push({data:i.transformTo(this.destType,l.data),meta:l.meta})},e.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,r){"use strict";var n=t("./GenericWorker"),i=t("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,n),s.prototype.processChunk=function(l){this.streamInfo.crc32=i(l.data,this.streamInfo.crc32||0),this.push(l)},e.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./GenericWorker");function s(l){i.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}n.inherits(s,i),s.prototype.processChunk=function(l){if(l){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+l.data.length}i.prototype.processChunk.call(this,l)},e.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./GenericWorker");function s(l){i.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(o){a.dataIsReady=!0,a.data=o,a.max=o&&o.length||0,a.type=n.getTypeOf(o),a.isPaused||a._tickAndRepeat()},function(o){a.error(o)})}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,a);break;case"uint8array":l=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":l=this.data.slice(this.index,a)}return this.index=a,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,r){"use strict";function n(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,s){return this._listeners[i].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,s){if(this._listeners[i])for(var l=0;l<this._listeners[i].length;l++)this._listeners[i][l].call(this,s)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var s=this;return i.on("data",function(l){s.processChunk(l)}),i.on("end",function(){s.end()}),i.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,s){return this.extraStreamInfo[i]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},e.exports=n},{}],29:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./ConvertWorker"),s=t("./GenericWorker"),l=t("../base64"),a=t("../support"),o=t("../external"),u=null;if(a.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(d,h){return new o.Promise(function(p,m){var _=[],b=d._internalType,y=d._outputType,S=d._mimeType;d.on("data",function(R,M){_.push(R),h&&h(M)}).on("error",function(R){_=[],m(R)}).on("end",function(){try{var R=function(M,F,L){switch(M){case"blob":return n.newBlob(n.transformTo("arraybuffer",F),L);case"base64":return l.encode(F);default:return n.transformTo(M,F)}}(y,function(M,F){var L,V=0,ue=null,D=0;for(L=0;L<F.length;L++)D+=F[L].length;switch(M){case"string":return F.join("");case"array":return Array.prototype.concat.apply([],F);case"uint8array":for(ue=new Uint8Array(D),L=0;L<F.length;L++)ue.set(F[L],V),V+=F[L].length;return ue;case"nodebuffer":return Buffer.concat(F);default:throw new Error("concat : unsupported type '"+M+"'")}}(b,_),S);p(R)}catch(M){m(M)}_=[]}).resume()})}function c(d,h,p){var m=h;switch(h){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=h,this._mimeType=p,n.checkSupport(m),this._worker=d.pipe(new i(m)),d.lock()}catch(_){this._worker=new s("error"),this._worker.error(_)}}c.prototype={accumulate:function(d){return f(this,d)},on:function(d,h){var p=this;return d==="data"?this._worker.on(d,function(m){h.call(p,m.data,m.meta)}):this._worker.on(d,function(){n.delay(h,arguments,p)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(d){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},d)}},e.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=i.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,r){"use strict";for(var n=t("./utils"),i=t("./support"),s=t("./nodejsUtils"),l=t("./stream/GenericWorker"),a=new Array(256),o=0;o<256;o++)a[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;a[254]=a[254]=1;function u(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}r.utf8encode=function(c){return i.nodebuffer?s.newBufferFrom(c,"utf-8"):function(d){var h,p,m,_,b,y=d.length,S=0;for(_=0;_<y;_++)(64512&(p=d.charCodeAt(_)))==55296&&_+1<y&&(64512&(m=d.charCodeAt(_+1)))==56320&&(p=65536+(p-55296<<10)+(m-56320),_++),S+=p<128?1:p<2048?2:p<65536?3:4;for(h=i.uint8array?new Uint8Array(S):new Array(S),_=b=0;b<S;_++)(64512&(p=d.charCodeAt(_)))==55296&&_+1<y&&(64512&(m=d.charCodeAt(_+1)))==56320&&(p=65536+(p-55296<<10)+(m-56320),_++),p<128?h[b++]=p:(p<2048?h[b++]=192|p>>>6:(p<65536?h[b++]=224|p>>>12:(h[b++]=240|p>>>18,h[b++]=128|p>>>12&63),h[b++]=128|p>>>6&63),h[b++]=128|63&p);return h}(c)},r.utf8decode=function(c){return i.nodebuffer?n.transformTo("nodebuffer",c).toString("utf-8"):function(d){var h,p,m,_,b=d.length,y=new Array(2*b);for(h=p=0;h<b;)if((m=d[h++])<128)y[p++]=m;else if(4<(_=a[m]))y[p++]=65533,h+=_-1;else{for(m&=_===2?31:_===3?15:7;1<_&&h<b;)m=m<<6|63&d[h++],_--;1<_?y[p++]=65533:m<65536?y[p++]=m:(m-=65536,y[p++]=55296|m>>10&1023,y[p++]=56320|1023&m)}return y.length!==p&&(y.subarray?y=y.subarray(0,p):y.length=p),n.applyFromCharCode(y)}(c=n.transformTo(i.uint8array?"uint8array":"array",c))},n.inherits(u,l),u.prototype.processChunk=function(c){var d=n.transformTo(i.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var h=d;(d=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),d.set(h,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var p=function(_,b){var y;for((b=b||_.length)>_.length&&(b=_.length),y=b-1;0<=y&&(192&_[y])==128;)y--;return y<0||y===0?b:y+a[_[y]]>b?y:b}(d),m=d;p!==d.length&&(i.uint8array?(m=d.subarray(0,p),this.leftOver=d.subarray(p,d.length)):(m=d.slice(0,p),this.leftOver=d.slice(p,d.length))),this.push({data:r.utf8decode(m),meta:c.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=u,n.inherits(f,l),f.prototype.processChunk=function(c){this.push({data:r.utf8encode(c.data),meta:c.meta})},r.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){"use strict";var n=t("./support"),i=t("./base64"),s=t("./nodejsUtils"),l=t("./external");function a(h){return h}function o(h,p){for(var m=0;m<h.length;++m)p[m]=255&h.charCodeAt(m);return p}t("setimmediate"),r.newBlob=function(h,p){r.checkSupport("blob");try{return new Blob([h],{type:p})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(h),m.getBlob(p)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(h,p,m){var _=[],b=0,y=h.length;if(y<=m)return String.fromCharCode.apply(null,h);for(;b<y;)p==="array"||p==="nodebuffer"?_.push(String.fromCharCode.apply(null,h.slice(b,Math.min(b+m,y)))):_.push(String.fromCharCode.apply(null,h.subarray(b,Math.min(b+m,y)))),b+=m;return _.join("")},stringifyByChar:function(h){for(var p="",m=0;m<h.length;m++)p+=String.fromCharCode(h[m]);return p},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function f(h){var p=65536,m=r.getTypeOf(h),_=!0;if(m==="uint8array"?_=u.applyCanBeUsed.uint8array:m==="nodebuffer"&&(_=u.applyCanBeUsed.nodebuffer),_)for(;1<p;)try{return u.stringifyByChunk(h,m,p)}catch{p=Math.floor(p/2)}return u.stringifyByChar(h)}function c(h,p){for(var m=0;m<h.length;m++)p[m]=h[m];return p}r.applyFromCharCode=f;var d={};d.string={string:a,array:function(h){return o(h,new Array(h.length))},arraybuffer:function(h){return d.string.uint8array(h).buffer},uint8array:function(h){return o(h,new Uint8Array(h.length))},nodebuffer:function(h){return o(h,s.allocBuffer(h.length))}},d.array={string:f,array:a,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return s.newBufferFrom(h)}},d.arraybuffer={string:function(h){return f(new Uint8Array(h))},array:function(h){return c(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:a,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return s.newBufferFrom(new Uint8Array(h))}},d.uint8array={string:f,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:a,nodebuffer:function(h){return s.newBufferFrom(h)}},d.nodebuffer={string:f,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return d.nodebuffer.uint8array(h).buffer},uint8array:function(h){return c(h,new Uint8Array(h.length))},nodebuffer:a},r.transformTo=function(h,p){if(p=p||"",!h)return p;r.checkSupport(h);var m=r.getTypeOf(p);return d[m][h](p)},r.resolve=function(h){for(var p=h.split("/"),m=[],_=0;_<p.length;_++){var b=p[_];b==="."||b===""&&_!==0&&_!==p.length-1||(b===".."?m.pop():m.push(b))}return m.join("/")},r.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":n.nodebuffer&&s.isBuffer(h)?"nodebuffer":n.uint8array&&h instanceof Uint8Array?"uint8array":n.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(h){if(!n[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(h){var p,m,_="";for(m=0;m<(h||"").length;m++)_+="\\x"+((p=h.charCodeAt(m))<16?"0":"")+p.toString(16).toUpperCase();return _},r.delay=function(h,p,m){setImmediate(function(){h.apply(m||null,p||[])})},r.inherits=function(h,p){function m(){}m.prototype=p.prototype,h.prototype=new m},r.extend=function(){var h,p,m={};for(h=0;h<arguments.length;h++)for(p in arguments[h])arguments[h].hasOwnProperty(p)&&m[p]===void 0&&(m[p]=arguments[h][p]);return m},r.prepareContent=function(h,p,m,_,b){return l.Promise.resolve(p).then(function(y){return n.blob&&(y instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(y))!==-1)&&typeof FileReader<"u"?new l.Promise(function(S,R){var M=new FileReader;M.onload=function(F){S(F.target.result)},M.onerror=function(F){R(F.target.error)},M.readAsArrayBuffer(y)}):y}).then(function(y){var S=r.getTypeOf(y);return S?(S==="arraybuffer"?y=r.transformTo("uint8array",y):S==="string"&&(b?y=i.decode(y):m&&_!==!0&&(y=function(R){return o(R,n.uint8array?new Uint8Array(R.length):new Array(R.length))}(y))),y):l.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),i=t("./utils"),s=t("./signature"),l=t("./zipEntry"),a=(t("./utf8"),t("./support"));function o(u){this.files=[],this.loadOptions=u}o.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(f)+", expected "+i.pretty(u)+")")}},isSignature:function(u,f){var c=this.reader.index;this.reader.setIndex(u);var d=this.reader.readString(4)===f;return this.reader.setIndex(c),d},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),f=a.uint8array?"uint8array":"array",c=i.transformTo(f,u);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,f,c,d=this.zip64EndOfCentralSize-44;0<d;)u=this.reader.readInt(2),f=this.reader.readInt(4),c=this.reader.readData(f),this.zip64ExtensibleData[u]={id:u,length:f,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,f;for(u=0;u<this.files.length;u++)f=this.files[u],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(u=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var f=u;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var d=f-c;if(0<d)this.isSignature(f,s.CENTRAL_FILE_HEADER)||(this.reader.zero=d);else if(d<0)throw new Error("Corrupted zip: missing "+Math.abs(d)+" bytes.")},prepareReader:function(u){this.reader=n(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=o},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),i=t("./utils"),s=t("./compressedObject"),l=t("./crc32"),a=t("./utf8"),o=t("./compressions"),u=t("./support");function f(c,d){this.options=c,this.loadOptions=d}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var d,h;if(c.skip(22),this.fileNameLength=c.readInt(2),h=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((d=function(p){for(var m in o)if(o.hasOwnProperty(m)&&o[m].magic===p)return o[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,d,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var d=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(d),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(c){if(this.extraFields[1]){var d=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(c){var d,h,p,m=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<m;)d=c.readInt(2),h=c.readInt(2),p=c.readData(h),this.extraFields[d]={id:d,length:h,value:p};c.setIndex(m)},handleUTF8:function(){var c=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(d!==null)this.fileNameStr=d;else{var h=i.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var p=this.findExtraFieldUnicodeComment();if(p!==null)this.fileCommentStr=p;else{var m=i.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var d=n(c.value);return d.readInt(1)!==1||l(this.fileName)!==d.readInt(4)?null:a.utf8decode(d.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var d=n(c.value);return d.readInt(1)!==1||l(this.fileComment)!==d.readInt(4)?null:a.utf8decode(d.readData(c.length-5))}return null}},e.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,r){"use strict";function n(d,h,p){this.name=d,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=h,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}}var i=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),l=t("./utf8"),a=t("./compressedObject"),o=t("./stream/GenericWorker");n.prototype={internalStream:function(d){var h=null,p="string";try{if(!d)throw new Error("No output type specified.");var m=(p=d.toLowerCase())==="string"||p==="text";p!=="binarystring"&&p!=="text"||(p="string"),h=this._decompressWorker();var _=!this._dataBinary;_&&!m&&(h=h.pipe(new l.Utf8EncodeWorker)),!_&&m&&(h=h.pipe(new l.Utf8DecodeWorker))}catch(b){(h=new o("error")).error(b)}return new i(h,p,"")},async:function(d,h){return this.internalStream(d).accumulate(h)},nodeStream:function(d,h){return this.internalStream(d||"nodebuffer").toNodejsStream(h)},_compressWorker:function(d,h){if(this._data instanceof a&&this._data.compression.magic===d.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new l.Utf8EncodeWorker)),a.createWorkerFrom(p,d,h)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof o?this._data:new s(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<u.length;c++)n.prototype[u[c]]=f;e.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,r){(function(n){"use strict";var i,s,l=n.MutationObserver||n.WebKitMutationObserver;if(l){var a=0,o=new l(d),u=n.document.createTextNode("");o.observe(u,{characterData:!0}),i=function(){u.data=a=++a%2}}else if(n.setImmediate||n.MessageChannel===void 0)i="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var h=n.document.createElement("script");h.onreadystatechange=function(){d(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},n.document.documentElement.appendChild(h)}:function(){setTimeout(d,0)};else{var f=new n.MessageChannel;f.port1.onmessage=d,i=function(){f.port2.postMessage(0)}}var c=[];function d(){var h,p;s=!0;for(var m=c.length;m;){for(p=c,c=[],h=-1;++h<m;)p[h]();m=c.length}s=!1}e.exports=function(h){c.push(h)!==1||s||i()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,e,r){"use strict";var n=t("immediate");function i(){}var s={},l=["REJECTED"],a=["FULFILLED"],o=["PENDING"];function u(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=o,this.queue=[],this.outcome=void 0,m!==i&&h(this,m)}function f(m,_,b){this.promise=m,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function c(m,_,b){n(function(){var y;try{y=_(b)}catch(S){return s.reject(m,S)}y===m?s.reject(m,new TypeError("Cannot resolve promise with itself")):s.resolve(m,y)})}function d(m){var _=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof _=="function")return function(){_.apply(m,arguments)}}function h(m,_){var b=!1;function y(M){b||(b=!0,s.reject(m,M))}function S(M){b||(b=!0,s.resolve(m,M))}var R=p(function(){_(S,y)});R.status==="error"&&y(R.value)}function p(m,_){var b={};try{b.value=m(_),b.status="success"}catch(y){b.status="error",b.value=y}return b}(e.exports=u).prototype.finally=function(m){if(typeof m!="function")return this;var _=this.constructor;return this.then(function(b){return _.resolve(m()).then(function(){return b})},function(b){return _.resolve(m()).then(function(){throw b})})},u.prototype.catch=function(m){return this.then(null,m)},u.prototype.then=function(m,_){if(typeof m!="function"&&this.state===a||typeof _!="function"&&this.state===l)return this;var b=new this.constructor(i);return this.state!==o?c(b,this.state===a?m:_,this.outcome):this.queue.push(new f(b,m,_)),b},f.prototype.callFulfilled=function(m){s.resolve(this.promise,m)},f.prototype.otherCallFulfilled=function(m){c(this.promise,this.onFulfilled,m)},f.prototype.callRejected=function(m){s.reject(this.promise,m)},f.prototype.otherCallRejected=function(m){c(this.promise,this.onRejected,m)},s.resolve=function(m,_){var b=p(d,_);if(b.status==="error")return s.reject(m,b.value);var y=b.value;if(y)h(m,y);else{m.state=a,m.outcome=_;for(var S=-1,R=m.queue.length;++S<R;)m.queue[S].callFulfilled(_)}return m},s.reject=function(m,_){m.state=l,m.outcome=_;for(var b=-1,y=m.queue.length;++b<y;)m.queue[b].callRejected(_);return m},u.resolve=function(m){return m instanceof this?m:s.resolve(new this(i),m)},u.reject=function(m){var _=new this(i);return s.reject(_,m)},u.all=function(m){var _=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=m.length,y=!1;if(!b)return this.resolve([]);for(var S=new Array(b),R=0,M=-1,F=new this(i);++M<b;)L(m[M],M);return F;function L(V,ue){_.resolve(V).then(function(D){S[ue]=D,++R!==b||y||(y=!0,s.resolve(F,S))},function(D){y||(y=!0,s.reject(F,D))})}},u.race=function(m){var _=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=m.length,y=!1;if(!b)return this.resolve([]);for(var S=-1,R=new this(i);++S<b;)M=m[S],_.resolve(M).then(function(F){y||(y=!0,s.resolve(R,F))},function(F){y||(y=!0,s.reject(R,F))});var M;return R}},{immediate:36}],38:[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,r){"use strict";var n=t("./zlib/deflate"),i=t("./utils/common"),s=t("./utils/strings"),l=t("./zlib/messages"),a=t("./zlib/zstream"),o=Object.prototype.toString,u=0,f=-1,c=0,d=8;function h(m){if(!(this instanceof h))return new h(m);this.options=i.assign({level:f,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},m||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var b=n.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(b!==u)throw new Error(l[b]);if(_.header&&n.deflateSetHeader(this.strm,_.header),_.dictionary){var y;if(y=typeof _.dictionary=="string"?s.string2buf(_.dictionary):o.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(b=n.deflateSetDictionary(this.strm,y))!==u)throw new Error(l[b]);this._dict_set=!0}}function p(m,_){var b=new h(_);if(b.push(m,!0),b.err)throw b.msg||l[b.err];return b.result}h.prototype.push=function(m,_){var b,y,S=this.strm,R=this.options.chunkSize;if(this.ended)return!1;y=_===~~_?_:_===!0?4:0,typeof m=="string"?S.input=s.string2buf(m):o.call(m)==="[object ArrayBuffer]"?S.input=new Uint8Array(m):S.input=m,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new i.Buf8(R),S.next_out=0,S.avail_out=R),(b=n.deflate(S,y))!==1&&b!==u)return this.onEnd(b),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||y!==4&&y!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(i.shrinkBuf(S.output,S.next_out))):this.onData(i.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&b!==1);return y===4?(b=n.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===u):y!==2||(this.onEnd(u),!(S.avail_out=0))},h.prototype.onData=function(m){this.chunks.push(m)},h.prototype.onEnd=function(m){m===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},r.Deflate=h,r.deflate=p,r.deflateRaw=function(m,_){return(_=_||{}).raw=!0,p(m,_)},r.gzip=function(m,_){return(_=_||{}).gzip=!0,p(m,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,r){"use strict";var n=t("./zlib/inflate"),i=t("./utils/common"),s=t("./utils/strings"),l=t("./zlib/constants"),a=t("./zlib/messages"),o=t("./zlib/zstream"),u=t("./zlib/gzheader"),f=Object.prototype.toString;function c(h){if(!(this instanceof c))return new c(h);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},h||{});var p=this.options;p.raw&&0<=p.windowBits&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&p.windowBits<16)||h&&h.windowBits||(p.windowBits+=32),15<p.windowBits&&p.windowBits<48&&(15&p.windowBits)==0&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var m=n.inflateInit2(this.strm,p.windowBits);if(m!==l.Z_OK)throw new Error(a[m]);this.header=new u,n.inflateGetHeader(this.strm,this.header)}function d(h,p){var m=new c(p);if(m.push(h,!0),m.err)throw m.msg||a[m.err];return m.result}c.prototype.push=function(h,p){var m,_,b,y,S,R,M=this.strm,F=this.options.chunkSize,L=this.options.dictionary,V=!1;if(this.ended)return!1;_=p===~~p?p:p===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof h=="string"?M.input=s.binstring2buf(h):f.call(h)==="[object ArrayBuffer]"?M.input=new Uint8Array(h):M.input=h,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new i.Buf8(F),M.next_out=0,M.avail_out=F),(m=n.inflate(M,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&L&&(R=typeof L=="string"?s.string2buf(L):f.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,m=n.inflateSetDictionary(this.strm,R)),m===l.Z_BUF_ERROR&&V===!0&&(m=l.Z_OK,V=!1),m!==l.Z_STREAM_END&&m!==l.Z_OK)return this.onEnd(m),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&m!==l.Z_STREAM_END&&(M.avail_in!==0||_!==l.Z_FINISH&&_!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=s.utf8border(M.output,M.next_out),y=M.next_out-b,S=s.buf2string(M.output,b),M.next_out=y,M.avail_out=F-y,y&&i.arraySet(M.output,M.output,b,y,0),this.onData(S)):this.onData(i.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(V=!0)}while((0<M.avail_in||M.avail_out===0)&&m!==l.Z_STREAM_END);return m===l.Z_STREAM_END&&(_=l.Z_FINISH),_===l.Z_FINISH?(m=n.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===l.Z_OK):_!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(M.avail_out=0))},c.prototype.onData=function(h){this.chunks.push(h)},c.prototype.onEnd=function(h){h===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},r.Inflate=c,r.inflate=d,r.inflateRaw=function(h,p){return(p=p||{}).raw=!0,d(h,p)},r.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,r){"use strict";var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(l){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var o=a.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var u in o)o.hasOwnProperty(u)&&(l[u]=o[u])}}return l},r.shrinkBuf=function(l,a){return l.length===a?l:l.subarray?l.subarray(0,a):(l.length=a,l)};var i={arraySet:function(l,a,o,u,f){if(a.subarray&&l.subarray)l.set(a.subarray(o,o+u),f);else for(var c=0;c<u;c++)l[f+c]=a[o+c]},flattenChunks:function(l){var a,o,u,f,c,d;for(a=u=0,o=l.length;a<o;a++)u+=l[a].length;for(d=new Uint8Array(u),a=f=0,o=l.length;a<o;a++)c=l[a],d.set(c,f),f+=c.length;return d}},s={arraySet:function(l,a,o,u,f){for(var c=0;c<u;c++)l[f+c]=a[o+c]},flattenChunks:function(l){return[].concat.apply([],l)}};r.setTyped=function(l){l?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],42:[function(t,e,r){"use strict";var n=t("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var l=new n.Buf8(256),a=0;a<256;a++)l[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function o(u,f){if(f<65537&&(u.subarray&&s||!u.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(u,f));for(var c="",d=0;d<f;d++)c+=String.fromCharCode(u[d]);return c}l[254]=l[254]=1,r.string2buf=function(u){var f,c,d,h,p,m=u.length,_=0;for(h=0;h<m;h++)(64512&(c=u.charCodeAt(h)))==55296&&h+1<m&&(64512&(d=u.charCodeAt(h+1)))==56320&&(c=65536+(c-55296<<10)+(d-56320),h++),_+=c<128?1:c<2048?2:c<65536?3:4;for(f=new n.Buf8(_),h=p=0;p<_;h++)(64512&(c=u.charCodeAt(h)))==55296&&h+1<m&&(64512&(d=u.charCodeAt(h+1)))==56320&&(c=65536+(c-55296<<10)+(d-56320),h++),c<128?f[p++]=c:(c<2048?f[p++]=192|c>>>6:(c<65536?f[p++]=224|c>>>12:(f[p++]=240|c>>>18,f[p++]=128|c>>>12&63),f[p++]=128|c>>>6&63),f[p++]=128|63&c);return f},r.buf2binstring=function(u){return o(u,u.length)},r.binstring2buf=function(u){for(var f=new n.Buf8(u.length),c=0,d=f.length;c<d;c++)f[c]=u.charCodeAt(c);return f},r.buf2string=function(u,f){var c,d,h,p,m=f||u.length,_=new Array(2*m);for(c=d=0;c<m;)if((h=u[c++])<128)_[d++]=h;else if(4<(p=l[h]))_[d++]=65533,c+=p-1;else{for(h&=p===2?31:p===3?15:7;1<p&&c<m;)h=h<<6|63&u[c++],p--;1<p?_[d++]=65533:h<65536?_[d++]=h:(h-=65536,_[d++]=55296|h>>10&1023,_[d++]=56320|1023&h)}return o(_,d)},r.utf8border=function(u,f){var c;for((f=f||u.length)>u.length&&(f=u.length),c=f-1;0<=c&&(192&u[c])==128;)c--;return c<0||c===0?f:c+l[u[c]]>f?c:f}},{"./common":41}],43:[function(t,e,r){"use strict";e.exports=function(n,i,s,l){for(var a=65535&n|0,o=n>>>16&65535|0,u=0;s!==0;){for(s-=u=2e3<s?2e3:s;o=o+(a=a+i[l++]|0)|0,--u;);a%=65521,o%=65521}return a|o<<16|0}},{}],44:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){"use strict";var n=function(){for(var i,s=[],l=0;l<256;l++){i=l;for(var a=0;a<8;a++)i=1&i?3988292384^i>>>1:i>>>1;s[l]=i}return s}();e.exports=function(i,s,l,a){var o=n,u=a+l;i^=-1;for(var f=a;f<u;f++)i=i>>>8^o[255&(i^s[f])];return-1^i}},{}],46:[function(t,e,r){"use strict";var n,i=t("../utils/common"),s=t("./trees"),l=t("./adler32"),a=t("./crc32"),o=t("./messages"),u=0,f=4,c=0,d=-2,h=-1,p=4,m=2,_=8,b=9,y=286,S=30,R=19,M=2*y+1,F=15,L=3,V=258,ue=V+L+1,D=42,G=113,k=1,Z=2,_e=3,Y=4;function be(g,Q){return g.msg=o[Q],Q}function U(g){return(g<<1)-(4<g?9:0)}function K(g){for(var Q=g.length;0<=--Q;)g[Q]=0}function N(g){var Q=g.state,X=Q.pending;X>g.avail_out&&(X=g.avail_out),X!==0&&(i.arraySet(g.output,Q.pending_buf,Q.pending_out,X,g.next_out),g.next_out+=X,Q.pending_out+=X,g.total_out+=X,g.avail_out-=X,Q.pending-=X,Q.pending===0&&(Q.pending_out=0))}function j(g,Q){s._tr_flush_block(g,0<=g.block_start?g.block_start:-1,g.strstart-g.block_start,Q),g.block_start=g.strstart,N(g.strm)}function me(g,Q){g.pending_buf[g.pending++]=Q}function de(g,Q){g.pending_buf[g.pending++]=Q>>>8&255,g.pending_buf[g.pending++]=255&Q}function he(g,Q){var X,I,x=g.max_chain_length,P=g.strstart,te=g.prev_length,ie=g.nice_match,z=g.strstart>g.w_size-ue?g.strstart-(g.w_size-ue):0,ne=g.window,se=g.w_mask,re=g.prev,pe=g.strstart+V,ke=ne[P+te-1],$e=ne[P+te];g.prev_length>=g.good_match&&(x>>=2),ie>g.lookahead&&(ie=g.lookahead);do if(ne[(X=Q)+te]===$e&&ne[X+te-1]===ke&&ne[X]===ne[P]&&ne[++X]===ne[P+1]){P+=2,X++;do;while(ne[++P]===ne[++X]&&ne[++P]===ne[++X]&&ne[++P]===ne[++X]&&ne[++P]===ne[++X]&&ne[++P]===ne[++X]&&ne[++P]===ne[++X]&&ne[++P]===ne[++X]&&ne[++P]===ne[++X]&&P<pe);if(I=V-(pe-P),P=pe-V,te<I){if(g.match_start=Q,ie<=(te=I))break;ke=ne[P+te-1],$e=ne[P+te]}}while((Q=re[Q&se])>z&&--x!=0);return te<=g.lookahead?te:g.lookahead}function Be(g){var Q,X,I,x,P,te,ie,z,ne,se,re=g.w_size;do{if(x=g.window_size-g.lookahead-g.strstart,g.strstart>=re+(re-ue)){for(i.arraySet(g.window,g.window,re,re,0),g.match_start-=re,g.strstart-=re,g.block_start-=re,Q=X=g.hash_size;I=g.head[--Q],g.head[Q]=re<=I?I-re:0,--X;);for(Q=X=re;I=g.prev[--Q],g.prev[Q]=re<=I?I-re:0,--X;);x+=re}if(g.strm.avail_in===0)break;if(te=g.strm,ie=g.window,z=g.strstart+g.lookahead,ne=x,se=void 0,se=te.avail_in,ne<se&&(se=ne),X=se===0?0:(te.avail_in-=se,i.arraySet(ie,te.input,te.next_in,se,z),te.state.wrap===1?te.adler=l(te.adler,ie,se,z):te.state.wrap===2&&(te.adler=a(te.adler,ie,se,z)),te.next_in+=se,te.total_in+=se,se),g.lookahead+=X,g.lookahead+g.insert>=L)for(P=g.strstart-g.insert,g.ins_h=g.window[P],g.ins_h=(g.ins_h<<g.hash_shift^g.window[P+1])&g.hash_mask;g.insert&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[P+L-1])&g.hash_mask,g.prev[P&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=P,P++,g.insert--,!(g.lookahead+g.insert<L)););}while(g.lookahead<ue&&g.strm.avail_in!==0)}function je(g,Q){for(var X,I;;){if(g.lookahead<ue){if(Be(g),g.lookahead<ue&&Q===u)return k;if(g.lookahead===0)break}if(X=0,g.lookahead>=L&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+L-1])&g.hash_mask,X=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),X!==0&&g.strstart-X<=g.w_size-ue&&(g.match_length=he(g,X)),g.match_length>=L)if(I=s._tr_tally(g,g.strstart-g.match_start,g.match_length-L),g.lookahead-=g.match_length,g.match_length<=g.max_lazy_match&&g.lookahead>=L){for(g.match_length--;g.strstart++,g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+L-1])&g.hash_mask,X=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart,--g.match_length!=0;);g.strstart++}else g.strstart+=g.match_length,g.match_length=0,g.ins_h=g.window[g.strstart],g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+1])&g.hash_mask;else I=s._tr_tally(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++;if(I&&(j(g,!1),g.strm.avail_out===0))return k}return g.insert=g.strstart<L-1?g.strstart:L-1,Q===f?(j(g,!0),g.strm.avail_out===0?_e:Y):g.last_lit&&(j(g,!1),g.strm.avail_out===0)?k:Z}function Ie(g,Q){for(var X,I,x;;){if(g.lookahead<ue){if(Be(g),g.lookahead<ue&&Q===u)return k;if(g.lookahead===0)break}if(X=0,g.lookahead>=L&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+L-1])&g.hash_mask,X=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),g.prev_length=g.match_length,g.prev_match=g.match_start,g.match_length=L-1,X!==0&&g.prev_length<g.max_lazy_match&&g.strstart-X<=g.w_size-ue&&(g.match_length=he(g,X),g.match_length<=5&&(g.strategy===1||g.match_length===L&&4096<g.strstart-g.match_start)&&(g.match_length=L-1)),g.prev_length>=L&&g.match_length<=g.prev_length){for(x=g.strstart+g.lookahead-L,I=s._tr_tally(g,g.strstart-1-g.prev_match,g.prev_length-L),g.lookahead-=g.prev_length-1,g.prev_length-=2;++g.strstart<=x&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+L-1])&g.hash_mask,X=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),--g.prev_length!=0;);if(g.match_available=0,g.match_length=L-1,g.strstart++,I&&(j(g,!1),g.strm.avail_out===0))return k}else if(g.match_available){if((I=s._tr_tally(g,0,g.window[g.strstart-1]))&&j(g,!1),g.strstart++,g.lookahead--,g.strm.avail_out===0)return k}else g.match_available=1,g.strstart++,g.lookahead--}return g.match_available&&(I=s._tr_tally(g,0,g.window[g.strstart-1]),g.match_available=0),g.insert=g.strstart<L-1?g.strstart:L-1,Q===f?(j(g,!0),g.strm.avail_out===0?_e:Y):g.last_lit&&(j(g,!1),g.strm.avail_out===0)?k:Z}function Re(g,Q,X,I,x){this.good_length=g,this.max_lazy=Q,this.nice_length=X,this.max_chain=I,this.func=x}function Pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*M),this.dyn_dtree=new i.Buf16(2*(2*S+1)),this.bl_tree=new i.Buf16(2*(2*R+1)),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(F+1),this.heap=new i.Buf16(2*y+1),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*y+1),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ze(g){var Q;return g&&g.state?(g.total_in=g.total_out=0,g.data_type=m,(Q=g.state).pending=0,Q.pending_out=0,Q.wrap<0&&(Q.wrap=-Q.wrap),Q.status=Q.wrap?D:G,g.adler=Q.wrap===2?0:1,Q.last_flush=u,s._tr_init(Q),c):be(g,d)}function Ne(g){var Q=ze(g);return Q===c&&function(X){X.window_size=2*X.w_size,K(X.head),X.max_lazy_match=n[X.level].max_lazy,X.good_match=n[X.level].good_length,X.nice_match=n[X.level].nice_length,X.max_chain_length=n[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=L-1,X.match_available=0,X.ins_h=0}(g.state),Q}function ce(g,Q,X,I,x,P){if(!g)return d;var te=1;if(Q===h&&(Q=6),I<0?(te=0,I=-I):15<I&&(te=2,I-=16),x<1||b<x||X!==_||I<8||15<I||Q<0||9<Q||P<0||p<P)return be(g,d);I===8&&(I=9);var ie=new Pe;return(g.state=ie).strm=g,ie.wrap=te,ie.gzhead=null,ie.w_bits=I,ie.w_size=1<<ie.w_bits,ie.w_mask=ie.w_size-1,ie.hash_bits=x+7,ie.hash_size=1<<ie.hash_bits,ie.hash_mask=ie.hash_size-1,ie.hash_shift=~~((ie.hash_bits+L-1)/L),ie.window=new i.Buf8(2*ie.w_size),ie.head=new i.Buf16(ie.hash_size),ie.prev=new i.Buf16(ie.w_size),ie.lit_bufsize=1<<x+6,ie.pending_buf_size=4*ie.lit_bufsize,ie.pending_buf=new i.Buf8(ie.pending_buf_size),ie.d_buf=1*ie.lit_bufsize,ie.l_buf=3*ie.lit_bufsize,ie.level=Q,ie.strategy=P,ie.method=X,Ne(g)}n=[new Re(0,0,0,0,function(g,Q){var X=65535;for(X>g.pending_buf_size-5&&(X=g.pending_buf_size-5);;){if(g.lookahead<=1){if(Be(g),g.lookahead===0&&Q===u)return k;if(g.lookahead===0)break}g.strstart+=g.lookahead,g.lookahead=0;var I=g.block_start+X;if((g.strstart===0||g.strstart>=I)&&(g.lookahead=g.strstart-I,g.strstart=I,j(g,!1),g.strm.avail_out===0)||g.strstart-g.block_start>=g.w_size-ue&&(j(g,!1),g.strm.avail_out===0))return k}return g.insert=0,Q===f?(j(g,!0),g.strm.avail_out===0?_e:Y):(g.strstart>g.block_start&&(j(g,!1),g.strm.avail_out),k)}),new Re(4,4,8,4,je),new Re(4,5,16,8,je),new Re(4,6,32,32,je),new Re(4,4,16,16,Ie),new Re(8,16,32,32,Ie),new Re(8,16,128,128,Ie),new Re(8,32,128,256,Ie),new Re(32,128,258,1024,Ie),new Re(32,258,258,4096,Ie)],r.deflateInit=function(g,Q){return ce(g,Q,_,15,8,0)},r.deflateInit2=ce,r.deflateReset=Ne,r.deflateResetKeep=ze,r.deflateSetHeader=function(g,Q){return g&&g.state?g.state.wrap!==2?d:(g.state.gzhead=Q,c):d},r.deflate=function(g,Q){var X,I,x,P;if(!g||!g.state||5<Q||Q<0)return g?be(g,d):d;if(I=g.state,!g.output||!g.input&&g.avail_in!==0||I.status===666&&Q!==f)return be(g,g.avail_out===0?-5:d);if(I.strm=g,X=I.last_flush,I.last_flush=Q,I.status===D)if(I.wrap===2)g.adler=0,me(I,31),me(I,139),me(I,8),I.gzhead?(me(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),me(I,255&I.gzhead.time),me(I,I.gzhead.time>>8&255),me(I,I.gzhead.time>>16&255),me(I,I.gzhead.time>>24&255),me(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),me(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(me(I,255&I.gzhead.extra.length),me(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(g.adler=a(g.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(me(I,0),me(I,0),me(I,0),me(I,0),me(I,0),me(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),me(I,3),I.status=G);else{var te=_+(I.w_bits-8<<4)<<8;te|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(te|=32),te+=31-te%31,I.status=G,de(I,te),I.strstart!==0&&(de(I,g.adler>>>16),de(I,65535&g.adler)),g.adler=1}if(I.status===69)if(I.gzhead.extra){for(x=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>x&&(g.adler=a(g.adler,I.pending_buf,I.pending-x,x)),N(g),x=I.pending,I.pending!==I.pending_buf_size));)me(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>x&&(g.adler=a(g.adler,I.pending_buf,I.pending-x,x)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){x=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>x&&(g.adler=a(g.adler,I.pending_buf,I.pending-x,x)),N(g),x=I.pending,I.pending===I.pending_buf_size)){P=1;break}P=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,me(I,P)}while(P!==0);I.gzhead.hcrc&&I.pending>x&&(g.adler=a(g.adler,I.pending_buf,I.pending-x,x)),P===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){x=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>x&&(g.adler=a(g.adler,I.pending_buf,I.pending-x,x)),N(g),x=I.pending,I.pending===I.pending_buf_size)){P=1;break}P=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,me(I,P)}while(P!==0);I.gzhead.hcrc&&I.pending>x&&(g.adler=a(g.adler,I.pending_buf,I.pending-x,x)),P===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&N(g),I.pending+2<=I.pending_buf_size&&(me(I,255&g.adler),me(I,g.adler>>8&255),g.adler=0,I.status=G)):I.status=G),I.pending!==0){if(N(g),g.avail_out===0)return I.last_flush=-1,c}else if(g.avail_in===0&&U(Q)<=U(X)&&Q!==f)return be(g,-5);if(I.status===666&&g.avail_in!==0)return be(g,-5);if(g.avail_in!==0||I.lookahead!==0||Q!==u&&I.status!==666){var ie=I.strategy===2?function(z,ne){for(var se;;){if(z.lookahead===0&&(Be(z),z.lookahead===0)){if(ne===u)return k;break}if(z.match_length=0,se=s._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,se&&(j(z,!1),z.strm.avail_out===0))return k}return z.insert=0,ne===f?(j(z,!0),z.strm.avail_out===0?_e:Y):z.last_lit&&(j(z,!1),z.strm.avail_out===0)?k:Z}(I,Q):I.strategy===3?function(z,ne){for(var se,re,pe,ke,$e=z.window;;){if(z.lookahead<=V){if(Be(z),z.lookahead<=V&&ne===u)return k;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=L&&0<z.strstart&&(re=$e[pe=z.strstart-1])===$e[++pe]&&re===$e[++pe]&&re===$e[++pe]){ke=z.strstart+V;do;while(re===$e[++pe]&&re===$e[++pe]&&re===$e[++pe]&&re===$e[++pe]&&re===$e[++pe]&&re===$e[++pe]&&re===$e[++pe]&&re===$e[++pe]&&pe<ke);z.match_length=V-(ke-pe),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=L?(se=s._tr_tally(z,1,z.match_length-L),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(se=s._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),se&&(j(z,!1),z.strm.avail_out===0))return k}return z.insert=0,ne===f?(j(z,!0),z.strm.avail_out===0?_e:Y):z.last_lit&&(j(z,!1),z.strm.avail_out===0)?k:Z}(I,Q):n[I.level].func(I,Q);if(ie!==_e&&ie!==Y||(I.status=666),ie===k||ie===_e)return g.avail_out===0&&(I.last_flush=-1),c;if(ie===Z&&(Q===1?s._tr_align(I):Q!==5&&(s._tr_stored_block(I,0,0,!1),Q===3&&(K(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),N(g),g.avail_out===0))return I.last_flush=-1,c}return Q!==f?c:I.wrap<=0?1:(I.wrap===2?(me(I,255&g.adler),me(I,g.adler>>8&255),me(I,g.adler>>16&255),me(I,g.adler>>24&255),me(I,255&g.total_in),me(I,g.total_in>>8&255),me(I,g.total_in>>16&255),me(I,g.total_in>>24&255)):(de(I,g.adler>>>16),de(I,65535&g.adler)),N(g),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?c:1)},r.deflateEnd=function(g){var Q;return g&&g.state?(Q=g.state.status)!==D&&Q!==69&&Q!==73&&Q!==91&&Q!==103&&Q!==G&&Q!==666?be(g,d):(g.state=null,Q===G?be(g,-3):c):d},r.deflateSetDictionary=function(g,Q){var X,I,x,P,te,ie,z,ne,se=Q.length;if(!g||!g.state||(P=(X=g.state).wrap)===2||P===1&&X.status!==D||X.lookahead)return d;for(P===1&&(g.adler=l(g.adler,Q,se,0)),X.wrap=0,se>=X.w_size&&(P===0&&(K(X.head),X.strstart=0,X.block_start=0,X.insert=0),ne=new i.Buf8(X.w_size),i.arraySet(ne,Q,se-X.w_size,X.w_size,0),Q=ne,se=X.w_size),te=g.avail_in,ie=g.next_in,z=g.input,g.avail_in=se,g.next_in=0,g.input=Q,Be(X);X.lookahead>=L;){for(I=X.strstart,x=X.lookahead-(L-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[I+L-1])&X.hash_mask,X.prev[I&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=I,I++,--x;);X.strstart=I,X.lookahead=L-1,Be(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=L-1,X.match_available=0,g.next_in=ie,g.input=z,g.avail_in=te,X.wrap=P,c},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){"use strict";e.exports=function(n,i){var s,l,a,o,u,f,c,d,h,p,m,_,b,y,S,R,M,F,L,V,ue,D,G,k,Z;s=n.state,l=n.next_in,k=n.input,a=l+(n.avail_in-5),o=n.next_out,Z=n.output,u=o-(i-n.avail_out),f=o+(n.avail_out-257),c=s.dmax,d=s.wsize,h=s.whave,p=s.wnext,m=s.window,_=s.hold,b=s.bits,y=s.lencode,S=s.distcode,R=(1<<s.lenbits)-1,M=(1<<s.distbits)-1;e:do{b<15&&(_+=k[l++]<<b,b+=8,_+=k[l++]<<b,b+=8),F=y[_&R];t:for(;;){if(_>>>=L=F>>>24,b-=L,(L=F>>>16&255)===0)Z[o++]=65535&F;else{if(!(16&L)){if((64&L)==0){F=y[(65535&F)+(_&(1<<L)-1)];continue t}if(32&L){s.mode=12;break e}n.msg="invalid literal/length code",s.mode=30;break e}V=65535&F,(L&=15)&&(b<L&&(_+=k[l++]<<b,b+=8),V+=_&(1<<L)-1,_>>>=L,b-=L),b<15&&(_+=k[l++]<<b,b+=8,_+=k[l++]<<b,b+=8),F=S[_&M];n:for(;;){if(_>>>=L=F>>>24,b-=L,!(16&(L=F>>>16&255))){if((64&L)==0){F=S[(65535&F)+(_&(1<<L)-1)];continue n}n.msg="invalid distance code",s.mode=30;break e}if(ue=65535&F,b<(L&=15)&&(_+=k[l++]<<b,(b+=8)<L&&(_+=k[l++]<<b,b+=8)),c<(ue+=_&(1<<L)-1)){n.msg="invalid distance too far back",s.mode=30;break e}if(_>>>=L,b-=L,(L=o-u)<ue){if(h<(L=ue-L)&&s.sane){n.msg="invalid distance too far back",s.mode=30;break e}if(G=m,(D=0)===p){if(D+=d-L,L<V){for(V-=L;Z[o++]=m[D++],--L;);D=o-ue,G=Z}}else if(p<L){if(D+=d+p-L,(L-=p)<V){for(V-=L;Z[o++]=m[D++],--L;);if(D=0,p<V){for(V-=L=p;Z[o++]=m[D++],--L;);D=o-ue,G=Z}}}else if(D+=p-L,L<V){for(V-=L;Z[o++]=m[D++],--L;);D=o-ue,G=Z}for(;2<V;)Z[o++]=G[D++],Z[o++]=G[D++],Z[o++]=G[D++],V-=3;V&&(Z[o++]=G[D++],1<V&&(Z[o++]=G[D++]))}else{for(D=o-ue;Z[o++]=Z[D++],Z[o++]=Z[D++],Z[o++]=Z[D++],2<(V-=3););V&&(Z[o++]=Z[D++],1<V&&(Z[o++]=Z[D++]))}break}}break}}while(l<a&&o<f);l-=V=b>>3,_&=(1<<(b-=V<<3))-1,n.next_in=l,n.next_out=o,n.avail_in=l<a?a-l+5:5-(l-a),n.avail_out=o<f?f-o+257:257-(o-f),s.hold=_,s.bits=b}},{}],49:[function(t,e,r){"use strict";var n=t("../utils/common"),i=t("./adler32"),s=t("./crc32"),l=t("./inffast"),a=t("./inftrees"),o=1,u=2,f=0,c=-2,d=1,h=852,p=592;function m(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(D){var G;return D&&D.state?(G=D.state,D.total_in=D.total_out=G.total=0,D.msg="",G.wrap&&(D.adler=1&G.wrap),G.mode=d,G.last=0,G.havedict=0,G.dmax=32768,G.head=null,G.hold=0,G.bits=0,G.lencode=G.lendyn=new n.Buf32(h),G.distcode=G.distdyn=new n.Buf32(p),G.sane=1,G.back=-1,f):c}function y(D){var G;return D&&D.state?((G=D.state).wsize=0,G.whave=0,G.wnext=0,b(D)):c}function S(D,G){var k,Z;return D&&D.state?(Z=D.state,G<0?(k=0,G=-G):(k=1+(G>>4),G<48&&(G&=15)),G&&(G<8||15<G)?c:(Z.window!==null&&Z.wbits!==G&&(Z.window=null),Z.wrap=k,Z.wbits=G,y(D))):c}function R(D,G){var k,Z;return D?(Z=new _,(D.state=Z).window=null,(k=S(D,G))!==f&&(D.state=null),k):c}var M,F,L=!0;function V(D){if(L){var G;for(M=new n.Buf32(512),F=new n.Buf32(32),G=0;G<144;)D.lens[G++]=8;for(;G<256;)D.lens[G++]=9;for(;G<280;)D.lens[G++]=7;for(;G<288;)D.lens[G++]=8;for(a(o,D.lens,0,288,M,0,D.work,{bits:9}),G=0;G<32;)D.lens[G++]=5;a(u,D.lens,0,32,F,0,D.work,{bits:5}),L=!1}D.lencode=M,D.lenbits=9,D.distcode=F,D.distbits=5}function ue(D,G,k,Z){var _e,Y=D.state;return Y.window===null&&(Y.wsize=1<<Y.wbits,Y.wnext=0,Y.whave=0,Y.window=new n.Buf8(Y.wsize)),Z>=Y.wsize?(n.arraySet(Y.window,G,k-Y.wsize,Y.wsize,0),Y.wnext=0,Y.whave=Y.wsize):(Z<(_e=Y.wsize-Y.wnext)&&(_e=Z),n.arraySet(Y.window,G,k-Z,_e,Y.wnext),(Z-=_e)?(n.arraySet(Y.window,G,k-Z,Z,0),Y.wnext=Z,Y.whave=Y.wsize):(Y.wnext+=_e,Y.wnext===Y.wsize&&(Y.wnext=0),Y.whave<Y.wsize&&(Y.whave+=_e))),0}r.inflateReset=y,r.inflateReset2=S,r.inflateResetKeep=b,r.inflateInit=function(D){return R(D,15)},r.inflateInit2=R,r.inflate=function(D,G){var k,Z,_e,Y,be,U,K,N,j,me,de,he,Be,je,Ie,Re,Pe,ze,Ne,ce,g,Q,X,I,x=0,P=new n.Buf8(4),te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return c;(k=D.state).mode===12&&(k.mode=13),be=D.next_out,_e=D.output,K=D.avail_out,Y=D.next_in,Z=D.input,U=D.avail_in,N=k.hold,j=k.bits,me=U,de=K,Q=f;e:for(;;)switch(k.mode){case d:if(k.wrap===0){k.mode=13;break}for(;j<16;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}if(2&k.wrap&&N===35615){P[k.check=0]=255&N,P[1]=N>>>8&255,k.check=s(k.check,P,2,0),j=N=0,k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&N)<<8)+(N>>8))%31){D.msg="incorrect header check",k.mode=30;break}if((15&N)!=8){D.msg="unknown compression method",k.mode=30;break}if(j-=4,g=8+(15&(N>>>=4)),k.wbits===0)k.wbits=g;else if(g>k.wbits){D.msg="invalid window size",k.mode=30;break}k.dmax=1<<g,D.adler=k.check=1,k.mode=512&N?10:12,j=N=0;break;case 2:for(;j<16;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}if(k.flags=N,(255&k.flags)!=8){D.msg="unknown compression method",k.mode=30;break}if(57344&k.flags){D.msg="unknown header flags set",k.mode=30;break}k.head&&(k.head.text=N>>8&1),512&k.flags&&(P[0]=255&N,P[1]=N>>>8&255,k.check=s(k.check,P,2,0)),j=N=0,k.mode=3;case 3:for(;j<32;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}k.head&&(k.head.time=N),512&k.flags&&(P[0]=255&N,P[1]=N>>>8&255,P[2]=N>>>16&255,P[3]=N>>>24&255,k.check=s(k.check,P,4,0)),j=N=0,k.mode=4;case 4:for(;j<16;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}k.head&&(k.head.xflags=255&N,k.head.os=N>>8),512&k.flags&&(P[0]=255&N,P[1]=N>>>8&255,k.check=s(k.check,P,2,0)),j=N=0,k.mode=5;case 5:if(1024&k.flags){for(;j<16;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}k.length=N,k.head&&(k.head.extra_len=N),512&k.flags&&(P[0]=255&N,P[1]=N>>>8&255,k.check=s(k.check,P,2,0)),j=N=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&(U<(he=k.length)&&(he=U),he&&(k.head&&(g=k.head.extra_len-k.length,k.head.extra||(k.head.extra=new Array(k.head.extra_len)),n.arraySet(k.head.extra,Z,Y,he,g)),512&k.flags&&(k.check=s(k.check,Z,he,Y)),U-=he,Y+=he,k.length-=he),k.length))break e;k.length=0,k.mode=7;case 7:if(2048&k.flags){if(U===0)break e;for(he=0;g=Z[Y+he++],k.head&&g&&k.length<65536&&(k.head.name+=String.fromCharCode(g)),g&&he<U;);if(512&k.flags&&(k.check=s(k.check,Z,he,Y)),U-=he,Y+=he,g)break e}else k.head&&(k.head.name=null);k.length=0,k.mode=8;case 8:if(4096&k.flags){if(U===0)break e;for(he=0;g=Z[Y+he++],k.head&&g&&k.length<65536&&(k.head.comment+=String.fromCharCode(g)),g&&he<U;);if(512&k.flags&&(k.check=s(k.check,Z,he,Y)),U-=he,Y+=he,g)break e}else k.head&&(k.head.comment=null);k.mode=9;case 9:if(512&k.flags){for(;j<16;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}if(N!==(65535&k.check)){D.msg="header crc mismatch",k.mode=30;break}j=N=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0),D.adler=k.check=0,k.mode=12;break;case 10:for(;j<32;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}D.adler=k.check=m(N),j=N=0,k.mode=11;case 11:if(k.havedict===0)return D.next_out=be,D.avail_out=K,D.next_in=Y,D.avail_in=U,k.hold=N,k.bits=j,2;D.adler=k.check=1,k.mode=12;case 12:if(G===5||G===6)break e;case 13:if(k.last){N>>>=7&j,j-=7&j,k.mode=27;break}for(;j<3;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}switch(k.last=1&N,j-=1,3&(N>>>=1)){case 0:k.mode=14;break;case 1:if(V(k),k.mode=20,G!==6)break;N>>>=2,j-=2;break e;case 2:k.mode=17;break;case 3:D.msg="invalid block type",k.mode=30}N>>>=2,j-=2;break;case 14:for(N>>>=7&j,j-=7&j;j<32;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}if((65535&N)!=(N>>>16^65535)){D.msg="invalid stored block lengths",k.mode=30;break}if(k.length=65535&N,j=N=0,k.mode=15,G===6)break e;case 15:k.mode=16;case 16:if(he=k.length){if(U<he&&(he=U),K<he&&(he=K),he===0)break e;n.arraySet(_e,Z,Y,he,be),U-=he,Y+=he,K-=he,be+=he,k.length-=he;break}k.mode=12;break;case 17:for(;j<14;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}if(k.nlen=257+(31&N),N>>>=5,j-=5,k.ndist=1+(31&N),N>>>=5,j-=5,k.ncode=4+(15&N),N>>>=4,j-=4,286<k.nlen||30<k.ndist){D.msg="too many length or distance symbols",k.mode=30;break}k.have=0,k.mode=18;case 18:for(;k.have<k.ncode;){for(;j<3;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}k.lens[te[k.have++]]=7&N,N>>>=3,j-=3}for(;k.have<19;)k.lens[te[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,X={bits:k.lenbits},Q=a(0,k.lens,0,19,k.lencode,0,k.work,X),k.lenbits=X.bits,Q){D.msg="invalid code lengths set",k.mode=30;break}k.have=0,k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;Re=(x=k.lencode[N&(1<<k.lenbits)-1])>>>16&255,Pe=65535&x,!((Ie=x>>>24)<=j);){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}if(Pe<16)N>>>=Ie,j-=Ie,k.lens[k.have++]=Pe;else{if(Pe===16){for(I=Ie+2;j<I;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}if(N>>>=Ie,j-=Ie,k.have===0){D.msg="invalid bit length repeat",k.mode=30;break}g=k.lens[k.have-1],he=3+(3&N),N>>>=2,j-=2}else if(Pe===17){for(I=Ie+3;j<I;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}j-=Ie,g=0,he=3+(7&(N>>>=Ie)),N>>>=3,j-=3}else{for(I=Ie+7;j<I;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}j-=Ie,g=0,he=11+(127&(N>>>=Ie)),N>>>=7,j-=7}if(k.have+he>k.nlen+k.ndist){D.msg="invalid bit length repeat",k.mode=30;break}for(;he--;)k.lens[k.have++]=g}}if(k.mode===30)break;if(k.lens[256]===0){D.msg="invalid code -- missing end-of-block",k.mode=30;break}if(k.lenbits=9,X={bits:k.lenbits},Q=a(o,k.lens,0,k.nlen,k.lencode,0,k.work,X),k.lenbits=X.bits,Q){D.msg="invalid literal/lengths set",k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,X={bits:k.distbits},Q=a(u,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,X),k.distbits=X.bits,Q){D.msg="invalid distances set",k.mode=30;break}if(k.mode=20,G===6)break e;case 20:k.mode=21;case 21:if(6<=U&&258<=K){D.next_out=be,D.avail_out=K,D.next_in=Y,D.avail_in=U,k.hold=N,k.bits=j,l(D,de),be=D.next_out,_e=D.output,K=D.avail_out,Y=D.next_in,Z=D.input,U=D.avail_in,N=k.hold,j=k.bits,k.mode===12&&(k.back=-1);break}for(k.back=0;Re=(x=k.lencode[N&(1<<k.lenbits)-1])>>>16&255,Pe=65535&x,!((Ie=x>>>24)<=j);){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}if(Re&&(240&Re)==0){for(ze=Ie,Ne=Re,ce=Pe;Re=(x=k.lencode[ce+((N&(1<<ze+Ne)-1)>>ze)])>>>16&255,Pe=65535&x,!(ze+(Ie=x>>>24)<=j);){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}N>>>=ze,j-=ze,k.back+=ze}if(N>>>=Ie,j-=Ie,k.back+=Ie,k.length=Pe,Re===0){k.mode=26;break}if(32&Re){k.back=-1,k.mode=12;break}if(64&Re){D.msg="invalid literal/length code",k.mode=30;break}k.extra=15&Re,k.mode=22;case 22:if(k.extra){for(I=k.extra;j<I;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}k.length+=N&(1<<k.extra)-1,N>>>=k.extra,j-=k.extra,k.back+=k.extra}k.was=k.length,k.mode=23;case 23:for(;Re=(x=k.distcode[N&(1<<k.distbits)-1])>>>16&255,Pe=65535&x,!((Ie=x>>>24)<=j);){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}if((240&Re)==0){for(ze=Ie,Ne=Re,ce=Pe;Re=(x=k.distcode[ce+((N&(1<<ze+Ne)-1)>>ze)])>>>16&255,Pe=65535&x,!(ze+(Ie=x>>>24)<=j);){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}N>>>=ze,j-=ze,k.back+=ze}if(N>>>=Ie,j-=Ie,k.back+=Ie,64&Re){D.msg="invalid distance code",k.mode=30;break}k.offset=Pe,k.extra=15&Re,k.mode=24;case 24:if(k.extra){for(I=k.extra;j<I;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}k.offset+=N&(1<<k.extra)-1,N>>>=k.extra,j-=k.extra,k.back+=k.extra}if(k.offset>k.dmax){D.msg="invalid distance too far back",k.mode=30;break}k.mode=25;case 25:if(K===0)break e;if(he=de-K,k.offset>he){if((he=k.offset-he)>k.whave&&k.sane){D.msg="invalid distance too far back",k.mode=30;break}Be=he>k.wnext?(he-=k.wnext,k.wsize-he):k.wnext-he,he>k.length&&(he=k.length),je=k.window}else je=_e,Be=be-k.offset,he=k.length;for(K<he&&(he=K),K-=he,k.length-=he;_e[be++]=je[Be++],--he;);k.length===0&&(k.mode=21);break;case 26:if(K===0)break e;_e[be++]=k.length,K--,k.mode=21;break;case 27:if(k.wrap){for(;j<32;){if(U===0)break e;U--,N|=Z[Y++]<<j,j+=8}if(de-=K,D.total_out+=de,k.total+=de,de&&(D.adler=k.check=k.flags?s(k.check,_e,de,be-de):i(k.check,_e,de,be-de)),de=K,(k.flags?N:m(N))!==k.check){D.msg="incorrect data check",k.mode=30;break}j=N=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;j<32;){if(U===0)break e;U--,N+=Z[Y++]<<j,j+=8}if(N!==(4294967295&k.total)){D.msg="incorrect length check",k.mode=30;break}j=N=0}k.mode=29;case 29:Q=1;break e;case 30:Q=-3;break e;case 31:return-4;case 32:default:return c}return D.next_out=be,D.avail_out=K,D.next_in=Y,D.avail_in=U,k.hold=N,k.bits=j,(k.wsize||de!==D.avail_out&&k.mode<30&&(k.mode<27||G!==4))&&ue(D,D.output,D.next_out,de-D.avail_out)?(k.mode=31,-4):(me-=D.avail_in,de-=D.avail_out,D.total_in+=me,D.total_out+=de,k.total+=de,k.wrap&&de&&(D.adler=k.check=k.flags?s(k.check,_e,de,D.next_out-de):i(k.check,_e,de,D.next_out-de)),D.data_type=k.bits+(k.last?64:0)+(k.mode===12?128:0)+(k.mode===20||k.mode===15?256:0),(me==0&&de===0||G===4)&&Q===f&&(Q=-5),Q)},r.inflateEnd=function(D){if(!D||!D.state)return c;var G=D.state;return G.window&&(G.window=null),D.state=null,f},r.inflateGetHeader=function(D,G){var k;return D&&D.state?(2&(k=D.state).wrap)==0?c:((k.head=G).done=!1,f):c},r.inflateSetDictionary=function(D,G){var k,Z=G.length;return D&&D.state?(k=D.state).wrap!==0&&k.mode!==11?c:k.mode===11&&i(1,G,Z,0)!==k.check?-3:ue(D,G,Z,Z)?(k.mode=31,-4):(k.havedict=1,f):c},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,r){"use strict";var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(o,u,f,c,d,h,p,m){var _,b,y,S,R,M,F,L,V,ue=m.bits,D=0,G=0,k=0,Z=0,_e=0,Y=0,be=0,U=0,K=0,N=0,j=null,me=0,de=new n.Buf16(16),he=new n.Buf16(16),Be=null,je=0;for(D=0;D<=15;D++)de[D]=0;for(G=0;G<c;G++)de[u[f+G]]++;for(_e=ue,Z=15;1<=Z&&de[Z]===0;Z--);if(Z<_e&&(_e=Z),Z===0)return d[h++]=20971520,d[h++]=20971520,m.bits=1,0;for(k=1;k<Z&&de[k]===0;k++);for(_e<k&&(_e=k),D=U=1;D<=15;D++)if(U<<=1,(U-=de[D])<0)return-1;if(0<U&&(o===0||Z!==1))return-1;for(he[1]=0,D=1;D<15;D++)he[D+1]=he[D]+de[D];for(G=0;G<c;G++)u[f+G]!==0&&(p[he[u[f+G]]++]=G);if(M=o===0?(j=Be=p,19):o===1?(j=i,me-=257,Be=s,je-=257,256):(j=l,Be=a,-1),D=k,R=h,be=G=N=0,y=-1,S=(K=1<<(Y=_e))-1,o===1&&852<K||o===2&&592<K)return 1;for(;;){for(F=D-be,V=p[G]<M?(L=0,p[G]):p[G]>M?(L=Be[je+p[G]],j[me+p[G]]):(L=96,0),_=1<<D-be,k=b=1<<Y;d[R+(N>>be)+(b-=_)]=F<<24|L<<16|V|0,b!==0;);for(_=1<<D-1;N&_;)_>>=1;if(_!==0?(N&=_-1,N+=_):N=0,G++,--de[D]==0){if(D===Z)break;D=u[f+p[G]]}if(_e<D&&(N&S)!==y){for(be===0&&(be=_e),R+=k,U=1<<(Y=D-be);Y+be<Z&&!((U-=de[Y+be])<=0);)Y++,U<<=1;if(K+=1<<Y,o===1&&852<K||o===2&&592<K)return 1;d[y=N&S]=_e<<24|Y<<16|R-h|0}}return N!==0&&(d[R+N]=D-be<<24|64<<16|0),m.bits=_e,0}},{"../utils/common":41}],51:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,r){"use strict";var n=t("../utils/common"),i=0,s=1;function l(x){for(var P=x.length;0<=--P;)x[P]=0}var a=0,o=29,u=256,f=u+1+o,c=30,d=19,h=2*f+1,p=15,m=16,_=7,b=256,y=16,S=17,R=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ue=new Array(2*(f+2));l(ue);var D=new Array(2*c);l(D);var G=new Array(512);l(G);var k=new Array(256);l(k);var Z=new Array(o);l(Z);var _e,Y,be,U=new Array(c);function K(x,P,te,ie,z){this.static_tree=x,this.extra_bits=P,this.extra_base=te,this.elems=ie,this.max_length=z,this.has_stree=x&&x.length}function N(x,P){this.dyn_tree=x,this.max_code=0,this.stat_desc=P}function j(x){return x<256?G[x]:G[256+(x>>>7)]}function me(x,P){x.pending_buf[x.pending++]=255&P,x.pending_buf[x.pending++]=P>>>8&255}function de(x,P,te){x.bi_valid>m-te?(x.bi_buf|=P<<x.bi_valid&65535,me(x,x.bi_buf),x.bi_buf=P>>m-x.bi_valid,x.bi_valid+=te-m):(x.bi_buf|=P<<x.bi_valid&65535,x.bi_valid+=te)}function he(x,P,te){de(x,te[2*P],te[2*P+1])}function Be(x,P){for(var te=0;te|=1&x,x>>>=1,te<<=1,0<--P;);return te>>>1}function je(x,P,te){var ie,z,ne=new Array(p+1),se=0;for(ie=1;ie<=p;ie++)ne[ie]=se=se+te[ie-1]<<1;for(z=0;z<=P;z++){var re=x[2*z+1];re!==0&&(x[2*z]=Be(ne[re]++,re))}}function Ie(x){var P;for(P=0;P<f;P++)x.dyn_ltree[2*P]=0;for(P=0;P<c;P++)x.dyn_dtree[2*P]=0;for(P=0;P<d;P++)x.bl_tree[2*P]=0;x.dyn_ltree[2*b]=1,x.opt_len=x.static_len=0,x.last_lit=x.matches=0}function Re(x){8<x.bi_valid?me(x,x.bi_buf):0<x.bi_valid&&(x.pending_buf[x.pending++]=x.bi_buf),x.bi_buf=0,x.bi_valid=0}function Pe(x,P,te,ie){var z=2*P,ne=2*te;return x[z]<x[ne]||x[z]===x[ne]&&ie[P]<=ie[te]}function ze(x,P,te){for(var ie=x.heap[te],z=te<<1;z<=x.heap_len&&(z<x.heap_len&&Pe(P,x.heap[z+1],x.heap[z],x.depth)&&z++,!Pe(P,ie,x.heap[z],x.depth));)x.heap[te]=x.heap[z],te=z,z<<=1;x.heap[te]=ie}function Ne(x,P,te){var ie,z,ne,se,re=0;if(x.last_lit!==0)for(;ie=x.pending_buf[x.d_buf+2*re]<<8|x.pending_buf[x.d_buf+2*re+1],z=x.pending_buf[x.l_buf+re],re++,ie===0?he(x,z,P):(he(x,(ne=k[z])+u+1,P),(se=M[ne])!==0&&de(x,z-=Z[ne],se),he(x,ne=j(--ie),te),(se=F[ne])!==0&&de(x,ie-=U[ne],se)),re<x.last_lit;);he(x,b,P)}function ce(x,P){var te,ie,z,ne=P.dyn_tree,se=P.stat_desc.static_tree,re=P.stat_desc.has_stree,pe=P.stat_desc.elems,ke=-1;for(x.heap_len=0,x.heap_max=h,te=0;te<pe;te++)ne[2*te]!==0?(x.heap[++x.heap_len]=ke=te,x.depth[te]=0):ne[2*te+1]=0;for(;x.heap_len<2;)ne[2*(z=x.heap[++x.heap_len]=ke<2?++ke:0)]=1,x.depth[z]=0,x.opt_len--,re&&(x.static_len-=se[2*z+1]);for(P.max_code=ke,te=x.heap_len>>1;1<=te;te--)ze(x,ne,te);for(z=pe;te=x.heap[1],x.heap[1]=x.heap[x.heap_len--],ze(x,ne,1),ie=x.heap[1],x.heap[--x.heap_max]=te,x.heap[--x.heap_max]=ie,ne[2*z]=ne[2*te]+ne[2*ie],x.depth[z]=(x.depth[te]>=x.depth[ie]?x.depth[te]:x.depth[ie])+1,ne[2*te+1]=ne[2*ie+1]=z,x.heap[1]=z++,ze(x,ne,1),2<=x.heap_len;);x.heap[--x.heap_max]=x.heap[1],function($e,De){var We,fe,Ee,xe,Fe,Ue,qe=De.dyn_tree,Ve=De.max_code,Qe=De.stat_desc.static_tree,le=De.stat_desc.has_stree,Ce=De.stat_desc.extra_bits,Ft=De.stat_desc.extra_base,ct=De.stat_desc.max_length,vt=0;for(xe=0;xe<=p;xe++)$e.bl_count[xe]=0;for(qe[2*$e.heap[$e.heap_max]+1]=0,We=$e.heap_max+1;We<h;We++)ct<(xe=qe[2*qe[2*(fe=$e.heap[We])+1]+1]+1)&&(xe=ct,vt++),qe[2*fe+1]=xe,Ve<fe||($e.bl_count[xe]++,Fe=0,Ft<=fe&&(Fe=Ce[fe-Ft]),Ue=qe[2*fe],$e.opt_len+=Ue*(xe+Fe),le&&($e.static_len+=Ue*(Qe[2*fe+1]+Fe)));if(vt!==0){do{for(xe=ct-1;$e.bl_count[xe]===0;)xe--;$e.bl_count[xe]--,$e.bl_count[xe+1]+=2,$e.bl_count[ct]--,vt-=2}while(0<vt);for(xe=ct;xe!==0;xe--)for(fe=$e.bl_count[xe];fe!==0;)Ve<(Ee=$e.heap[--We])||(qe[2*Ee+1]!==xe&&($e.opt_len+=(xe-qe[2*Ee+1])*qe[2*Ee],qe[2*Ee+1]=xe),fe--)}}(x,P),je(ne,ke,x.bl_count)}function g(x,P,te){var ie,z,ne=-1,se=P[1],re=0,pe=7,ke=4;for(se===0&&(pe=138,ke=3),P[2*(te+1)+1]=65535,ie=0;ie<=te;ie++)z=se,se=P[2*(ie+1)+1],++re<pe&&z===se||(re<ke?x.bl_tree[2*z]+=re:z!==0?(z!==ne&&x.bl_tree[2*z]++,x.bl_tree[2*y]++):re<=10?x.bl_tree[2*S]++:x.bl_tree[2*R]++,ne=z,ke=(re=0)===se?(pe=138,3):z===se?(pe=6,3):(pe=7,4))}function Q(x,P,te){var ie,z,ne=-1,se=P[1],re=0,pe=7,ke=4;for(se===0&&(pe=138,ke=3),ie=0;ie<=te;ie++)if(z=se,se=P[2*(ie+1)+1],!(++re<pe&&z===se)){if(re<ke)for(;he(x,z,x.bl_tree),--re!=0;);else z!==0?(z!==ne&&(he(x,z,x.bl_tree),re--),he(x,y,x.bl_tree),de(x,re-3,2)):re<=10?(he(x,S,x.bl_tree),de(x,re-3,3)):(he(x,R,x.bl_tree),de(x,re-11,7));ne=z,ke=(re=0)===se?(pe=138,3):z===se?(pe=6,3):(pe=7,4)}}l(U);var X=!1;function I(x,P,te,ie){de(x,(a<<1)+(ie?1:0),3),function(z,ne,se,re){Re(z),re&&(me(z,se),me(z,~se)),n.arraySet(z.pending_buf,z.window,ne,se,z.pending),z.pending+=se}(x,P,te,!0)}r._tr_init=function(x){X||(function(){var P,te,ie,z,ne,se=new Array(p+1);for(z=ie=0;z<o-1;z++)for(Z[z]=ie,P=0;P<1<<M[z];P++)k[ie++]=z;for(k[ie-1]=z,z=ne=0;z<16;z++)for(U[z]=ne,P=0;P<1<<F[z];P++)G[ne++]=z;for(ne>>=7;z<c;z++)for(U[z]=ne<<7,P=0;P<1<<F[z]-7;P++)G[256+ne++]=z;for(te=0;te<=p;te++)se[te]=0;for(P=0;P<=143;)ue[2*P+1]=8,P++,se[8]++;for(;P<=255;)ue[2*P+1]=9,P++,se[9]++;for(;P<=279;)ue[2*P+1]=7,P++,se[7]++;for(;P<=287;)ue[2*P+1]=8,P++,se[8]++;for(je(ue,f+1,se),P=0;P<c;P++)D[2*P+1]=5,D[2*P]=Be(P,5);_e=new K(ue,M,u+1,f,p),Y=new K(D,F,0,c,p),be=new K(new Array(0),L,0,d,_)}(),X=!0),x.l_desc=new N(x.dyn_ltree,_e),x.d_desc=new N(x.dyn_dtree,Y),x.bl_desc=new N(x.bl_tree,be),x.bi_buf=0,x.bi_valid=0,Ie(x)},r._tr_stored_block=I,r._tr_flush_block=function(x,P,te,ie){var z,ne,se=0;0<x.level?(x.strm.data_type===2&&(x.strm.data_type=function(re){var pe,ke=4093624447;for(pe=0;pe<=31;pe++,ke>>>=1)if(1&ke&&re.dyn_ltree[2*pe]!==0)return i;if(re.dyn_ltree[18]!==0||re.dyn_ltree[20]!==0||re.dyn_ltree[26]!==0)return s;for(pe=32;pe<u;pe++)if(re.dyn_ltree[2*pe]!==0)return s;return i}(x)),ce(x,x.l_desc),ce(x,x.d_desc),se=function(re){var pe;for(g(re,re.dyn_ltree,re.l_desc.max_code),g(re,re.dyn_dtree,re.d_desc.max_code),ce(re,re.bl_desc),pe=d-1;3<=pe&&re.bl_tree[2*V[pe]+1]===0;pe--);return re.opt_len+=3*(pe+1)+5+5+4,pe}(x),z=x.opt_len+3+7>>>3,(ne=x.static_len+3+7>>>3)<=z&&(z=ne)):z=ne=te+5,te+4<=z&&P!==-1?I(x,P,te,ie):x.strategy===4||ne===z?(de(x,2+(ie?1:0),3),Ne(x,ue,D)):(de(x,4+(ie?1:0),3),function(re,pe,ke,$e){var De;for(de(re,pe-257,5),de(re,ke-1,5),de(re,$e-4,4),De=0;De<$e;De++)de(re,re.bl_tree[2*V[De]+1],3);Q(re,re.dyn_ltree,pe-1),Q(re,re.dyn_dtree,ke-1)}(x,x.l_desc.max_code+1,x.d_desc.max_code+1,se+1),Ne(x,x.dyn_ltree,x.dyn_dtree)),Ie(x),ie&&Re(x)},r._tr_tally=function(x,P,te){return x.pending_buf[x.d_buf+2*x.last_lit]=P>>>8&255,x.pending_buf[x.d_buf+2*x.last_lit+1]=255&P,x.pending_buf[x.l_buf+x.last_lit]=255&te,x.last_lit++,P===0?x.dyn_ltree[2*te]++:(x.matches++,P--,x.dyn_ltree[2*(k[te]+u+1)]++,x.dyn_dtree[2*j(P)]++),x.last_lit===x.lit_bufsize-1},r._tr_align=function(x){de(x,2,3),he(x,b,ue),function(P){P.bi_valid===16?(me(P,P.bi_buf),P.bi_buf=0,P.bi_valid=0):8<=P.bi_valid&&(P.pending_buf[P.pending++]=255&P.bi_buf,P.bi_buf>>=8,P.bi_valid-=8)}(x)}},{"../utils/common":41}],53:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,r){(function(n){(function(i,s){"use strict";if(!i.setImmediate){var l,a,o,u,f=1,c={},d=!1,h=i.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(i);p=p&&p.setTimeout?p:i,l={}.toString.call(i.process)==="[object process]"?function(y){process.nextTick(function(){_(y)})}:function(){if(i.postMessage&&!i.importScripts){var y=!0,S=i.onmessage;return i.onmessage=function(){y=!1},i.postMessage("","*"),i.onmessage=S,y}}()?(u="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",b,!1):i.attachEvent("onmessage",b),function(y){i.postMessage(u+y,"*")}):i.MessageChannel?((o=new MessageChannel).port1.onmessage=function(y){_(y.data)},function(y){o.port2.postMessage(y)}):h&&"onreadystatechange"in h.createElement("script")?(a=h.documentElement,function(y){var S=h.createElement("script");S.onreadystatechange=function(){_(y),S.onreadystatechange=null,a.removeChild(S),S=null},a.appendChild(S)}):function(y){setTimeout(_,0,y)},p.setImmediate=function(y){typeof y!="function"&&(y=new Function(""+y));for(var S=new Array(arguments.length-1),R=0;R<S.length;R++)S[R]=arguments[R+1];var M={callback:y,args:S};return c[f]=M,l(f),f++},p.clearImmediate=m}function m(y){delete c[y]}function _(y){if(d)setTimeout(_,0,y);else{var S=c[y];if(S){d=!0;try{(function(R){var M=R.callback,F=R.args;switch(F.length){case 0:M();break;case 1:M(F[0]);break;case 2:M(F[0],F[1]);break;case 3:M(F[0],F[1],F[2]);break;default:M.apply(s,F)}})(S)}finally{m(y),d=!1}}}}function b(y){y.source===i&&typeof y.data=="string"&&y.data.indexOf(u)===0&&_(+y.data.slice(u.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var Ni=Wr(Gr());function oe(){}function qa(t){return t&&typeof t=="object"&&typeof t.then=="function"}function mn(t){return t()}function Xr(){return Object.create(null)}function lt(t){t.forEach(mn)}function Gt(t){return typeof t=="function"}function ye(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}var Ut;function Ge(t,e){return Ut||(Ut=document.createElement("a")),Ut.href=e,t===Ut.href}function Zr(t){return Object.keys(t).length===0}function Kr(t,...e){if(t==null)return oe;let r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function Vr(t,e,r){t.$$.on_destroy.push(Kr(e,r))}function Qr(t){return t&&Gt(t.destroy)?t.destroy:oe}var Jr=!1;function Wa(){Jr=!0}function Ha(){Jr=!1}function A(t,e){t.appendChild(e)}function E(t,e,r){t.insertBefore(e,r||null)}function T(t){t.parentNode.removeChild(t)}function ve(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function C(t){return document.createElement(t)}function Ga(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ae(t){return document.createTextNode(t)}function B(){return ae(" ")}function ge(){return ae("")}function Le(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function O(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function Xa(t){return Array.from(t.childNodes)}function Oe(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _n(t,e){t.value=e??""}function Me(t,e,r,n){r===null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function Ya(t,e,{bubbles:r=!1,cancelable:n=!1}={}){let i=document.createEvent("CustomEvent");return i.initCustomEvent(t,r,n,e),i}var Ke=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,r,n=null){this.e||(this.is_svg?this.e=Ga(r.nodeName):this.e=C(r.nodeName),this.t=r,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let r=0;r<this.n.length;r+=1)E(this.t,this.n[r],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(T)}};var Mt;function dt(t){Mt=t}function gn(){if(!Mt)throw new Error("Function called outside component initialization");return Mt}function bn(){let t=gn();return(e,r,{cancelable:n=!1}={})=>{let i=t.$$.callbacks[e];if(i){let s=Ya(e,r,{cancelable:n});return i.slice().forEach(l=>{l.call(t,s)}),!s.defaultPrevented}return!0}}function vn(t,e){return gn().$$.context.set(t,e),e}var Dt=[];var yt=[],Wt=[],Yr=[],Za=Promise.resolve(),hn=!1;function Ka(){hn||(hn=!0,Za.then(kn))}function pn(t){Wt.push(t)}var dn=new Set,qt=0;function kn(){let t=Mt;do{for(;qt<Dt.length;){let e=Dt[qt];qt++,dt(e),Va(e.$$)}for(dt(null),Dt.length=0,qt=0;yt.length;)yt.pop()();for(let e=0;e<Wt.length;e+=1){let r=Wt[e];dn.has(r)||(dn.add(r),r())}Wt.length=0}while(Dt.length);for(;Yr.length;)Yr.pop()();hn=!1,dn.clear(),dt(t)}function Va(t){if(t.fragment!==null){t.update(),lt(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(pn)}}var Ht=new Set,kt;function J(){kt={r:0,c:[],p:kt}}function ee(){kt.r||lt(kt.c),kt=kt.p}function v(t,e){t&&t.i&&(Ht.delete(t),t.i(e))}function w(t,e,r,n){if(t&&t.o){if(Ht.has(t))return;Ht.add(t),kt.c.push(()=>{Ht.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}function ei(t,e){let r=e.token={};function n(i,s,l,a){if(e.token!==r)return;e.resolved=a;let o=e.ctx;l!==void 0&&(o=o.slice(),o[l]=a);let u=i&&(e.current=i)(o),f=!1;e.block&&(e.blocks?e.blocks.forEach((c,d)=>{d!==s&&c&&(J(),w(c,1,1,()=>{e.blocks[d]===c&&(e.blocks[d]=null)}),ee())}):e.block.d(1),u.c(),v(u,1),u.m(e.mount(),e.anchor),f=!0),e.block=u,e.blocks&&(e.blocks[s]=u),f&&kn()}if(qa(t)){let i=gn();if(t.then(s=>{dt(i),n(e.then,1,e.value,s),dt(null)},s=>{if(dt(i),n(e.catch,2,e.error,s),dt(null),!e.hasCatch)throw s}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function ti(t,e,r){let n=e.slice(),{resolved:i}=t;t.current===t.then&&(n[t.value]=i),t.current===t.catch&&(n[t.error]=i),t.block.p(n,r)}var ni=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function ri(t,e){w(t,1,1,()=>{e.delete(t.key)})}function ii(t,e,r,n,i,s,l,a,o,u,f,c){let d=t.length,h=s.length,p=d,m={};for(;p--;)m[t[p].key]=p;let _=[],b=new Map,y=new Map;for(p=h;p--;){let F=c(i,s,p),L=r(F),V=l.get(L);V?n&&V.p(F,e):(V=u(L,F),V.c()),b.set(L,_[p]=V),L in m&&y.set(L,Math.abs(p-m[L]))}let S=new Set,R=new Set;function M(F){v(F,1),F.m(a,f),l.set(F.key,F),f=F.first,h--}for(;d&&h;){let F=_[h-1],L=t[d-1],V=F.key,ue=L.key;F===L?(f=F.first,d--,h--):b.has(ue)?!l.has(V)||S.has(V)?M(F):R.has(ue)?d--:y.get(V)>y.get(ue)?(R.add(V),M(F)):(S.add(ue),d--):(o(L,l),d--)}for(;d--;){let F=t[d];b.has(F.key)||o(F,l)}for(;h;)M(_[h-1]);return _}function H(t){t&&t.c()}function W(t,e,r,n){let{fragment:i,on_mount:s,on_destroy:l,after_update:a}=t.$$;i&&i.m(e,r),n||pn(()=>{let o=s.map(mn).filter(Gt);l?l.push(...o):lt(o),t.$$.on_mount=[]}),a.forEach(pn)}function q(t,e){let r=t.$$;r.fragment!==null&&(lt(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function Qa(t,e){t.$$.dirty[0]===-1&&(Dt.push(t),Ka(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Se(t,e,r,n,i,s,l,a=[-1]){let o=Mt;dt(t);let u=t.$$={fragment:null,ctx:null,props:s,update:oe,not_equal:i,bound:Xr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Xr(),dirty:a,skip_bound:!1,root:e.target||o.$$.root};l&&l(u.root);let f=!1;if(u.ctx=r?r(t,e.props||{},(c,d,...h)=>{let p=h.length?h[0]:d;return u.ctx&&i(u.ctx[c],u.ctx[c]=p)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](p),f&&Qa(t,c)),d}):[],u.update(),f=!0,lt(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){Wa();let c=Xa(e.target);u.fragment&&u.fragment.l(c),c.forEach(T)}else u.fragment&&u.fragment.c();e.intro&&v(t.$$.fragment),W(t,e.target,e.anchor,e.customElement),Ha(),kn()}dt(o)}var Ja;typeof HTMLElement=="function"&&(Ja=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(mn).filter(Gt);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,r){this[t]=r}disconnectedCallback(){lt(this.$$.on_disconnect)}$destroy(){q(this,1),this.$destroy=oe}$on(t,e){let r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{let n=r.indexOf(e);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!Zr(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var we=class{$destroy(){q(this,1),this.$destroy=oe}$on(e,r){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Zr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};function eu(t){let e,r,n,i,s;return r=new He({props:{s:t[0]}}),{c(){e=C("a"),H(r.$$.fragment),O(e,"href",n="##"+t[0]),O(e,"class",i=$.article(t[0])?"":"dead")},m(l,a){E(l,e,a),W(r,e,null),s=!0},p(l,a){let o={};a&1&&(o.s=l[0]),r.$set(o),(!s||a&1&&n!==(n="##"+l[0]))&&O(e,"href",n),(!s||a&1&&i!==(i=$.article(l[0])?"":"dead"))&&O(e,"class",i)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){w(r.$$.fragment,l),s=!1},d(l){l&&T(e),q(r)}}}function tu(t){let e,r;return{c(){e=C("em"),r=ae(t[0])},m(n,i){E(n,e,i),A(e,r)},p(n,i){i&1&&Oe(r,n[0])},i:oe,o:oe,d(n){n&&T(e)}}}function nu(t){let e,r,n,i,s,l=[tu,eu],a=[];function o(u,f){return f&1&&(e=null),e==null&&(e=!isNaN(parseFloat(u[0]))),e?0:1}return r=o(t,-1),n=a[r]=l[r](t),{c(){n.c(),i=ge()},m(u,f){a[r].m(u,f),E(u,i,f),s=!0},p(u,[f]){let c=r;r=o(u,f),r===c?a[r].p(u,f):(J(),w(a[c],1,1,()=>{a[c]=null}),ee(),n=a[r],n?n.p(u,f):(n=a[r]=l[r](u),n.c()),v(n,1),n.m(i.parentNode,i))},i(u){s||(v(n),s=!0)},o(u){w(n),s=!1},d(u){a[r].d(u),u&&T(i)}}}function ru(t,e,r){let{href:n}=e;return t.$$set=i=>{"href"in i&&r(0,n=i.href)},[n]}var yn=class extends we{constructor(e){super(),Se(this,e,ru,nu,ye,{href:0})}},wn=yn;function iu(t){let e,r;return e=new wn({props:{href:t[0]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.href=n[0]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function lu(t){let e,r,n,i,s;return r=new wn({props:{href:t[0]}}),{c(){e=C("span"),H(r.$$.fragment),n=C("sup"),n.textContent="?",O(n,"class","tipmark"),O(e,"tooltip",i="tip_"+t[0])},m(l,a){E(l,e,a),W(r,e,null),A(e,n),s=!0},p(l,a){let o={};a&1&&(o.href=l[0]),r.$set(o),(!s||a&1&&i!==(i="tip_"+l[0]))&&O(e,"tooltip",i)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){w(r.$$.fragment,l),s=!1},d(l){l&&T(e),q(r)}}}function su(t){let e,r,n,i,s=[lu,iu],l=[];function a(o,u){return"tip_"+o[0]in $.lang?0:1}return e=a(t,-1),r=l[e]=s[e](t),{c(){r.c(),n=ge()},m(o,u){l[e].m(o,u),E(o,n,u),i=!0},p(o,[u]){let f=e;e=a(o,u),e===f?l[e].p(o,u):(J(),w(l[f],1,1,()=>{l[f]=null}),ee(),r=l[e],r?r.p(o,u):(r=l[e]=s[e](o),r.c()),v(r,1),r.m(n.parentNode,n))},i(o){i||(v(r),i=!0)},o(o){w(r),i=!1},d(o){l[e].d(o),o&&T(n)}}}function ou(t,e,r){let{href:n}=e;return t.$$set=i=>{"href"in i&&r(0,n=i.href)},t.$$.update=()=>{if(t.$$.dirty&1){e:n&&n.type&&r(0,n=n.type)}},[n]}var Sn=class extends we{constructor(e){super(),Se(this,e,ou,su,ye,{href:0})}},Ze=Sn;var $t=[];function li(t,e=oe){let r,n=new Set;function i(a){if(ye(t,a)&&(t=a,r)){let o=!$t.length;for(let u of n)u[1](),$t.push(u,t);if(o){for(let u=0;u<$t.length;u+=2)$t[u][0]($t[u+1]);$t.length=0}}}function s(a){i(a(t))}function l(a,o=oe){let u=[a,o];return n.add(u),n.size===1&&(r=e(i)||oe),a(t),()=>{n.delete(u),n.size===0&&(r(),r=null)}}return{set:i,update:s,subscribe:l}}var wt=li(!1),Xt=!1;function Ct(t){Xt||wt.update(e=>t??!e)}function si(t){Xt=t??!Xt,wt.update(e=>Xt)}function au(t){let e,r;return{c(){e=new Ke(!1),r=ge(),e.a=r},m(n,i){e.m(t[0],n,i),E(n,r,i)},p(n,[i]){i&1&&e.p(n[0])},i:oe,o:oe,d(n){n&&T(r),n&&e.d()}}}function uu(t,e,r){let{s:n}=e,i=!1,s;return wt.subscribe(l=>r(2,i=l)),t.$$set=l=>{"s"in l&&r(1,n=l.s)},t.$$.update=()=>{if(t.$$.dirty&7){e:i?r(0,s=n):(r(0,s=$.tr(n)),r(0,s=s.replace(/^([\u1000-\uFFFF]+)/,"<div class='inem'>$1</div>")))}},[s,n,i]}var An=class extends we{constructor(e){super(),Se(this,e,uu,au,ye,{s:1})}},He=An;function fu(t){let e,r,n,i;return n=new He({props:{s:t[0]}}),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),O(r,"colspan","2"),O(r,"class","table-subheader")},m(s,l){E(s,e,l),A(e,r),W(n,r,null),i=!0},p(s,[l]){let a={};l&1&&(a.s=s[0]),n.$set(a)},i(s){i||(v(n.$$.fragment,s),i=!0)},o(s){w(n.$$.fragment,s),i=!1},d(s){s&&T(e),q(n)}}}function cu(t,e,r){let{text:n}=e;return t.$$set=i=>{"text"in i&&r(0,n=i.text)},[n]}var $n=class extends we{constructor(e){super(),Se(this,e,cu,fu,ye,{text:0})}},Cn=$n;function oi(t,e,r){let n=t.slice();return n[6]=e[r],n}function ai(t){let e,r,n,i,s,l,a=!t[2]&&ui(t),o=t[2]&&fi(t),u=[hu,du],f=[];function c(d,h){return d[1]?0:1}return n=c(t,-1),i=f[n]=u[n](t),{c(){a&&a.c(),e=B(),o&&o.c(),r=B(),i.c(),s=ge()},m(d,h){a&&a.m(d,h),E(d,e,h),o&&o.m(d,h),E(d,r,h),f[n].m(d,h),E(d,s,h),l=!0},p(d,h){d[2]?a&&(a.d(1),a=null):a?a.p(d,h):(a=ui(d),a.c(),a.m(e.parentNode,e)),d[2]?o?(o.p(d,h),h&4&&v(o,1)):(o=fi(d),o.c(),v(o,1),o.m(r.parentNode,r)):o&&(J(),w(o,1,1,()=>{o=null}),ee());let p=n;n=c(d,h),n===p?f[n].p(d,h):(J(),w(f[p],1,1,()=>{f[p]=null}),ee(),i=f[n],i?i.p(d,h):(i=f[n]=u[n](d),i.c()),v(i,1),i.m(s.parentNode,s))},i(d){l||(v(o),v(i),l=!0)},o(d){w(o),w(i),l=!1},d(d){a&&a.d(d),d&&T(e),o&&o.d(d),d&&T(r),f[n].d(d),d&&T(s)}}}function ui(t){let e,r,n,i,s,l;return{c(){e=C("div"),r=C("button"),n=ae("A-Z"),O(r,"style",i=t[3]?"":"text-decoration:line-through"),O(e,"class","links-page-button")},m(a,o){E(a,e,o),A(e,r),A(r,n),s||(l=Le(r,"click",t[5]),s=!0)},p(a,o){o&8&&i!==(i=a[3]?"":"text-decoration:line-through")&&O(r,"style",i)},d(a){a&&T(e),s=!1,l()}}}function fi(t){let e,r,n;return r=new Ae({props:{val:t[2]}}),{c(){e=C("div"),H(r.$$.fragment),O(e,"class","links-page-header")},m(i,s){E(i,e,s),W(r,e,null),n=!0},p(i,s){let l={};s&4&&(l.val=i[2]),r.$set(l)},i(i){n||(v(r.$$.fragment,i),n=!0)},o(i){w(r.$$.fragment,i),n=!1},d(i){i&&T(e),q(r)}}}function du(t){let e,r;return e=new Ye({props:{items:t[4],sorted:!1}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&16&&(s.items=n[4]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function hu(t){let e,r,n,i,s=t[4],l=[];for(let o=0;o<s.length;o+=1)l[o]=ci(oi(t,s,o));let a=o=>w(l[o],1,1,()=>{l[o]=null});return{c(){e=C("div"),r=C("div"),n=C("ol");for(let o=0;o<l.length;o+=1)l[o].c();O(r,"class","cols"),O(e,"class","links-page")},m(o,u){E(o,e,u),A(e,r),A(r,n);for(let f=0;f<l.length;f+=1)l[f].m(n,null);i=!0},p(o,u){if(u&16){s=o[4];let f;for(f=0;f<s.length;f+=1){let c=oi(o,s,f);l[f]?(l[f].p(c,u),v(l[f],1)):(l[f]=ci(c),l[f].c(),v(l[f],1),l[f].m(n,null))}for(J(),f=s.length;f<l.length;f+=1)a(f);ee()}},i(o){if(!i){for(let u=0;u<s.length;u+=1)v(l[u]);i=!0}},o(o){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)w(l[u]);i=!1},d(o){o&&T(e),ve(l,o)}}}function ci(t){let e,r,n,i;return r=new Ae({props:{val:t[6]}}),{c(){e=C("li"),H(r.$$.fragment),n=B()},m(s,l){E(s,e,l),W(r,e,null),A(e,n),i=!0},p(s,l){let a={};l&16&&(a.val=s[6]),r.$set(a)},i(s){i||(v(r.$$.fragment,s),i=!0)},o(s){w(r.$$.fragment,s),i=!1},d(s){s&&T(e),q(r)}}}function pu(t){let e,r,n=t[0]&&t[0].length>0&&ai(t);return{c(){n&&n.c(),e=ge()},m(i,s){n&&n.m(i,s),E(i,e,s),r=!0},p(i,[s]){i[0]&&i[0].length>0?n?(n.p(i,s),s&1&&v(n,1)):(n=ai(i),n.c(),v(n,1),n.m(e.parentNode,e)):n&&(J(),w(n,1,1,()=>{n=null}),ee())},i(i){r||(v(n),r=!0)},o(i){w(n),r=!1},d(i){n&&n.d(i),i&&T(e)}}}function mu(t,e,r){let{links:n}=e,{cols:i=!1}=e,{title:s=null}=e,l=!1,a,o=u=>r(3,l=!l);return t.$$set=u=>{"links"in u&&r(0,n=u.links),"cols"in u&&r(1,i=u.cols),"title"in u&&r(2,s=u.title)},t.$$.update=()=>{if(t.$$.dirty&9){e:r(4,a=l?n.slice().sort((u,f)=>Tt(u)>Tt(f)?1:-1):n)}},[n,i,s,l,a,o]}var Tn=class extends we{constructor(e){super(),Se(this,e,mu,pu,ye,{links:0,cols:1,title:2})}},pt=Tn;function di(t,e,r){let n=t.slice();return n[15]=e[r],n[9]=r,n}function hi(t,e,r){let n=t.slice();return n[7]=e[r],n[9]=r,n}function pi(t,e,r){let n=t.slice();return n[11]=e[r],n[13]=r,n}function mi(t,e,r){let n=t.slice();return n[7]=e[r],n[9]=r,n}function _i(t,e,r){let n=t.slice();return n[7]=e[r],n[9]=r,n}function _u(t){let e,r,n=t[5](t[0].map(Si)),i=[];for(let l=0;l<n.length;l+=1)i[l]=gi(di(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){e=C("span");for(let l=0;l<i.length;l+=1)i[l].c();O(e,"class","links-list")},m(l,a){E(l,e,a);for(let o=0;o<i.length;o+=1)i[o].m(e,null);r=!0},p(l,a){if(a&55){n=l[5](l[0].map(Si));let o;for(o=0;o<n.length;o+=1){let u=di(l,n,o);i[o]?(i[o].p(u,a),v(i[o],1)):(i[o]=gi(u),i[o].c(),v(i[o],1),i[o].m(e,null))}for(J(),o=n.length;o<i.length;o+=1)s(o);ee()}},i(l){if(!r){for(let a=0;a<n.length;a+=1)v(i[a]);r=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)w(i[a]);r=!1},d(l){l&&T(e),ve(i,l)}}}function gu(t){let e,r,n=t[5](Object.keys(t[0])),i=[];for(let l=0;l<n.length;l+=1)i[l]=bi(hi(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){e=C("span");for(let l=0;l<i.length;l+=1)i[l].c();O(e,"class","links-list")},m(l,a){E(l,e,a);for(let o=0;o<i.length;o+=1)i[o].m(e,null);r=!0},p(l,a){if(a&55){n=l[5](Object.keys(l[0]));let o;for(o=0;o<n.length;o+=1){let u=hi(l,n,o);i[o]?(i[o].p(u,a),v(i[o],1)):(i[o]=bi(u),i[o].c(),v(i[o],1),i[o].m(e,null))}for(J(),o=n.length;o<i.length;o+=1)s(o);ee()}},i(l){if(!r){for(let a=0;a<n.length;a+=1)v(i[a]);r=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)w(i[a]);r=!1},d(l){l&&T(e),ve(i,l)}}}function bu(t){let e,r,n=Object.keys(t[0]),i=[];for(let l=0;l<n.length;l+=1)i[l]=ki(pi(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=ge()},m(l,a){for(let o=0;o<i.length;o+=1)i[o].m(l,a);E(l,e,a),r=!0},p(l,a){if(a&17){n=Object.keys(l[0]);let o;for(o=0;o<n.length;o+=1){let u=pi(l,n,o);i[o]?(i[o].p(u,a),v(i[o],1)):(i[o]=ki(u),i[o].c(),v(i[o],1),i[o].m(e.parentNode,e))}for(J(),o=n.length;o<i.length;o+=1)s(o);ee()}},i(l){if(!r){for(let a=0;a<n.length;a+=1)v(i[a]);r=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)w(i[a]);r=!1},d(l){ve(i,l),l&&T(e)}}}function vu(t){let e,r,n=Object.keys(t[0]).sort(),i=[];for(let l=0;l<n.length;l+=1)i[l]=yi(mi(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){e=C("table");for(let l=0;l<i.length;l+=1)i[l].c();O(e,"class","number-table")},m(l,a){E(l,e,a);for(let o=0;o<i.length;o+=1)i[o].m(e,null);r=!0},p(l,a){if(a&1){n=Object.keys(l[0]).sort();let o;for(o=0;o<n.length;o+=1){let u=mi(l,n,o);i[o]?(i[o].p(u,a),v(i[o],1)):(i[o]=yi(u),i[o].c(),v(i[o],1),i[o].m(e,null))}for(J(),o=n.length;o<i.length;o+=1)s(o);ee()}},i(l){if(!r){for(let a=0;a<n.length;a+=1)v(i[a]);r=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)w(i[a]);r=!1},d(l){l&&T(e),ve(i,l)}}}function ku(t){let e,r,n,i=t[0],s=[];for(let a=0;a<i.length;a+=1)s[a]=wi(_i(t,i,a));let l=a=>w(s[a],1,1,()=>{s[a]=null});return{c(){e=C("div");for(let a=0;a<s.length;a+=1)s[a].c();O(e,"class","cols"),O(e,"style",r=`columns:${t[1]};`)},m(a,o){E(a,e,o);for(let u=0;u<s.length;u+=1)s[u].m(e,null);n=!0},p(a,o){if(o&1){i=a[0];let u;for(u=0;u<i.length;u+=1){let f=_i(a,i,u);s[u]?(s[u].p(f,o),v(s[u],1)):(s[u]=wi(f),s[u].c(),v(s[u],1),s[u].m(e,null))}for(J(),u=i.length;u<s.length;u+=1)l(u);ee()}(!n||o&2&&r!==(r=`columns:${a[1]};`))&&O(e,"style",r)},i(a){if(!n){for(let o=0;o<i.length;o+=1)v(s[o]);n=!0}},o(a){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)w(s[o]);n=!1},d(a){a&&T(e),ve(s,a)}}}function yu(t){let e;return{c(){e=ae("...")},m(r,n){E(r,e,n)},p:oe,i:oe,o:oe,d(r){r&&T(e)}}}function wu(t){let e=$.tr("NULL")+"",r;return{c(){r=ae(e)},m(n,i){E(n,r,i)},p:oe,i:oe,o:oe,d(n){n&&T(r)}}}function Su(t){let e,r=ut(t[9],{vertical:t[2],cols:t[1]})+"",n,i,s;return i=new Ze({props:{href:t[15]}}),{c(){e=new Ke(!1),n=ge(),H(i.$$.fragment),e.a=n},m(l,a){e.m(r,l,a),E(l,n,a),W(i,l,a),s=!0},p(l,a){(!s||a&6)&&r!==(r=ut(l[9],{vertical:l[2],cols:l[1]})+"")&&e.p(r);let o={};a&33&&(o.href=l[15]),i.$set(o)},i(l){s||(v(i.$$.fragment,l),s=!0)},o(l){w(i.$$.fragment,l),s=!1},d(l){l&&T(n),l&&e.d(),q(i,l)}}}function Au(t){let e,r;return e=new Ye({props:{items:t[15],depth:t[4]-1}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&33&&(s.items=n[15]),i&16&&(s.depth=n[4]-1),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function gi(t){let e,r,n,i,s,l=[Au,Su],a=[];function o(u,f){return f&33&&(e=null),e==null&&(e=!!Array.isArray(u[15])),e?0:1}return r=o(t,-1),n=a[r]=l[r](t),{c(){n.c(),i=ge()},m(u,f){a[r].m(u,f),E(u,i,f),s=!0},p(u,f){let c=r;r=o(u,f),r===c?a[r].p(u,f):(J(),w(a[c],1,1,()=>{a[c]=null}),ee(),n=a[r],n?n.p(u,f):(n=a[r]=l[r](u),n.c()),v(n,1),n.m(i.parentNode,i))},i(u){s||(v(n),s=!0)},o(u){w(n),s=!1},d(u){a[r].d(u),u&&T(i)}}}function bi(t){let e,r=ut(t[9],{vertical:t[2],cols:t[1]})+"",n,i,s,l,a,o;return s=new Ae({props:{val:t[0][t[7]],depth:t[4]-1}}),a=new Ze({props:{href:t[7]}}),{c(){e=new Ke(!1),n=ae("\u200F\u200F\u200E\u200E"),i=C("nobr"),H(s.$$.fragment),l=B(),H(a.$$.fragment),e.a=n},m(u,f){e.m(r,u,f),E(u,n,f),E(u,i,f),W(s,i,null),A(i,l),W(a,i,null),o=!0},p(u,f){(!o||f&6)&&r!==(r=ut(u[9],{vertical:u[2],cols:u[1]})+"")&&e.p(r);let c={};f&33&&(c.val=u[0][u[7]]),f&16&&(c.depth=u[4]-1),s.$set(c);let d={};f&33&&(d.href=u[7]),a.$set(d)},i(u){o||(v(s.$$.fragment,u),v(a.$$.fragment,u),o=!0)},o(u){w(s.$$.fragment,u),w(a.$$.fragment,u),o=!1},d(u){u&&e.d(),u&&T(n),u&&T(i),q(s),q(a)}}}function vi(t){let e,r,n;return e=new Ae({props:{val:t[11],depth:t[4]-1}}),{c(){H(e.$$.fragment),r=ae(" :")},m(i,s){W(e,i,s),E(i,r,s),n=!0},p(i,s){let l={};s&1&&(l.val=i[11]),s&16&&(l.depth=i[4]-1),e.$set(l)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){w(e.$$.fragment,i),n=!1},d(i){q(e,i),i&&T(r)}}}function ki(t){let e,r=!Array.isArray(t[0]),n,i,s,l,a,o=r&&vi(t);return i=new Ae({props:{val:t[0][t[11]],depth:t[4]-1}}),{c(){e=C("div"),o&&o.c(),n=B(),H(i.$$.fragment),s=B(),O(e,"class",l=t[13]>0&&"top-border")},m(u,f){E(u,e,f),o&&o.m(e,null),A(e,n),W(i,e,null),A(e,s),a=!0},p(u,f){f&1&&(r=!Array.isArray(u[0])),r?o?(o.p(u,f),f&1&&v(o,1)):(o=vi(u),o.c(),v(o,1),o.m(e,n)):o&&(J(),w(o,1,1,()=>{o=null}),ee());let c={};f&1&&(c.val=u[0][u[11]]),f&16&&(c.depth=u[4]-1),i.$set(c)},i(u){a||(v(o),v(i.$$.fragment,u),a=!0)},o(u){w(o),w(i.$$.fragment,u),a=!1},d(u){u&&T(e),o&&o.d(),q(i)}}}function yi(t){let e,r,n,i,s,l,a,o,u;return n=new Ze({props:{href:t[7]}}),a=new Ze({props:{href:t[0][t[7]]}}),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=B(),s=C("td"),l=C("em"),H(a.$$.fragment),o=B()},m(f,c){E(f,e,c),A(e,r),W(n,r,null),A(e,i),A(e,s),A(s,l),W(a,l,null),A(e,o),u=!0},p(f,c){let d={};c&1&&(d.href=f[7]),n.$set(d);let h={};c&1&&(h.href=f[0][f[7]]),a.$set(h)},i(f){u||(v(n.$$.fragment,f),v(a.$$.fragment,f),u=!0)},o(f){w(n.$$.fragment,f),w(a.$$.fragment,f),u=!1},d(f){f&&T(e),q(n),q(a)}}}function wi(t){let e,r,n;return r=new Ze({props:{href:t[7]}}),{c(){e=C("div"),H(r.$$.fragment)},m(i,s){E(i,e,s),W(r,e,null),n=!0},p(i,s){let l={};s&1&&(l.href=i[7]),r.$set(l)},i(i){n||(v(r.$$.fragment,i),n=!0)},o(i){w(r.$$.fragment,i),n=!1},d(i){i&&T(e),q(r)}}}function $u(t){let e,r,n,i,s,l=[wu,yu,ku,vu,bu,gu,_u],a=[];function o(u,f){return f&1&&(e=null),u[0]==null?0:u[4]==0?1:u[1]?2:u[3]?3:(e==null&&(e=!!(Object.values(u[0])||[]).some(Cu)),e?4:u[0].length==null?5:6)}return r=o(t,-1),n=a[r]=l[r](t),{c(){n.c(),i=ge()},m(u,f){a[r].m(u,f),E(u,i,f),s=!0},p(u,[f]){let c=r;r=o(u,f),r===c?a[r].p(u,f):(J(),w(a[c],1,1,()=>{a[c]=null}),ee(),n=a[r],n?n.p(u,f):(n=a[r]=l[r](u),n.c()),v(n,1),n.m(i.parentNode,i))},i(u){s||(v(n),s=!0)},o(u){w(n),s=!1},d(u){a[r].d(u),u&&T(i)}}}var Cu=t=>typeof t=="object",Si=t=>t?.type||t;function Tu(t,e,r){let{items:n}=e,{cols:i=0}=e,{vertical:s=!1}=e,{numberTable:l=!1}=e,{depth:a=2}=e,{sorted:o=!1}=e,u;return t.$$set=f=>{"items"in f&&r(0,n=f.items),"cols"in f&&r(1,i=f.cols),"vertical"in f&&r(2,s=f.vertical),"numberTable"in f&&r(3,l=f.numberTable),"depth"in f&&r(4,a=f.depth),"sorted"in f&&r(6,o=f.sorted)},t.$$.update=()=>{if(t.$$.dirty&65){e:n instanceof Set&&r(0,n=[...n]),r(5,u=o?f=>$.sortStrings(f):f=>f)}},[n,i,s,l,a,u,o]}var En=class extends we{constructor(e){super(),Se(this,e,Tu,$u,ye,{items:0,cols:1,vertical:2,numberTable:3,depth:4,sorted:6})}},Ye=En;function Eu(t){let e,r;return e=new He({props:{s:t[0]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.s=n[0]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function xu(t){let e,r,n,i,s;return r=new He({props:{s:t[0]}}),{c(){e=C("span"),H(r.$$.fragment),n=C("sup"),n.textContent="?",O(n,"class","tipmark"),O(e,"tooltip",i="tip_"+t[0])},m(l,a){E(l,e,a),W(r,e,null),A(e,n),s=!0},p(l,a){let o={};a&1&&(o.s=l[0]),r.$set(o),(!s||a&1&&i!==(i="tip_"+l[0]))&&O(e,"tooltip",i)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){w(r.$$.fragment,l),s=!1},d(l){l&&T(e),q(r)}}}function Ou(t){let e,r;return{c(){e=C("img"),Ge(e.src,r=$.sprite(t[0]))||O(e,"src",r),O(e,"alt",t[0]),Me(e,"max-width","320px")},m(n,i){E(n,e,i)},p(n,i){i&1&&!Ge(e.src,r=$.sprite(n[0]))&&O(e,"src",r),i&1&&O(e,"alt",n[0])},i:oe,o:oe,d(n){n&&T(e)}}}function Iu(t){let e,r;return e=new Ze({props:{href:t[0]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.href=n[0]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Fu(t){let e,r=t[0].toLocaleString()+"",n;return{c(){e=C("em"),n=ae(r),O(e,"class","num")},m(i,s){E(i,e,s),A(e,n)},p(i,s){s&1&&r!==(r=i[0].toLocaleString()+"")&&Oe(n,r)},i:oe,o:oe,d(i){i&&T(e)}}}function Ru(t){let e,r,n;return r=new He({props:{s:t[0].toString()}}),{c(){e=C("span"),H(r.$$.fragment),Me(e,"color",t[0]?"lime":"red")},m(i,s){E(i,e,s),W(r,e,null),n=!0},p(i,s){let l={};s&1&&(l.s=i[0].toString()),r.$set(l),(!n||s&1)&&Me(e,"color",i[0]?"lime":"red")},i(i){n||(v(r.$$.fragment,i),n=!0)},o(i){w(r.$$.fragment,i),n=!1},d(i){i&&T(e),q(r)}}}function Du(t){let e,r;return e=new Ye({props:{items:t[0]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[0]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Mu(t){let e,r;return e=new Ye({props:{items:t[0],vertical:!1}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[0]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Nu(t){let e;return{c(){e=ae("...")},m(r,n){E(r,e,n)},p:oe,i:oe,o:oe,d(r){r&&T(e)}}}function Lu(t){let e,r,n,i,s,l,a,o,u=[Nu,Mu,Du,Ru,Fu,Iu,Ou,xu,Eu],f=[];function c(d,h){return h&1&&(e=null),h&1&&(r=null),h&1&&(n=null),h&1&&(i=null),d[1]==0?0:(e==null&&(e=!!Array.isArray(d[0])),e?1:d[0]instanceof Object?2:d[0]===!0||d[0]===!1?3:(r==null&&(r=!isNaN(+d[0])),r?4:(n==null&&(n=!!$.article(d[0])),n?5:(i==null&&(i=!!$.sprite(d[0],!0)),i?6:"tip_"+d[0]in $.lang?7:8))))}return s=c(t,-1),l=f[s]=u[s](t),{c(){l.c(),a=ge()},m(d,h){f[s].m(d,h),E(d,a,h),o=!0},p(d,[h]){let p=s;s=c(d,h),s===p?f[s].p(d,h):(J(),w(f[p],1,1,()=>{f[p]=null}),ee(),l=f[s],l?l.p(d,h):(l=f[s]=u[s](d),l.c()),v(l,1),l.m(a.parentNode,a))},i(d){o||(v(l),o=!0)},o(d){w(l),o=!1},d(d){f[s].d(d),d&&T(a)}}}function Bu(t,e,r){let{val:n}=e,{depth:i=2}=e;return t.$$set=s=>{"val"in s&&r(0,n=s.val),"depth"in s&&r(1,i=s.depth)},[n,i]}var xn=class extends we{constructor(e){super(),Se(this,e,Bu,Lu,ye,{val:0,depth:1})}},Ae=xn;function Ai(t,e,r){let n=t.slice();return n[2]=e[r],n[4]=r,n}function $i(t){let e,r=t[4]==0?"":t[1]?"</br>":", ",n,i,s;return i=new Ze({props:{href:t[2]}}),{c(){e=new Ke(!1),n=B(),H(i.$$.fragment),e.a=n},m(l,a){e.m(r,l,a),E(l,n,a),W(i,l,a),s=!0},p(l,a){(!s||a&2)&&r!==(r=l[4]==0?"":l[1]?"</br>":", ")&&e.p(r);let o={};a&1&&(o.href=l[2]),i.$set(o)},i(l){s||(v(i.$$.fragment,l),s=!0)},o(l){w(i.$$.fragment,l),s=!1},d(l){l&&e.d(),l&&T(n),q(i,l)}}}function zu(t){let e,r,n=t[0],i=[];for(let l=0;l<n.length;l+=1)i[l]=$i(Ai(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=ge()},m(l,a){for(let o=0;o<i.length;o+=1)i[o].m(l,a);E(l,e,a),r=!0},p(l,[a]){if(a&3){n=l[0];let o;for(o=0;o<n.length;o+=1){let u=Ai(l,n,o);i[o]?(i[o].p(u,a),v(i[o],1)):(i[o]=$i(u),i[o].c(),v(i[o],1),i[o].m(e.parentNode,e))}for(J(),o=n.length;o<i.length;o+=1)s(o);ee()}},i(l){if(!r){for(let a=0;a<n.length;a+=1)v(i[a]);r=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)w(i[a]);r=!1},d(l){ve(i,l),l&&T(e)}}}function Pu(t,e,r){let{items:n}=e,{vertical:i=!1}=e;return t.$$set=s=>{"items"in s&&r(0,n=s.items),"vertical"in s&&r(1,i=s.vertical)},[n,i]}var On=class extends we{constructor(e){super(),Se(this,e,Pu,zu,ye,{items:0,vertical:1})}},In=On;function Ci(t,e,r){let n=t.slice();return n[4]=e[r],n[6]=r,n}function Ti(t){let e;return{c(){e=ae("+")},m(r,n){E(r,e,n)},d(r){r&&T(e)}}}function ju(t){let e=" +",r;return{c(){r=ae(e)},m(n,i){E(n,r,i)},d(n){n&&T(r)}}}function Uu(t){let e,r=$.tr(t[4][0])+"",n,i,s=t[4][1]!=1?`\xD7<em>${t[4][1]}</em>`:"";return{c(){e=C("nobr"),n=ae(r),i=new Ke(!1),i.a=null},m(l,a){E(l,e,a),A(e,n),i.m(s,e)},p(l,a){a&2&&r!==(r=$.tr(l[4][0])+"")&&Oe(n,r),a&2&&s!==(s=l[4][1]!=1?`\xD7<em>${l[4][1]}</em>`:"")&&i.p(s)},d(l){l&&T(e)}}}function qu(t){let e=t[4][1]+"",r;return{c(){r=ae(e)},m(n,i){E(n,r,i)},p(n,i){i&2&&e!==(e=n[4][1]+"")&&Oe(r,e)},d(n){n&&T(r)}}}function Wu(t){let e=t[4][1]*100+"",r;return{c(){r=ae(e)},m(n,i){E(n,r,i)},p(n,i){i&2&&e!==(e=n[4][1]*100+"")&&Oe(r,e)},d(n){n&&T(r)}}}function Ei(t){let e,r,n=t[6]!=0&&ju(t);function i(a,o){return a[4][0]=="flatHundred"?Wu:a[4][0]=="flatOne"?qu:Uu}let s=i(t,-1),l=s(t);return{c(){n&&n.c(),e=B(),l.c(),r=ge()},m(a,o){n&&n.m(a,o),E(a,e,o),l.m(a,o),E(a,r,o)},p(a,o){s===(s=i(a,o))&&l?l.p(a,o):(l.d(1),l=s(a),l&&(l.c(),l.m(r.parentNode,r)))},d(a){n&&n.d(a),a&&T(e),l.d(a),a&&T(r)}}}function Hu(t){let e,r,n=t[1].length>0&&t[0]&&Ti(t),i=t[1],s=[];for(let l=0;l<i.length;l+=1)s[l]=Ei(Ci(t,i,l));return{c(){n&&n.c(),e=B();for(let l=0;l<s.length;l+=1)s[l].c();r=ge()},m(l,a){n&&n.m(l,a),E(l,e,a);for(let o=0;o<s.length;o+=1)s[o].m(l,a);E(l,r,a)},p(l,[a]){if(l[1].length>0&&l[0]?n||(n=Ti(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),a&2){i=l[1];let o;for(o=0;o<i.length;o+=1){let u=Ci(l,i,o);s[o]?s[o].p(u,a):(s[o]=Ei(u),s[o].c(),s[o].m(r.parentNode,r))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}},i:oe,o:oe,d(l){n&&n.d(l),l&&T(e),ve(s,l),l&&T(r)}}}function Gu(t,e,r){let{bonus:n}=e,{plus:i=!1}=e;function s(a){if(!a)return[];let o=[];for(let u of Object.keys(a))if(a[u].length)for(let f in a[u]){let c=a[u][f];c!=0&&(f=f*1+1,o.push([$.tr(u)+(f==1?"":"<sup>"+f+"</sup>"),c]))}else a[u]!=0&&o.push([u,a[u]]);return o=o.sort((u,f)=>u[0]=="flatHundred"||u[0]=="flatOne"||u[0]<f[0]?-1:1),o}let l;return t.$$set=a=>{"bonus"in a&&r(2,n=a.bonus),"plus"in a&&r(0,i=a.plus)},t.$$.update=()=>{if(t.$$.dirty&4){e:r(1,l=s(n))}},[i,l,n]}var Fn=class extends we{constructor(e){super(),Se(this,e,Gu,Hu,ye,{bonus:2,plus:0})}},mt=Fn;function xi(t,e,r){let n=t.slice();return n[5]=e[r][0],n[6]=e[r][1],n}function Xu(t){let e,r,n,i=$.tr(t[1])+"",s,l,a=$.tr(t[2])+"",o,u,f,c=t[3].all,d=[];for(let p=0;p<c.length;p+=1)d[p]=Ii(xi(t,c,p));let h=p=>w(d[p],1,1,()=>{d[p]=null});return{c(){e=C("table"),r=C("tr"),n=C("td"),s=ae(i),l=B(),o=ae(a),u=B();for(let p=0;p<d.length;p+=1)d[p].c();O(n,"colspan","2"),O(n,"class","table-header"),O(e,"class","main-table")},m(p,m){E(p,e,m),A(e,r),A(r,n),A(n,s),A(n,l),A(n,o),A(e,u);for(let _=0;_<d.length;_+=1)d[_].m(e,null);f=!0},p(p,m){if((!f||m&2)&&i!==(i=$.tr(p[1])+"")&&Oe(s,i),(!f||m&4)&&a!==(a=$.tr(p[2])+"")&&Oe(o,a),m&8){c=p[3].all;let _;for(_=0;_<c.length;_+=1){let b=xi(p,c,_);d[_]?(d[_].p(b,m),v(d[_],1)):(d[_]=Ii(b),d[_].c(),v(d[_],1),d[_].m(e,null))}for(J(),_=c.length;_<d.length;_+=1)h(_);ee()}},i(p){if(!f){for(let m=0;m<c.length;m+=1)v(d[m]);f=!0}},o(p){d=d.filter(Boolean);for(let m=0;m<d.length;m+=1)w(d[m]);f=!1},d(p){p&&T(e),ve(d,p)}}}function Yu(t){let e;return{c(){e=ae("NULL")},m(r,n){E(r,e,n)},p:oe,i:oe,o:oe,d(r){r&&T(e)}}}function Oi(t){let e,r,n,i,s,l,a;return n=new Ae({props:{val:t[5]}}),s=new Ae({props:{val:t[6]}}),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=C("td"),H(s.$$.fragment),l=B()},m(o,u){E(o,e,u),A(e,r),W(n,r,null),A(e,i),W(s,i,null),A(e,l),a=!0},p(o,u){let f={};u&8&&(f.val=o[5]),n.$set(f);let c={};u&8&&(c.val=o[6]),s.$set(c)},i(o){a||(v(n.$$.fragment,o),v(s.$$.fragment,o),a=!0)},o(o){w(n.$$.fragment,o),w(s.$$.fragment,o),a=!1},d(o){o&&T(e),q(n),q(s)}}}function Ii(t){let e,r,n=t[6]!=[]&&Oi(t);return{c(){n&&n.c(),e=ge()},m(i,s){n&&n.m(i,s),E(i,e,s),r=!0},p(i,s){i[6]!=[]?n?(n.p(i,s),s&8&&v(n,1)):(n=Oi(i),n.c(),v(n,1),n.m(e.parentNode,e)):n&&(J(),w(n,1,1,()=>{n=null}),ee())},i(i){r||(v(n),r=!0)},o(i){w(n),r=!1},d(i){n&&n.d(i),i&&T(e)}}}function Zu(t){let e,r,n,i,s=[Yu,Xu],l=[];function a(o,u){return o[0]==null?0:1}return e=a(t,-1),r=l[e]=s[e](t),{c(){r.c(),n=ge()},m(o,u){l[e].m(o,u),E(o,n,u),i=!0},p(o,[u]){let f=e;e=a(o,u),e===f?l[e].p(o,u):(J(),w(l[f],1,1,()=>{l[f]=null}),ee(),r=l[e],r?r.p(o,u):(r=l[e]=s[e](o),r.c()),v(r,1),r.m(n.parentNode,n))},i(o){i||(v(r),i=!0)},o(o){w(r),i=!1},d(o){l[e].d(o),o&&T(n)}}}function Ku(t,e,r){let{item:n}=e,{sort:i={}}=e,{title:s}=e,{subtitle:l=""}=e,a;return t.$$set=o=>{"item"in o&&r(0,n=o.item),"sort"in o&&r(4,i=o.sort),"title"in o&&r(1,s=o.title),"subtitle"in o&&r(2,l=o.subtitle)},t.$$.update=()=>{if(t.$$.dirty&17){e:console.log(n),i.exclude||r(4,i.exclude=["type","name"],i),r(3,a=Xe(n,i))}},[n,s,l,a,i]}var Rn=class extends we{constructor(e){super(),Se(this,e,Ku,Zu,ye,{item:0,sort:4,title:1,subtitle:2})}},at=Rn;function Fi(t){let e,r=t[0],n,i=Ri(t);return{c(){e=C("a"),i.c(),O(e,"href",n=$.sprite(t[0])),O(e,"class","illustration")},m(s,l){E(s,e,l),i.m(e,null)},p(s,l){l&1&&ye(r,r=s[0])?(i.d(1),i=Ri(s),i.c(),i.m(e,null)):i.p(s,l),l&1&&n!==(n=$.sprite(s[0]))&&O(e,"href",n)},d(s){s&&T(e),i.d(s)}}}function Ri(t){let e,r,n,i,s,l;return{c(){e=C("img"),O(e,"style",r=t[2]+(t[1]?"float:left":"")),O(e,"alt",n=t[0]||""),Ge(e.src,i=$.sprite(t[0]))||O(e,"src",i)},m(a,o){E(a,e,o),s||(l=[Le(e,"load",t[4]),Le(e,"error",t[5])],s=!0)},p(a,o){o&6&&r!==(r=a[2]+(a[1]?"float:left":""))&&O(e,"style",r),o&1&&n!==(n=a[0]||"")&&O(e,"alt",n),o&1&&!Ge(e.src,i=$.sprite(a[0]))&&O(e,"src",i)},d(a){a&&T(e),s=!1,lt(l)}}}function Vu(t){let e=t[0]&&$.sprite(t[0]),r,n=e&&Fi(t);return{c(){n&&n.c(),r=ge()},m(i,s){n&&n.m(i,s),E(i,r,s)},p(i,[s]){s&1&&(e=i[0]&&$.sprite(i[0])),e?n?n.p(i,s):(n=Fi(i),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},i:oe,o:oe,d(i){n&&n.d(i),i&&T(r)}}}function Qu(t,e,r){let{id:n}=e,{left:i=!1}=e,{style:s=""}=e;function l(u){u.onerror=null,u.src=_t,u.style.border="none"}console.log(n);let a=u=>(u.target,void 0),o=u=>l(u.target);return t.$$set=u=>{"id"in u&&r(0,n=u.id),"left"in u&&r(1,i=u.left),"style"in u&&r(2,s=u.style)},[n,i,s,l,a,o]}var Dn=class extends we{constructor(e){super(),Se(this,e,Qu,Vu,ye,{id:0,left:1,style:2})}},Mn=Dn;var Tt=t=>$.tr(t),ut=(t,{vertical:e,cols:r}={vertical:!1,cols:0})=>t==0?"":e?"</br>":`<span class='list-divider'>&nbsp\xB7${t%(r||1)?"&nbsp":" "}</span>`,_t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNv1OCegAAAANSURBVBhXY/j//z8DAAj8Av6IXwbgAAAAAElFTkSuQmCC",Nn="alien.png";var $;function Di(t,e,r,n){if(!!e)for(let i of e){let s=r[i];!s||(s[n]=s[n]||[],s[n].push(t))}}function Ln(t,e){if(t!=null)return e?e.map(r=>t[r]!=null?[r,t[r]]:null).filter(r=>r!=null):[]}function Xe(t,e={}){if(t==null)return{all:[]};let r=Ln(t,e.first),n=Ln(t,e.last),i=Ln(t,e.exclude),s=new Set([...e.first||[],...e.last||[],...e.exclude||[]]),l=Object.entries(t).filter(([o,u])=>!s.has(o));l=l.sort((o,u)=>o[0]>u[0]?1:-1);let a=[...r,...l.sort((o,u)=>o[0]>u[0]?1:-1),...n];return{first:r,misc:l,last:n,exclude:i,all:a}}var Bn=class{constructor(){this.articles=new Ni.default;for(let e of Object.values($.articles)){let r=["id","type","trTitle","text"].map(n=>(e[n]||"").toLowerCase()).join(" ");this.articles.indexDocument(e.id,r)}}async findArticles(e){return this.articles.search(e)}},zn=class{constructor(e){if(Object.assign(this,e),$.manufacture[this.name]=this,this.requires)for(let r of this.requires){let n=$.research[r];!n||(n.manufacture||(n.manufacture=[]),n.manufacture.push(this.name))}if(this.producedItems)for(let r of Object.keys(this.producedItems)){let n=$.items[r];!n||(n.manufacture||(n.manufacture={}),n.manufacture[this.name]=this.producedItems[r])}if(this.requiredItems)for(let r of Object.keys(this.requiredItems)){let n=$.items[r];!n||(n.componentOf||(n.componentOf={}),n.componentOf[this.name]=this.requiredItems[r])}if(this.randomProducedItems){this.chanceSum=0;for(let r of this.randomProducedItems)this.chanceSum+=r[0]}ot.add("allowsManufacture",this.name,this.requiresBaseFunc),tt.create({id:this.name,section:"MANUFACTURE",type_id:"MANUFACTURE"})}},Pn=class{constructor(e){Object.assign(this,e),$.soldierBonuses[this.name]=this}},jn=class{constructor(e){this.blocksTransformations=[];Object.assign(this,e),$.soldierTransformation[this.name]=this,tt.create({id:this.name,section:"TRANSFORMATIONS",type_id:"TRANSFORMATIONS"})}},Un=class{constructor(e){Object.assign(this,e),$.soldiers[this.type]=this,tt.create({id:this.type,section:"SOLDIERS",type_id:"SOLDIERS"})}},qn=class{constructor(e){Object.assign(this,e),$.races[this.id]=this,tt.create({id:this.id,section:"RACES",type_id:"RACES"})}},Wn=class{constructor(e){Object.assign(this,e),$.commendations[this.type]=this,this.killCriteria&&(this.killCriteria=this.killCriteria.flat(2))}},Hn=class{constructor(e){Object.assign(this,e),$.research[this.name]=this,ot.add("allowsResearching",this.name,this.requiresBaseFunc),tt.create({id:this.name,section:"RESEARCH",type_id:"RESEARCH"})}},Gn=class{constructor(e){this.relatedScripts=[];Object.assign(this,e),tt.create({id:this.name,type_id:"EVENTS",section:"EVENTS"}),$.events[this.name]=this}},Xn=class{constructor(e){Object.assign(this,e),tt.create({id:this.type,type_id:"EVENTSCRIPTS",section:"EVENTSCRIPTS"}),$.eventScripts[this.type]=this;let r=new Set([...Object.values(this.eventWeights||[]).map(n=>Object.keys(n)).flat(),...Object.keys(this.oneTimeRandomEvents||{})]);this.relatedEvents=[...r];for(let n of r)$.events[n]&&$.events[n].relatedScripts.push(this.type)}},ot=class{constructor(e){this.id=e;tt.create({id:e,type_id:"SERVICES",section:"SERVICES"})}static add(e,r,n){if(n)for(let i of n)i in $.baseServices||($.baseServices[i]=new ot(i)),e in $.baseServices[i]||($.baseServices[i][e]=[]),$.baseServices[i][e].push(r)}},Yn=class{constructor(e){Object.assign(this,e),$.alienDeployments[this.type]=this;let r=$.startingConditions[this.startingCondition];r&&r.deployments.push(this.type)}},Zn=class{constructor(e){Object.assign(this,e),$.craftWeapons[this.type]=this,ot.add("canBuy",this.type,this.requiresBuyBaseFunc),this.weaponType==null&&(this.weaponType="0"),this.weaponType="weapon_type_"+this.weaponType,$.addCategory(this.weaponType,this.type)}},Kn=class{constructor(e){this.startingConditions=[];if(Object.assign(this,e),$.crafts[this.type]=this,this.weaponTypes)for(let r of this.weaponTypes.flat())$.addCategory("weapon_type_"+r,this.type);tt.create({id:this.type,type_id:"CRAFT_WEAPONS",section:"CRAFT_WEAPONS"})}},Vn=class{constructor(e){Object.assign(this,e),$.ufos[this.type]=this}},Qn=class{constructor(e){Object.assign(this,e),$.facilities[this.type]=this,ot.add("providedBy",this.type,this.provideBaseFunc),ot.add("allowsBuilding",this.type,this.requiresBaseFunc),ot.add("forbidsBuilding",this.type,this.forbiddenBaseFunc),this.aliens&&ot.add("providedBy",this.type,[`prisonType${this.prisonType||1}`])}},Jn=class{constructor(e){this.allowedCraft=[];this.allowedItemCategories=[];this.allowedArmors=[];this.allowedVehicles=[];this.deployments=[];Object.assign(this,e),$.startingConditions[this.type]=this,$.lang[this.type]=$.tr(this.type.substr(11));for(let r of this.allowedCraft)$.crafts[r].startingConditions.push(this.type);tt.create({id:this.type,section:"CONDITIONS",type_id:"CONDITIONS"})}};var er=class{constructor(e){Object.assign(this,e),$.units[this.type]=this;let r=$.armors[e.armor];if(r&&(r.users=r.users||[],r.users.push(this.type)),this.builtInWeaponSets){let n=new Set(this.builtInWeaponSets.flat());for(let i of n){let s=$.items[i];s&&(s.heldBy=s.heldBy||new Set,s.heldBy.add(this.type))}}}},Ju={snap:15,auto:7,aimed:200},tr=class{constructor(e,r){this.mode=r;this.possible=!1;this.flatTime=!1;this.shots=1;this.pellets=1;let n=r.charAt(0).toUpperCase()+r.substr(1),i=r=="ammo"&&e.battleType==2||r=="melee"&&e.battleType==3||r=="psi"&&e.battleType==9||r=="throw"&&[4,5].includes(e.battleType);if(r=="throw"&&!i||!(e["accuracy"+n]||e["cost"+n]||i))return null;e.type=="STR_THROWING_HAMMER"&&(console.log(e),console.log(r)),r=="melee"&&e.battleType!=3?(this.damage=e.meleePower,this.damageBonus=e.meleeBonus,this.damageType=e.meleeType):e.compatibleAmmo||(this.damage=e.power,this.damageBonus=e.damageBonus,this.damageType=e.damageType),this.pellets=e.shotgunPellets||1,this.shots=r=="auto"?e.autoShots||3:1,this.name=r.substr(0,1).toUpperCase()+r.substr(1);let l="conf"+this.name;if(l in e){let a=e[l];a.name&&(this.name=$.str(a.name)),a.shots&&(this.shots=a.shots),delete e[l]}if(e[r+"AttackName"]&&(this.name=$.str(e[r+"AttackName"])),r=="melee"&&(this.alter=e.meleeAlter),(e.battleType==3||r!="melee")&&(this.alter=e.damageAlter),r!="ammo"){(r=="melee"&&e.battleType==3||r!="melee")&&e.flatRate&&(this.flatTime=e.flatRate),e["flat"+n]&&e["flat"+n].time&&(this.flatTime=!0),n=="Psi"&&(n="Use"),this.cost=this.cost=e["cost"+n]||{time:e["tu"+n],energy:0},this.accuracy=e["accuracy"+n]||100;let a=r=="throw"?e.throwMultiplier:r=="melee"?e.meleeMultiplier:e.accuracyMultiplier;if(!a){let o=r=="throw"?"throwing":r=="melee"?"melee":"firing";a={},a[o]=1}this.accuracyMultiplier=a}this.alter&&this.alter.ResistType&&(this.damageType=this.alter.ResistType),r+"Range"in e&&(this.alter=Object.assign({},this.alter||{}),this.alter.range=e[r+"Range"]);for(let a in this.alter)(a=="damageType"||a=="ResistType")&&(this.alter[a]=$.damageTypes[this.alter[a]]);this.range=e[r+"Range"]||e[r.substr(0,3)+"Range"]||this.alter&&this.alter.range||Ju[r],e.maxRange<this.range&&(this.range=e.maxRange),this.alter&&e.maxRange<+this.alter.range&&(this.alter.range=`${e.maxRange}`),this.possible=!0}},tt=class{constructor(e){this.sections=[];this.id=e.id,this.title=e.title||e.id,this.id in $.lang||($.lang[this.id]=this.title),this.trTitle=$.tr(this.title),this.text=$.lang[e.text]||$.lang[e.id+"_UFOPEDIA"],this.image_id=e.image_id,this.type_id=e.type_id||"-1",$.articles[this.id]=this;let r=e.id;$.articles[r]=this,e.section&&$.addToSection(this,e.section)}static create(e){if(e.id in $.articles){let r=$.articles[e.id];return e.section&&!r.sections.includes(e.section)&&(r.sections.push($.sections[e.section]),$.sections[e.section].add(r)),r}return new tt(e)}},Yt=class{constructor(e,r="PEDIA"){this.id=e;this.type_id=r;this._articles=[];$.sections[e]=this,this.isType()?$.typeSectionsOrder.push(this):$.sectionsOrder.push(this),this.title=$.str(e),tt.create({id:e,section:e,type_id:r})}get articles(){return this._articles}isType(){return this.type_id=="TYPE"}add(e){this._articles.includes(e)||this._articles.push(e),e.sections.includes(this)||e.sections.push(this)}},nr=class{constructor(e){this.id=e.type||e.typeSingle,e.files&&(this.path=e.files[0],this.extra=e.files),e.fileSingle&&(this.path=e.fileSingle)}},rr=class{constructor(e){this.dollSprites={};this.armor={};if(Object.assign(this,e),$.armors[e.type]=this,this.layersDefinition){let r=this.layersDefaultPrefix;for(let n in this.layersDefinition){let i=this.layersDefinition[n],s=[];for(let l in i){let a=i[l];if(a&&a.length){let o=r+"__"+l+"__"+a;s.push($.sprite(o))}}this.dollSprites[n]=s}}else if(this.spriteInv){let r=this.spriteInv,n=r.length;if(this.spriteInv+".SPK"in $.sprites)this.dollSprites={0:[$.path+$.sprites[this.spriteInv+".SPK"].path]};else for(let i in $.sprites)i.substr(0,n)==r&&(this.dollSprites[i.substr(n,i.length-n-4)]=[$.path+$.sprites[i].path])}if(this.armor={Front:this.frontArmor,Side:this.sideArmor,Rear:this.rearArmor,Under:this.underArmor},this.storeItem&&$.items[this.storeItem]){let r=$.items[this.storeItem];r.armors||(r.armors=[]),r.armors.push(this.type)}for(let r of this.units||[]){let n=$.soldiers[r];n&&(n.armors=n.armors||[],n.armors.push(this.type))}}},ir=class{constructor(e){this.invWidth=1;this.invHeight=1;Object.assign(this,e),$.items[e.type]=this,this.sprite=$.bigSprite[this.bigSprite];let r=this;if("flatThrow"in r&&(r.flatThrowTime=r.flatThrow.time,delete r.flatThrow),ot.add("canBuyItem",this.type,this.requiresBuyBaseFunc),this.categories)for(let n of this.categories)$.addCategory(n,this.type);this.liveAlien&&this.recover&&!this.prisonType&&(this.prisonType=1),tt.create({id:this.type,type_id:"ITEMS",section:"ITEMS"})}attacks(){if(!this._attacks){this._attacks=[];for(let e of["ammo","melee","snap","aimed","auto","throw","psi","panic","mindControl","use"]){let r=new tr(this,e);if(r.possible&&(this._attacks.push(r),r.damageType!=null&&$.addCategory("dmg="+$.damageTypes[r.damageType],this.type),r.damageBonus!=null)){for(let n in r.damageBonus)$.addCategory("dmg*"+n,this.type);for(let n in r.accuracyMultiplier)$.addCategory("acc*"+n,this.type)}}}return this.battleType==2&&(this._attacks[0].item=this,this._attacks[0].mode="ammo"),this._attacks}},Nt=class{constructor(){this.articles={};this.articlesOrder=[];this.sections={};this.sectionsOrder=[];this.typeSectionsOrder=[];this.sprites={};this.raw={};this.items={};this.categories={};this.armors={};this.units={};this.crafts={};this.ufos={};this.facilities={};this.craftWeapons={};this.alienDeployments={};this.research={};this.soldierBonuses={};this.commendations={};this.soldierTransformation={};this.soldiers={};this.races={};this.manufacture={};this.startingConditions={};this.events={};this.eventScripts={};this.bigSprite=[];this.floorSprite=[];this.handSprite=[];this.baseSprite=[];this.sounds=[];this.baseServices={};this.redirect={};this.lang={};this.damageTypes=["STR_DAMAGE_NONE","STR_DAMAGE_ARMOR_PIERCING","STR_DAMAGE_INCENDIARY","STR_DAMAGE_HIGH_EXPLOSIVE","STR_DAMAGE_LASER_BEAM","STR_DAMAGE_PLASMA_BEAM","STR_DAMAGE_STUN","STR_DAMAGE_MELEE","STR_DAMAGE_ACID","STR_DAMAGE_SMOKE","STR_DAMAGE_10","STR_DAMAGE_11","STR_DAMAGE_12","STR_DAMAGE_13","STR_DAMAGE_14","STR_DAMAGE_15","STR_DAMAGE_16","STR_DAMAGE_17","STR_DAMAGE_18","STR_DAMAGE_19","STR_DAMAGE_20","STR_DAMAGE_21","STR_DAMAGE_22","STR_MANA"];$=this}addCategory(e,r){let n=$.categories[e]||[];n.includes(r)||n.push(r),$.categories[e]=n}damageTypeName(e){return this.lang[this.damageTypes[e]]}sound(e){return this.path+this.sounds[e]}str(e){return this.lang[e]||e}specialSprite(e,r){return r in this[e]?this.path+this[e][r]:_t}combineFiles(e,r=!1){for(let n of r?e.reverse():e)if(n!=null)for(let i in n){i=="extraSprites"&&console.log(n.file);let s=n[i];if(i.substr(0,4)=="lang"&&Object.assign(this.lang,s),!(i in this.raw))this.raw[i]=s;else{let l=this.raw[i],a=s;if(l.concat)this.raw[i]=l.concat(a);else if(Array.isArray(a))for(let o of a)o in l&&typeof l[o]=="object"?Object.assign(l[o],a[o]):l[o]=a[o]}}}mergeRuls(e=!1){for(let r in this.raw){let n={},i={},s=this.raw[r];if(!!Array.isArray(s)){for(let l of s){let a=l.type||l.id||l.name||l.delete||l.typeSingle;if(!(!a||i[a])){if("delete"in l){e?i[a]=!0:delete n[a];continue}if(a&&a in n)if(e)for(let o in l)o in n[a]||(n[a][o]=l[o]);else if(l.files){let o={...n[a].files,...l.files};Object.assign(n[a],l),n[a].files=o}else if(Array.isArray(l)){debugger;n[a]=n[a].concat(l)}else Object.assign(n[a],l);else n[a]=l}}this.raw[r]=Object.values(n)}}}parse(e){let r=!1;this.combineFiles(e,r);let n=["ITEMS","CONDITIONS","CATEGORIES","RESEARCH","MANUFACTURE","SERVICES","EVENTS","EVENTSCRIPTS","CRAFT_WEAPONS","RACES","SOLDIERS","TRANSFORMATIONS"];for(let i of n)new Yt(i,"TYPE");this.mergeRuls(r),this.path="/user/mods/"+$.modName+"/";for(let i in this.lang){let s=this.lang[i];typeof s=="string"&&(s=s.replace(/^({NEWLINE})+/,""),s=s.replace(/{NEWLINE}/g,"<br/>"),s=s.replace(/{rul.str\("([^"]*)"\)}/g,(l,a)=>$.str(a)),this.lang[i]=s)}for(let i of $.damageTypes)$.categories["dmg="+i]=[],this.redirect[i]="dmg="+i,this.lang["dmg="+i]=this.lang[i];this.parsePedia(this.raw.ufopaedia),this.parseSprites(this.raw.extraSprites),this.sprites["BIGOBS.PCK"]&&(this.bigSprite=this.sprites["BIGOBS.PCK"].extra),this.sprites["FLOOROB.PCK"]&&(this.floorSprite=this.sprites["FLOOROB.PCK"].extra),this.sprites["HANDOB.PCK"]&&(this.handSprite=this.sprites["HANDOB.PCK"].extra),this.sprites["BASEBITS.PCK"]&&(this.baseSprite=this.sprites["BASEBITS.PCK"].extra),this.sounds=[],this.raw.extraSounds?.length&&(this.sounds=this.raw.extraSounds[0].files);for(let i of this.raw.items)new ir(i);for(let i of this.raw.soldiers)new Un(i);for(let i of this.raw.alienRaces)new qn(i);for(let i of this.raw.armors)new rr(i);for(let i of this.raw.units)new er(i);for(let i of this.raw.crafts)new Kn(i);for(let i of this.raw.craftWeapons)new Zn(i);for(let i of this.raw.ufos)new Vn(i);for(let i of this.raw.facilities)new Qn(i);for(let i of this.raw.events)new Gn(i);for(let i of this.raw.eventScripts)new Xn(i);for(let i of this.raw.soldierTransformation)new jn(i);for(let i of Object.values(this.soldierTransformation)){let s=i.forbiddenPreviousTransformations;for(let l of s||[])this.soldierTransformation[l]?.blocksTransformations.push(i.name)}if(this.raw.startingConditions)for(let i of this.raw.startingConditions)new Jn(i);for(let i of this.raw.alienDeployments)new Yn(i);for(let i of this.raw.research)new Hn(i);for(let i of this.raw.soldierBonuses)new Pn(i);for(let i of this.raw.commendations)new Wn(i);for(let i of this.raw.manufacture)new zn(i);for(let i of Object.values(this.facilities))if(i.buildCostItems)for(let s of Object.keys(i.buildCostItems)){let l=$.items[s];!l||(l.componentOf||(l.componentOf={}),l.componentOf[i.type]=i.buildCostItems[s].build,l.manufacture||(l.manufacture={}),l.manufacture[i.type]=i.buildCostItems[s].refund)}for(let i of Object.values(this.items))if(i.attacks(),i.compatibleAmmo)for(let s of i.compatibleAmmo){let l=this.items[s];l&&(l.compatibleWeapons=l.compatibleWeapons||[],l.compatibleWeapons.push(i.type))}for(let i of Object.values(this.research)){if(Di(i.name,i.dependencies,$.research,"leadsTo"),Di(i.name,i.getOneFree,$.research,"freeFrom"),i.lookup&&i.name!=i.lookup&&this.research[i.lookup]){let s=this.research[i.lookup];s.seeAlso=s.seeAlso||[],s.seeAlso.push(i.name);let l=this.article(i.lookup),a=this.article(i.name);$.lang[a.id]||(a.title=l.title),a.text=l.text,a.image_id=l.image_id}if(i.spawnedItem){let s=$.items[i.spawnedItem];s.spawnedBy=s.spawnedBy||[],s.spawnedBy.push(i.name)}}this.ourArmors=Object.values(this.armors).filter(i=>i.units).map(i=>i.type);for(let i of n)$.sections[i]._articles=$.sections[i].articles.sort((s,l)=>s.title<l.title?-1:1);for(let i of Object.keys(this.categories))this.categories[i].length&&tt.create({id:i,type_id:"CATEGORIES",section:"CATEGORIES"});console.log(this),this.search=new Bn}parsePedia(e){for(let r of e)if(r.id){let n=new tt(r);this.articlesOrder.push(n),this.articles[n.id]=n}}parseSprites(e){for(let r of e){let n=new nr(r),i=this.sprites[n.id];i!=null?Object.assign(i.extra,r.files):this.sprites[n.id]=n}}findNextArticle(e,r,n){if(!e)return null;n||(n=e.sections[0]);let i=n?n.articles:this.articlesOrder,s=i.findIndex(l=>l.id==e.id);if(s!=null){let l=s+r;return i[l]}}tr(e,r=" "){if(e in $.lang&&(e=$.lang[e],e.substr(0,4)!="STR_"))return e;if(typeof e=="string"){if(this.lang[Mi[e]])return this.lang[Mi[e]];e.substr(0,4)=="STR_"&&(e=e.substr(4)),e.includes("_")&&e.search(/[a-z]/)==-1?e=e.replace(/_/g," "):e=e.replace(/([^A-Z0-9])([A-Z0-9])/g,"$1"+r+"$2"),e=e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}return e}sprite(e,r=!1){return e in this.sprites?this.path+this.sprites[e].path:r?null:this.path+e}load({ruls:e,langs:r}){this.modName="Piratez",this.lang=r["en-US"],this.parse(e)}addToSection(e,r){let n;return r in $.sections?n=$.sections[r]:n=$.sections[r]=new Yt(r),e.id!=n.id&&n.add(e),e.sections.push(n),n}linksByType(e){switch(e){case"CONDITIONS":return Object.keys(this.startingConditions).map(r=>"CONDITIONS_"+r)}return[]}bodiesCompare(e){for(let r in e)e[r].length==2&&(e[r]=(e[r].charAt(0)=="M"?"A":"B")+"0"+e[r].substr(1));return e[0]>e[1]?1:-1}article(e){return this.articles[this.redirect[e]||e]}sortStrings(e){let r=e.map(n=>[n,this.tr(n)]);return r=r.sort((n,i)=>n[1]>i[1]?1:-1),r.map(n=>n[0])}},Mi={dependencies:"STR_DEPENDS_ON",seeAlso:"STR_ITEM_REQUIRED",requiresBaseFunc:"STR_SERVICES_REQUIRED",freeFrom:"STR_GET_FOR_FREE_FROM",leadsTo:"STR_LEADS_TO",unlocks:"STR_UNLOCKS",disables:"STR_DISABLES",getOneFree:"STR_GIVES_ONE_FOR_FREE",manufacture:"STR_REQUIRED_BY",randomProducedItems:"STR_RANDOM_PRODUCTION_DISCLAIMER",cost:"STR_COST"};function Li(t){let e,r,n,i,s;return{c(){e=C("a"),r=C("canvas"),O(r,"class","pixelated"),Me(r,"display",t[2]?"inline":"none"),O(e,"href",t[0]),O(e,"class","canvas-image")},m(l,a){E(l,e,a),A(e,r),t[9](r),i||(s=Qr(n=t[3].call(null,r)),i=!0)},p(l,a){a&4&&Me(r,"display",l[2]?"inline":"none"),a&1&&O(e,"href",l[0])},d(l){l&&T(e),t[9](null),i=!1,s()}}}function ef(t){let e=t[0],r,n=Li(t);return{c(){n.c(),r=ge()},m(i,s){n.m(i,s),E(i,r,s)},p(i,[s]){s&1&&ye(e,e=i[0])?(n.d(1),n=Li(i),n.c(),n.m(r.parentNode,r)):n.p(i,s)},i:oe,o:oe,d(i){i&&T(r),n.d(i)}}}function tf(t,e,r){let{src:n=null}=e,{maxWidth:i=1e6}=e,{maxHeight:s=1e6}=e,{zoom:l=1}=e,{item:a=null}=e,o,u,f=null,c=!1;function d(){o!=null&&(r(1,o.width=Math.min(i,f.naturalWidth*l),o),r(1,o.height=Math.min(s,f.naturalHeight*l),o),u.imageSmoothingEnabled=!1,u.mozImageSmoothingEnabled=!1,u.webkitImageSmoothingEnabled=!1,u.drawImage(f,0,0,f.naturalWidth*l,f.naturalHeight*l),r(2,c=!0))}function h(m){r(1,o=m),u=o.getContext("2d"),r(8,f=new Image),r(8,f.onload=d,f),r(8,f.src=n,f)}function p(m){yt[m?"unshift":"push"](()=>{o=m,r(1,o)})}return t.$$set=m=>{"src"in m&&r(0,n=m.src),"maxWidth"in m&&r(4,i=m.maxWidth),"maxHeight"in m&&r(5,s=m.maxHeight),"zoom"in m&&r(6,l=m.zoom),"item"in m&&r(7,a=m.item)},t.$$.update=()=>{if(t.$$.dirty&385){e:a&&(console.log(a),r(0,n=$.sprite(a.sprite)),r(4,i=32*a.invWidth),r(5,s=32*a.invHeight)),n&&f&&(r(2,c=!1),r(8,f.src=n,f))}},[n,o,c,h,i,s,l,a,f,p]}var lr=class extends we{constructor(e){super(),Se(this,e,tf,ef,ye,{src:0,maxWidth:4,maxHeight:5,zoom:6,item:7})}},Zt=lr;function Bi(t,e,r){let n=t.slice();return n[1]=e[r],n[3]=r,n}function zi(t){let e;return{c(){e=C("sup"),e.textContent="?",O(e,"class","tipmark")},m(r,n){E(r,e,n)},d(r){r&&T(e)}}}function Pi(t){let e,r=ut(t[3])+"",n,i,s,l,a,o,u,f,c,d,h,p=($.lang[t[1]+"_"+t[0][t[1]]]||"")+"",m,_;l=new He({props:{s:t[1]}});let b="tip_"+t[1]in $.lang&&zi(t);return c=new Ae({props:{val:t[0][t[1]]}}),{c(){e=new Ke(!1),n=ae("\xA0"),i=C("nobr"),s=C("span"),H(l.$$.fragment),a=B(),b&&b.c(),o=ae(`\r
            :`),f=B(),H(c.$$.fragment),d=B(),h=new Ke(!1),m=B(),e.a=n,O(s,"tooltip",u="tip_"+t[1]),h.a=m},m(y,S){e.m(r,y,S),E(y,n,S),E(y,i,S),A(i,s),W(l,s,null),A(s,a),b&&b.m(s,null),A(s,o),A(i,f),W(c,i,null),A(i,d),h.m(p,i),A(i,m),_=!0},p(y,S){let R={};S&1&&(R.s=y[1]),l.$set(R),"tip_"+y[1]in $.lang?b||(b=zi(y),b.c(),b.m(s,o)):b&&(b.d(1),b=null),(!_||S&1&&u!==(u="tip_"+y[1]))&&O(s,"tooltip",u);let M={};S&1&&(M.val=y[0][y[1]]),c.$set(M),(!_||S&1)&&p!==(p=($.lang[y[1]+"_"+y[0][y[1]]]||"")+"")&&h.p(p)},i(y){_||(v(l.$$.fragment,y),v(c.$$.fragment,y),_=!0)},o(y){w(l.$$.fragment,y),w(c.$$.fragment,y),_=!1},d(y){y&&e.d(),y&&T(n),y&&T(i),q(l),b&&b.d(),q(c)}}}function nf(t){let e,r,n,i,s=Object.keys(t[0]).sort(),l=[];for(let o=0;o<s.length;o+=1)l[o]=Pi(Bi(t,s,o));let a=o=>w(l[o],1,1,()=>{l[o]=null});return{c(){e=C("tr"),r=C("td"),n=C("small");for(let o=0;o<l.length;o+=1)l[o].c();O(r,"colspan","4"),O(r,"class","attacks-alter")},m(o,u){E(o,e,u),A(e,r),A(r,n);for(let f=0;f<l.length;f+=1)l[f].m(n,null);i=!0},p(o,[u]){if(u&1){s=Object.keys(o[0]).sort();let f;for(f=0;f<s.length;f+=1){let c=Bi(o,s,f);l[f]?(l[f].p(c,u),v(l[f],1)):(l[f]=Pi(c),l[f].c(),v(l[f],1),l[f].m(n,null))}for(J(),f=s.length;f<l.length;f+=1)a(f);ee()}},i(o){if(!i){for(let u=0;u<s.length;u+=1)v(l[u]);i=!0}},o(o){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)w(l[u]);i=!1},d(o){o&&T(e),ve(l,o)}}}function rf(t,e,r){let{items:n}=e;return console.log("alter ",n),t.$$set=i=>{"items"in i&&r(0,n=i.items)},[n]}var sr=class extends we{constructor(e){super(),Se(this,e,rf,nf,ye,{items:0})}},Kt=sr;function ji(t,e,r){let n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function Ui(t,e,r){let n=t.slice();return n[14]=e[r],n[13]=r,n}function qi(t,e,r){let n=t.slice();return n[11]=e[r],n[13]=r,n}function Wi(t,e,r){let n=t.slice();return n[16]=e[r],n}function Hi(t,e,r){let n=t.slice();return n[19]=e[r],n}function Gi(t){let e,r,n,i,s=t[1].length>0&&Xi(t);return{c(){e=C("tr"),r=C("td"),n=C("div"),s&&s.c(),O(r,"colspan","2"),O(r,"class","td-attacks-table")},m(l,a){E(l,e,a),A(e,r),A(r,n),s&&s.m(n,null),i=!0},p(l,a){l[1].length>0?s?(s.p(l,a),a&2&&v(s,1)):(s=Xi(l),s.c(),v(s,1),s.m(n,null)):s&&(J(),w(s,1,1,()=>{s=null}),ee())},i(l){i||(v(s),i=!0)},o(l){w(s),i=!1},d(l){l&&T(e),s&&s.d()}}}function Xi(t){let e,r,n,i,s,l,a;function o(m,_){return m[0].battleType==2?sf:lf}let u=o(t,-1),f=u(t),c=t[1],d=[];for(let m=0;m<c.length;m+=1)d[m]=tl(Wi(t,c,m));let h=m=>w(d[m],1,1,()=>{d[m]=null}),p=t[0].damageAlter&&t[0].battleType!=2&&nl(t);return{c(){e=C("table"),r=C("thead"),f.c(),n=B(),i=C("td"),i.textContent=`${$.tr("damage")}`,s=B();for(let m=0;m<d.length;m+=1)d[m].c();l=B(),p&&p.c(),O(e,"class","attacks-table")},m(m,_){E(m,e,_),A(e,r),f.m(r,null),A(r,n),A(r,i),A(e,s);for(let b=0;b<d.length;b+=1)d[b].m(e,null);A(e,l),p&&p.m(e,null),a=!0},p(m,_){if(u===(u=o(m,_))&&f?f.p(m,_):(f.d(1),f=u(m),f&&(f.c(),f.m(r,n))),_&3){c=m[1];let b;for(b=0;b<c.length;b+=1){let y=Wi(m,c,b);d[b]?(d[b].p(y,_),v(d[b],1)):(d[b]=tl(y),d[b].c(),v(d[b],1),d[b].m(e,l))}for(J(),b=c.length;b<d.length;b+=1)h(b);ee()}m[0].damageAlter&&m[0].battleType!=2?p?(p.p(m,_),_&1&&v(p,1)):(p=nl(m),p.c(),v(p,1),p.m(e,null)):p&&(J(),w(p,1,1,()=>{p=null}),ee())},i(m){if(!a){for(let _=0;_<c.length;_+=1)v(d[_]);v(p),a=!0}},o(m){d=d.filter(Boolean);for(let _=0;_<d.length;_+=1)w(d[_]);w(p),a=!1},d(m){m&&T(e),f.d(),ve(d,m),p&&p.d()}}}function lf(t){let e,r,n,i,s;return{c(){e=C("td"),e.textContent=`${$.tr("mode")}`,r=B(),n=C("td"),n.textContent=`${$.tr("accuracy")}`,i=B(),s=C("td"),s.textContent=`${$.tr("cost")}`},m(l,a){E(l,e,a),E(l,r,a),E(l,n,a),E(l,i,a),E(l,s,a)},p:oe,d(l){l&&T(e),l&&T(r),l&&T(n),l&&T(i),l&&T(s)}}}function sf(t){let e;return{c(){e=C("td"),O(e,"colspan","3")},m(r,n){E(r,e,n)},p:oe,d(r){r&&T(e)}}}function of(t){let e,r=$.str(t[16].name)+"",n,i=t[16].shots==1?"":"\xD7"+t[16].shots,s,l,a,o,u=t[16].accuracy+"",f,c="%",d,h,p,m,_,b,y,S,R,M=t[16].cost.time+"",F,L,V=t[16].flatTime?"":"%",ue,D,G,k,Z,_e=t[16].range&&Yi(t);_=new mt({props:{bonus:t[16].accuracyMultiplier}});let Y=Object.keys(t[16].cost),be=[];for(let K=0;K<Y.length;K+=1)be[K]=Ki(Hi(t,Y,K));let U=K=>w(be[K],1,1,()=>{be[K]=null});return{c(){e=C("td"),n=ae(r),s=ae(i),l=B(),a=C("td"),o=C("em"),f=ae(u),d=ae(c),h=B(),_e&&_e.c(),p=C("br"),m=B(),H(_.$$.fragment),b=B(),y=C("td"),S=C("nobr"),R=C("em"),F=ae(M),L=B(),ue=ae(V),D=B(),G=C("small"),G.textContent=`${$.str("TU")}`,k=B();for(let K=0;K<be.length;K+=1)be[K].c();O(o,"class","big-number")},m(K,N){E(K,e,N),A(e,n),A(e,s),E(K,l,N),E(K,a,N),A(a,o),A(o,f),A(a,d),A(a,h),_e&&_e.m(a,null),A(a,p),A(a,m),W(_,a,null),E(K,b,N),E(K,y,N),A(y,S),A(S,R),A(R,F),A(S,L),A(S,ue),A(S,D),A(S,G),A(y,k);for(let j=0;j<be.length;j+=1)be[j].m(y,null);Z=!0},p(K,N){(!Z||N&2)&&r!==(r=$.str(K[16].name)+"")&&Oe(n,r),(!Z||N&2)&&i!==(i=K[16].shots==1?"":"\xD7"+K[16].shots)&&Oe(s,i),(!Z||N&2)&&u!==(u=K[16].accuracy+"")&&Oe(f,u),K[16].range?_e?_e.p(K,N):(_e=Yi(K),_e.c(),_e.m(a,p)):_e&&(_e.d(1),_e=null);let j={};if(N&2&&(j.bonus=K[16].accuracyMultiplier),_.$set(j),(!Z||N&2)&&M!==(M=K[16].cost.time+"")&&Oe(F,M),(!Z||N&2)&&V!==(V=K[16].flatTime?"":"%")&&Oe(ue,V),N&2){Y=Object.keys(K[16].cost);let me;for(me=0;me<Y.length;me+=1){let de=Hi(K,Y,me);be[me]?(be[me].p(de,N),v(be[me],1)):(be[me]=Ki(de),be[me].c(),v(be[me],1),be[me].m(y,null))}for(J(),me=Y.length;me<be.length;me+=1)U(me);ee()}},i(K){if(!Z){v(_.$$.fragment,K);for(let N=0;N<Y.length;N+=1)v(be[N]);Z=!0}},o(K){w(_.$$.fragment,K),be=be.filter(Boolean);for(let N=0;N<be.length;N+=1)w(be[N]);Z=!1},d(K){K&&T(e),K&&T(l),K&&T(a),_e&&_e.d(),q(_),K&&T(b),K&&T(y),ve(be,K)}}}function af(t){let e,r,n,i,s,l,a,o,u,f=$.tr("Shots")+"",c,d,h=t[16].item.clipSize+"",p,m,_=$.tr("Wgt")+"",b,y,S=t[16].item.weight+"",R,M;return r=new Zt({props:{src:$.sprite(t[16].item.sprite),maxWidth:32*t[16].item.invWidth,maxHeight:32*t[16].item.invHeight,zoom:"2"}}),s=new Ze({props:{href:t[16].item.type}}),{c(){e=C("td"),H(r.$$.fragment),n=B(),i=C("td"),H(s.$$.fragment),l=B(),a=C("br"),o=B(),u=C("small"),c=ae(f),d=ae(": "),p=ae(h),m=B(),b=ae(_),y=ae(": "),R=ae(S),O(e,"class","item-ammo-img"),O(i,"colspan","2")},m(F,L){E(F,e,L),W(r,e,null),E(F,n,L),E(F,i,L),W(s,i,null),A(i,l),A(i,a),A(i,o),A(i,u),A(u,c),A(u,d),A(u,p),A(u,m),A(u,b),A(u,y),A(u,R),M=!0},p(F,L){let V={};L&2&&(V.src=$.sprite(F[16].item.sprite)),L&2&&(V.maxWidth=32*F[16].item.invWidth),L&2&&(V.maxHeight=32*F[16].item.invHeight),r.$set(V);let ue={};L&2&&(ue.href=F[16].item.type),s.$set(ue),(!M||L&2)&&h!==(h=F[16].item.clipSize+"")&&Oe(p,h),(!M||L&2)&&S!==(S=F[16].item.weight+"")&&Oe(R,S)},i(F){M||(v(r.$$.fragment,F),v(s.$$.fragment,F),M=!0)},o(F){w(r.$$.fragment,F),w(s.$$.fragment,F),M=!1},d(F){F&&T(e),q(r),F&&T(n),F&&T(i),q(s)}}}function Yi(t){let e,r=$.str("at !N! m").replace("!N!",`<em>${t[16].range}</em>`)+"",n;return{c(){e=new Ke(!1),n=B(),e.a=n},m(i,s){e.m(r,i,s),E(i,n,s)},p(i,s){s&2&&r!==(r=$.str("at !N! m").replace("!N!",`<em>${i[16].range}</em>`)+"")&&e.p(r)},d(i){i&&e.d(),i&&T(n)}}}function Zi(t){let e,r,n,i,s,l,a=$.str(t[19])+"",o,u,f;return i=new Ae({props:{val:t[16].cost[t[19]]}}),{c(){e=C("br"),r=B(),n=C("nobr"),H(i.$$.fragment),s=B(),l=C("small"),o=ae(a),u=B()},m(c,d){E(c,e,d),E(c,r,d),E(c,n,d),W(i,n,null),A(n,s),A(n,l),A(l,o),A(n,u),f=!0},p(c,d){let h={};d&2&&(h.val=c[16].cost[c[19]]),i.$set(h),(!f||d&2)&&a!==(a=$.str(c[19])+"")&&Oe(o,a)},i(c){f||(v(i.$$.fragment,c),f=!0)},o(c){w(i.$$.fragment,c),f=!1},d(c){c&&T(e),c&&T(r),c&&T(n),q(i)}}}function Ki(t){let e,r,n=t[19]!="time"&&t[16].cost[t[19]]!=0&&Zi(t);return{c(){n&&n.c(),e=ge()},m(i,s){n&&n.m(i,s),E(i,e,s),r=!0},p(i,s){i[19]!="time"&&i[16].cost[i[19]]!=0?n?(n.p(i,s),s&2&&v(n,1)):(n=Zi(i),n.c(),v(n,1),n.m(e.parentNode,e)):n&&(J(),w(n,1,1,()=>{n=null}),ee())},i(i){r||(v(n),r=!0)},o(i){w(n),r=!1},d(i){n&&n.d(i),i&&T(e)}}}function Vi(t){let e=t[16].pellets>1&&t[16].damageBonus?"(":"",r,n,i,s=(t[16].damage||0)+"",l,a,o,u,f,c=t[16].pellets>1&&t[16].damageBonus?")":"",d,h,p=t[16].pellets>1?" \xD7"+t[16].pellets:"",m,_,b,y,S,R;u=new mt({props:{plus:!0,bonus:t[16].damageBonus}});let M=t[16].damageType&&Qi(t);return{c(){r=ae(e),n=B(),i=C("em"),l=ae(s),a=B(),o=C("small"),H(u.$$.fragment),f=B(),d=ae(c),h=B(),m=ae(p),_=B(),b=C("br"),y=B(),M&&M.c(),S=ge()},m(F,L){E(F,r,L),E(F,n,L),E(F,i,L),A(i,l),E(F,a,L),E(F,o,L),W(u,o,null),A(o,f),A(o,d),E(F,h,L),E(F,m,L),E(F,_,L),E(F,b,L),E(F,y,L),M&&M.m(F,L),E(F,S,L),R=!0},p(F,L){(!R||L&2)&&e!==(e=F[16].pellets>1&&F[16].damageBonus?"(":"")&&Oe(r,e),(!R||L&2)&&s!==(s=(F[16].damage||0)+"")&&Oe(l,s);let V={};L&2&&(V.bonus=F[16].damageBonus),u.$set(V),(!R||L&2)&&c!==(c=F[16].pellets>1&&F[16].damageBonus?")":"")&&Oe(d,c),(!R||L&2)&&p!==(p=F[16].pellets>1?" \xD7"+F[16].pellets:"")&&Oe(m,p),F[16].damageType?M?(M.p(F,L),L&2&&v(M,1)):(M=Qi(F),M.c(),v(M,1),M.m(S.parentNode,S)):M&&(J(),w(M,1,1,()=>{M=null}),ee())},i(F){R||(v(u.$$.fragment,F),v(M),R=!0)},o(F){w(u.$$.fragment,F),w(M),R=!1},d(F){F&&T(r),F&&T(n),F&&T(i),F&&T(a),F&&T(o),q(u),F&&T(h),F&&T(m),F&&T(_),F&&T(b),F&&T(y),M&&M.d(F),F&&T(S)}}}function Qi(t){let e,r;return e=new Ze({props:{href:$.damageTypes[t[16].damageType]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&2&&(s.href=$.damageTypes[n[16].damageType]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Ji(t){let e,r;return e=new Kt({props:{items:t[0].meleeAlter}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[0].meleeAlter),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function el(t){let e,r;return e=new Kt({props:{items:t[16].alter}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&2&&(s.items=n[16].alter),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function tl(t){let e,r,n,i,s,l,a,o,u,f=[af,of],c=[];function d(_,b){return _[16].mode=="ammo"?0:1}r=d(t,-1),n=c[r]=f[r](t);let h=("damage"in t[16]||"damageType"in t[16])&&Vi(t),p=t[16].mode=="melee"&&t[0].meleeAlter&&Ji(t),m=t[16].mode=="ammo"&&t[16].alter&&el(t);return{c(){e=C("tr"),n.c(),i=B(),s=C("td"),h&&h.c(),l=B(),p&&p.c(),a=B(),m&&m.c(),o=ge()},m(_,b){E(_,e,b),c[r].m(e,null),A(e,i),A(e,s),h&&h.m(s,null),E(_,l,b),p&&p.m(_,b),E(_,a,b),m&&m.m(_,b),E(_,o,b),u=!0},p(_,b){let y=r;r=d(_,b),r===y?c[r].p(_,b):(J(),w(c[y],1,1,()=>{c[y]=null}),ee(),n=c[r],n?n.p(_,b):(n=c[r]=f[r](_),n.c()),v(n,1),n.m(e,i)),"damage"in _[16]||"damageType"in _[16]?h?(h.p(_,b),b&2&&v(h,1)):(h=Vi(_),h.c(),v(h,1),h.m(s,null)):h&&(J(),w(h,1,1,()=>{h=null}),ee()),_[16].mode=="melee"&&_[0].meleeAlter?p?(p.p(_,b),b&3&&v(p,1)):(p=Ji(_),p.c(),v(p,1),p.m(a.parentNode,a)):p&&(J(),w(p,1,1,()=>{p=null}),ee()),_[16].mode=="ammo"&&_[16].alter?m?(m.p(_,b),b&2&&v(m,1)):(m=el(_),m.c(),v(m,1),m.m(o.parentNode,o)):m&&(J(),w(m,1,1,()=>{m=null}),ee())},i(_){u||(v(n),v(h),v(p),v(m),u=!0)},o(_){w(n),w(h),w(p),w(m),u=!1},d(_){_&&T(e),c[r].d(),h&&h.d(),_&&T(l),p&&p.d(_),_&&T(a),m&&m.d(_),_&&T(o)}}}function nl(t){let e,r;return e=new Kt({props:{items:t[0].damageAlter}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[0].damageAlter),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function uf(t){let e,r,n,i,s,l,a,o,u,f,c,d,h,p;n=new Ae({props:{val:t[7]}});let m=[vf,bf,gf,_f,mf,pf,hf,df,cf],_=[];function b(y,S){return S&24&&(l=null),S&24&&(a=null),S&24&&(o=null),S&24&&(u=null),S&24&&(f=null),l==null&&(l=!!["manufacture"].includes(y[7])),l?0:(a==null&&(a=!!["damageBonus","meleeBonus","accuracyMultiplier","meleeMultiplier","closeQuartersMultiplier"].includes(y[7])),a?1:(o==null&&(o=!!["damageType","meleeType"].includes(y[7])),o?2:y[7]=="battleType"?3:(u==null&&(u=!!y[7].includes("Sound")),u?4:(f==null&&(f=!!["floorSprite","handSprite"].includes(y[7])),f?5:y[7]=="prisonType"?6:y[7]=="costBuy"?7:8))))}return c=b(t,-1),d=_[c]=m[c](t),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=B(),s=C("td"),d.c(),h=B(),O(s,"class","item-right-column")},m(y,S){E(y,e,S),A(e,r),W(n,r,null),A(e,i),A(e,s),_[c].m(s,null),A(e,h),p=!0},p(y,S){let R={};S&24&&(R.val=y[7]),n.$set(R);let M=c;c=b(y,S),c===M?_[c].p(y,S):(J(),w(_[M],1,1,()=>{_[M]=null}),ee(),d=_[c],d?d.p(y,S):(d=_[c]=m[c](y),d.c()),v(d,1),d.m(s,null))},i(y){p||(v(n.$$.fragment,y),v(d),p=!0)},o(y){w(n.$$.fragment,y),w(d),p=!1},d(y){y&&T(e),q(n),_[c].d()}}}function ff(t){let e,r=t[3].misc.length>0&&ll(t);return{c(){r&&r.c(),e=ge()},m(n,i){r&&r.m(n,i),E(n,e,i)},p(n,i){n[3].misc.length>0?r?r.p(n,i):(r=ll(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:oe,o:oe,d(n){r&&r.d(n),n&&T(e)}}}function cf(t){let e,r;return e=new Ae({props:{val:t[8]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&24&&(s.val=n[8]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function df(t){let e,r,n,i;return e=new Ae({props:{val:t[8]}}),n=new Ae({props:{val:t[0].requiresBuy||""}}),{c(){H(e.$$.fragment),r=B(),H(n.$$.fragment)},m(s,l){W(e,s,l),E(s,r,l),W(n,s,l),i=!0},p(s,l){let a={};l&24&&(a.val=s[8]),e.$set(a);let o={};l&1&&(o.val=s[0].requiresBuy||""),n.$set(o)},i(s){i||(v(e.$$.fragment,s),v(n.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(n.$$.fragment,s),i=!1},d(s){q(e,s),s&&T(r),q(n,s)}}}function hf(t){let e,r;return e=new Ze({props:{href:"prisonType"+t[8]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&24&&(s.href="prisonType"+n[8]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function pf(t){let e,r=t[8]+"",n,i,s,l,a,o;return{c(){e=C("a"),n=ae(r),s=B(),l=C("img"),Me(e,"vertical-align","top"),O(e,"href",i=$.specialSprite(t[7],t[8])),O(l,"class","item-img sprite"),O(l,"alt",a=t[8]),Ge(l.src,o=$.specialSprite(t[7],t[8]))||O(l,"src",o)},m(u,f){E(u,e,f),A(e,n),E(u,s,f),E(u,l,f)},p(u,f){f&24&&r!==(r=u[8]+"")&&Oe(n,r),f&24&&i!==(i=$.specialSprite(u[7],u[8]))&&O(e,"href",i),f&24&&a!==(a=u[8])&&O(l,"alt",a),f&24&&!Ge(l.src,o=$.specialSprite(u[7],u[8]))&&O(l,"src",o)},i:oe,o:oe,d(u){u&&T(e),u&&T(s),u&&T(l)}}}function mf(t){let e,r=t[5](t[8]),n=[];for(let i=0;i<r.length;i+=1)n[i]=rl(Ui(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ge()},m(i,s){for(let l=0;l<n.length;l+=1)n[l].m(i,s);E(i,e,s)},p(i,s){if(s&56){r=i[5](i[8]);let l;for(l=0;l<r.length;l+=1){let a=Ui(i,r,l);n[l]?n[l].p(a,s):(n[l]=rl(a),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},i:oe,o:oe,d(i){ve(n,i),i&&T(e)}}}function _f(t){let e=t[8]+"",r,n,i=$.tr("battleType"+t[8])+"",s;return{c(){r=ae(e),n=ae(": "),s=ae(i)},m(l,a){E(l,r,a),E(l,n,a),E(l,s,a)},p(l,a){a&24&&e!==(e=l[8]+"")&&Oe(r,e),a&24&&i!==(i=$.tr("battleType"+l[8])+"")&&Oe(s,i)},i:oe,o:oe,d(l){l&&T(r),l&&T(n),l&&T(s)}}}function gf(t){let e=$.damageTypeName(t[8])+"",r;return{c(){r=ae(e)},m(n,i){E(n,r,i)},p(n,i){i&24&&e!==(e=$.damageTypeName(n[8])+"")&&Oe(r,e)},i:oe,o:oe,d(n){n&&T(r)}}}function bf(t){let e,r;return e=new mt({props:{bonus:t[8]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&24&&(s.bonus=n[8]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function vf(t){let e,r,n=Object.keys(t[8]),i=[];for(let l=0;l<n.length;l+=1)i[l]=il(qi(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=ge()},m(l,a){for(let o=0;o<i.length;o+=1)i[o].m(l,a);E(l,e,a),r=!0},p(l,a){if(a&24){n=Object.keys(l[8]);let o;for(o=0;o<n.length;o+=1){let u=qi(l,n,o);i[o]?(i[o].p(u,a),v(i[o],1)):(i[o]=il(u),i[o].c(),v(i[o],1),i[o].m(e.parentNode,e))}for(J(),o=n.length;o<i.length;o+=1)s(o);ee()}},i(l){if(!r){for(let a=0;a<n.length;a+=1)v(i[a]);r=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)w(i[a]);r=!1},d(l){ve(i,l),l&&T(e)}}}function rl(t){let e,r=t[13]>0?"<br/>":"",n,i,s,l;return{c(){e=new Ke(!1),n=B(),i=C("audio"),s=ae("Audio tag not working"),e.a=n,i.controls=!0,Ge(i.src,l=t[14])||O(i,"src",l)},m(a,o){e.m(r,a,o),E(a,n,o),E(a,i,o),A(i,s)},p(a,o){o&24&&!Ge(i.src,l=a[14])&&O(i,"src",l)},d(a){a&&e.d(),a&&T(n),a&&T(i)}}}function il(t){let e,r,n,i,s,l,a,o,u;return r=new Ae({props:{val:t[11]}}),i=new Ae({props:{val:$.manufacture[t[11]]?.requiredItems||""}}),l=new Ae({props:{val:$.manufacture[t[11]]?.producedItems||""}}),{c(){e=C("div"),H(r.$$.fragment),n=ae(`:\r
                `),H(i.$$.fragment),s=ae(` \u2192\r
                `),H(l.$$.fragment),a=B(),O(e,"class",o=t[13]>0&&"top-border")},m(f,c){E(f,e,c),W(r,e,null),A(e,n),W(i,e,null),A(e,s),W(l,e,null),A(e,a),u=!0},p(f,c){let d={};c&24&&(d.val=f[11]),r.$set(d);let h={};c&24&&(h.val=$.manufacture[f[11]]?.requiredItems||""),i.$set(h);let p={};c&24&&(p.val=$.manufacture[f[11]]?.producedItems||""),l.$set(p)},i(f){u||(v(r.$$.fragment,f),v(i.$$.fragment,f),v(l.$$.fragment,f),u=!0)},o(f){w(r.$$.fragment,f),w(i.$$.fragment,f),w(l.$$.fragment,f),u=!1},d(f){f&&T(e),q(r),q(i),q(l)}}}function ll(t){let e,r,n,i=t[4]?"Hide":"See",s,l,a,o,u;return{c(){e=C("tr"),r=C("td"),n=C("button"),s=ae(i),l=ae(" details"),a=B(),O(n,"class","btn-hover-effect btn-hover-effect--effect-1"),O(r,"colspan","2")},m(f,c){E(f,e,c),A(e,r),A(r,n),A(n,s),A(n,l),A(e,a),o||(u=Le(n,"click",t[6]),o=!0)},p(f,c){c&16&&i!==(i=f[4]?"Hide":"See")&&Oe(s,i)},d(f){f&&T(e),o=!1,u()}}}function sl(t){let e,r,n,i,s=[ff,uf],l=[];function a(o,u){return o[7]=="anal"?0:1}return e=a(t,-1),r=l[e]=s[e](t),{c(){r.c(),n=ge()},m(o,u){l[e].m(o,u),E(o,n,u),i=!0},p(o,u){let f=e;e=a(o,u),e===f?l[e].p(o,u):(J(),w(l[f],1,1,()=>{l[f]=null}),ee(),r=l[e],r?r.p(o,u):(r=l[e]=s[e](o),r.c()),v(r,1),r.m(n.parentNode,n))},i(o){i||(v(r),i=!0)},o(o){w(r),i=!1},d(o){l[e].d(o),o&&T(n)}}}function kf(t){let e,r,n,i,s,l,a,o=(t[0].sprite&&t[0].sprite!="Resources/Blanks/Blank.png"||t[1].length>0)&&Gi(t),u=t[4]?[...t[3].first,["anal"],...t[3].misc]:[...t[3].first,["anal"]],f=[];for(let d=0;d<u.length;d+=1)f[d]=sl(ji(t,u,d));let c=d=>w(f[d],1,1,()=>{f[d]=null});return{c(){e=C("table"),r=C("tr"),n=C("td"),i=ae(t[2]),s=B(),o&&o.c(),l=B();for(let d=0;d<f.length;d+=1)f[d].c();O(n,"colspan","2"),O(r,"class","table-header"),O(e,"class","main-table")},m(d,h){E(d,e,h),A(e,r),A(r,n),A(n,i),A(e,s),o&&o.m(e,null),A(e,l);for(let p=0;p<f.length;p+=1)f[p].m(e,null);a=!0},p(d,[h]){if((!a||h&4)&&Oe(i,d[2]),d[0].sprite&&d[0].sprite!="Resources/Blanks/Blank.png"||d[1].length>0?o?(o.p(d,h),h&3&&v(o,1)):(o=Gi(d),o.c(),v(o,1),o.m(e,l)):o&&(J(),w(o,1,1,()=>{o=null}),ee()),h&57){u=d[4]?[...d[3].first,["anal"],...d[3].misc]:[...d[3].first,["anal"]];let p;for(p=0;p<u.length;p+=1){let m=ji(d,u,p);f[p]?(f[p].p(m,h),v(f[p],1)):(f[p]=sl(m),f[p].c(),v(f[p],1),f[p].m(e,null))}for(J(),p=u.length;p<f.length;p+=1)c(p);ee()}},i(d){if(!a){v(o);for(let h=0;h<u.length;h+=1)v(f[h]);a=!0}},o(d){w(o),f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)w(f[h]);a=!1},d(d){d&&T(e),o&&o.d(),ve(f,d)}}}function yf(t,e,r){let{item:n}=e,i,s,l,a=!1;function o(f){return f?(f.length||(f=[f]),f.map(c=>$.path+$.sounds[c]).filter(c=>c)):[]}console.info(n);let u=f=>r(4,a=!a);return t.$$set=f=>{"item"in f&&r(0,n=f.item)},t.$$.update=()=>{if(t.$$.dirty&3){e:{if(r(1,s=n.attacks().slice()),r(2,i=(n.battleType?$.tr("battleType"+n.battleType)+" ":"")+$.tr("Item")),n.compatibleAmmo)for(let f of n.compatibleAmmo){let d=$.items[f].attacks()[0];s.push(d)}r(3,l=Xe(n,{first:["costBuy","costSell","monthlySalary","invHeight","invWidth","weight","size","isConsumable","maxRange","medikitTargetSelf","medikitType","stimulant","stunRecovery","dropoff","costPrime","costUnprime","twoHanded","blockBothHands","oneHandedPenalty","kneelBonus","blastRadius","requires","categories","armors","compatibleWeapons","compatibleAmmo","clipSize","liveAlien","recover","prisonType","manufacture","componentOf"],exclude:["requiresBuy","sprite","type","ammo","_attacks","damageAlter","accuracyMelee","accuracyMultiplier","accuracySnap","costAuto","costMelee","costSnap","damageBonus","damageType"]})),console.info(s)}}},[n,s,i,l,a,o,u]}var or=class extends we{constructor(e){super(),Se(this,e,yf,kf,ye,{item:0})}},Vt=or;function ol(t,e,r){let n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n[10]=r,n}function al(t,e,r){let n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function ul(t,e,r){let n=t.slice();return n[15]=e[r],n[10]=r,n}function fl(t,e,r){let n=t.slice();return n[12]=e[r],n}function cl(t,e,r){let n=t.slice();return n[11]=e[r][0],n[19]=e[r][1],n[10]=r,n}function dl(t,e,r){let n=t.slice();return n[21]=e[r],n[23]=r,n}function hl(t,e,r){let n=t.slice();return n[24]=e[r],n[10]=r,n}function pl(t,e,r){let n=t.slice();return n[26]=e[r],n[23]=r,n}function ml(t){let e,r,n,i;return n=new Ye({props:{items:t[2]}}),{c(){e=C("span"),e.textContent="- see also",r=B(),H(n.$$.fragment),Me(e,"color","white")},m(s,l){E(s,e,l),E(s,r,l),W(n,s,l),i=!0},p(s,l){let a={};l&4&&(a.items=s[2]),n.$set(a)},i(s){i||(v(n.$$.fragment,s),i=!0)},o(s){w(n.$$.fragment,s),i=!1},d(s){s&&T(e),s&&T(r),q(n,s)}}}function _l(t){let e,r,n=t[3]?"Hide":"See",i,s,l,a;return{c(){e=C("p"),r=C("button"),i=ae(n),s=ae(" all variants"),O(r,"class","btn-hover-effect btn-hover-effect--effect-1")},m(o,u){E(o,e,u),A(e,r),A(r,i),A(r,s),l||(a=Le(r,"click",t[5]),l=!0)},p(o,u){u&8&&n!==(n=o[3]?"Hide":"See")&&Oe(i,n)},d(o){o&&T(e),l=!1,a()}}}function gl(t){let e,r,n,i=Object.keys(t[0].dollSprites).sort(t[6]),s=[];for(let a=0;a<i.length;a+=1)s[a]=yl(hl(t,i,a));let l=!t[3]&&wl(t);return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=B(),r=C("div"),l&&l.c(),O(r,"style",n=`min-height:${t[3]?(Math.floor(Object.keys(t[0].dollSprites).length/Qt)+1)*120:120}px;margin-left:175px;`)},m(a,o){for(let u=0;u<s.length;u+=1)s[u].m(a,o);E(a,e,o),E(a,r,o),l&&l.m(r,null)},p(a,o){if(o&25){i=Object.keys(a[0].dollSprites).sort(a[6]);let u;for(u=0;u<i.length;u+=1){let f=hl(a,i,u);s[u]?s[u].p(f,o):(s[u]=yl(f),s[u].c(),s[u].m(e.parentNode,e))}for(;u<s.length;u+=1)s[u].d(1);s.length=i.length}a[3]?l&&(l.d(1),l=null):l?l.p(a,o):(l=wl(a),l.c(),l.m(r,null)),o&9&&n!==(n=`min-height:${a[3]?(Math.floor(Object.keys(a[0].dollSprites).length/Qt)+1)*120:120}px;margin-left:175px;`)&&O(r,"style",n)},d(a){ve(s,a),a&&T(e),a&&T(r),l&&l.d()}}}function bl(t){let e,r,n=t[3]&&vl(t),i=t[0].dollSprites[t[24]],s=[];for(let l=0;l<i.length;l+=1)s[l]=kl(pl(t,i,l));return{c(){e=C("div"),n&&n.c(),r=B();for(let l=0;l<s.length;l+=1)s[l].c();O(e,"class","armor"),Me(e,"left",t[10]%Qt*80+"px"),Me(e,"top",Math.floor(t[10]/Qt)*120+"px")},m(l,a){E(l,e,a),n&&n.m(e,null),A(e,r);for(let o=0;o<s.length;o+=1)s[o].m(e,null)},p(l,a){if(l[3]?n?n.p(l,a):(n=vl(l),n.c(),n.m(e,r)):n&&(n.d(1),n=null),a&17){i=l[0].dollSprites[l[24]];let o;for(o=0;o<i.length;o+=1){let u=pl(l,i,o);s[o]?s[o].p(u,a):(s[o]=kl(u),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=i.length}},d(l){l&&T(e),n&&n.d(),ve(s,l)}}}function vl(t){let e,r=t[24]+"",n;return{c(){e=C("div"),n=ae(r),O(e,"class","armor-variant")},m(i,s){E(i,e,s),A(e,n)},p(i,s){s&1&&r!==(r=i[24]+"")&&Oe(n,r)},d(i){i&&T(e)}}}function kl(t){let e,r,n;return{c(){e=C("img"),Ge(e.src,r=t[26])||O(e,"src",r),O(e,"alt",n=t[24]),O(e,"onerror",t[4]),O(e,"class","armor-layer")},m(i,s){E(i,e,s)},p(i,s){s&1&&!Ge(e.src,r=i[26])&&O(e,"src",r),s&1&&n!==(n=i[24])&&O(e,"alt",n)},d(i){i&&T(e)}}}function yl(t){let e,r=(t[3]||t[10]==0)&&bl(t);return{c(){r&&r.c(),e=ge()},m(n,i){r&&r.m(n,i),E(n,e,i)},p(n,i){n[3]||n[10]==0?r?r.p(n,i):(r=bl(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(n){r&&r.d(n),n&&T(e)}}}function wl(t){let e;return{c(){e=C("p")},m(r,n){E(r,e,n),e.innerHTML=t[1]},p(r,n){n&2&&(e.innerHTML=r[1])},d(r){r&&T(e)}}}function Sl(t){let e,r,n,i,s,l,a;n=new He({props:{s:t[12]}});let o=Xe(t[0][t[12]]).all,u=[];for(let c=0;c<o.length;c+=1)u[c]=$l(cl(t,o,c));let f=c=>w(u[c],1,1,()=>{u[c]=null});return{c(){e=C("div"),r=C("header"),H(n.$$.fragment),i=B();for(let c=0;c<u.length;c+=1)u[c].c();s=B(),O(e,"class",l="armor-column "+(t[12]=="damageModifier"&&"armor-column-resists"))},m(c,d){E(c,e,d),A(e,r),W(n,r,null),A(e,i);for(let h=0;h<u.length;h+=1)u[h].m(e,null);A(e,s),a=!0},p(c,d){if(d&1){o=Xe(c[0][c[12]]).all;let h;for(h=0;h<o.length;h+=1){let p=cl(c,o,h);u[h]?(u[h].p(p,d),v(u[h],1)):(u[h]=$l(p),u[h].c(),v(u[h],1),u[h].m(e,s))}for(J(),h=o.length;h<u.length;h+=1)f(h);ee()}},i(c){if(!a){v(n.$$.fragment,c);for(let d=0;d<o.length;d+=1)v(u[d]);a=!0}},o(c){w(n.$$.fragment,c),u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)w(u[d]);a=!1},d(c){c&&T(e),q(n),ve(u,c)}}}function wf(t){let e,r;return e=new Ae({props:{val:t[11]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[11]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Sf(t){let e,r;return e=new Ze({props:{href:$.damageTypes[t[11]]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.href=$.damageTypes[n[11]]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Af(t){let e,r,n,i,s=[Tf,Cf],l=[];function a(o,u){return o[12]=="damageModifier"?0:1}return r=a(t,-1),n=l[r]=s[r](t),{c(){e=C("em"),n.c()},m(o,u){E(o,e,u),l[r].m(e,null),i=!0},p(o,u){n.p(o,u)},i(o){i||(v(n),i=!0)},o(o){w(n),i=!1},d(o){o&&T(e),l[r].d()}}}function $f(t){let e,r,n=Object.keys(t[19]),i=[];for(let l=0;l<n.length;l+=1)i[l]=Al(dl(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=ge()},m(l,a){for(let o=0;o<i.length;o+=1)i[o].m(l,a);E(l,e,a),r=!0},p(l,a){if(a&1){n=Object.keys(l[19]);let o;for(o=0;o<n.length;o+=1){let u=dl(l,n,o);i[o]?(i[o].p(u,a),v(i[o],1)):(i[o]=Al(u),i[o].c(),v(i[o],1),i[o].m(e.parentNode,e))}for(J(),o=n.length;o<i.length;o+=1)s(o);ee()}},i(l){if(!r){for(let a=0;a<n.length;a+=1)v(i[a]);r=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)w(i[a]);r=!1},d(l){ve(i,l),l&&T(e)}}}function Cf(t){let e,r;return e=new Ae({props:{val:t[19]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[19]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Tf(t){let e,r=~~(t[19]*100)+"",n,i;return{c(){e=C("span"),n=ae(r),O(e,"style",i=`text-weight:bold; color:hsl(${~~(t[19]*70)}, 100%, 50%);`)},m(s,l){E(s,e,l),A(e,n)},p(s,l){l&1&&r!==(r=~~(s[19]*100)+"")&&Oe(n,r),l&1&&i!==(i=`text-weight:bold; color:hsl(${~~(s[19]*70)}, 100%, 50%);`)&&O(e,"style",i)},i:oe,o:oe,d(s){s&&T(e)}}}function Ef(t){let e;return{c(){e=C("br")},m(r,n){E(r,e,n)},d(r){r&&T(e)}}}function Al(t){let e,r,n,i,s,l,a=t[23]!=0&&Ef(t);return r=new Ae({props:{val:t[21]}}),s=new Ae({props:{val:t[19][t[21]]}}),{c(){a&&a.c(),e=B(),H(r.$$.fragment),n=ae(`\r
                        :\r
                        `),i=C("em"),H(s.$$.fragment)},m(o,u){a&&a.m(o,u),E(o,e,u),W(r,o,u),E(o,n,u),E(o,i,u),W(s,i,null),l=!0},p(o,u){let f={};u&1&&(f.val=o[21]),r.$set(f);let c={};u&1&&(c.val=o[19][o[21]]),s.$set(c)},i(o){l||(v(r.$$.fragment,o),v(s.$$.fragment,o),l=!0)},o(o){w(r.$$.fragment,o),w(s.$$.fragment,o),l=!1},d(o){a&&a.d(o),o&&T(e),q(r,o),o&&T(n),o&&T(i),q(s)}}}function $l(t){let e,r,n,i,s,l,a,o,u=[Sf,wf],f=[];function c(m,_){return m[12]=="damageModifier"?0:1}r=c(t,-1),n=f[r]=u[r](t);let d=[$f,Af],h=[];function p(m,_){return m[12]=="recovery"?0:1}return l=p(t,-1),a=h[l]=d[l](t),{c(){e=C("div"),n.c(),i=B(),s=C("div"),a.c()},m(m,_){E(m,e,_),f[r].m(e,null),E(m,i,_),E(m,s,_),h[l].m(s,null),o=!0},p(m,_){n.p(m,_),a.p(m,_)},i(m){o||(v(n),v(a),o=!0)},o(m){w(n),w(a),o=!1},d(m){m&&T(e),f[r].d(),m&&T(i),m&&T(s),h[l].d()}}}function Cl(t){let e,r,n=t[0][t[12]]&&Sl(t);return{c(){n&&n.c(),e=ge()},m(i,s){n&&n.m(i,s),E(i,e,s),r=!0},p(i,s){i[0][i[12]]?n?(n.p(i,s),s&1&&v(n,1)):(n=Sl(i),n.c(),v(n,1),n.m(e.parentNode,e)):n&&(J(),w(n,1,1,()=>{n=null}),ee())},i(i){r||(v(n),r=!0)},o(i){w(n),r=!1},d(i){n&&n.d(i),i&&T(e)}}}function xf(t){let e,r;return e=new Ae({props:{val:t[12]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[12]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Of(t){let e,r;return e=new Ae({props:{val:t[12].filter(Ol)}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[12].filter(Ol)),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function If(t){let e,r;return e=new mt({props:{bonus:t[12]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.bonus=n[12]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Ff(t){let e,r=t[12]+"",n,i;return{c(){e=C("a"),n=ae(r),O(e,"href",i=$.sprite(t[12]))},m(s,l){E(s,e,l),A(e,n)},p(s,l){l&1&&r!==(r=s[12]+"")&&Oe(n,r),l&1&&i!==(i=$.sprite(s[12]))&&O(e,"href",i)},i:oe,o:oe,d(s){s&&T(e)}}}function Rf(t){let e,r;return e=new Ae({props:{val:t[12][0]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[12][0]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Df(t){let e,r=t[12],n=[];for(let i=0;i<r.length;i+=1)n[i]=Tl(ul(t,r,i));return{c(){e=C("table");for(let i=0;i<n.length;i+=1)n[i].c();O(e,"class","number-table")},m(i,s){E(i,e,s);for(let l=0;l<n.length;l+=1)n[l].m(e,null)},p(i,s){if(s&1){r=i[12];let l;for(l=0;l<r.length;l+=1){let a=ul(i,r,l);n[l]?n[l].p(a,s):(n[l]=Tl(a),n[l].c(),n[l].m(e,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},i:oe,o:oe,d(i){i&&T(e),ve(n,i)}}}function Tl(t){let e,r,n=$.damageTypeName(t[10])+"",i,s,l,a=Math.round(t[15]*100)+"",o,u;return{c(){e=C("tr"),r=C("td"),i=ae(n),s=B(),l=C("td"),o=ae(a),u=ae("%"),O(r,"width","50%"),O(r,"class","number-table1"),O(l,"width","50%"),O(l,"class","number-table2")},m(f,c){E(f,e,c),A(e,r),A(r,i),A(e,s),A(e,l),A(l,o),A(l,u)},p(f,c){c&1&&a!==(a=Math.round(f[15]*100)+"")&&Oe(o,a)},d(f){f&&T(e)}}}function El(t){let e,r,n,i,s,l,a,o,u,f,c;n=new Ae({props:{val:t[11]}});let d=[Df,Rf,Ff,If,Of,xf],h=[];function p(m,_){return _&1&&(l=null),_&1&&(a=null),_&1&&(o=null),m[11]=="damageModifier"?0:(l==null&&(l=!!["corpseBattle"].includes(m[11])),l?1:m[11]=="spriteSheet"?2:(a==null&&(a=!!["psiDefence","meleeDodge"].includes(m[11])),a?3:(o==null&&(o=!!["builtInWeapons","users","units"].includes(m[11])),o?4:5)))}return u=p(t,-1),f=h[u]=d[u](t),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=B(),s=C("td"),f.c()},m(m,_){E(m,e,_),A(e,r),W(n,r,null),A(e,i),A(e,s),h[u].m(s,null),c=!0},p(m,_){let b={};_&1&&(b.val=m[11]),n.$set(b);let y=u;u=p(m,_),u===y?h[u].p(m,_):(J(),w(h[y],1,1,()=>{h[y]=null}),ee(),f=h[u],f?f.p(m,_):(f=h[u]=d[u](m),f.c()),v(f,1),f.m(s,null))},i(m){c||(v(n.$$.fragment,m),v(f),c=!0)},o(m){w(n.$$.fragment,m),w(f),c=!1},d(m){m&&T(e),q(n),h[u].d()}}}function xl(t){let e,r,n,i,s,l,a,o;return n=new Ae({props:{val:t[7]}}),l=new mt({props:{bonus:t[8]}}),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=B(),s=C("td"),H(l.$$.fragment),a=B()},m(u,f){E(u,e,f),A(e,r),W(n,r,null),A(e,i),A(e,s),W(l,s,null),A(e,a),o=!0},p(u,f){let c={};f&1&&(c.val=u[7]),n.$set(c);let d={};f&1&&(d.bonus=u[8]),l.$set(d)},i(u){o||(v(n.$$.fragment,u),v(l.$$.fragment,u),o=!0)},o(u){w(n.$$.fragment,u),w(l.$$.fragment,u),o=!1},d(u){u&&T(e),q(n),q(l)}}}function Mf(t){let e,r,n,i,s,l,a,o,u,f=Object.keys(t[0].dollSprites).length>1,c,d,h,p,m,_,b,y,S,R;i=new He({props:{s:"Armor"}});let M=t[2].length>0&&ml(t),F=f&&_l(t),L=t[0].dollSprites&&gl(t),V=["stats","armor","damageModifier"],ue=[];for(let U=0;U<3;U+=1)ue[U]=Cl(fl(t,V,U));let D=U=>w(ue[U],1,1,()=>{ue[U]=null}),G=Xe(t[0],{exclude:["recovery","type","layersDefinition","spriteFaceColor","spriteHairColor","spriteUtileColor","spriteFaceGroup","spriteHairGroup","spriteUtileGroup","customArmorPreviewIndex","dollSprites","layersDefaultPrefix","frontArmor","sideArmor","rearArmor","underArmor","spriteInv","scripts","armor","damageModifier","stats"]}).all,k=[];for(let U=0;U<G.length;U+=1)k[U]=El(al(t,G,U));let Z=U=>w(k[U],1,1,()=>{k[U]=null});y=new Cn({props:{text:"recovery"}});let _e=Xe(t[0].recovery).all,Y=[];for(let U=0;U<_e.length;U+=1)Y[U]=xl(ol(t,_e,U));let be=U=>w(Y[U],1,1,()=>{Y[U]=null});return{c(){e=C("table"),r=C("tr"),n=C("td"),H(i.$$.fragment),s=B(),M&&M.c(),l=B(),a=C("tr"),o=C("td"),u=C("div"),F&&F.c(),c=B(),L&&L.c(),d=B(),h=C("tr"),p=C("td"),m=C("div");for(let U=0;U<3;U+=1)ue[U].c();_=B();for(let U=0;U<k.length;U+=1)k[U].c();b=B(),H(y.$$.fragment),S=B();for(let U=0;U<Y.length;U+=1)Y[U].c();O(n,"colspan","2"),O(r,"class","table-header"),O(u,"class","armors"),O(o,"colspan","2"),O(m,"class","flex-horisontal"),Me(m,"max-width","95vw"),O(p,"colspan","2"),O(e,"class","main-table")},m(U,K){E(U,e,K),A(e,r),A(r,n),W(i,n,null),A(n,s),M&&M.m(n,null),A(e,l),A(e,a),A(a,o),A(o,u),F&&F.m(u,null),A(u,c),L&&L.m(u,null),A(e,d),A(e,h),A(h,p),A(p,m);for(let N=0;N<3;N+=1)ue[N].m(m,null);A(e,_);for(let N=0;N<k.length;N+=1)k[N].m(e,null);A(e,b),W(y,e,null),A(e,S);for(let N=0;N<Y.length;N+=1)Y[N].m(e,null);R=!0},p(U,[K]){if(U[2].length>0?M?(M.p(U,K),K&4&&v(M,1)):(M=ml(U),M.c(),v(M,1),M.m(n,null)):M&&(J(),w(M,1,1,()=>{M=null}),ee()),K&1&&(f=Object.keys(U[0].dollSprites).length>1),f?F?F.p(U,K):(F=_l(U),F.c(),F.m(u,c)):F&&(F.d(1),F=null),U[0].dollSprites?L?L.p(U,K):(L=gl(U),L.c(),L.m(u,null)):L&&(L.d(1),L=null),K&1){V=["stats","armor","damageModifier"];let N;for(N=0;N<3;N+=1){let j=fl(U,V,N);ue[N]?(ue[N].p(j,K),v(ue[N],1)):(ue[N]=Cl(j),ue[N].c(),v(ue[N],1),ue[N].m(m,null))}for(J(),N=3;N<3;N+=1)D(N);ee()}if(K&1){G=Xe(U[0],{exclude:["recovery","type","layersDefinition","spriteFaceColor","spriteHairColor","spriteUtileColor","spriteFaceGroup","spriteHairGroup","spriteUtileGroup","customArmorPreviewIndex","dollSprites","layersDefaultPrefix","frontArmor","sideArmor","rearArmor","underArmor","spriteInv","scripts","armor","damageModifier","stats"]}).all;let N;for(N=0;N<G.length;N+=1){let j=al(U,G,N);k[N]?(k[N].p(j,K),v(k[N],1)):(k[N]=El(j),k[N].c(),v(k[N],1),k[N].m(e,b))}for(J(),N=G.length;N<k.length;N+=1)Z(N);ee()}if(K&1){_e=Xe(U[0].recovery).all;let N;for(N=0;N<_e.length;N+=1){let j=ol(U,_e,N);Y[N]?(Y[N].p(j,K),v(Y[N],1)):(Y[N]=xl(j),Y[N].c(),v(Y[N],1),Y[N].m(e,null))}for(J(),N=_e.length;N<Y.length;N+=1)be(N);ee()}},i(U){if(!R){v(i.$$.fragment,U),v(M);for(let K=0;K<3;K+=1)v(ue[K]);for(let K=0;K<G.length;K+=1)v(k[K]);v(y.$$.fragment,U);for(let K=0;K<_e.length;K+=1)v(Y[K]);R=!0}},o(U){w(i.$$.fragment,U),w(M),ue=ue.filter(Boolean);for(let K=0;K<3;K+=1)w(ue[K]);k=k.filter(Boolean);for(let K=0;K<k.length;K+=1)w(k[K]);w(y.$$.fragment,U),Y=Y.filter(Boolean);for(let K=0;K<Y.length;K+=1)w(Y[K]);R=!1},d(U){U&&T(e),q(i),M&&M.d(),F&&F.d(),L&&L.d(),ve(ue,U),ve(k,U),q(y),ve(Y,U)}}}var Qt=6;var Ol=t=>t.substr(0,8)!="INV_NULL";function Nf(t,e,r){let{armor:n}=e,{text:i}=e,s=!1,l=[],a=()=>{this.onerror=null,console.log(this.src+" not found"),this.src=_t},o=f=>r(3,s=!s),u=(f,c)=>$.bodiesCompare([f,c]);return t.$$set=f=>{"armor"in f&&r(0,n=f.armor),"text"in f&&r(1,i=f.text)},t.$$.update=()=>{if(t.$$.dirty&5){e:if(console.log(n),r(2,l=[]),"storeItem"in n&&n.storeItem!="STR_NONE"&&n.storeItem!=n.type&&l.push(n.storeItem),"users"in n)for(let f of n.users.filter(c=>c.substr(0,8)!="INV_NULL"&&c!=n.type&&"##"+c!=window.location.hash&&c!=n.type))l.push(f)}},[n,i,l,s,a,o,u]}var ar=class extends we{constructor(e){super(),Se(this,e,Nf,Mf,ye,{armor:0,text:1})}},ur=ar;function Il(t,e,r){let n=t.slice();return n[3]=e[r][0],n[4]=e[r][1],n}function Fl(t){let e,r,n,i,s,l,a,o,u,f,c,d;r=new Ae({props:{val:t[3]}});let h=[jf,Pf,zf,Bf,Lf],p=[];function m(_,b){return b&1&&(s=null),b&1&&(l=null),b&1&&(a=null),b&1&&(o=null),s==null&&(s=!!["weaponStrings"].includes(_[3])),s?0:(l==null&&(l=!!["sprite"].includes(_[3])),l?1:(a==null&&(a=!!["requiresBaseFunc"].includes(_[3])),a?2:(o==null&&(o=!!["weaponTypes"].includes(_[3])),o?3:4)))}return u=m(t,-1),f=p[u]=h[u](t),{c(){e=C("tr"),H(r.$$.fragment),n=B(),i=C("td"),f.c(),c=B()},m(_,b){E(_,e,b),W(r,e,null),A(e,n),A(e,i),p[u].m(i,null),A(e,c),d=!0},p(_,b){let y={};b&1&&(y.val=_[3]),r.$set(y);let S=u;u=m(_,b),u===S?p[u].p(_,b):(J(),w(p[S],1,1,()=>{p[S]=null}),ee(),f=p[u],f?f.p(_,b):(f=p[u]=h[u](_),f.c()),v(f,1),f.m(i,null))},i(_){d||(v(r.$$.fragment,_),v(f),d=!0)},o(_){w(r.$$.fragment,_),w(f),d=!1},d(_){_&&T(e),q(r),p[u].d()}}}function Lf(t){let e,r;return e=new Ae({props:{val:t[4]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[4]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Bf(t){let e,r;return e=new Ye({props:{items:t[4].map(Ml)}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[4].map(Ml)),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function zf(t){let e,r;return e=new Ye({props:{items:t[4]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[4]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Pf(t){let e,r,n,i;return{c(){e=C("img"),O(e,"class","craft sprite"),O(e,"alt","X"),Ge(e.src,r=$.specialSprite("baseSprite",t[4]*1+33))||O(e,"src",r)},m(s,l){E(s,e,l),n||(i=Le(e,"error",t[2]),n=!0)},p(s,l){l&1&&!Ge(e.src,r=$.specialSprite("baseSprite",s[4]*1+33))&&O(e,"src",r)},i:oe,o:oe,d(s){s&&T(e),n=!1,i()}}}function jf(t){let e,r;return e=new Ae({props:{val:t[4].map(t[1])}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[4].map(n[1])),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Rl(t){let e=!["type","battlescapeTerrainData","craftInventoryTile","deployment"].includes(t[3]),r,n,i=e&&Fl(t);return{c(){i&&i.c(),r=ge()},m(s,l){i&&i.m(s,l),E(s,r,l),n=!0},p(s,l){l&1&&(e=!["type","battlescapeTerrainData","craftInventoryTile","deployment"].includes(s[3])),e?i?(i.p(s,l),l&1&&v(i,1)):(i=Fl(s),i.c(),v(i,1),i.m(r.parentNode,r)):i&&(J(),w(i,1,1,()=>{i=null}),ee())},i(s){n||(v(i),n=!0)},o(s){w(i),n=!1},d(s){i&&i.d(s),s&&T(r)}}}function Uf(t){let e,r,n,i,s,l=Object.entries(t[0]).sort(Dl),a=[];for(let u=0;u<l.length;u+=1)a[u]=Rl(Il(t,l,u));let o=u=>w(a[u],1,1,()=>{a[u]=null});return{c(){e=C("table"),r=C("tr"),n=C("td"),n.textContent=`${$.tr("Craft")}`,i=B();for(let u=0;u<a.length;u+=1)a[u].c();O(n,"colspan","2"),O(r,"class","table-header"),O(e,"class","main-table")},m(u,f){E(u,e,f),A(e,r),A(r,n),A(e,i);for(let c=0;c<a.length;c+=1)a[c].m(e,null);s=!0},p(u,[f]){if(f&1){l=Object.entries(u[0]).sort(Dl);let c;for(c=0;c<l.length;c+=1){let d=Il(u,l,c);a[c]?(a[c].p(d,f),v(a[c],1)):(a[c]=Rl(d),a[c].c(),v(a[c],1),a[c].m(e,null))}for(J(),c=l.length;c<a.length;c+=1)o(c);ee()}},i(u){if(!s){for(let f=0;f<l.length;f+=1)v(a[f]);s=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)w(a[f]);s=!1},d(u){u&&T(e),ve(a,u)}}}var Dl=(t,e)=>t[0]>e[0]?1:-1,Ml=t=>(t.map?t:[t]).map(e=>"weapon_type_"+e);function qf(t,e,r){let{craft:n}=e,i=l=>$.tr(l).replace(">{ALT}{0}",""),s=()=>{this.onerror=null,this.src=_t};return t.$$set=l=>{"craft"in l&&r(0,n=l.craft)},t.$$.update=()=>{if(t.$$.dirty&1){e:console.info(n)}},[n,i,s]}var fr=class extends we{constructor(e){super(),Se(this,e,qf,Uf,ye,{craft:0})}},Nl=fr;function Ll(t,e,r){let n=t.slice();return n[1]=e[r],n}function Bl(t){let e,r,n,i,s,l,a,o;return n=new Ae({props:{val:t[1][0]}}),l=new Ae({props:{val:t[1][1]}}),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=B(),s=C("td"),H(l.$$.fragment),a=B(),O(r,"class","padding-right")},m(u,f){E(u,e,f),A(e,r),W(n,r,null),A(e,i),A(e,s),W(l,s,null),A(e,a),o=!0},p(u,f){let c={};f&1&&(c.val=u[1][0]),n.$set(c);let d={};f&1&&(d.val=u[1][1]),l.$set(d)},i(u){o||(v(n.$$.fragment,u),v(l.$$.fragment,u),o=!0)},o(u){w(n.$$.fragment,u),w(l.$$.fragment,u),o=!1},d(u){u&&T(e),q(n),q(l)}}}function zl(t){let e=!["type"].includes(t[1][0]),r,n,i=e&&Bl(t);return{c(){i&&i.c(),r=ge()},m(s,l){i&&i.m(s,l),E(s,r,l),n=!0},p(s,l){l&1&&(e=!["type"].includes(s[1][0])),e?i?(i.p(s,l),l&1&&v(i,1)):(i=Bl(s),i.c(),v(i,1),i.m(r.parentNode,r)):i&&(J(),w(i,1,1,()=>{i=null}),ee())},i(s){n||(v(i),n=!0)},o(s){w(i),n=!1},d(s){i&&i.d(s),s&&T(r)}}}function Pl(t){let e,r;return e=new Vt({props:{item:$.items[t[0].launcher],title:"Launcher: "+$.tr(t[0].launcher)}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.item=$.items[n[0].launcher]),i&1&&(s.title="Launcher: "+$.tr(n[0].launcher)),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Wf(t){let e,r,n,i,s,l,a=Object.entries(t[0]).sort(jl),o=[];for(let c=0;c<a.length;c+=1)o[c]=zl(Ll(t,a,c));let u=c=>w(o[c],1,1,()=>{o[c]=null}),f=t[0].launcher&&Pl(t);return{c(){e=C("table"),r=C("tr"),r.innerHTML='<td colspan="2">Weapon</td>',n=B();for(let c=0;c<o.length;c+=1)o[c].c();i=B(),f&&f.c(),s=ge(),O(r,"class","table-header"),O(e,"class","main-table")},m(c,d){E(c,e,d),A(e,r),A(e,n);for(let h=0;h<o.length;h+=1)o[h].m(e,null);E(c,i,d),f&&f.m(c,d),E(c,s,d),l=!0},p(c,[d]){if(d&1){a=Object.entries(c[0]).sort(jl);let h;for(h=0;h<a.length;h+=1){let p=Ll(c,a,h);o[h]?(o[h].p(p,d),v(o[h],1)):(o[h]=zl(p),o[h].c(),v(o[h],1),o[h].m(e,null))}for(J(),h=a.length;h<o.length;h+=1)u(h);ee()}c[0].launcher?f?(f.p(c,d),d&1&&v(f,1)):(f=Pl(c),f.c(),v(f,1),f.m(s.parentNode,s)):f&&(J(),w(f,1,1,()=>{f=null}),ee())},i(c){if(!l){for(let d=0;d<a.length;d+=1)v(o[d]);v(f),l=!0}},o(c){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)w(o[d]);w(f),l=!1},d(c){c&&T(e),ve(o,c),c&&T(i),f&&f.d(c),c&&T(s)}}}var jl=(t,e)=>t[0]>e[0]?1:-1;function Hf(t,e,r){let{weapon:n}=e;return t.$$set=i=>{"weapon"in i&&r(0,n=i.weapon)},t.$$.update=()=>{if(t.$$.dirty&1){e:console.log(n)}},[n]}var cr=class extends we{constructor(e){super(),Se(this,e,Hf,Wf,ye,{weapon:0})}},Ul=cr;function ql(t,e,r){let n=t.slice();return n[2]=e[r][0],n[3]=e[r][1],n}function Wl(t,e,r){let n=t.slice();return n[6]=e[r],n[8]=r,n}function Gf(t){let e,r;return e=new Ae({props:{val:t[3]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[3]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Xf(t){let e,r,n=t[3],i=[];for(let l=0;l<n.length;l+=1)i[l]=Hl(Wl(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=ge()},m(l,a){for(let o=0;o<i.length;o+=1)i[o].m(l,a);E(l,e,a),r=!0},p(l,a){if(a&1){n=l[3];let o;for(o=0;o<n.length;o+=1){let u=Wl(l,n,o);i[o]?(i[o].p(u,a),v(i[o],1)):(i[o]=Hl(u),i[o].c(),v(i[o],1),i[o].m(e.parentNode,e))}for(J(),o=n.length;o<i.length;o+=1)s(o);ee()}},i(l){if(!r){for(let a=0;a<n.length;a+=1)v(i[a]);r=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)w(i[a]);r=!1},d(l){ve(i,l),l&&T(e)}}}function Hl(t){let e,r,n,i,s;return r=new Ae({props:{val:t[6]}}),{c(){e=C("div"),H(r.$$.fragment),n=B(),O(e,"class",i=t[8]==0?"":"top-border")},m(l,a){E(l,e,a),W(r,e,null),A(e,n),s=!0},p(l,a){let o={};a&1&&(o.val=l[6]),r.$set(o)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){w(r.$$.fragment,l),s=!1},d(l){l&&T(e),q(r)}}}function Gl(t){let e,r,n,i,s,l,a,o;n=new Ae({props:{val:t[2]}});let u=[Xf,Gf],f=[];function c(d,h){return d[2]=="builtInWeaponSets"?0:1}return s=c(t,-1),l=f[s]=u[s](t),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=C("td"),l.c(),a=B()},m(d,h){E(d,e,h),A(e,r),W(n,r,null),A(e,i),f[s].m(i,null),A(e,a),o=!0},p(d,h){let p={};h&1&&(p.val=d[2]),n.$set(p);let m=s;s=c(d,h),s===m?f[s].p(d,h):(J(),w(f[m],1,1,()=>{f[m]=null}),ee(),l=f[s],l?l.p(d,h):(l=f[s]=u[s](d),l.c()),v(l,1),l.m(i,null))},i(d){o||(v(n.$$.fragment,d),v(l),o=!0)},o(d){w(n.$$.fragment,d),w(l),o=!1},d(d){d&&T(e),q(n),f[s].d()}}}function Yf(t){let e,r,n,i,s,l=t[0].all,a=[];for(let u=0;u<l.length;u+=1)a[u]=Gl(ql(t,l,u));let o=u=>w(a[u],1,1,()=>{a[u]=null});return{c(){e=C("table"),r=C("tr"),n=C("td"),n.textContent=`${$.tr("Unit")}`,i=B();for(let u=0;u<a.length;u+=1)a[u].c();O(n,"colspan","2"),O(n,"class","table-header"),O(e,"class","main-table")},m(u,f){E(u,e,f),A(e,r),A(r,n),A(e,i);for(let c=0;c<a.length;c+=1)a[c].m(e,null);s=!0},p(u,[f]){if(f&1){l=u[0].all;let c;for(c=0;c<l.length;c+=1){let d=ql(u,l,c);a[c]?(a[c].p(d,f),v(a[c],1)):(a[c]=Gl(d),a[c].c(),v(a[c],1),a[c].m(e,null))}for(J(),c=l.length;c<a.length;c+=1)o(c);ee()}},i(u){if(!s){for(let f=0;f<l.length;f+=1)v(a[f]);s=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)w(a[f]);s=!1},d(u){u&&T(e),ve(a,u)}}}function Zf(t,e,r){let{unit:n}=e,i;return t.$$set=s=>{"unit"in s&&r(1,n=s.unit)},t.$$.update=()=>{if(t.$$.dirty&2){e:console.log(n),r(0,i=Xe(n,{first:["stats","armor","canSurrender"],last:Object.keys(n).filter(s=>s.indexOf("ound")!=-1),exclude:["type"]}))}},[i,n]}var dr=class extends we{constructor(e){super(),Se(this,e,Zf,Yf,ye,{unit:1})}},Xl=dr;function Yl(t,e,r){let n=t.slice();return n[3]=e[r][0],n[4]=e[r][1],n}function Zl(t,e,r){let n=t.slice();return n[3]=e[r],n}function Kf(t){let e,r,n,i,s,l,a,o;return n=new Ae({props:{val:t[3]}}),l=new Ae({props:{val:t[4]}}),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=B(),s=C("td"),H(l.$$.fragment),a=B()},m(u,f){E(u,e,f),A(e,r),W(n,r,null),A(e,i),A(e,s),W(l,s,null),A(e,a),o=!0},p(u,f){let c={};f&1&&(c.val=u[3]),n.$set(c);let d={};f&1&&(d.val=u[4]),l.$set(d)},i(u){o||(v(n.$$.fragment,u),v(l.$$.fragment,u),o=!0)},o(u){w(n.$$.fragment,u),w(l.$$.fragment,u),o=!1},d(u){u&&T(e),q(n),q(l)}}}function Vf(t){let e,r,n=$.tr(t[3])+"",i,s,l,a,o=Object.keys(t[4]),u=[];for(let c=0;c<o.length;c+=1)u[c]=Kl(Zl(t,o,c));let f=c=>w(u[c],1,1,()=>{u[c]=null});return{c(){e=C("tr"),r=C("td"),i=ae(n),s=B();for(let c=0;c<u.length;c+=1)u[c].c();l=ge(),O(r,"colspan","2"),O(r,"class","table-subheader")},m(c,d){E(c,e,d),A(e,r),A(r,i),E(c,s,d);for(let h=0;h<u.length;h+=1)u[h].m(c,d);E(c,l,d),a=!0},p(c,d){if((!a||d&1)&&n!==(n=$.tr(c[3])+"")&&Oe(i,n),d&5){o=Object.keys(c[4]);let h;for(h=0;h<o.length;h+=1){let p=Zl(c,o,h);u[h]?(u[h].p(p,d),v(u[h],1)):(u[h]=Kl(p),u[h].c(),v(u[h],1),u[h].m(l.parentNode,l))}for(J(),h=o.length;h<u.length;h+=1)f(h);ee()}},i(c){if(!a){for(let d=0;d<o.length;d+=1)v(u[d]);a=!0}},o(c){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)w(u[d]);a=!1},d(c){c&&T(e),c&&T(s),ve(u,c),c&&T(l)}}}function Qf(t){let e,r;return e=new In({props:{items:t[4],vertical:!0}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[4]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Jf(t){let e,r,n,i,s,l,a,o,u;return n=new He({props:{s:t[3]}}),a=new Ye({props:{items:t[4]}}),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=B(),s=C("tr"),l=C("td"),H(a.$$.fragment),o=B(),O(r,"colspan","2"),O(r,"class","table-subheader"),O(l,"colspan","2"),O(l,"class","centeredText")},m(f,c){E(f,e,c),A(e,r),W(n,r,null),A(r,i),E(f,s,c),A(s,l),W(a,l,null),A(l,o),u=!0},p(f,c){let d={};c&1&&(d.s=f[3]),n.$set(d);let h={};c&1&&(h.items=f[4]),a.$set(h)},i(f){u||(v(n.$$.fragment,f),v(a.$$.fragment,f),u=!0)},o(f){w(n.$$.fragment,f),w(a.$$.fragment,f),u=!1},d(f){f&&T(e),q(n),f&&T(s),q(a)}}}function Kl(t){let e,r,n,i,s,l,a;return n=new Ae({props:{val:t[3]}}),l=new Ye({props:{items:t[4][t[3]]}}),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=ae(":"),s=C("td"),H(l.$$.fragment)},m(o,u){E(o,e,u),A(e,r),W(n,r,null),A(r,i),A(e,s),W(l,s,null),a=!0},p(o,u){let f={};u&1&&(f.val=o[3]),n.$set(f);let c={};u&1&&(c.items=o[4][o[3]]),l.$set(c)},i(o){a||(v(n.$$.fragment,o),v(l.$$.fragment,o),a=!0)},o(o){w(n.$$.fragment,o),w(l.$$.fragment,o),a=!1},d(o){o&&T(e),q(n),q(l)}}}function Vl(t){let e,r,n,i,s,l,a=[Jf,Qf,Vf,Kf],o=[];function u(f,c){return c&1&&(e=null),c&1&&(r=null),e==null&&(e=!!(f[2].includes(f[3])&&f[4]&&f[4].length>0)),e?0:(r==null&&(r=!!["requiresBaseFunc"].includes(f[3])),r?1:f[3]=="getOneFreeProtected"?2:3)}return n=u(t,-1),i=o[n]=a[n](t),{c(){i.c(),s=ge()},m(f,c){o[n].m(f,c),E(f,s,c),l=!0},p(f,c){let d=n;n=u(f,c),n===d?o[n].p(f,c):(J(),w(o[d],1,1,()=>{o[d]=null}),ee(),i=o[n],i?i.p(f,c):(i=o[n]=a[n](f),i.c()),v(i,1),i.m(s.parentNode,s))},i(f){l||(v(i),l=!0)},o(f){w(i),l=!1},d(f){o[n].d(f),f&&T(s)}}}function ec(t){let e,r,n,i,s,l,a=Xe(t[0],{last:t[2],exclude:["name"]}).all,o=[];for(let f=0;f<a.length;f+=1)o[f]=Vl(Yl(t,a,f));let u=f=>w(o[f],1,1,()=>{o[f]=null});return{c(){e=C("table"),r=C("tr"),n=C("td"),i=ae(t[1]),s=B();for(let f=0;f<o.length;f+=1)o[f].c();O(n,"colspan","2"),O(r,"class","table-header"),O(e,"class","main-table")},m(f,c){E(f,e,c),A(e,r),A(r,n),A(n,i),A(e,s);for(let d=0;d<o.length;d+=1)o[d].m(e,null);l=!0},p(f,[c]){if((!l||c&2)&&Oe(i,f[1]),c&5){a=Xe(f[0],{last:f[2],exclude:["name"]}).all;let d;for(d=0;d<a.length;d+=1){let h=Yl(f,a,d);o[d]?(o[d].p(h,c),v(o[d],1)):(o[d]=Vl(h),o[d].c(),v(o[d],1),o[d].m(e,null))}for(J(),d=a.length;d<o.length;d+=1)u(d);ee()}},i(f){if(!l){for(let c=0;c<a.length;c+=1)v(o[c]);l=!0}},o(f){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)w(o[c]);l=!1},d(f){f&&T(e),ve(o,f)}}}function tc(t,e,r){let{research:n}=e,{title:i=$.tr("Research")}=e,s=["unlocks","seeAlso","requiresBaseFunc","manufacture","freeFrom","dependencies","leadsTo","disables","getOneFree","getOneFreeProtected"];return t.$$set=l=>{"research"in l&&r(0,n=l.research),"title"in l&&r(1,i=l.title)},t.$$.update=()=>{if(t.$$.dirty&1){e:console.log(n)}},[n,i,s]}var hr=class extends we{constructor(e){super(),Se(this,e,tc,ec,ye,{research:0,title:1})}},Ql=hr;function Jl(t,e,r){let n=t.slice();return n[1]=e[r],n}function es(t,e,r){let n=t.slice();return n[4]=e[r],n}function ts(t,e,r){let n=t.slice();return n[7]=e[r],n[9]=r,n}function ns(t){let e,r,n,i,s,l,a,o;n=new Ae({props:{val:"randomProducedItems"}});let u=t[0].randomProducedItems,f=[];for(let d=0;d<u.length;d+=1)f[d]=ls(es(t,u,d));let c=d=>w(f[d],1,1,()=>{f[d]=null});return{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=B(),s=C("tr"),l=C("td"),a=C("table");for(let d=0;d<f.length;d+=1)f[d].c();O(r,"colspan","2"),O(r,"class","table-subheader"),O(a,"class","number-table"),O(a,"width","100%"),Me(a,"margin","0px"),O(l,"colspan","2")},m(d,h){E(d,e,h),A(e,r),W(n,r,null),E(d,i,h),E(d,s,h),A(s,l),A(l,a);for(let p=0;p<f.length;p+=1)f[p].m(a,null);o=!0},p(d,h){if(h&1){u=d[0].randomProducedItems;let p;for(p=0;p<u.length;p+=1){let m=es(d,u,p);f[p]?(f[p].p(m,h),v(f[p],1)):(f[p]=ls(m),f[p].c(),v(f[p],1),f[p].m(a,null))}for(J(),p=u.length;p<f.length;p+=1)c(p);ee()}},i(d){if(!o){v(n.$$.fragment,d);for(let h=0;h<u.length;h+=1)v(f[h]);o=!0}},o(d){w(n.$$.fragment,d),f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)w(f[h]);o=!1},d(d){d&&T(e),q(n),d&&T(i),d&&T(s),ve(f,d)}}}function rs(t){let e;return{c(){e=C("tr"),e.innerHTML='<td colspan="2" style="text-align:center;">NOTHING</td>'},m(r,n){E(r,e,n)},d(r){r&&T(e)}}}function is(t){let e,r,n=t[4][1][t[7]]+"",i,s,l,a;return l=new Ze({props:{href:t[7]}}),{c(){e=C("tr"),r=C("td"),i=ae(n),s=C("td"),H(l.$$.fragment)},m(o,u){E(o,e,u),A(e,r),A(r,i),A(e,s),W(l,s,null),a=!0},p(o,u){(!a||u&1)&&n!==(n=o[4][1][o[7]]+"")&&Oe(i,n);let f={};u&1&&(f.href=o[7]),l.$set(f)},i(o){a||(v(l.$$.fragment,o),a=!0)},o(o){w(l.$$.fragment,o),a=!1},d(o){o&&T(e),q(l)}}}function ls(t){let e=Object.keys(t[4][1]).length==0,r,n,i,s,l,a=t[4][0]+"",o,u,f=(t[4][0]/t[0].chanceSum*100).toFixed(3)+"",c,d,h,p=e&&rs(t),m=Object.keys(t[4][1]).sort(),_=[];for(let y=0;y<m.length;y+=1)_[y]=is(ts(t,m,y));let b=y=>w(_[y],1,1,()=>{_[y]=null});return{c(){p&&p.c(),r=B();for(let y=0;y<_.length;y+=1)_[y].c();n=B(),i=C("tr"),s=C("td"),l=ae("\xD7"),o=ae(a),u=ae(" / "),c=ae(f),d=ae("%"),O(s,"colspan","2"),Me(s,"text-align","center"),Me(s,"border-bottom","solid 0.3px #382C44")},m(y,S){p&&p.m(y,S),E(y,r,S);for(let R=0;R<_.length;R+=1)_[R].m(y,S);E(y,n,S),E(y,i,S),A(i,s),A(s,l),A(s,o),A(s,u),A(s,c),A(s,d),h=!0},p(y,S){if(S&1&&(e=Object.keys(y[4][1]).length==0),e?p||(p=rs(y),p.c(),p.m(r.parentNode,r)):p&&(p.d(1),p=null),S&1){m=Object.keys(y[4][1]).sort();let R;for(R=0;R<m.length;R+=1){let M=ts(y,m,R);_[R]?(_[R].p(M,S),v(_[R],1)):(_[R]=is(M),_[R].c(),v(_[R],1),_[R].m(n.parentNode,n))}for(J(),R=m.length;R<_.length;R+=1)b(R);ee()}(!h||S&1)&&a!==(a=y[4][0]+"")&&Oe(o,a),(!h||S&1)&&f!==(f=(y[4][0]/y[0].chanceSum*100).toFixed(3)+"")&&Oe(c,f)},i(y){if(!h){for(let S=0;S<m.length;S+=1)v(_[S]);h=!0}},o(y){_=_.filter(Boolean);for(let S=0;S<_.length;S+=1)w(_[S]);h=!1},d(y){p&&p.d(y),y&&T(r),ve(_,y),y&&T(n),y&&T(i)}}}function ss(t){let e,r,n,i,s,l,a,o,u,f;n=new Ae({props:{val:t[1][0]}});let c=[rc,nc],d=[];function h(p,m){return m&1&&(l=null),l==null&&(l=!!["requiresBaseFunc","producedItems","requiredItems"].includes(p[1][0])),l?0:1}return a=h(t,-1),o=d[a]=c[a](t),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=B(),s=C("td"),o.c(),u=B(),O(r,"class","padding-right")},m(p,m){E(p,e,m),A(e,r),W(n,r,null),A(e,i),A(e,s),d[a].m(s,null),A(e,u),f=!0},p(p,m){let _={};m&1&&(_.val=p[1][0]),n.$set(_);let b=a;a=h(p,m),a===b?d[a].p(p,m):(J(),w(d[b],1,1,()=>{d[b]=null}),ee(),o=d[a],o?o.p(p,m):(o=d[a]=c[a](p),o.c()),v(o,1),o.m(s,null))},i(p){f||(v(n.$$.fragment,p),v(o),f=!0)},o(p){w(n.$$.fragment,p),w(o),f=!1},d(p){p&&T(e),q(n),d[a].d()}}}function nc(t){let e,r;return e=new Ae({props:{val:t[1][1]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[1][1]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function rc(t){let e,r;return e=new Ye({props:{items:t[1][1]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[1][1]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function os(t){let e=!["name","randomProducedItems"].includes(t[1][0]),r,n,i=e&&ss(t);return{c(){i&&i.c(),r=ge()},m(s,l){i&&i.m(s,l),E(s,r,l),n=!0},p(s,l){l&1&&(e=!["name","randomProducedItems"].includes(s[1][0])),e?i?(i.p(s,l),l&1&&v(i,1)):(i=ss(s),i.c(),v(i,1),i.m(r.parentNode,r)):i&&(J(),w(i,1,1,()=>{i=null}),ee())},i(s){n||(v(i),n=!0)},o(s){w(i),n=!1},d(s){i&&i.d(s),s&&T(r)}}}function ic(t){let e,r,n,i,s,l,a="randomProducedItems"in t[0]&&ns(t),o=Object.entries(t[0]).sort(as),u=[];for(let c=0;c<o.length;c+=1)u[c]=os(Jl(t,o,c));let f=c=>w(u[c],1,1,()=>{u[c]=null});return{c(){e=C("table"),r=C("tr"),n=C("td"),n.textContent=`${$.str("Manufacture")}`,i=B(),a&&a.c(),s=B();for(let c=0;c<u.length;c+=1)u[c].c();O(n,"colspan","2"),O(r,"class","table-header"),O(e,"class","main-table")},m(c,d){E(c,e,d),A(e,r),A(r,n),A(e,i),a&&a.m(e,null),A(e,s);for(let h=0;h<u.length;h+=1)u[h].m(e,null);l=!0},p(c,[d]){if("randomProducedItems"in c[0]?a?(a.p(c,d),d&1&&v(a,1)):(a=ns(c),a.c(),v(a,1),a.m(e,s)):a&&(J(),w(a,1,1,()=>{a=null}),ee()),d&1){o=Object.entries(c[0]).sort(as);let h;for(h=0;h<o.length;h+=1){let p=Jl(c,o,h);u[h]?(u[h].p(p,d),v(u[h],1)):(u[h]=os(p),u[h].c(),v(u[h],1),u[h].m(e,null))}for(J(),h=o.length;h<u.length;h+=1)f(h);ee()}},i(c){if(!l){v(a);for(let d=0;d<o.length;d+=1)v(u[d]);l=!0}},o(c){w(a),u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)w(u[d]);l=!1},d(c){c&&T(e),a&&a.d(),ve(u,c)}}}var as=(t,e)=>t[0]>e[0]?1:-1;function lc(t,e,r){let{manufacture:n}=e;return t.$$set=i=>{"manufacture"in i&&r(0,n=i.manufacture)},t.$$.update=()=>{if(t.$$.dirty&1){e:console.log(n)}},[n]}var pr=class extends we{constructor(e){super(),Se(this,e,lc,ic,ye,{manufacture:0})}},us=pr;function fs(t,e,r){let n=t.slice();return n[1]=e[r][0],n[2]=e[r][1],n}function cs(t){let e,r;return e=new pt({props:{links:t[2],title:$.tr(t[1])}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.links=n[2]),i&1&&(s.title=$.tr(n[1])),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function sc(t){let e,r,n=Xe(t[0],{exclude:["type"]}).all,i=[];for(let l=0;l<n.length;l+=1)i[l]=cs(fs(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=ge()},m(l,a){for(let o=0;o<i.length;o+=1)i[o].m(l,a);E(l,e,a),r=!0},p(l,[a]){if(a&1){n=Xe(l[0],{exclude:["type"]}).all;let o;for(o=0;o<n.length;o+=1){let u=fs(l,n,o);i[o]?(i[o].p(u,a),v(i[o],1)):(i[o]=cs(u),i[o].c(),v(i[o],1),i[o].m(e.parentNode,e))}for(J(),o=n.length;o<i.length;o+=1)s(o);ee()}},i(l){if(!r){for(let a=0;a<n.length;a+=1)v(i[a]);r=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)w(i[a]);r=!1},d(l){ve(i,l),l&&T(e)}}}function oc(t,e,r){let{conditions:n}=e;return console.log(n),console.log(Xe(n)),t.$$set=i=>{"conditions"in i&&r(0,n=i.conditions)},[n]}var mr=class extends we{constructor(e){super(),Se(this,e,oc,sc,ye,{conditions:0})}},ds=mr;function hs(t,e,r){let n=t.slice();return n[1]=e[r],n[3]=r,n}function ps(t,e,r){let n=t.slice();return n[4]=e[r],n[6]=r,n}function ms(t,e,r){let n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function ac(t){let e,r;return e=new Ae({props:{val:t[8]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[8]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function uc(t){let e,r;return{c(){e=C("img"),O(e,"class","sprite"),O(e,"alt","X"),Ge(e.src,r=$.sprite(t[8]))||O(e,"src",r),O(e,"onerror","this.onerror=null; this.src='xpedia/0.jpg'")},m(n,i){E(n,e,i)},p(n,i){i&1&&!Ge(e.src,r=$.sprite(n[8]))&&O(e,"src",r)},i:oe,o:oe,d(n){n&&T(e)}}}function _s(t){let e,r,n=$.tr(t[7])+"",i,s,l,a,o,u,f=[uc,ac],c=[];function d(h,p){return p&1&&(l=null),l==null&&(l=!!["modSprite"].includes(h[7])),l?0:1}return a=d(t,-1),o=c[a]=f[a](t),{c(){e=C("tr"),r=C("td"),i=B(),s=C("td"),o.c(),O(r,"class","padding-right")},m(h,p){E(h,e,p),A(e,r),r.innerHTML=n,A(e,i),A(e,s),c[a].m(s,null),u=!0},p(h,p){(!u||p&1)&&n!==(n=$.tr(h[7])+"")&&(r.innerHTML=n);let m=a;a=d(h,p),a===m?c[a].p(h,p):(J(),w(c[m],1,1,()=>{c[m]=null}),ee(),o=c[a],o?o.p(h,p):(o=c[a]=f[a](h),o.c()),v(o,1),o.m(s,null))},i(h){u||(v(o),u=!0)},o(h){w(o),u=!1},d(h){h&&T(e),c[a].d()}}}function gs(t){let e,r,n,i,s,l,a,o,u=Object.keys(t[0].raceBonus).sort(),f=[];for(let d=0;d<u.length;d+=1)f[d]=vs(hs(t,u,d));let c=d=>w(f[d],1,1,()=>{f[d]=null});return{c(){e=C("tr"),r=C("td"),n=C("table"),i=C("tr"),s=C("td"),s.textContent=`${$.tr("raceBonus")}`,l=C("td"),a=B();for(let d=0;d<f.length;d+=1)f[d].c();O(s,"colspan","2"),O(n,"class","number-table"),O(r,"colspan","2")},m(d,h){E(d,e,h),A(e,r),A(r,n),A(n,i),A(i,s),A(i,l),A(i,a);for(let p=0;p<f.length;p+=1)f[p].m(i,null);o=!0},p(d,h){if(h&1){u=Object.keys(d[0].raceBonus).sort();let p;for(p=0;p<u.length;p+=1){let m=hs(d,u,p);f[p]?(f[p].p(m,h),v(f[p],1)):(f[p]=vs(m),f[p].c(),v(f[p],1),f[p].m(i,null))}for(J(),p=u.length;p<f.length;p+=1)c(p);ee()}},i(d){if(!o){for(let h=0;h<u.length;h+=1)v(f[h]);o=!0}},o(d){f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)w(f[h]);o=!1},d(d){d&&T(e),ve(f,d)}}}function bs(t){let e=$.tr(t[4])+"",r,n,i,s,l,a;return s=new Ze({props:{href:t[0].raceBonus[t[1]][t[4]]}}),{c(){r=ae(e),n=ae(":\xA0"),i=C("em"),H(s.$$.fragment),l=C("br")},m(o,u){E(o,r,u),E(o,n,u),E(o,i,u),W(s,i,null),E(o,l,u),a=!0},p(o,u){(!a||u&1)&&e!==(e=$.tr(o[4])+"")&&Oe(r,e);let f={};u&1&&(f.href=o[0].raceBonus[o[1]][o[4]]),s.$set(f)},i(o){a||(v(s.$$.fragment,o),a=!0)},o(o){w(s.$$.fragment,o),a=!1},d(o){o&&T(r),o&&T(n),o&&T(i),q(s),o&&T(l)}}}function vs(t){let e,r,n=$.tr(t[1])+"",i,s,l,a,o=Object.keys(t[0].raceBonus[t[1]]).sort(),u=[];for(let c=0;c<o.length;c+=1)u[c]=bs(ps(t,o,c));let f=c=>w(u[c],1,1,()=>{u[c]=null});return{c(){e=C("tr"),r=C("td"),i=ae(n),s=C("td");for(let c=0;c<u.length;c+=1)u[c].c();l=B()},m(c,d){E(c,e,d),A(e,r),A(r,i),A(e,s);for(let h=0;h<u.length;h+=1)u[h].m(s,null);A(s,l),a=!0},p(c,d){if((!a||d&1)&&n!==(n=$.tr(c[1])+"")&&Oe(i,n),d&1){o=Object.keys(c[0].raceBonus[c[1]]).sort();let h;for(h=0;h<o.length;h+=1){let p=ps(c,o,h);u[h]?(u[h].p(p,d),v(u[h],1)):(u[h]=bs(p),u[h].c(),v(u[h],1),u[h].m(s,l))}for(J(),h=o.length;h<u.length;h+=1)f(h);ee()}},i(c){if(!a){for(let d=0;d<o.length;d+=1)v(u[d]);a=!0}},o(c){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)w(u[d]);a=!1},d(c){c&&T(e),ve(u,c)}}}function fc(t){let e,r,n,i,s,l=Xe(t[0],{exclude:["raceBonus","type","battlescapeTerrainData","craftInventoryTile","deployment"]}).all,a=[];for(let f=0;f<l.length;f+=1)a[f]=_s(ms(t,l,f));let o=f=>w(a[f],1,1,()=>{a[f]=null}),u=t[0].raceBonus&&gs(t);return{c(){e=C("table"),r=C("tr"),r.innerHTML='<td colspan="2">Craft</td>',n=B();for(let f=0;f<a.length;f+=1)a[f].c();i=B(),u&&u.c(),O(r,"class","table-header"),O(e,"class","main-table")},m(f,c){E(f,e,c),A(e,r),A(e,n);for(let d=0;d<a.length;d+=1)a[d].m(e,null);A(e,i),u&&u.m(e,null),s=!0},p(f,[c]){if(c&1){l=Xe(f[0],{exclude:["raceBonus","type","battlescapeTerrainData","craftInventoryTile","deployment"]}).all;let d;for(d=0;d<l.length;d+=1){let h=ms(f,l,d);a[d]?(a[d].p(h,c),v(a[d],1)):(a[d]=_s(h),a[d].c(),v(a[d],1),a[d].m(e,i))}for(J(),d=l.length;d<a.length;d+=1)o(d);ee()}f[0].raceBonus?u?(u.p(f,c),c&1&&v(u,1)):(u=gs(f),u.c(),v(u,1),u.m(e,null)):u&&(J(),w(u,1,1,()=>{u=null}),ee())},i(f){if(!s){for(let c=0;c<l.length;c+=1)v(a[c]);v(u),s=!0}},o(f){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)w(a[c]);w(u),s=!1},d(f){f&&T(e),ve(a,f),u&&u.d()}}}function cc(t,e,r){let{ufo:n}=e;return t.$$set=i=>{"ufo"in i&&r(0,n=i.ufo)},t.$$.update=()=>{if(t.$$.dirty&1){e:console.info(n)}},[n]}var _r=class extends we{constructor(e){super(),Se(this,e,cc,fc,ye,{ufo:0})}},ks=_r;function ys(t,e,r){let n=t.slice();return n[3]=e[r],n[5]=r,n}function ws(t,e,r){let n=t.slice();return n[3]=e[r],n[7]=r,n}function Ss(t){let e,r;return{c(){e=C("img"),O(e,"class","facility sprite"),O(e,"onerror","this.onerror=null; this.src='xpedia/0.jpg'"),O(e,"alt","X"),Ge(e.src,r=$.specialSprite("baseSprite",t[1]*1+t[7]*t[0]+t[5]))||O(e,"src",r)},m(n,i){E(n,e,i)},p(n,i){i&3&&!Ge(e.src,r=$.specialSprite("baseSprite",n[1]*1+n[7]*n[0]+n[5]))&&O(e,"src",r)},d(n){n&&T(e)}}}function As(t){let e,r={length:t[0]},n=[];for(let i=0;i<r.length;i+=1)n[i]=Ss(ws(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ge()},m(i,s){for(let l=0;l<n.length;l+=1)n[l].m(i,s);E(i,e,s)},p(i,s){if(s&3){r={length:i[0]};let l;for(l=0;l<r.length;l+=1){let a=ws(i,r,l);n[l]?n[l].p(a,s):(n[l]=Ss(a),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},d(i){ve(n,i),i&&T(e)}}}function dc(t){let e,r={length:t[0]},n=[];for(let i=0;i<r.length;i+=1)n[i]=As(ys(t,r,i));return{c(){e=C("div");for(let i=0;i<n.length;i+=1)n[i].c();O(e,"class","tight"),Me(e,"columns",t[0]),Me(e,"width",64*t[0]+"px"),Me(e,"margin-bottom",(t[2]?-64*t[0]:0)+"px")},m(i,s){E(i,e,s);for(let l=0;l<n.length;l+=1)n[l].m(e,null)},p(i,[s]){if(s&3){r={length:i[0]};let l;for(l=0;l<r.length;l+=1){let a=ys(i,r,l);n[l]?n[l].p(a,s):(n[l]=As(a),n[l].c(),n[l].m(e,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}s&1&&Me(e,"columns",i[0]),s&1&&Me(e,"width",64*i[0]+"px"),s&5&&Me(e,"margin-bottom",(i[2]?-64*i[0]:0)+"px")},i:oe,o:oe,d(i){i&&T(e),ve(n,i)}}}function hc(t,e,r){let{size:n,prop:i,bottom:s}=e;return t.$$set=l=>{"size"in l&&r(0,n=l.size),"prop"in l&&r(1,i=l.prop),"bottom"in l&&r(2,s=l.bottom)},[n,i,s]}var gr=class extends we{constructor(e){super(),Se(this,e,hc,dc,ye,{size:0,prop:1,bottom:2})}},Jt=gr;function $s(t,e,r){let n=t.slice();return n[4]=e[r][0],n[5]=e[r][1],n}function Cs(t,e,r){let n=t.slice();return n[8]=e[r],n[10]=r,n}function Ts(t){let e,r,n,i,s,l,a,o,u,f,c,d,h;n=new Ae({props:{val:t[4]}});let p=[bc,gc,_c,mc,pc],m=[];function _(b,y){return y&1&&(l=null),y&1&&(a=null),y&1&&(o=null),y&1&&(u=null),l==null&&(l=!!["buildCostItems"].includes(b[4])),l?0:(a==null&&(a=!!["storageTiles"].includes(b[4])),a?1:(o==null&&(o=!!["provideBaseFunc","requiresBaseFunc","forbiddenBaseFunc"].includes(b[4])),o?2:(u==null&&(u=!!["spriteFacility","spriteShape"].includes(b[4])),u?3:4)))}return f=_(t,-1),c=m[f]=p[f](t),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=B(),s=C("td"),c.c(),d=B(),O(r,"class","padding-right")},m(b,y){E(b,e,y),A(e,r),W(n,r,null),A(e,i),A(e,s),m[f].m(s,null),A(e,d),h=!0},p(b,y){let S={};y&1&&(S.val=b[4]),n.$set(S);let R=f;f=_(b,y),f===R?m[f].p(b,y):(J(),w(m[R],1,1,()=>{m[R]=null}),ee(),c=m[f],c?c.p(b,y):(c=m[f]=p[f](b),c.c()),v(c,1),c.m(s,null))},i(b){h||(v(n.$$.fragment,b),v(c),h=!0)},o(b){w(n.$$.fragment,b),w(c),h=!1},d(b){b&&T(e),q(n),m[f].d()}}}function pc(t){let e,r;return e=new Ae({props:{val:t[5]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.val=n[5]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function mc(t){let e,r,n,i,s=[kc,vc],l=[];function a(o,u){return o[0].spriteFacility?0:1}return e=a(t,-1),r=l[e]=s[e](t),{c(){r.c(),n=ge()},m(o,u){l[e].m(o,u),E(o,n,u),i=!0},p(o,u){let f=e;e=a(o,u),e===f?l[e].p(o,u):(J(),w(l[f],1,1,()=>{l[f]=null}),ee(),r=l[e],r?r.p(o,u):(r=l[e]=s[e](o),r.c()),v(r,1),r.m(n.parentNode,n))},i(o){i||(v(r),i=!0)},o(o){w(r),i=!1},d(o){l[e].d(o),o&&T(n)}}}function _c(t){let e,r;return e=new Ye({props:{items:t[5],vertical:!0}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.items=n[5]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function gc(t){let e,r,n,i,s,l,a,o,u=t[2]&&Es(t);return{c(){e=C("div"),r=C("div"),n=C("button"),n.textContent="Expand",i=B(),s=C("div"),u&&u.c(),O(n,"class","button")},m(f,c){E(f,e,c),A(e,r),A(r,n),A(e,i),A(e,s),u&&u.m(s,null),l=!0,a||(o=Le(n,"click",t[3]),a=!0)},p(f,c){f[2]?u?(u.p(f,c),c&4&&v(u,1)):(u=Es(f),u.c(),v(u,1),u.m(s,null)):u&&(J(),w(u,1,1,()=>{u=null}),ee())},i(f){l||(v(u),l=!0)},o(f){w(u),l=!1},d(f){f&&T(e),u&&u.d(),a=!1,o()}}}function bc(t){let e,r,n=Object.keys(t[5]).sort(),i=[];for(let l=0;l<n.length;l+=1)i[l]=xs(Cs(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=ge()},m(l,a){for(let o=0;o<i.length;o+=1)i[o].m(l,a);E(l,e,a),r=!0},p(l,a){if(a&1){n=Object.keys(l[5]).sort();let o;for(o=0;o<n.length;o+=1){let u=Cs(l,n,o);i[o]?(i[o].p(u,a),v(i[o],1)):(i[o]=xs(u),i[o].c(),v(i[o],1),i[o].m(e.parentNode,e))}for(J(),o=n.length;o<i.length;o+=1)s(o);ee()}},i(l){if(!r){for(let a=0;a<n.length;a+=1)v(i[a]);r=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)w(i[a]);r=!1},d(l){ve(i,l),l&&T(e)}}}function vc(t){let e,r;return e=new Jt({props:{size:t[1],prop:t[5]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&2&&(s.size=n[1]),i&1&&(s.prop=n[5]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function kc(t){let e,r,n,i;return e=new Jt({props:{size:t[1],prop:t[5],bottom:!0}}),n=new Jt({props:{size:t[1],prop:t[0].spriteFacility}}),{c(){H(e.$$.fragment),r=B(),H(n.$$.fragment)},m(s,l){W(e,s,l),E(s,r,l),W(n,s,l),i=!0},p(s,l){let a={};l&2&&(a.size=s[1]),l&1&&(a.prop=s[5]),e.$set(a);let o={};l&2&&(o.size=s[1]),l&1&&(o.prop=s[0].spriteFacility),n.$set(o)},i(s){i||(v(e.$$.fragment,s),v(n.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(n.$$.fragment,s),i=!1},d(s){q(e,s),s&&T(r),q(n,s)}}}function Es(t){let e,r,n;return r=new Ye({props:{items:t[5],vertical:!0}}),{c(){e=C("div"),H(r.$$.fragment),Me(e,"columns","6")},m(i,s){E(i,e,s),W(r,e,null),n=!0},p(i,s){let l={};s&1&&(l.items=i[5]),r.$set(l)},i(i){n||(v(r.$$.fragment,i),n=!0)},o(i){w(r.$$.fragment,i),n=!1},d(i){i&&T(e),q(r)}}}function yc(t){let e;return{c(){e=C("br")},m(r,n){E(r,e,n)},d(r){r&&T(e)}}}function xs(t){let e,r,n,i=t[5][t[8]].build+"",s,l,a=t[5][t[8]].refund+"",o,u,f=t[10]!=0&&yc(t);return r=new Ze({props:{href:t[8]}}),{c(){f&&f.c(),e=B(),H(r.$$.fragment),n=ae(`\r
              : `),s=ae(i),l=ae(" / "),o=ae(a)},m(c,d){f&&f.m(c,d),E(c,e,d),W(r,c,d),E(c,n,d),E(c,s,d),E(c,l,d),E(c,o,d),u=!0},p(c,d){let h={};d&1&&(h.href=c[8]),r.$set(h),(!u||d&1)&&i!==(i=c[5][c[8]].build+"")&&Oe(s,i),(!u||d&1)&&a!==(a=c[5][c[8]].refund+"")&&Oe(o,a)},i(c){u||(v(r.$$.fragment,c),u=!0)},o(c){w(r.$$.fragment,c),u=!1},d(c){f&&f.d(c),c&&T(e),q(r,c),c&&T(n),c&&T(s),c&&T(l),c&&T(o)}}}function Os(t){let e=!["type","battlescapeTerrainData","craftInventoryTile","deployment"].includes(t[4]),r,n,i=e&&Ts(t);return{c(){i&&i.c(),r=ge()},m(s,l){i&&i.m(s,l),E(s,r,l),n=!0},p(s,l){l&1&&(e=!["type","battlescapeTerrainData","craftInventoryTile","deployment"].includes(s[4])),e?i?(i.p(s,l),l&1&&v(i,1)):(i=Ts(s),i.c(),v(i,1),i.m(r.parentNode,r)):i&&(J(),w(i,1,1,()=>{i=null}),ee())},i(s){n||(v(i),n=!0)},o(s){w(i),n=!1},d(s){i&&i.d(s),s&&T(r)}}}function wc(t){let e,r,n,i,s,l=Xe(t[0],{first:["spriteShape"],exclude:["spriteFacility"]}).all,a=[];for(let u=0;u<l.length;u+=1)a[u]=Os($s(t,l,u));let o=u=>w(a[u],1,1,()=>{a[u]=null});return{c(){e=C("table"),r=C("tr"),n=C("td"),n.textContent=`${$.tr("Facility")}`,i=B();for(let u=0;u<a.length;u+=1)a[u].c();O(n,"colspan","2"),O(r,"class","table-header"),O(e,"class","main-table")},m(u,f){E(u,e,f),A(e,r),A(r,n),A(e,i);for(let c=0;c<a.length;c+=1)a[c].m(e,null);s=!0},p(u,[f]){if(f&7){l=Xe(u[0],{first:["spriteShape"],exclude:["spriteFacility"]}).all;let c;for(c=0;c<l.length;c+=1){let d=$s(u,l,c);a[c]?(a[c].p(d,f),v(a[c],1)):(a[c]=Os(d),a[c].c(),v(a[c],1),a[c].m(e,null))}for(J(),c=l.length;c<a.length;c+=1)o(c);ee()}},i(u){if(!s){for(let f=0;f<l.length;f+=1)v(a[f]);s=!0}},o(u){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)w(a[f]);s=!1},d(u){u&&T(e),ve(a,u)}}}function Sc(t,e,r){let{facility:n}=e,i=!1,s=1,l=a=>r(2,i=!i);return t.$$set=a=>{"facility"in a&&r(0,n=a.facility)},t.$$.update=()=>{if(t.$$.dirty&3){e:r(1,s=n.size||1),console.log(s),console.info(n)}},[n,s,i,l]}var br=class extends we{constructor(e){super(),Se(this,e,Sc,wc,ye,{facility:0})}},Is=br;function Fs(t,e,r){let n=t.slice();return n[1]=e[r],n}function Rs(t){let e,r,n,i,s,l,a;return n=new Ae({props:{val:t[1][0]}}),l=new Ye({props:{items:t[1][1]}}),{c(){e=C("tr"),r=C("td"),H(n.$$.fragment),i=B(),s=C("td"),H(l.$$.fragment)},m(o,u){E(o,e,u),A(e,r),W(n,r,null),A(e,i),A(e,s),W(l,s,null),a=!0},p(o,u){let f={};u&1&&(f.val=o[1][0]),n.$set(f);let c={};u&1&&(c.items=o[1][1]),l.$set(c)},i(o){a||(v(n.$$.fragment,o),v(l.$$.fragment,o),a=!0)},o(o){w(n.$$.fragment,o),w(l.$$.fragment,o),a=!1},d(o){o&&T(e),q(n),q(l)}}}function Ds(t){let e=!["id"].includes(t[1][0]),r,n,i=e&&Rs(t);return{c(){i&&i.c(),r=ge()},m(s,l){i&&i.m(s,l),E(s,r,l),n=!0},p(s,l){l&1&&(e=!["id"].includes(s[1][0])),e?i?(i.p(s,l),l&1&&v(i,1)):(i=Rs(s),i.c(),v(i,1),i.m(r.parentNode,r)):i&&(J(),w(i,1,1,()=>{i=null}),ee())},i(s){n||(v(i),n=!0)},o(s){w(i),n=!1},d(s){i&&i.d(s),s&&T(r)}}}function Ac(t){let e,r,n=Object.entries(t[0]).sort(Ms),i=[];for(let l=0;l<n.length;l+=1)i[l]=Ds(Fs(t,n,l));let s=l=>w(i[l],1,1,()=>{i[l]=null});return{c(){e=C("table");for(let l=0;l<i.length;l+=1)i[l].c();O(e,"class","main-table")},m(l,a){E(l,e,a);for(let o=0;o<i.length;o+=1)i[o].m(e,null);r=!0},p(l,[a]){if(a&1){n=Object.entries(l[0]).sort(Ms);let o;for(o=0;o<n.length;o+=1){let u=Fs(l,n,o);i[o]?(i[o].p(u,a),v(i[o],1)):(i[o]=Ds(u),i[o].c(),v(i[o],1),i[o].m(e,null))}for(J(),o=n.length;o<i.length;o+=1)s(o);ee()}},i(l){if(!r){for(let a=0;a<n.length;a+=1)v(i[a]);r=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)w(i[a]);r=!1},d(l){l&&T(e),ve(i,l)}}}var Ms=(t,e)=>(t[0]=="providedBy"?-10:10)+(t[0]>e[0]?1:-1);function $c(t,e,r){let{service:n}=e;return t.$$set=i=>{"service"in i&&r(0,n=i.service)},[n]}var vr=class extends we{constructor(e){super(),Se(this,e,$c,Ac,ye,{service:0})}},Ns=vr;function Ls(t,e,r){let n=t.slice();return n[1]=e[r],n}function Bs(t){let e,r,n,i=$.tr(t[1][0])+"",s,l,a,o,u,f,c;return o=new Ye({props:{items:t[1][1].providedBy}}),{c(){e=C("tr"),r=C("td"),n=C("a"),l=B(),a=C("td"),H(o.$$.fragment),u=B(),O(n,"class",".services"),O(n,"color","cyan"),O(n,"href",s="##"+t[1][0]),O(e,"class",f=t[1][0]==t[0]?"highlight":"")},m(d,h){E(d,e,h),A(e,r),A(r,n),n.innerHTML=i,A(e,l),A(e,a),W(o,a,null),A(e,u),c=!0},p(d,h){(!c||h&1&&f!==(f=d[1][0]==d[0]?"highlight":""))&&O(e,"class",f)},i(d){c||(v(o.$$.fragment,d),c=!0)},o(d){w(o.$$.fragment,d),c=!1},d(d){d&&T(e),q(o)}}}function Cc(t){let e,r,n,i,s,l,a,o;i=new He({props:{s:"Facility"}}),l=new He({props:{s:"Service"}});let u=Object.entries($.baseServices),f=[];for(let d=0;d<u.length;d+=1)f[d]=Bs(Ls(t,u,d));let c=d=>w(f[d],1,1,()=>{f[d]=null});return{c(){e=C("table"),r=C("tr"),n=C("td"),H(i.$$.fragment),s=C("td"),H(l.$$.fragment),a=B();for(let d=0;d<f.length;d+=1)f[d].c();O(r,"class","table-header"),O(e,"class","main-table base-services")},m(d,h){E(d,e,h),A(e,r),A(r,n),W(i,n,null),A(r,s),W(l,s,null),A(e,a);for(let p=0;p<f.length;p+=1)f[p].m(e,null);o=!0},p(d,[h]){if(h&1){u=Object.entries($.baseServices);let p;for(p=0;p<u.length;p+=1){let m=Ls(d,u,p);f[p]?(f[p].p(m,h),v(f[p],1)):(f[p]=Bs(m),f[p].c(),v(f[p],1),f[p].m(e,null))}for(J(),p=u.length;p<f.length;p+=1)c(p);ee()}},i(d){if(!o){v(i.$$.fragment,d),v(l.$$.fragment,d);for(let h=0;h<u.length;h+=1)v(f[h]);o=!0}},o(d){w(i.$$.fragment,d),w(l.$$.fragment,d),f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)w(f[h]);o=!1},d(d){d&&T(e),q(i),q(l),ve(f,d)}}}function Tc(t,e,r){let{query:n=null}=e;return console.log(n),t.$$set=i=>{"query"in i&&r(0,n=i.query)},[n]}var kr=class extends we{constructor(e){super(),Se(this,e,Tc,Cc,ye,{query:0})}},en=kr;function zs(t,e,r){let n=t.slice();return n[2]=e[r],n[4]=r,n}function Ps(t,e){let r,n,i;return n=new at({props:{item:e[2],title:"Stage",subtitle:`${e[4]+1}`}}),{key:t,first:null,c(){r=ge(),H(n.$$.fragment),this.first=r},m(s,l){E(s,r,l),W(n,s,l),i=!0},p(s,l){e=s;let a={};l&2&&(a.item=e[2]),l&2&&(a.subtitle=`${e[4]+1}`),n.$set(a)},i(s){i||(v(n.$$.fragment,s),i=!0)},o(s){w(n.$$.fragment,s),i=!1},d(s){s&&T(r),q(n,s)}}}function Ec(t){let e,r,n,i=[],s=new Map,l;e=new at({props:{item:t[0],title:"Commendation",sort:{exclude:["type","criteria","soldierBonusTypes"]}}});let a=t[1],o=u=>u[4];for(let u=0;u<a.length;u+=1){let f=zs(t,a,u),c=o(f);s.set(c,i[u]=Ps(c,f))}return{c(){H(e.$$.fragment),r=B(),n=C("div");for(let u=0;u<i.length;u+=1)i[u].c();O(n,"class","no-break-column")},m(u,f){W(e,u,f),E(u,r,f),E(u,n,f);for(let c=0;c<i.length;c+=1)i[c].m(n,null);l=!0},p(u,[f]){let c={};f&1&&(c.item=u[0]),e.$set(c),f&2&&(a=u[1],J(),i=ii(i,f,o,1,u,a,s,n,ri,Ps,null,zs),ee())},i(u){if(!l){v(e.$$.fragment,u);for(let f=0;f<a.length;f+=1)v(i[f]);l=!0}},o(u){w(e.$$.fragment,u);for(let f=0;f<i.length;f+=1)w(i[f]);l=!1},d(u){q(e,u),u&&T(r),u&&T(n);for(let f=0;f<i.length;f+=1)i[f].d()}}}function xc(t,e,r){let{com:n}=e,i;return t.$$set=s=>{"com"in s&&r(0,n=s.com)},t.$$.update=()=>{if(t.$$.dirty&1){e:{let s=[];for(let l=0;l<10;l++){let a=n.soldierBonusTypes?n.soldierBonusTypes[l]:null,o={...$.soldierBonuses[a]||{},criteria:{}};for(let u in n.criteria)o.criteria[u]=n.criteria[u][l];Object.keys(o).length>0&&(s[l]=o)}console.log("buf",s),r(1,i=s)}}},[n,i]}var yr=class extends we{constructor(e){super(),Se(this,e,xc,Ec,ye,{com:0})}},js=yr;function Us(t){let e,r;return{c(){e=C("meta"),O(e,"property","og:description"),O(e,"content",r=t[0].text)},m(n,i){E(n,e,i)},p(n,i){i&1&&r!==(r=n[0].text)&&O(e,"content",r)},d(n){n&&T(e)}}}function qs(t){let e,r;return{c(){e=C("meta"),O(e,"property","og:image"),O(e,"content",r=$.sprite(t[0].image_id))},m(n,i){E(n,e,i)},p(n,i){i&1&&r!==(r=$.sprite(n[0].image_id))&&O(e,"content",r)},d(n){n&&T(e)}}}function Oc(t){let e,r;return e=new pt({props:{links:$.sections[t[0].id].articles.map(uo)}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.links=$.sections[n[0].id].articles.map(uo)),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Ic(t){let e,r;return e=new pt({props:{links:$.categories[t[0].id]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.links=$.categories[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Fc(t){let e,r;return e=new ds({props:{conditions:$.startingConditions[t[0].id]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.conditions=$.startingConditions[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Rc(t){let e,r,n;var i=en;function s(l){return{}}return i&&(e=new i(s(t))),{c(){e&&H(e.$$.fragment),r=ge()},m(l,a){e&&W(e,l,a),E(l,r,a),n=!0},p(l,a){if(i!==(i=en)){if(e){J();let o=e;w(o.$$.fragment,1,0,()=>{q(o,1)}),ee()}i?(e=new i(s(l)),H(e.$$.fragment),v(e.$$.fragment,1),W(e,r.parentNode,r)):e=null}},i(l){n||(e&&v(e.$$.fragment,l),n=!0)},o(l){e&&w(e.$$.fragment,l),n=!1},d(l){l&&T(r),e&&q(e,l)}}}function Dc(t){let e,r,n,i=$.items[t[0].id]&&t[0].text&&Ws(t),s=t[2]&&Hs(t);return{c(){e=C("div"),i&&i.c(),r=B(),s&&s.c(),O(e,"class","main-table main-text")},m(l,a){E(l,e,a),i&&i.m(e,null),A(e,r),s&&s.m(e,null),n=!0},p(l,a){$.items[l[0].id]&&l[0].text?i?(i.p(l,a),a&1&&v(i,1)):(i=Ws(l),i.c(),v(i,1),i.m(e,r)):i&&(J(),w(i,1,1,()=>{i=null}),ee()),l[2]?s?s.p(l,a):(s=Hs(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(l){n||(v(i),n=!0)},o(l){w(i),n=!1},d(l){l&&T(e),i&&i.d(),s&&s.d()}}}function Mc(t){let e,r;return e=new ur({props:{armor:$.armors[$.units[t[0].id].armor],text:t[2]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.armor=$.armors[$.units[n[0].id].armor]),i&4&&(s.text=n[2]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Nc(t){let e,r;return e=new ur({props:{armor:$.armors[t[0].id],text:t[2]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.armor=$.armors[n[0].id]),i&4&&(s.text=n[2]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Ws(t){let e,r,n;return r=new Zt({props:{item:$.items[t[0].id],zoom:2}}),{c(){e=C("div"),H(r.$$.fragment),O(e,"class","article-text-image")},m(i,s){E(i,e,s),W(r,e,null),n=!0},p(i,s){let l={};s&1&&(l.item=$.items[i[0].id]),r.$set(l)},i(i){n||(v(r.$$.fragment,i),n=!0)},o(i){w(r.$$.fragment,i),n=!1},d(i){i&&T(e),q(r)}}}function Hs(t){let e,r;return{c(){e=new Ke(!1),r=ge(),e.a=r},m(n,i){e.m(t[2],n,i),E(n,r,i)},p(n,i){i&4&&e.p(n[2])},d(n){n&&T(r),n&&e.d()}}}function Gs(t){let e,r;return e=new Xl({props:{unit:$.units[t[0].id]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.unit=$.units[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Xs(t){let e,r;return e=new Vt({props:{item:$.items[t[0].id]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.item=$.items[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Ys(t){let e,r;return e=new Ns({props:{service:$.baseServices[t[0].id]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.service=$.baseServices[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Zs(t){let e,r;return e=new Nl({props:{craft:$.crafts[t[0].id]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.craft=$.crafts[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Ks(t){let e,r;return e=new Ul({props:{weapon:$.craftWeapons[t[0].id]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.weapon=$.craftWeapons[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Vs(t){let e,r;return e=new ks({props:{ufo:$.ufos[t[0].id]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.ufo=$.ufos[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Qs(t){let e,r;return e=new Is({props:{facility:$.facilities[t[0].id]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.facility=$.facilities[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Js(t){let e,r;return e=new us({props:{manufacture:$.manufacture[t[0].id]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.manufacture=$.manufacture[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function eo(t){let e,r;return e=new Ql({props:{research:$.research[t[0].id]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.research=$.research[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function to(t){let e,r;return e=new at({props:{item:$.soldierBonuses[t[0].id],title:"Bonuses"}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.item=$.soldierBonuses[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function no(t){let e,r;return e=new at({props:{item:$.eventScripts[t[0].id],title:"Event Script"}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.item=$.eventScripts[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function ro(t){let e,r;return e=new at({props:{item:$.soldierTransformation[t[0].id],title:"Transfomration"}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.item=$.soldierTransformation[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function io(t){let e,r;return e=new at({props:{item:$.soldiers[t[0].id],title:"Soldiers",sort:{first:["statCaps"],last:["armors"]}}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.item=$.soldiers[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function lo(t){let e,r;return e=new at({props:{item:$.races[t[0].id],title:"Race"}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.item=$.races[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function so(t){let e,r;return e=new at({props:{item:$.events[t[0].id],title:"Event"}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.item=$.events[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function oo(t){let e,r;return e=new js({props:{com:$.commendations[t[0].id]}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.com=$.commendations[n[0].id]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function ao(t){let e,r;return e=new Mn({props:{id:t[0].image_id}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.id=n[0].image_id),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Lc(t){let e,r,n,i,s,l,a,o,u,f,c,d,h,p,m,_,b,y,S,R,M,F,L,V,ue,D,G,k,Z,_e,Y,be,U,K,N,j,me,de,he,Be,je,Ie,Re,Pe,ze;document.title=e=$.tr(t[0].title||"XPedia");let Ne=t[0].text&&Us(t),ce=t[0].image_id&&qs(t);a=new He({props:{s:t[0].title}});let g=[Rc,Fc,Ic,Oc],Q=[];function X(le,Ce){return le[0].id=="SERVICES"?0:le[0].type_id=="CONDITIONS"?1:le[0].type_id=="CATEGORIES"?2:le[0].type_id=="PEDIA"||le[0].type_id=="TYPE"?3:-1}~(m=X(t,-1))&&(_=Q[m]=g[m](t));var I=t[3];function x(le){return{props:{query:le[1]}}}I&&(R=new I(x(t)));let P=[Nc,Mc,Dc],te=[];function ie(le,Ce){return le[0].id in $.armors?0:le[0].id in $.units&&$.units[le[0].id].armor?1:le[2]?2:-1}~(F=ie(t,-1))&&(L=te[F]=P[F](t));let z=t[0].id in $.units&&Gs(t),ne=t[0].id in $.items&&Xs(t),se=t[0].id in $.baseServices&&Ys(t),re=t[0].id in $.crafts&&Zs(t),pe=t[0].id in $.craftWeapons&&Ks(t),ke=t[0].id in $.ufos&&Vs(t),$e=t[0].id in $.facilities&&Qs(t),De=t[0].id in $.manufacture&&Js(t),We=t[0].id in $.research&&eo(t),fe=t[0].id in $.soldierBonuses&&to(t),Ee=t[0].id in $.eventScripts&&no(t),xe=t[0].id in $.soldierTransformation&&ro(t),Fe=t[0].id in $.soldiers&&io(t),Ue=t[0].id in $.races&&lo(t),qe=t[0].id in $.events&&so(t),Ve=t[0].id in $.commendations&&oo(t),Qe=!(t[0].id in $.units)&&ao(t);return{c(){Ne&&Ne.c(),r=ge(),ce&&ce.c(),n=ge(),i=B(),s=C("h1"),l=C("nobr"),H(a.$$.fragment),o=B(),u=C("span"),f=B(),c=C("button"),c.textContent="<",d=B(),h=C("button"),h.textContent=">",p=B(),_&&_.c(),b=B(),y=C("div"),S=C("div"),R&&H(R.$$.fragment),M=B(),L&&L.c(),V=B(),z&&z.c(),ue=B(),ne&&ne.c(),D=B(),se&&se.c(),G=B(),re&&re.c(),k=B(),pe&&pe.c(),Z=B(),ke&&ke.c(),_e=B(),$e&&$e.c(),Y=B(),De&&De.c(),be=B(),We&&We.c(),U=B(),fe&&fe.c(),K=B(),Ee&&Ee.c(),N=B(),xe&&xe.c(),j=B(),Fe&&Fe.c(),me=B(),Ue&&Ue.c(),de=B(),qe&&qe.c(),he=B(),Ve&&Ve.c(),Be=B(),Qe&&Qe.c(),je=B(),Ie=C("div"),Ie.textContent="\xA0",Me(u,"flex","1"),O(c,"class","page-turn"),O(h,"class","page-turn"),Me(Ie,"height","200px"),O(S,"class","main-flex"),Me(y,"max-width","100%")},m(le,Ce){Ne&&Ne.m(document.head,null),A(document.head,r),ce&&ce.m(document.head,null),A(document.head,n),E(le,i,Ce),E(le,s,Ce),A(s,l),W(a,l,null),A(s,o),A(s,u),A(s,f),A(s,c),A(s,d),A(s,h),E(le,p,Ce),~m&&Q[m].m(le,Ce),E(le,b,Ce),E(le,y,Ce),A(y,S),R&&W(R,S,null),A(S,M),~F&&te[F].m(S,null),A(S,V),z&&z.m(S,null),A(S,ue),ne&&ne.m(S,null),A(S,D),se&&se.m(S,null),A(S,G),re&&re.m(S,null),A(S,k),pe&&pe.m(S,null),A(S,Z),ke&&ke.m(S,null),A(S,_e),$e&&$e.m(S,null),A(S,Y),De&&De.m(S,null),A(S,be),We&&We.m(S,null),A(S,U),fe&&fe.m(S,null),A(S,K),Ee&&Ee.m(S,null),A(S,N),xe&&xe.m(S,null),A(S,j),Fe&&Fe.m(S,null),A(S,me),Ue&&Ue.m(S,null),A(S,de),qe&&qe.m(S,null),A(S,he),Ve&&Ve.m(S,null),A(S,Be),Qe&&Qe.m(S,null),A(S,je),A(S,Ie),Re=!0,Pe||(ze=[Le(c,"click",t[6]),Le(h,"click",t[7])],Pe=!0)},p(le,[Ce]){(!Re||Ce&1)&&e!==(e=$.tr(le[0].title||"XPedia"))&&(document.title=e),le[0].text?Ne?Ne.p(le,Ce):(Ne=Us(le),Ne.c(),Ne.m(r.parentNode,r)):Ne&&(Ne.d(1),Ne=null),le[0].image_id?ce?ce.p(le,Ce):(ce=qs(le),ce.c(),ce.m(n.parentNode,n)):ce&&(ce.d(1),ce=null);let Ft={};Ce&1&&(Ft.s=le[0].title),a.$set(Ft);let ct=m;m=X(le,Ce),m===ct?~m&&Q[m].p(le,Ce):(_&&(J(),w(Q[ct],1,1,()=>{Q[ct]=null}),ee()),~m?(_=Q[m],_?_.p(le,Ce):(_=Q[m]=g[m](le),_.c()),v(_,1),_.m(b.parentNode,b)):_=null);let vt={};if(Ce&2&&(vt.query=le[1]),I!==(I=le[3])){if(R){J();let jr=R;w(jr.$$.fragment,1,0,()=>{q(jr,1)}),ee()}I?(R=new I(x(le)),H(R.$$.fragment),v(R.$$.fragment,1),W(R,S,M)):R=null}else I&&R.$set(vt);let cn=F;F=ie(le,Ce),F===cn?~F&&te[F].p(le,Ce):(L&&(J(),w(te[cn],1,1,()=>{te[cn]=null}),ee()),~F?(L=te[F],L?L.p(le,Ce):(L=te[F]=P[F](le),L.c()),v(L,1),L.m(S,V)):L=null),le[0].id in $.units?z?(z.p(le,Ce),Ce&1&&v(z,1)):(z=Gs(le),z.c(),v(z,1),z.m(S,ue)):z&&(J(),w(z,1,1,()=>{z=null}),ee()),le[0].id in $.items?ne?(ne.p(le,Ce),Ce&1&&v(ne,1)):(ne=Xs(le),ne.c(),v(ne,1),ne.m(S,D)):ne&&(J(),w(ne,1,1,()=>{ne=null}),ee()),le[0].id in $.baseServices?se?(se.p(le,Ce),Ce&1&&v(se,1)):(se=Ys(le),se.c(),v(se,1),se.m(S,G)):se&&(J(),w(se,1,1,()=>{se=null}),ee()),le[0].id in $.crafts?re?(re.p(le,Ce),Ce&1&&v(re,1)):(re=Zs(le),re.c(),v(re,1),re.m(S,k)):re&&(J(),w(re,1,1,()=>{re=null}),ee()),le[0].id in $.craftWeapons?pe?(pe.p(le,Ce),Ce&1&&v(pe,1)):(pe=Ks(le),pe.c(),v(pe,1),pe.m(S,Z)):pe&&(J(),w(pe,1,1,()=>{pe=null}),ee()),le[0].id in $.ufos?ke?(ke.p(le,Ce),Ce&1&&v(ke,1)):(ke=Vs(le),ke.c(),v(ke,1),ke.m(S,_e)):ke&&(J(),w(ke,1,1,()=>{ke=null}),ee()),le[0].id in $.facilities?$e?($e.p(le,Ce),Ce&1&&v($e,1)):($e=Qs(le),$e.c(),v($e,1),$e.m(S,Y)):$e&&(J(),w($e,1,1,()=>{$e=null}),ee()),le[0].id in $.manufacture?De?(De.p(le,Ce),Ce&1&&v(De,1)):(De=Js(le),De.c(),v(De,1),De.m(S,be)):De&&(J(),w(De,1,1,()=>{De=null}),ee()),le[0].id in $.research?We?(We.p(le,Ce),Ce&1&&v(We,1)):(We=eo(le),We.c(),v(We,1),We.m(S,U)):We&&(J(),w(We,1,1,()=>{We=null}),ee()),le[0].id in $.soldierBonuses?fe?(fe.p(le,Ce),Ce&1&&v(fe,1)):(fe=to(le),fe.c(),v(fe,1),fe.m(S,K)):fe&&(J(),w(fe,1,1,()=>{fe=null}),ee()),le[0].id in $.eventScripts?Ee?(Ee.p(le,Ce),Ce&1&&v(Ee,1)):(Ee=no(le),Ee.c(),v(Ee,1),Ee.m(S,N)):Ee&&(J(),w(Ee,1,1,()=>{Ee=null}),ee()),le[0].id in $.soldierTransformation?xe?(xe.p(le,Ce),Ce&1&&v(xe,1)):(xe=ro(le),xe.c(),v(xe,1),xe.m(S,j)):xe&&(J(),w(xe,1,1,()=>{xe=null}),ee()),le[0].id in $.soldiers?Fe?(Fe.p(le,Ce),Ce&1&&v(Fe,1)):(Fe=io(le),Fe.c(),v(Fe,1),Fe.m(S,me)):Fe&&(J(),w(Fe,1,1,()=>{Fe=null}),ee()),le[0].id in $.races?Ue?(Ue.p(le,Ce),Ce&1&&v(Ue,1)):(Ue=lo(le),Ue.c(),v(Ue,1),Ue.m(S,de)):Ue&&(J(),w(Ue,1,1,()=>{Ue=null}),ee()),le[0].id in $.events?qe?(qe.p(le,Ce),Ce&1&&v(qe,1)):(qe=so(le),qe.c(),v(qe,1),qe.m(S,he)):qe&&(J(),w(qe,1,1,()=>{qe=null}),ee()),le[0].id in $.commendations?Ve?(Ve.p(le,Ce),Ce&1&&v(Ve,1)):(Ve=oo(le),Ve.c(),v(Ve,1),Ve.m(S,Be)):Ve&&(J(),w(Ve,1,1,()=>{Ve=null}),ee()),le[0].id in $.units?Qe&&(J(),w(Qe,1,1,()=>{Qe=null}),ee()):Qe?(Qe.p(le,Ce),Ce&1&&v(Qe,1)):(Qe=ao(le),Qe.c(),v(Qe,1),Qe.m(S,je))},i(le){Re||(v(a.$$.fragment,le),v(_),R&&v(R.$$.fragment,le),v(L),v(z),v(ne),v(se),v(re),v(pe),v(ke),v($e),v(De),v(We),v(fe),v(Ee),v(xe),v(Fe),v(Ue),v(qe),v(Ve),v(Qe),Re=!0)},o(le){w(a.$$.fragment,le),w(_),R&&w(R.$$.fragment,le),w(L),w(z),w(ne),w(se),w(re),w(pe),w(ke),w($e),w(De),w(We),w(fe),w(Ee),w(xe),w(Fe),w(Ue),w(qe),w(Ve),w(Qe),Re=!1},d(le){Ne&&Ne.d(le),T(r),ce&&ce.d(le),T(n),le&&T(i),le&&T(s),q(a),le&&T(p),~m&&Q[m].d(le),le&&T(b),le&&T(y),R&&q(R),~F&&te[F].d(),z&&z.d(),ne&&ne.d(),se&&se.d(),re&&re.d(),pe&&pe.d(),ke&&ke.d(),$e&&$e.d(),De&&De.d(),We&&We.d(),fe&&fe.d(),Ee&&Ee.d(),xe&&xe.d(),Fe&&Fe.d(),Ue&&Ue.d(),qe&&qe.d(),Ve&&Ve.d(),Qe&&Qe.d(),Pe=!1,lt(ze)}}}var uo=t=>t.id;function Bc(t,e,r){var n;let i=bn(),{article:s={}}=e,{query:l}=e,a,o=!1,u=c=>i("prev"),f=c=>i("next");return t.$$set=c=>{"article"in c&&r(0,s=c.article),"query"in c&&r(1,l=c.query)},t.$$.update=()=>{if(t.$$.dirty&39){e:{if(s==null)debugger;if(r(2,a=s.text||""),a==""){let c=r(5,n=$.research[s.id])===null||n===void 0?void 0:n.lookup;c&&r(2,a=$.tr(c))}if(r(3,o=s.type_id=="OTHER"?{BaseServices:en}[s.id]:!1),l)for(let c of l.split()){let d=new RegExp(c,"ig");r(2,a=a.replace(d,"<span class='queried'>$&</span>"))}}}},[s,l,a,o,i,n,u,f]}var wr=class extends we{constructor(e){super(),Se(this,e,Bc,Lc,ye,{article:0,query:1})}},fo=wr;function To(t){return typeof t>"u"||t===null}function zc(t){return typeof t=="object"&&t!==null}function Pc(t){return Array.isArray(t)?t:To(t)?[]:[t]}function jc(t,e){var r,n,i,s;if(e)for(s=Object.keys(e),r=0,n=s.length;r<n;r+=1)i=s[r],t[i]=e[i];return t}function Uc(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function qc(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Wc=To,Hc=zc,Gc=Pc,Xc=Uc,Yc=qc,Zc=jc,et={isNothing:Wc,isObject:Hc,toArray:Gc,repeat:Xc,isNegativeZero:Yc,extend:Zc};function Eo(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Bt(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Eo(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Bt.prototype=Object.create(Error.prototype);Bt.prototype.constructor=Bt;Bt.prototype.toString=function(e){return this.name+": "+Eo(this,e)};var it=Bt;function Sr(t,e,r,n,i){var s="",l="",a=Math.floor(i/2)-1;return n-e>a&&(s=" ... ",e=n-a+s.length),r-n>a&&(l=" ...",r=n+a-l.length),{str:s+t.slice(e,r).replace(/\t/g,"\u2192")+l,pos:n-e+s.length}}function Ar(t,e){return et.repeat(" ",e-t.length)+t}function Kc(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,l=-1;s=r.exec(t.buffer);)i.push(s.index),n.push(s.index+s[0].length),t.position<=s.index&&l<0&&(l=n.length-2);l<0&&(l=n.length-1);var a="",o,u,f=Math.min(t.line+e.linesAfter,i.length).toString().length,c=e.maxLength-(e.indent+f+3);for(o=1;o<=e.linesBefore&&!(l-o<0);o++)u=Sr(t.buffer,n[l-o],i[l-o],t.position-(n[l]-n[l-o]),c),a=et.repeat(" ",e.indent)+Ar((t.line-o+1).toString(),f)+" | "+u.str+`
`+a;for(u=Sr(t.buffer,n[l],i[l],t.position,c),a+=et.repeat(" ",e.indent)+Ar((t.line+1).toString(),f)+" | "+u.str+`
`,a+=et.repeat("-",e.indent+f+3+u.pos)+`^
`,o=1;o<=e.linesAfter&&!(l+o>=i.length);o++)u=Sr(t.buffer,n[l+o],i[l+o],t.position-(n[l]-n[l+o]),c),a+=et.repeat(" ",e.indent)+Ar((t.line+o+1).toString(),f)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var Vc=Kc,Qc=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Jc=["scalar","sequence","mapping"];function ed(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function td(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(Qc.indexOf(r)===-1)throw new it('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=ed(e.styleAliases||null),Jc.indexOf(this.kind)===-1)throw new it('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var nt=td;function co(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(s,l){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=l)}),r[i]=n}),r}function nd(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function Cr(t){return this.extend(t)}Cr.prototype.extend=function(e){var r=[],n=[];if(e instanceof nt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new it("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof nt))throw new it("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new it("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new it("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof nt))throw new it("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Cr.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=co(i,"implicit"),i.compiledExplicit=co(i,"explicit"),i.compiledTypeMap=nd(i.compiledImplicit,i.compiledExplicit),i};var xo=Cr,Oo=new nt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Io=new nt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Fo=new nt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Ro=new xo({explicit:[Oo,Io,Fo]});function rd(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function id(){return null}function ld(t){return t===null}var Do=new nt("tag:yaml.org,2002:null",{kind:"scalar",resolve:rd,construct:id,predicate:ld,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function sd(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function od(t){return t==="true"||t==="True"||t==="TRUE"}function ad(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Mo=new nt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:sd,construct:od,predicate:ad,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function ud(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function fd(t){return 48<=t&&t<=55}function cd(t){return 48<=t&&t<=57}function dd(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!ud(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!fd(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!cd(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function hd(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function pd(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!et.isNegativeZero(t)}var No=new nt("tag:yaml.org,2002:int",{kind:"scalar",resolve:dd,construct:hd,predicate:pd,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),md=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function _d(t){return!(t===null||!md.test(t)||t[t.length-1]==="_")}function gd(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var bd=/^[-+]?[0-9]+e/;function vd(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(et.isNegativeZero(t))return"-0.0";return r=t.toString(10),bd.test(r)?r.replace("e",".e"):r}function kd(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||et.isNegativeZero(t))}var Lo=new nt("tag:yaml.org,2002:float",{kind:"scalar",resolve:_d,construct:gd,predicate:kd,represent:vd,defaultStyle:"lowercase"}),Bo=Ro.extend({implicit:[Do,Mo,No,Lo]}),zo=Bo,Po=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),jo=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function yd(t){return t===null?!1:Po.exec(t)!==null||jo.exec(t)!==null}function wd(t){var e,r,n,i,s,l,a,o=0,u=null,f,c,d;if(e=Po.exec(t),e===null&&(e=jo.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(s=+e[4],l=+e[5],a=+e[6],e[7]){for(o=e[7].slice(0,3);o.length<3;)o+="0";o=+o}return e[9]&&(f=+e[10],c=+(e[11]||0),u=(f*60+c)*6e4,e[9]==="-"&&(u=-u)),d=new Date(Date.UTC(r,n,i,s,l,a,o)),u&&d.setTime(d.getTime()-u),d}function Sd(t){return t.toISOString()}var Uo=new nt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:yd,construct:wd,instanceOf:Date,represent:Sd});function Ad(t){return t==="<<"||t===null}var qo=new nt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Ad}),Ir=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function $d(t){if(t===null)return!1;var e,r,n=0,i=t.length,s=Ir;for(r=0;r<i;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function Cd(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,s=Ir,l=0,a=[];for(e=0;e<i;e++)e%4===0&&e&&(a.push(l>>16&255),a.push(l>>8&255),a.push(l&255)),l=l<<6|s.indexOf(n.charAt(e));return r=i%4*6,r===0?(a.push(l>>16&255),a.push(l>>8&255),a.push(l&255)):r===18?(a.push(l>>10&255),a.push(l>>2&255)):r===12&&a.push(l>>4&255),new Uint8Array(a)}function Td(t){var e="",r=0,n,i,s=t.length,l=Ir;for(n=0;n<s;n++)n%3===0&&n&&(e+=l[r>>18&63],e+=l[r>>12&63],e+=l[r>>6&63],e+=l[r&63]),r=(r<<8)+t[n];return i=s%3,i===0?(e+=l[r>>18&63],e+=l[r>>12&63],e+=l[r>>6&63],e+=l[r&63]):i===2?(e+=l[r>>10&63],e+=l[r>>4&63],e+=l[r<<2&63],e+=l[64]):i===1&&(e+=l[r>>2&63],e+=l[r<<4&63],e+=l[64],e+=l[64]),e}function Ed(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Wo=new nt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:$d,construct:Cd,predicate:Ed,represent:Td}),xd=Object.prototype.hasOwnProperty,Od=Object.prototype.toString;function Id(t){if(t===null)return!0;var e=[],r,n,i,s,l,a=t;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],l=!1,Od.call(i)!=="[object Object]")return!1;for(s in i)if(xd.call(i,s))if(!l)l=!0;else return!1;if(!l)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function Fd(t){return t!==null?t:[]}var Ho=new nt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Id,construct:Fd}),Rd=Object.prototype.toString;function Dd(t){if(t===null)return!0;var e,r,n,i,s,l=t;for(s=new Array(l.length),e=0,r=l.length;e<r;e+=1){if(n=l[e],Rd.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[e]=[i[0],n[i[0]]]}return!0}function Md(t){if(t===null)return[];var e,r,n,i,s,l=t;for(s=new Array(l.length),e=0,r=l.length;e<r;e+=1)n=l[e],i=Object.keys(n),s[e]=[i[0],n[i[0]]];return s}var Go=new nt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Dd,construct:Md}),Nd=Object.prototype.hasOwnProperty;function Ld(t){if(t===null)return!0;var e,r=t;for(e in r)if(Nd.call(r,e)&&r[e]!==null)return!1;return!0}function Bd(t){return t!==null?t:{}}var Xo=new nt("tag:yaml.org,2002:set",{kind:"mapping",resolve:Ld,construct:Bd}),Fr=zo.extend({implicit:[Uo,qo],explicit:[Wo,Ho,Go,Xo]}),bt=Object.prototype.hasOwnProperty,tn=1,Yo=2,Zo=3,nn=4,$r=1,zd=2,ho=3,Pd=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,jd=/[\x85\u2028\u2029]/,Ud=/[,\[\]\{\}]/,Ko=/^(?:!|!!|![a-z\-]+!)$/i,Vo=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function po(t){return Object.prototype.toString.call(t)}function ft(t){return t===10||t===13}function At(t){return t===9||t===32}function st(t){return t===9||t===32||t===10||t===13}function xt(t){return t===44||t===91||t===93||t===123||t===125}function qd(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function Wd(t){return t===120?2:t===117?4:t===85?8:0}function Hd(t){return 48<=t&&t<=57?t-48:-1}function mo(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function Gd(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Qo=new Array(256),Jo=new Array(256);for(St=0;St<256;St++)Qo[St]=mo(St)?1:0,Jo[St]=mo(St);var St;function Xd(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Fr,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ea(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=Vc(r),new it(e,r)}function Te(t,e){throw ea(t,e)}function rn(t,e){t.onWarning&&t.onWarning.call(null,ea(t,e))}var _o={YAML:function(e,r,n){var i,s,l;e.version!==null&&Te(e,"duplication of %YAML directive"),n.length!==1&&Te(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&Te(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),l=parseInt(i[2],10),s!==1&&Te(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=l<2,l!==1&&l!==2&&rn(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,s;n.length!==2&&Te(e,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],Ko.test(i)||Te(e,"ill-formed tag handle (first argument) of the TAG directive"),bt.call(e.tagMap,i)&&Te(e,'there is a previously declared suffix for "'+i+'" tag handle'),Vo.test(s)||Te(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{Te(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s}};function gt(t,e,r,n){var i,s,l,a;if(e<r){if(a=t.input.slice(e,r),n)for(i=0,s=a.length;i<s;i+=1)l=a.charCodeAt(i),l===9||32<=l&&l<=1114111||Te(t,"expected valid JSON character");else Pd.test(a)&&Te(t,"the stream contains non-printable characters");t.result+=a}}function go(t,e,r,n){var i,s,l,a;for(et.isObject(r)||Te(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),l=0,a=i.length;l<a;l+=1)s=i[l],bt.call(e,s)||(e[s]=r[s],n[s]=!0)}function Ot(t,e,r,n,i,s,l,a,o){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&Te(t,"nested arrays are not supported inside keys"),typeof i=="object"&&po(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&po(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,f=s.length;u<f;u+=1)go(t,e,s[u],r);else go(t,e,s,r);else!t.json&&!bt.call(r,i)&&bt.call(e,i)&&(t.line=l||t.line,t.lineStart=a||t.lineStart,t.position=o||t.position,Te(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete r[i];return e}function Rr(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Te(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Je(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;At(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(ft(i))for(Rr(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&rn(t,"deficient indentation"),n}function on(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||st(r)))}function Dr(t,e){e===1?t.result+=" ":e>1&&(t.result+=et.repeat(`
`,e-1))}function Yd(t,e,r){var n,i,s,l,a,o,u,f,c=t.kind,d=t.result,h;if(h=t.input.charCodeAt(t.position),st(h)||xt(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),st(i)||r&&xt(i)))return!1;for(t.kind="scalar",t.result="",s=l=t.position,a=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),st(i)||r&&xt(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),st(n))break}else{if(t.position===t.lineStart&&on(t)||r&&xt(h))break;if(ft(h))if(o=t.line,u=t.lineStart,f=t.lineIndent,Je(t,!1,-1),t.lineIndent>=e){a=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=l,t.line=o,t.lineStart=u,t.lineIndent=f;break}}a&&(gt(t,s,l,!1),Dr(t,t.line-o),s=l=t.position,a=!1),At(h)||(l=t.position+1),h=t.input.charCodeAt(++t.position)}return gt(t,s,l,!1),t.result?!0:(t.kind=c,t.result=d,!1)}function Zd(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(gt(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else ft(r)?(gt(t,n,i,!0),Dr(t,Je(t,!1,e)),n=i=t.position):t.position===t.lineStart&&on(t)?Te(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Te(t,"unexpected end of the stream within a single quoted scalar")}function Kd(t,e){var r,n,i,s,l,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return gt(t,r,t.position,!0),t.position++,!0;if(a===92){if(gt(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),ft(a))Je(t,!1,e);else if(a<256&&Qo[a])t.result+=Jo[a],t.position++;else if((l=Wd(a))>0){for(i=l,s=0;i>0;i--)a=t.input.charCodeAt(++t.position),(l=qd(a))>=0?s=(s<<4)+l:Te(t,"expected hexadecimal character");t.result+=Gd(s),t.position++}else Te(t,"unknown escape sequence");r=n=t.position}else ft(a)?(gt(t,r,n,!0),Dr(t,Je(t,!1,e)),r=n=t.position):t.position===t.lineStart&&on(t)?Te(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}Te(t,"unexpected end of the stream within a double quoted scalar")}function Vd(t,e){var r=!0,n,i,s,l=t.tag,a,o=t.anchor,u,f,c,d,h,p=Object.create(null),m,_,b,y;if(y=t.input.charCodeAt(t.position),y===91)f=93,h=!1,a=[];else if(y===123)f=125,h=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),y=t.input.charCodeAt(++t.position);y!==0;){if(Je(t,!0,e),y=t.input.charCodeAt(t.position),y===f)return t.position++,t.tag=l,t.anchor=o,t.kind=h?"mapping":"sequence",t.result=a,!0;r?y===44&&Te(t,"expected the node content, but found ','"):Te(t,"missed comma between flow collection entries"),_=m=b=null,c=d=!1,y===63&&(u=t.input.charCodeAt(t.position+1),st(u)&&(c=d=!0,t.position++,Je(t,!0,e))),n=t.line,i=t.lineStart,s=t.position,It(t,e,tn,!1,!0),_=t.tag,m=t.result,Je(t,!0,e),y=t.input.charCodeAt(t.position),(d||t.line===n)&&y===58&&(c=!0,y=t.input.charCodeAt(++t.position),Je(t,!0,e),It(t,e,tn,!1,!0),b=t.result),h?Ot(t,a,p,_,m,b,n,i,s):c?a.push(Ot(t,null,p,_,m,b,n,i,s)):a.push(m),Je(t,!0,e),y=t.input.charCodeAt(t.position),y===44?(r=!0,y=t.input.charCodeAt(++t.position)):r=!1}Te(t,"unexpected end of the stream within a flow collection")}function Qd(t,e){var r,n,i=$r,s=!1,l=!1,a=e,o=0,u=!1,f,c;if(c=t.input.charCodeAt(t.position),c===124)n=!1;else if(c===62)n=!0;else return!1;for(t.kind="scalar",t.result="";c!==0;)if(c=t.input.charCodeAt(++t.position),c===43||c===45)$r===i?i=c===43?ho:zd:Te(t,"repeat of a chomping mode identifier");else if((f=Hd(c))>=0)f===0?Te(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?Te(t,"repeat of an indentation width identifier"):(a=e+f-1,l=!0);else break;if(At(c)){do c=t.input.charCodeAt(++t.position);while(At(c));if(c===35)do c=t.input.charCodeAt(++t.position);while(!ft(c)&&c!==0)}for(;c!==0;){for(Rr(t),t.lineIndent=0,c=t.input.charCodeAt(t.position);(!l||t.lineIndent<a)&&c===32;)t.lineIndent++,c=t.input.charCodeAt(++t.position);if(!l&&t.lineIndent>a&&(a=t.lineIndent),ft(c)){o++;continue}if(t.lineIndent<a){i===ho?t.result+=et.repeat(`
`,s?1+o:o):i===$r&&s&&(t.result+=`
`);break}for(n?At(c)?(u=!0,t.result+=et.repeat(`
`,s?1+o:o)):u?(u=!1,t.result+=et.repeat(`
`,o+1)):o===0?s&&(t.result+=" "):t.result+=et.repeat(`
`,o):t.result+=et.repeat(`
`,s?1+o:o),s=!0,l=!0,o=0,r=t.position;!ft(c)&&c!==0;)c=t.input.charCodeAt(++t.position);gt(t,r,t.position,!1)}return!0}function bo(t,e){var r,n=t.tag,i=t.anchor,s=[],l,a=!1,o;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),o=t.input.charCodeAt(t.position);o!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Te(t,"tab characters must not be used in indentation")),!(o!==45||(l=t.input.charCodeAt(t.position+1),!st(l))));){if(a=!0,t.position++,Je(t,!0,-1)&&t.lineIndent<=e){s.push(null),o=t.input.charCodeAt(t.position);continue}if(r=t.line,It(t,e,Zo,!1,!0),s.push(t.result),Je(t,!0,-1),o=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&o!==0)Te(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}function Jd(t,e,r){var n,i,s,l,a,o,u=t.tag,f=t.anchor,c={},d=Object.create(null),h=null,p=null,m=null,_=!1,b=!1,y;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),y=t.input.charCodeAt(t.position);y!==0;){if(!_&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Te(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),s=t.line,(y===63||y===58)&&st(n))y===63?(_&&(Ot(t,c,d,h,p,null,l,a,o),h=p=m=null),b=!0,_=!0,i=!0):_?(_=!1,i=!0):Te(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,y=n;else{if(l=t.line,a=t.lineStart,o=t.position,!It(t,r,Yo,!1,!0))break;if(t.line===s){for(y=t.input.charCodeAt(t.position);At(y);)y=t.input.charCodeAt(++t.position);if(y===58)y=t.input.charCodeAt(++t.position),st(y)||Te(t,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(Ot(t,c,d,h,p,null,l,a,o),h=p=m=null),b=!0,_=!1,i=!1,h=t.tag,p=t.result;else if(b)Te(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=f,!0}else if(b)Te(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=f,!0}if((t.line===s||t.lineIndent>e)&&(_&&(l=t.line,a=t.lineStart,o=t.position),It(t,e,nn,!0,i)&&(_?p=t.result:m=t.result),_||(Ot(t,c,d,h,p,m,l,a,o),h=p=m=null),Je(t,!0,-1),y=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&y!==0)Te(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return _&&Ot(t,c,d,h,p,null,l,a,o),b&&(t.tag=u,t.anchor=f,t.kind="mapping",t.result=c),b}function eh(t){var e,r=!1,n=!1,i,s,l;if(l=t.input.charCodeAt(t.position),l!==33)return!1;if(t.tag!==null&&Te(t,"duplication of a tag property"),l=t.input.charCodeAt(++t.position),l===60?(r=!0,l=t.input.charCodeAt(++t.position)):l===33?(n=!0,i="!!",l=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do l=t.input.charCodeAt(++t.position);while(l!==0&&l!==62);t.position<t.length?(s=t.input.slice(e,t.position),l=t.input.charCodeAt(++t.position)):Te(t,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!st(l);)l===33&&(n?Te(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Ko.test(i)||Te(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),l=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),Ud.test(s)&&Te(t,"tag suffix cannot contain flow indicator characters")}s&&!Vo.test(s)&&Te(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{Te(t,"tag name is malformed: "+s)}return r?t.tag=s:bt.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:Te(t,'undeclared tag handle "'+i+'"'),!0}function th(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&Te(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!st(r)&&!xt(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Te(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function nh(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!st(n)&&!xt(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Te(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),bt.call(t.anchorMap,r)||Te(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Je(t,!0,-1),!0}function It(t,e,r,n,i){var s,l,a,o=1,u=!1,f=!1,c,d,h,p,m,_;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=l=a=nn===r||Zo===r,n&&Je(t,!0,-1)&&(u=!0,t.lineIndent>e?o=1:t.lineIndent===e?o=0:t.lineIndent<e&&(o=-1)),o===1)for(;eh(t)||th(t);)Je(t,!0,-1)?(u=!0,a=s,t.lineIndent>e?o=1:t.lineIndent===e?o=0:t.lineIndent<e&&(o=-1)):a=!1;if(a&&(a=u||i),(o===1||nn===r)&&(tn===r||Yo===r?m=e:m=e+1,_=t.position-t.lineStart,o===1?a&&(bo(t,_)||Jd(t,_,m))||Vd(t,m)?f=!0:(l&&Qd(t,m)||Zd(t,m)||Kd(t,m)?f=!0:nh(t)?(f=!0,(t.tag!==null||t.anchor!==null)&&Te(t,"alias node should not have any properties")):Yd(t,m,tn===r)&&(f=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):o===0&&(f=a&&bo(t,_))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Te(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),c=0,d=t.implicitTypes.length;c<d;c+=1)if(p=t.implicitTypes[c],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(bt.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,h=t.typeMap.multi[t.kind||"fallback"],c=0,d=h.length;c<d;c+=1)if(t.tag.slice(0,h[c].tag.length)===h[c].tag){p=h[c];break}p||Te(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&Te(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Te(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||f}function rh(t){var e=t.position,r,n,i,s=!1,l;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(l=t.input.charCodeAt(t.position))!==0&&(Je(t,!0,-1),l=t.input.charCodeAt(t.position),!(t.lineIndent>0||l!==37));){for(s=!0,l=t.input.charCodeAt(++t.position),r=t.position;l!==0&&!st(l);)l=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&Te(t,"directive name must not be less than one character in length");l!==0;){for(;At(l);)l=t.input.charCodeAt(++t.position);if(l===35){do l=t.input.charCodeAt(++t.position);while(l!==0&&!ft(l));break}if(ft(l))break;for(r=t.position;l!==0&&!st(l);)l=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}l!==0&&Rr(t),bt.call(_o,n)?_o[n](t,n,i):rn(t,'unknown document directive "'+n+'"')}if(Je(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Je(t,!0,-1)):s&&Te(t,"directives end mark is expected"),It(t,t.lineIndent-1,nn,!1,!0),Je(t,!0,-1),t.checkLineBreaks&&jd.test(t.input.slice(e,t.position))&&rn(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&on(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Je(t,!0,-1));return}if(t.position<t.length-1)Te(t,"end of the stream or a document separator is expected");else return}function ta(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new Xd(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,Te(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)rh(r);return r.documents}function ih(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=ta(t,r);if(typeof e!="function")return n;for(var i=0,s=n.length;i<s;i+=1)e(n[i])}function lh(t,e){var r=ta(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new it("expected a single document in the stream, but found more")}}var sh=ih,oh=lh,na={loadAll:sh,load:oh},ra=Object.prototype.toString,ia=Object.prototype.hasOwnProperty,Mr=65279,ah=9,zt=10,uh=13,fh=32,ch=33,dh=34,Tr=35,hh=37,ph=38,mh=39,_h=42,la=44,gh=45,ln=58,bh=61,vh=62,kh=63,yh=64,sa=91,oa=93,wh=96,aa=123,Sh=124,ua=125,rt={};rt[0]="\\0";rt[7]="\\a";rt[8]="\\b";rt[9]="\\t";rt[10]="\\n";rt[11]="\\v";rt[12]="\\f";rt[13]="\\r";rt[27]="\\e";rt[34]='\\"';rt[92]="\\\\";rt[133]="\\N";rt[160]="\\_";rt[8232]="\\L";rt[8233]="\\P";var Ah=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],$h=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Ch(t,e){var r,n,i,s,l,a,o;if(e===null)return{};for(r={},n=Object.keys(e),i=0,s=n.length;i<s;i+=1)l=n[i],a=String(e[l]),l.slice(0,2)==="!!"&&(l="tag:yaml.org,2002:"+l.slice(2)),o=t.compiledTypeMap.fallback[l],o&&ia.call(o.styleAliases,a)&&(a=o.styleAliases[a]),r[l]=a;return r}function Th(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new it("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+et.repeat("0",n-e.length)+e}var Eh=1,Pt=2;function xh(t){this.schema=t.schema||Fr,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=et.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Ch(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Pt:Eh,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function vo(t,e){for(var r=et.repeat(" ",e),n=0,i=-1,s="",l,a=t.length;n<a;)i=t.indexOf(`
`,n),i===-1?(l=t.slice(n),n=a):(l=t.slice(n,i+1),n=i+1),l.length&&l!==`
`&&(s+=r),s+=l;return s}function Er(t,e){return`
`+et.repeat(" ",t.indent*e)}function Oh(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function sn(t){return t===fh||t===ah}function jt(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Mr||65536<=t&&t<=1114111}function ko(t){return jt(t)&&t!==Mr&&t!==uh&&t!==zt}function yo(t,e,r){var n=ko(t),i=n&&!sn(t);return(r?n:n&&t!==la&&t!==sa&&t!==oa&&t!==aa&&t!==ua)&&t!==Tr&&!(e===ln&&!i)||ko(e)&&!sn(e)&&t===Tr||e===ln&&i}function Ih(t){return jt(t)&&t!==Mr&&!sn(t)&&t!==gh&&t!==kh&&t!==ln&&t!==la&&t!==sa&&t!==oa&&t!==aa&&t!==ua&&t!==Tr&&t!==ph&&t!==_h&&t!==ch&&t!==Sh&&t!==bh&&t!==vh&&t!==mh&&t!==dh&&t!==hh&&t!==yh&&t!==wh}function Fh(t){return!sn(t)&&t!==ln}function Lt(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function fa(t){var e=/^\n* /;return e.test(t)}var ca=1,xr=2,da=3,ha=4,Et=5;function Rh(t,e,r,n,i,s,l,a){var o,u=0,f=null,c=!1,d=!1,h=n!==-1,p=-1,m=Ih(Lt(t,0))&&Fh(Lt(t,t.length-1));if(e||l)for(o=0;o<t.length;u>=65536?o+=2:o++){if(u=Lt(t,o),!jt(u))return Et;m=m&&yo(u,f,a),f=u}else{for(o=0;o<t.length;u>=65536?o+=2:o++){if(u=Lt(t,o),u===zt)c=!0,h&&(d=d||o-p-1>n&&t[p+1]!==" ",p=o);else if(!jt(u))return Et;m=m&&yo(u,f,a),f=u}d=d||h&&o-p-1>n&&t[p+1]!==" "}return!c&&!d?m&&!l&&!i(t)?ca:s===Pt?Et:xr:r>9&&fa(t)?Et:l?s===Pt?Et:xr:d?ha:da}function Dh(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Pt?'""':"''";if(!t.noCompatMode&&(Ah.indexOf(e)!==-1||$h.test(e)))return t.quotingType===Pt?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),l=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=n||t.flowLevel>-1&&r>=t.flowLevel;function o(u){return Oh(t,u)}switch(Rh(e,a,t.indent,l,o,t.quotingType,t.forceQuotes&&!n,i)){case ca:return e;case xr:return"'"+e.replace(/'/g,"''")+"'";case da:return"|"+wo(e,t.indent)+So(vo(e,s));case ha:return">"+wo(e,t.indent)+So(vo(Mh(e,l),s));case Et:return'"'+Nh(e)+'"';default:throw new it("impossible error: invalid scalar style")}}()}function wo(t,e){var r=fa(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),s=i?"+":n?"":"-";return r+s+`
`}function So(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function Mh(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,Ao(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",s,l;l=r.exec(t);){var a=l[1],o=l[2];s=o[0]===" ",n+=a+(!i&&!s&&o!==""?`
`:"")+Ao(o,e),i=s}return n}function Ao(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,s,l=0,a=0,o="";n=r.exec(t);)a=n.index,a-i>e&&(s=l>i?l:a,o+=`
`+t.slice(i,s),i=s+1),l=a;return o+=`
`,t.length-i>e&&l>i?o+=t.slice(i,l)+`
`+t.slice(l+1):o+=t.slice(i),o.slice(1)}function Nh(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Lt(t,i),n=rt[r],!n&&jt(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||Th(r);return e}function Lh(t,e,r){var n="",i=t.tag,s,l,a;for(s=0,l=r.length;s<l;s+=1)a=r[s],t.replacer&&(a=t.replacer.call(r,String(s),a)),(ht(t,e,a,!1,!1)||typeof a>"u"&&ht(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function $o(t,e,r,n){var i="",s=t.tag,l,a,o;for(l=0,a=r.length;l<a;l+=1)o=r[l],t.replacer&&(o=t.replacer.call(r,String(l),o)),(ht(t,e+1,o,!0,!0,!1,!0)||typeof o>"u"&&ht(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Er(t,e)),t.dump&&zt===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}function Bh(t,e,r){var n="",i=t.tag,s=Object.keys(r),l,a,o,u,f;for(l=0,a=s.length;l<a;l+=1)f="",n!==""&&(f+=", "),t.condenseFlow&&(f+='"'),o=s[l],u=r[o],t.replacer&&(u=t.replacer.call(r,o,u)),ht(t,e,o,!1,!1)&&(t.dump.length>1024&&(f+="? "),f+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),ht(t,e,u,!1,!1)&&(f+=t.dump,n+=f));t.tag=i,t.dump="{"+n+"}"}function zh(t,e,r,n){var i="",s=t.tag,l=Object.keys(r),a,o,u,f,c,d;if(t.sortKeys===!0)l.sort();else if(typeof t.sortKeys=="function")l.sort(t.sortKeys);else if(t.sortKeys)throw new it("sortKeys must be a boolean or a function");for(a=0,o=l.length;a<o;a+=1)d="",(!n||i!=="")&&(d+=Er(t,e)),u=l[a],f=r[u],t.replacer&&(f=t.replacer.call(r,u,f)),ht(t,e+1,u,!0,!0,!0)&&(c=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,c&&(t.dump&&zt===t.dump.charCodeAt(0)?d+="?":d+="? "),d+=t.dump,c&&(d+=Er(t,e)),ht(t,e+1,f,!0,c)&&(t.dump&&zt===t.dump.charCodeAt(0)?d+=":":d+=": ",d+=t.dump,i+=d));t.tag=s,t.dump=i||"{}"}function Co(t,e,r){var n,i,s,l,a,o;for(i=r?t.explicitTypes:t.implicitTypes,s=0,l=i.length;s<l;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(o=t.styleMap[a.tag]||a.defaultStyle,ra.call(a.represent)==="[object Function]")n=a.represent(e,o);else if(ia.call(a.represent,o))n=a.represent[o](e,o);else throw new it("!<"+a.tag+'> tag resolver accepts not "'+o+'" style');t.dump=n}return!0}return!1}function ht(t,e,r,n,i,s,l){t.tag=null,t.dump=r,Co(t,r,!1)||Co(t,r,!0);var a=ra.call(t.dump),o=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var f=a==="[object Object]"||a==="[object Array]",c,d;if(f&&(c=t.duplicates.indexOf(r),d=c!==-1),(t.tag!==null&&t.tag!=="?"||d||t.indent!==2&&e>0)&&(i=!1),d&&t.usedDuplicates[c])t.dump="*ref_"+c;else{if(f&&d&&!t.usedDuplicates[c]&&(t.usedDuplicates[c]=!0),a==="[object Object]")n&&Object.keys(t.dump).length!==0?(zh(t,e,t.dump,i),d&&(t.dump="&ref_"+c+t.dump)):(Bh(t,e,t.dump),d&&(t.dump="&ref_"+c+" "+t.dump));else if(a==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!l&&e>0?$o(t,e-1,t.dump,i):$o(t,e,t.dump,i),d&&(t.dump="&ref_"+c+t.dump)):(Lh(t,e,t.dump),d&&(t.dump="&ref_"+c+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&Dh(t,t.dump,e,s,o);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new it("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function Ph(t,e){var r=[],n=[],i,s;for(Or(t,r,n),i=0,s=n.length;i<s;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(s)}function Or(t,e,r){var n,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)Or(t[i],e,r);else for(n=Object.keys(t),i=0,s=n.length;i<s;i+=1)Or(t[n[i]],e,r)}function jh(t,e){e=e||{};var r=new xh(e);r.noRefs||Ph(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),ht(r,0,n,!0,!0)?r.dump+`
`:""}var Uh=jh,qh={dump:Uh};function Nr(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Wh=nt,Hh=xo,Gh=Ro,Xh=Bo,Yh=zo,Zh=Fr,Kh=na.load,Vh=na.loadAll,Qh=qh.dump,Jh=it,ep={binary:Wo,float:Lo,map:Fo,null:Do,pairs:Go,set:Xo,timestamp:Uo,bool:Mo,int:No,merge:qo,omap:Ho,seq:Io,str:Oo},tp=Nr("safeLoad","load"),np=Nr("safeLoadAll","loadAll"),rp=Nr("safeDump","dump"),ip={Type:Wh,Schema:Hh,FAILSAFE_SCHEMA:Gh,JSON_SCHEMA:Xh,CORE_SCHEMA:Yh,DEFAULT_SCHEMA:Zh,load:Kh,loadAll:Vh,dump:Qh,YAMLException:Jh,types:ep,safeLoad:tp,safeLoadAll:np,safeDump:rp},pa=ip;var lp=Wr(_a()),an="en-US",sp=/<\s*a[^>]*>(.*?)<\s*\/\s*a>/gi;async function Br(t,e=!1){let r=await ga(t),n,i=[];for(;n=sp.exec(r);)n[1]!="../"&&i.push(e?t+n[1]:n[1]);return i}async function ga(t){let e;try{e=await(await fetch(t)).text()}catch(r){return console.error(r),null}return e}async function un(t){let e=await ga(t);return op(e,t)}function op(t,e){try{return pa.load(t,{json:!0,filename:e,onWarning:r=>{console.error(r.message)}})}catch(r){console.error(r.message)}}async function zr(){let[t,e,r]=await Promise.all([un("/user/options.cfg"),Br("/user/mods/",!0),Br("mods/",!0)]);e=["/standard/xcom1/",...e];let n=[...e,...r],i={},s=await Promise.all(n.map(p=>un(`${p}/metadata.yml`)));for(let p in s){let m=s[p],_=n[p];i[m.id]={...m,dir:_}}let l=["xcom1",...t.mods.filter(p=>p.active).map(p=>p.id)],a=Object.keys(i).filter(p=>{let m=i[p];return(m.master==null||l.includes(m.master))&&r.includes(m.dir)});l=[...l,...a];let o=t.options.language,u=l.map(p=>i[p]);for(let p of u)p.rulDir=p.id=="xcom1"?p.dir:`${p.dir}Ruleset/`;let f=[o,"ru"];u.map(p=>`${p.dir}Language/`).splice(1,0,"/standard/xcom1/Language/OXCE/");let[d,h]=await Promise.all([up(u),ap(f,u.map(p=>`${p.dir}Language/`))]);return{ruls:d,langs:h}}async function ap(t,e){t.indexOf(an)==-1&&t.unshift(an);let r={},n=t.map(s=>e.map(l=>({lname:s,dir:l}))).flat(1),i=await Promise.all(n.map(s=>{let l=`${s.dir}${s.lname}.yml`;return un(l)}));for(let s of i)if(typeof s=="object"){let l=Object.keys(s)[0];r[l]={...r[l]||{},...s[l]}}for(let s of t)s!=an&&(r[s]={...r[an],...r[s]});return r}async function up(t){let e=await Promise.all(t.map(s=>Br(s.rulDir)));e=e.map(s=>s.filter(l=>l.substr(-4)==".rul"));let r=[];for(let s in t)r[s]=e[s].map(l=>({mod:t[s].id,path:`${t[s].rulDir}${l}`}));let n=r.flat(1);return await Promise.all(n.map(async s=>({...await un(s.path),file:s})))}var{document:fn}=ni;function ba(t,e,r){let n=t.slice();return n[44]=e[r],n[46]=r,n}function va(t,e,r){let n=t.slice();return n[44]=e[r],n[46]=r,n}function ka(t,e,r){let n=t.slice();return n[48]=e[r],n}function ya(t,e,r){let n=t.slice();return n[51]=e[r],n}function wa(t,e,r){let n=t.slice();return n[44]=e[r],n[46]=r,n}function Sa(t,e,r){let n=t.slice();return n[44]=e[r],n[46]=r,n}function Aa(t){let e;return fn.title=e=Tt("XPedia"),{c:oe,m:oe,d:oe}}function fp(t){return{c:oe,m:oe,p:oe,i:oe,o:oe,d:oe}}function cp(t){let e,r,n,i,s,l,a,o,u,f,c,d,h,p,m,_,b,y,S,R,M,F,L,V,ue=(t[4]?t[4].title:"")+"",D,G,k,Z,_e,Y,be,U,K,N,j,me,de,he,Be,je,Ie,Re,Pe,ze,Ne,ce,g,Q,X,I,x,P,te,ie=$.sectionsOrder,z=[];for(let fe=0;fe<ie.length;fe+=1)z[fe]=$a(Sa(t,ie,fe));let ne=$.typeSectionsOrder,se=[];for(let fe=0;fe<ne.length;fe+=1)se[fe]=Ca(wa(t,ne,fe));let re=$.config&&$.config.languages&&$.config.languages.length>1&&dp(t),pe=Fa&&hp(t),ke=t[9]&&Ea(t),$e=[bp,gp,_p],De=[];function We(fe,Ee){return fe[3]&&fe[14]?0:fe[0]?1:2}return ce=We(t,[-1,-1]),g=De[ce]=$e[ce](t),{c(){e=C("nav"),r=C("div"),n=C("div"),i=C("img"),l=B(),a=C("nobr"),o=C("span"),o.textContent=`${$.tr("XPedia")}\xA0`,u=B(),f=C("span"),f.textContent="\u02C5",c=ae(`\r
          \xA0`),d=B(),h=C("div"),p=C("div"),m=C("div"),_=C("a"),_.textContent=`${$.tr("HOME")}`,b=B(),y=C("div"),S=B();for(let fe=0;fe<z.length;fe+=1)z[fe].c();R=B(),M=C("div");for(let fe=0;fe<se.length;fe+=1)se[fe].c();L=B(),V=C("a"),D=ae(ue),k=B(),Z=C("div"),_e=B(),Y=C("div"),be=ae("\u{1F441}"),K=B(),re&&re.c(),N=B(),pe&&pe.c(),j=B(),me=C("div"),de=C("input"),Be=B(),ke&&ke.c(),je=B(),Ie=C("button"),Re=C("span"),Re.textContent="\u2261",ze=B(),Ne=C("div"),g.c(),X=B(),I=C("div"),I.textContent="Tooltip",Ge(i.src,s=Nn)||O(i,"src",s),O(i,"alt","XPedia"),O(i,"class","xpedia-icon"),O(o,"class","on-wide"),Me(f,"transform","scale(1.5,0.75)"),Me(f,"display","inline-block"),O(n,"class","navbar-button"),O(_,"href","##MAIN"),Me(_,"text-decoration","underline"),Me(y,"height","0.5em"),O(m,"class","navbar-auto navbar-list"),O(M,"class","navbar-custom navbar-list"),O(p,"class","flex-horisontal"),Me(p,"flex-wrap","nowrap"),O(h,"class","navbar-dropdown"),O(h,"style",F=t[11]?"visibility:visible":"visibility:hidden"),O(r,"class","navbar-dropdown-container"),O(V,"class","navbar-button navbar-current-article"),O(V,"href",G="##"+(t[4]?t[4].id:"MAIN")),O(Z,"class","stretcher"),O(Y,"class",U="navbar-button "+(t[16]?"reveal-lock":"")),O(Y,"id","reveal"),O(de,"class","input"),O(de,"type","text"),O(de,"id","search-string"),O(de,"placeholder",he=Tt("Search...")),O(me,"class","navbar-search"),O(e,"class","navbar flex-horisontal"),Me(Re,"font-size","150%"),O(Ie,"class","side-hide-button"),O(Ie,"style",Pe=t[9]?"":"left:1em;"),O(Ne,"class","main"),O(Ne,"style",Q=t[9]?"":"padding-left:1rem;"),O(I,"class","tooltip fadein")},m(fe,Ee){E(fe,e,Ee),A(e,r),A(r,n),A(n,i),A(n,l),A(n,a),A(a,o),A(a,u),A(a,f),A(a,c),A(r,d),A(r,h),A(h,p),A(p,m),A(m,_),A(m,b),A(m,y),A(m,S);for(let xe=0;xe<z.length;xe+=1)z[xe].m(m,null);A(p,R),A(p,M);for(let xe=0;xe<se.length;xe+=1)se[xe].m(M,null);A(e,L),A(e,V),A(V,D),A(e,k),A(e,Z),A(e,_e),A(e,Y),A(Y,be),A(e,K),re&&re.m(e,null),A(e,N),pe&&pe.m(e,null),A(e,j),A(e,me),A(me,de),_n(de,t[3]),E(fe,Be,Ee),ke&&ke.m(fe,Ee),E(fe,je,Ee),E(fe,Ie,Ee),A(Ie,Re),E(fe,ze,Ee),E(fe,Ne,Ee),De[ce].m(Ne,null),E(fe,X,Ee),E(fe,I,Ee),t[40](I),x=!0,P||(te=[Le(n,"mousedown",t[22]),Le(r,"mouseover",t[23]),Le(r,"mouseout",t[24]),Le(Y,"mouseover",t[25]),Le(Y,"mouseout",t[26]),Le(Y,"click",t[27]),Le(de,"input",t[32]),Le(de,"keyup",t[20]),Le(Ie,"click",t[36])],P=!0)},p(fe,Ee){if(Ee&0){ie=$.sectionsOrder;let Fe;for(Fe=0;Fe<ie.length;Fe+=1){let Ue=Sa(fe,ie,Fe);z[Fe]?z[Fe].p(Ue,Ee):(z[Fe]=$a(Ue),z[Fe].c(),z[Fe].m(m,null))}for(;Fe<z.length;Fe+=1)z[Fe].d(1);z.length=ie.length}if(Ee&0){ne=$.typeSectionsOrder;let Fe;for(Fe=0;Fe<ne.length;Fe+=1){let Ue=wa(fe,ne,Fe);se[Fe]?se[Fe].p(Ue,Ee):(se[Fe]=Ca(Ue),se[Fe].c(),se[Fe].m(M,null))}for(;Fe<se.length;Fe+=1)se[Fe].d(1);se.length=ne.length}(!x||Ee[0]&2048&&F!==(F=fe[11]?"visibility:visible":"visibility:hidden"))&&O(h,"style",F),(!x||Ee[0]&16)&&ue!==(ue=(fe[4]?fe[4].title:"")+"")&&Oe(D,ue),(!x||Ee[0]&16&&G!==(G="##"+(fe[4]?fe[4].id:"MAIN")))&&O(V,"href",G),(!x||Ee[0]&65536&&U!==(U="navbar-button "+(fe[16]?"reveal-lock":"")))&&O(Y,"class",U),$.config&&$.config.languages&&$.config.languages.length>1&&re.p(fe,Ee),Fa&&pe.p(fe,Ee),Ee[0]&8&&de.value!==fe[3]&&_n(de,fe[3]),fe[9]?ke?(ke.p(fe,Ee),Ee[0]&512&&v(ke,1)):(ke=Ea(fe),ke.c(),v(ke,1),ke.m(je.parentNode,je)):ke&&(J(),w(ke,1,1,()=>{ke=null}),ee()),(!x||Ee[0]&512&&Pe!==(Pe=fe[9]?"":"left:1em;"))&&O(Ie,"style",Pe);let xe=ce;ce=We(fe,Ee),ce===xe?De[ce].p(fe,Ee):(J(),w(De[xe],1,1,()=>{De[xe]=null}),ee(),g=De[ce],g?g.p(fe,Ee):(g=De[ce]=$e[ce](fe),g.c()),v(g,1),g.m(Ne,null)),(!x||Ee[0]&512&&Q!==(Q=fe[9]?"":"padding-left:1rem;"))&&O(Ne,"style",Q)},i(fe){x||(v(ke),v(g),x=!0)},o(fe){w(ke),w(g),x=!1},d(fe){fe&&T(e),ve(z,fe),ve(se,fe),re&&re.d(),pe&&pe.d(),fe&&T(Be),ke&&ke.d(fe),fe&&T(je),fe&&T(Ie),fe&&T(ze),fe&&T(Ne),De[ce].d(),fe&&T(X),fe&&T(I),t[40](null),P=!1,lt(te)}}}function $a(t){let e,r=t[44].title+"",n,i;return{c(){e=C("a"),n=ae(r),O(e,"href",i="##"+t[44].id)},m(s,l){E(s,e,l),A(e,n)},p:oe,d(s){s&&T(e)}}}function Ca(t){let e,r=t[44].title+"",n,i;return{c(){e=C("a"),n=ae(r),O(e,"href",i="##"+t[44].id)},m(s,l){E(s,e,l),A(e,n)},p:oe,d(s){s&&T(e)}}}function dp(t){let e,r,n,i,s,l,a,o=$.config.languages,u=[];for(let f=0;f<o.length;f+=1)u[f]=Ta(ya(t,o,f));return{c(){e=C("div"),r=C("div"),r.innerHTML="<big>A\u3042</big>",n=B(),i=C("div");for(let f=0;f<u.length;f+=1)u[f].c();O(r,"class","navbar-button"),O(i,"class","navbar-dropdown"),O(i,"style",s=t[12]?"visibility:visible":"visibility:hidden"),O(e,"class","navbar-dropdown-container")},m(f,c){E(f,e,c),A(e,r),A(e,n),A(e,i);for(let d=0;d<u.length;d+=1)u[d].m(i,null);l||(a=[Le(r,"mousedown",t[28]),Le(e,"mouseover",t[29]),Le(e,"mouseout",t[30])],l=!0)},p(f,c){if(c[0]&128){o=$.config.languages;let d;for(d=0;d<o.length;d+=1){let h=ya(f,o,d);u[d]?u[d].p(h,c):(u[d]=Ta(h),u[d].c(),u[d].m(i,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=o.length}c[0]&4096&&s!==(s=f[12]?"visibility:visible":"visibility:hidden")&&O(i,"style",s)},d(f){f&&T(e),ve(u,f),l=!1,lt(a)}}}function Ta(t){let e,r=t[51].name+"",n,i;return{c(){e=C("a"),n=ae(r),O(e,"href",i=t[51].save_as+"##"+t[7])},m(s,l){E(s,e,l),A(e,n)},p(s,l){l[0]&128&&i!==(i=s[51].save_as+"##"+s[7])&&O(e,"href",i)},d(s){s&&T(e)}}}function hp(t){let e,r,n;return{c(){e=C("button"),e.innerHTML=`<span style="font-size:150%">A</span> 
        <span style="font-size:75%">A</span>`,O(e,"class","navbar-button")},m(i,s){E(i,e,s),r||(n=Le(e,"click",t[31]),r=!0)},p:oe,d(i){i&&T(e),r=!1,n()}}}function Ea(t){let e,r,n,i,s,l,a,o,u,f,c;n=new He({props:{s:"A-Z"}});let d=t[15](t[4]?.articles)||[],h=[];for(let m=0;m<d.length;m+=1)h[m]=xa(ka(t,d,m));let p=m=>w(h[m],1,1,()=>{h[m]=null});return{c(){e=C("nav"),r=C("button"),H(n.$$.fragment),s=B(),l=C("div");for(let m=0;m<h.length;m+=1)h[m].c();a=B(),o=C("br"),O(r,"class","side-sort-button"),O(r,"style",i=t[1]?"":"text-decoration:line-through"),O(l,"class","menu-list"),O(e,"class","sidebar")},m(m,_){E(m,e,_),A(e,r),W(n,r,null),A(e,s),A(e,l);for(let b=0;b<h.length;b+=1)h[b].m(l,null);A(e,a),A(e,o),u=!0,f||(c=Le(r,"click",t[33]),f=!0)},p(m,_){if((!u||_[0]&2&&i!==(i=m[1]?"":"text-decoration:line-through"))&&O(r,"style",i),_[0]&32881){d=m[15](m[4]?.articles)||[];let b;for(b=0;b<d.length;b+=1){let y=ka(m,d,b);h[b]?(h[b].p(y,_),v(h[b],1)):(h[b]=xa(y),h[b].c(),v(h[b],1),h[b].m(l,null))}for(J(),b=d.length;b<h.length;b+=1)p(b);ee()}},i(m){if(!u){v(n.$$.fragment,m);for(let _=0;_<d.length;_+=1)v(h[_]);u=!0}},o(m){w(n.$$.fragment,m),h=h.filter(Boolean);for(let _=0;_<h.length;_+=1)w(h[_]);u=!1},d(m){m&&T(e),q(n),ve(h,m),f=!1,c()}}}function pp(t){let e,r,n,i,s,l,a;return r=new He({props:{s:t[48].title}}),{c(){e=C("a"),H(r.$$.fragment),n=B(),O(e,"class","side-link"),O(e,"href",i="##"+t[48].id)},m(o,u){E(o,e,u),W(r,e,null),A(e,n),s=!0,l||(a=Le(e,"click",t[35]),l=!0)},p(o,u){let f={};u[0]&32784&&(f.s=o[48].title),r.$set(f),(!s||u[0]&32784&&i!==(i="##"+o[48].id))&&O(e,"href",i)},i(o){s||(v(r.$$.fragment,o),s=!0)},o(o){w(r.$$.fragment,o),s=!1},d(o){o&&T(e),q(r),l=!1,a()}}}function mp(t){let e,r,n,i,s;return r=new He({props:{s:t[48].title}}),{c(){e=C("a"),H(r.$$.fragment),n=B(),O(e,"href",i="##"+t[48].id),O(e,"class","active-article-option side-link")},m(l,a){E(l,e,a),W(r,e,null),A(e,n),t[34](e),s=!0},p(l,a){let o={};a[0]&32784&&(o.s=l[48].title),r.$set(o),(!s||a[0]&32784&&i!==(i="##"+l[48].id))&&O(e,"href",i)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){w(r.$$.fragment,l),s=!1},d(l){l&&T(e),q(r),t[34](null)}}}function xa(t){let e,r,n,i,s=[mp,pp],l=[];function a(o,u){return o[0]&&o[0].id==o[48].id?0:1}return e=a(t,[-1,-1]),r=l[e]=s[e](t),{c(){r.c(),n=ge()},m(o,u){l[e].m(o,u),E(o,n,u),i=!0},p(o,u){let f=e;e=a(o,u),e===f?l[e].p(o,u):(J(),w(l[f],1,1,()=>{l[f]=null}),ee(),r=l[e],r?r.p(o,u):(r=l[e]=s[e](o),r.c()),v(r,1),r.m(n.parentNode,n))},i(o){i||(v(r),i=!0)},o(o){w(r),i=!1},d(o){l[e].d(o),o&&T(n)}}}function _p(t){let e,r,n,i,s,l,a,o,u,f;r=new He({props:{s:"Pedia sections"}});let c=$.sectionsOrder,d=[];for(let m=0;m<c.length;m+=1)d[m]=Oa(va(t,c,m));a=new He({props:{s:"Extra sections"}});let h=$.typeSectionsOrder,p=[];for(let m=0;m<h.length;m+=1)p[m]=Ia(ba(t,h,m));return{c(){e=C("h4"),H(r.$$.fragment),n=B(),i=C("p");for(let m=0;m<d.length;m+=1)d[m].c();s=B(),l=C("h4"),H(a.$$.fragment),o=B(),u=C("p");for(let m=0;m<p.length;m+=1)p[m].c()},m(m,_){E(m,e,_),W(r,e,null),E(m,n,_),E(m,i,_);for(let b=0;b<d.length;b+=1)d[b].m(i,null);E(m,s,_),E(m,l,_),W(a,l,null),E(m,o,_),E(m,u,_);for(let b=0;b<p.length;b+=1)p[b].m(u,null);f=!0},p(m,_){if(_&0){c=$.sectionsOrder;let b;for(b=0;b<c.length;b+=1){let y=va(m,c,b);d[b]?d[b].p(y,_):(d[b]=Oa(y),d[b].c(),d[b].m(i,null))}for(;b<d.length;b+=1)d[b].d(1);d.length=c.length}if(_&0){h=$.typeSectionsOrder;let b;for(b=0;b<h.length;b+=1){let y=ba(m,h,b);p[b]?p[b].p(y,_):(p[b]=Ia(y),p[b].c(),p[b].m(u,null))}for(;b<p.length;b+=1)p[b].d(1);p.length=h.length}},i(m){f||(v(r.$$.fragment,m),v(a.$$.fragment,m),f=!0)},o(m){w(r.$$.fragment,m),w(a.$$.fragment,m),f=!1},d(m){m&&T(e),q(r),m&&T(n),m&&T(i),ve(d,m),m&&T(s),m&&T(l),q(a),m&&T(o),m&&T(u),ve(p,m)}}}function gp(t){let e,r;return e=new fo({props:{article:t[0],query:t[3]}}),e.$on("prev",t[38]),e.$on("next",t[39]),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i[0]&1&&(s.article=n[0]),i[0]&8&&(s.query=n[3]),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function bp(t){let e,r,n,i,s,l,a,o,u,f,c=[wp,yp,kp,vp],d=[];function h(p,m){return p[2]&&p[2].length>0?0:p[3].length<2?1:p[8]?2:3}return a=h(t,[-1,-1]),o=d[a]=c[a](t),{c(){e=ae(`Searching "\r
      `),r=C("em"),n=ae(t[3]),i=ae(`\r
      ":\r
      `),s=C("br"),l=B(),o.c(),u=ge()},m(p,m){E(p,e,m),E(p,r,m),A(r,n),E(p,i,m),E(p,s,m),E(p,l,m),d[a].m(p,m),E(p,u,m),f=!0},p(p,m){(!f||m[0]&8)&&Oe(n,p[3]);let _=a;a=h(p,m),a===_?d[a].p(p,m):(J(),w(d[_],1,1,()=>{d[_]=null}),ee(),o=d[a],o?o.p(p,m):(o=d[a]=c[a](p),o.c()),v(o,1),o.m(u.parentNode,u))},i(p){f||(v(o),f=!0)},o(p){w(o),f=!1},d(p){p&&T(e),p&&T(r),p&&T(i),p&&T(s),p&&T(l),d[a].d(p),p&&T(u)}}}function Oa(t){let e,r=ut(t[46])+"",n,i,s=t[44].title+"",l,a;return{c(){e=new Ke(!1),n=B(),i=C("a"),l=ae(s),e.a=n,O(i,"href",a="##"+t[44].id)},m(o,u){e.m(r,o,u),E(o,n,u),E(o,i,u),A(i,l)},p:oe,d(o){o&&e.d(),o&&T(n),o&&T(i)}}}function Ia(t){let e,r=ut(t[46])+"",n,i,s=t[44].title+"",l,a;return{c(){e=new Ke(!1),n=B(),i=C("a"),l=ae(s),e.a=n,O(i,"href",a="##"+t[44].id)},m(o,u){e.m(r,o,u),E(o,n,u),E(o,i,u),A(i,l)},p:oe,d(o){o&&e.d(),o&&T(n),o&&T(i)}}}function vp(t){let e;return{c(){e=C("i"),e.textContent="Nothing found"},m(r,n){E(r,e,n)},p:oe,i:oe,o:oe,d(r){r&&T(e)}}}function kp(t){let e;return{c(){e=ae("...")},m(r,n){E(r,e,n)},p:oe,i:oe,o:oe,d(r){r&&T(e)}}}function yp(t){let e;return{c(){e=C("i"),e.textContent="Query too short"},m(r,n){E(r,e,n)},p:oe,i:oe,o:oe,d(r){r&&T(e)}}}function wp(t){let e,r;return e=new pt({props:{links:t[2].sort(t[37])}}),{c(){H(e.$$.fragment)},m(n,i){W(e,n,i),r=!0},p(n,i){let s={};i[0]&12&&(s.links=n[2].sort(n[37])),e.$set(s)},i(n){r||(v(e.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),r=!1},d(n){q(e,n)}}}function Sp(t){let e;return{c(){e=C("div"),e.innerHTML='<svg><g transform="translate(50 50)" id="g4" style="fill:#64ccbc;fill-opacity:1"><g id="g6" style="fill:#64ccbc;fill-opacity:1"><animateTransform attributeName="transform" type="rotate" values="0;360" keyTimes="0;1" dur="3s" repeatCount="indefinite"></animateTransform><path d="M37.43995192304605 -6.5 L47.43995192304605 -6.5 L47.43995192304605 6.5 L37.43995192304605 6.5 A38 38 0 0 1 35.67394948182593 13.090810836924174 L35.67394948182593 13.090810836924174 L44.33420351967032 18.090810836924174 L37.83420351967032 29.34914108612188 L29.17394948182593 24.34914108612188 A38 38 0 0 1 24.34914108612188 29.17394948182593 L24.34914108612188 29.17394948182593 L29.34914108612188 37.83420351967032 L18.090810836924184 44.33420351967032 L13.090810836924183 35.67394948182593 A38 38 0 0 1 6.5 37.43995192304605 L6.5 37.43995192304605 L6.500000000000001 47.43995192304605 L-6.499999999999995 47.43995192304606 L-6.499999999999996 37.43995192304606 A38 38 0 0 1 -13.09081083692417 35.67394948182593 L-13.09081083692417 35.67394948182593 L-18.09081083692417 44.33420351967032 L-29.34914108612187 37.834203519670325 L-24.349141086121872 29.173949481825936 A38 38 0 0 1 -29.17394948182592 24.34914108612189 L-29.17394948182592 24.34914108612189 L-37.83420351967031 29.349141086121893 L-44.33420351967031 18.0908108369242 L-35.67394948182592 13.090810836924193 A38 38 0 0 1 -37.43995192304605 6.5000000000000036 L-37.43995192304605 6.5000000000000036 L-47.43995192304605 6.500000000000004 L-47.43995192304606 -6.499999999999993 L-37.43995192304606 -6.499999999999994 A38 38 0 0 1 -35.67394948182593 -13.090810836924167 L-35.67394948182593 -13.090810836924167 L-44.33420351967032 -18.090810836924163 L-37.834203519670325 -29.34914108612187 L-29.173949481825936 -24.34914108612187 A38 38 0 0 1 -24.349141086121893 -29.17394948182592 L-24.349141086121893 -29.17394948182592 L-29.349141086121897 -37.834203519670304 L-18.0908108369242 -44.334203519670304 L-13.090810836924195 -35.67394948182592 A38 38 0 0 1 -6.500000000000005 -37.43995192304605 L-6.500000000000005 -37.43995192304605 L-6.500000000000007 -47.43995192304605 L6.49999999999999 -47.43995192304606 L6.499999999999992 -37.43995192304606 A38 38 0 0 1 13.090810836924149 -35.67394948182594 L13.090810836924149 -35.67394948182594 L18.090810836924142 -44.33420351967033 L29.349141086121847 -37.83420351967034 L24.349141086121854 -29.17394948182595 A38 38 0 0 1 29.17394948182592 -24.349141086121893 L29.17394948182592 -24.349141086121893 L37.834203519670304 -29.349141086121897 L44.334203519670304 -18.0908108369242 L35.67394948182592 -13.090810836924197 A38 38 0 0 1 37.43995192304605 -6.500000000000007 M0 -20A20 20 0 1 0 0 20 A20 20 0 1 0 0 -20" fill="#c5523f" id="path8" style="fill:#64ccbc;fill-opacity:1"></path></g></g></svg>',O(e,"class","centered")},m(r,n){E(r,e,n)},p:oe,i:oe,o:oe,d(r){r&&T(e)}}}function Ap(t){let e,r,n,i,s,l,a=!t[0]&&Aa(t),o={ctx:t,current:null,token:null,hasCatch:!1,pending:Sp,then:cp,catch:fp,blocks:[,,,]};return ei(s=t[18],o),{c(){a&&a.c(),e=C("meta"),r=C("link"),n=B(),i=ge(),o.block.c(),O(e,"name","keywords"),O(e,"content","OpenXCom"),O(r,"rel","icon"),O(r,"type","image/png"),O(r,"href",Nn)},m(u,f){a&&a.m(fn.head,null),A(fn.head,e),A(fn.head,r),E(u,n,f),E(u,i,f),o.block.m(u,o.anchor=f),o.mount=()=>i.parentNode,o.anchor=i,l=!0},p(u,f){t=u,t[0]?a&&(a.d(1),a=null):a||(a=Aa(t),a.c(),a.m(e.parentNode,e)),ti(o,t,f)},i(u){l||(v(o.block),l=!0)},o(u){for(let f=0;f<3;f+=1){let c=o.blocks[f];w(c)}l=!1},d(u){a&&a.d(u),T(e),T(r),u&&T(n),u&&T(i),o.block.d(u),o.token=null,o=null}}}var Fa=!1;function Ra(t,e){return t.toLowerCase().indexOf(e)!=-1}function Da(t){window.location.hash="##"+t}function $p(t,e,r){let n,i;Vr(t,wt,ce=>r(16,i=ce));let s=null,l=null,a="",o=null,u,f=!1,c="",d=null,h=!0,p=!1,m=!1,_=!1,b,y=!1,S="ontouchstart"in window;async function R(){let{ruls:ce,langs:g}=await zr();await $.load({ruls:ce,langs:g})}vn("main",{revealed:()=>wt});let M=R();async function F(){r(11,m=r(12,_=!1));let ce=decodeURI(document.location.hash);if(ce.substring(0,2)=="##"){if(r(7,c=ce.substring(2)),c=="MAIN"&&r(3,a=""),r(14,y=!1),c){let g=c.indexOf("::");g!=-1&&(r(3,a=c.substring(g+2)),r(7,c=c.substring(0,g))),c=="SEARCH"?(r(14,y=!0),a.length>=2?r(2,l=await $.search.findArticles(a)):r(2,l=0),r(0,s=null)):(r(2,l=null),(!s||s.id!=c)&&r(0,s=$.article(c))),console.log(c),console.log(s)}s&&s.sections&&(s.sections.includes(o)||r(4,o=s.sections[0])),u&&u.scrollIntoView({behavior:"auto",block:"center"})}}function L(ce){let g=$.findNextArticle(s,ce,o);g&&Da(g.id)}function V(ce){d&&clearTimeout(d),r(8,d=setTimeout(()=>{Da("SEARCH::"+ce.target.value),r(8,d=null)},ce.key=="Enter"?10:300))}window.onhashchange=F,M.then(F);let ue=!1;function D(ce=null){ce===null?r(11,m=!m):S||r(11,m=ce)}document.addEventListener("keydown",ce=>{let g=ce.key;g=="ArrowRight"&&L(1),g=="ArrowLeft"&&L(-1)}),window.addEventListener("mousemove",async ce=>{if(b){let g=ce.target;for(;g&&g.attributes&&!("tooltip"in g.attributes);)g=g.parentNode;if(g&&g.attributes&&g.attributes.tooltip){let Q=g.attributes.tooltip,X=ce.target.getBoundingClientRect();r(13,b.style.left=X.left+X.width/2+"px",b),r(13,b.style.top=X.top+"px",b);let I=Q.value;G(I in $.lang&&!ce.shiftKey?$.lang[I]:I.substring(4))}else G(null)}});function G(ce){r(13,b.innerHTML=ce,b);let g=b.classList;ce?g.add("visible"):g.remove("visible")}let k=ce=>D(),Z=ce=>D(!0),_e=ce=>D(!1),Y=ce=>{Ct(!0)},be=ce=>{Ct(!1)},U=ce=>si(),K=ce=>r(12,_=!_),N=ce=>!S&&r(12,_=!0),j=ce=>!S&&r(12,_=!1),me=ce=>r(10,p=!p);function de(){a=this.value,r(3,a)}let he=ce=>r(1,ue=!ue);function Be(ce){yt[ce?"unshift":"push"](()=>{u=ce,r(5,u)})}let je=()=>r(6,f=!0),Ie=ce=>{ce.button==0&&r(9,h=!h)},Re=(ce,g)=>Ra($.tr(ce),a)>Ra($.tr(g),a)?-1:1,Pe=ce=>L(-1),ze=ce=>L(1);function Ne(ce){yt[ce?"unshift":"push"](()=>{b=ce,r(13,b)})}return t.$$.update=()=>{if(t.$$.dirty[0]&1){e:s&&console.info(s)}if(t.$$.dirty[0]&2){e:r(15,n=ce=>ue?ce.slice().sort((g,Q)=>g.title>Q.title?1:-1):ce)}},[s,ue,l,a,o,u,f,c,d,h,p,m,_,b,y,n,i,S,M,L,V,D,k,Z,_e,Y,be,U,K,N,j,me,de,he,Be,je,Ie,Re,Pe,ze,Ne]}var Pr=class extends we{constructor(e){super(),Se(this,e,$p,Ap,ye,{},null,[-1,-1])}},Ma=Pr;function Cp(t){let e={"&amp;":"&","&lt;":"<","&gt;":">"};return t.replace(/&amp;|&quot;|&lt;|&gt;/g,r=>e[r])}var Na;function Tp(){let t=Cp(document.body.textContent);document.body.innerHTML="",document.body.style.display="block",new Nt,Na=new Ma({props:{source:t},target:document.body})}addEventListener("load",Tp);addEventListener("hashchange",t=>{location.hash.substring(0,8)!="##SEARCH"&&document.getElementById("search-string").blur()});var g0=Na,Ep=!1;function xp(){addEventListener("keydown",t=>{switch(console.log(t),t.code){case"KeyQ":if(!Ep)break;let e=document.getElementById("search-string");e&&e instanceof HTMLInputElement&&e!=document.activeElement&&(e.value="",setInterval(()=>e.focus(),1));break;case"ShiftLeft":case"ShiftRight":Ct(!0);break}}),addEventListener("keyup",t=>{switch(t.code){case"ShiftLeft":case"ShiftRight":Ct(!1);break}})}xp();})();
/*!

JSZip v3.10.0 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=bundle.js.map
